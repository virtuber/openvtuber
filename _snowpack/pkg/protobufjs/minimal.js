import{c as createCommonjsModule,a as commonjsGlobal}from"../common/_commonjsHelpers-8c19dec8.js";var aspromise=asPromise;function asPromise(r,t){for(var e=new Array(arguments.length-1),a=0,f=2,s=!0;f<arguments.length;)e[a++]=arguments[f++];return new Promise(function(h,i){e[a]=function(u){if(s)if(s=!1,u)i(u);else{for(var l=new Array(arguments.length-1),c=0;c<l.length;)l[c++]=arguments[c];h.apply(null,l)}};try{r.apply(t||null,e)}catch(o){s&&(s=!1,i(o))}})}var base64_1=createCommonjsModule(function(r,t){var e=t;e.length=function(i){var o=i.length;if(!o)return 0;for(var u=0;--o%4>1&&i.charAt(o)==="=";)++u;return Math.ceil(i.length*3)/4-u};for(var a=new Array(64),f=new Array(123),s=0;s<64;)f[a[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;e.encode=function(i,o,u){for(var l=null,c=[],d=0,m=0,p;o<u;){var g=i[o++];switch(m){case 0:c[d++]=a[g>>2],p=(g&3)<<4,m=1;break;case 1:c[d++]=a[p|g>>4],p=(g&15)<<2,m=2;break;case 2:c[d++]=a[p|g>>6],c[d++]=a[g&63],m=0;break}d>8191&&((l||(l=[])).push(String.fromCharCode.apply(String,c)),d=0)}return m&&(c[d++]=a[p],c[d++]=61,m===1&&(c[d++]=61)),l?(d&&l.push(String.fromCharCode.apply(String,c.slice(0,d))),l.join("")):String.fromCharCode.apply(String,c.slice(0,d))};var n="invalid encoding";e.decode=function(i,o,u){for(var l=u,c=0,d,m=0;m<i.length;){var p=i.charCodeAt(m++);if(p===61&&c>1)break;if((p=f[p])===void 0)throw Error(n);switch(c){case 0:d=p,c=1;break;case 1:o[u++]=d<<2|(p&48)>>4,d=p,c=2;break;case 2:o[u++]=(d&15)<<4|(p&60)>>2,d=p,c=3;break;case 3:o[u++]=(d&3)<<6|p,c=0;break}}if(c===1)throw Error(n);return u-l},e.test=function(i){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(i)}}),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(t,e,a){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:a||this}),this},EventEmitter.prototype.off=function(t,e){if(t===void 0)this._listeners={};else if(e===void 0)this._listeners[t]=[];else for(var a=this._listeners[t],f=0;f<a.length;)a[f].fn===e?a.splice(f,1):++f;return this},EventEmitter.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var a=[],f=1;f<arguments.length;)a.push(arguments[f++]);for(f=0;f<e.length;)e[f].fn.apply(e[f++].ctx,a)}return this};var float_1=factory(factory);function factory(r){return typeof Float32Array!="undefined"?function(){var t=new Float32Array([-0]),e=new Uint8Array(t.buffer),a=e[3]===128;function f(i,o,u){t[0]=i,o[u]=e[0],o[u+1]=e[1],o[u+2]=e[2],o[u+3]=e[3]}function s(i,o,u){t[0]=i,o[u]=e[3],o[u+1]=e[2],o[u+2]=e[1],o[u+3]=e[0]}r.writeFloatLE=a?f:s,r.writeFloatBE=a?s:f;function n(i,o){return e[0]=i[o],e[1]=i[o+1],e[2]=i[o+2],e[3]=i[o+3],t[0]}function h(i,o){return e[3]=i[o],e[2]=i[o+1],e[1]=i[o+2],e[0]=i[o+3],t[0]}r.readFloatLE=a?n:h,r.readFloatBE=a?h:n}():function(){function t(a,f,s,n){var h=f<0?1:0;if(h&&(f=-f),f===0)a(1/f>0?0:2147483648,s,n);else if(isNaN(f))a(2143289344,s,n);else if(f>34028234663852886e22)a((h<<31|2139095040)>>>0,s,n);else if(f<11754943508222875e-54)a((h<<31|Math.round(f/1401298464324817e-60))>>>0,s,n);else{var i=Math.floor(Math.log(f)/Math.LN2),o=Math.round(f*Math.pow(2,-i)*8388608)&8388607;a((h<<31|i+127<<23|o)>>>0,s,n)}}r.writeFloatLE=t.bind(null,writeUintLE),r.writeFloatBE=t.bind(null,writeUintBE);function e(a,f,s){var n=a(f,s),h=(n>>31)*2+1,i=n>>>23&255,o=n&8388607;return i===255?o?NaN:h*Infinity:i===0?h*1401298464324817e-60*o:h*Math.pow(2,i-150)*(o+8388608)}r.readFloatLE=e.bind(null,readUintLE),r.readFloatBE=e.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var t=new Float64Array([-0]),e=new Uint8Array(t.buffer),a=e[7]===128;function f(i,o,u){t[0]=i,o[u]=e[0],o[u+1]=e[1],o[u+2]=e[2],o[u+3]=e[3],o[u+4]=e[4],o[u+5]=e[5],o[u+6]=e[6],o[u+7]=e[7]}function s(i,o,u){t[0]=i,o[u]=e[7],o[u+1]=e[6],o[u+2]=e[5],o[u+3]=e[4],o[u+4]=e[3],o[u+5]=e[2],o[u+6]=e[1],o[u+7]=e[0]}r.writeDoubleLE=a?f:s,r.writeDoubleBE=a?s:f;function n(i,o){return e[0]=i[o],e[1]=i[o+1],e[2]=i[o+2],e[3]=i[o+3],e[4]=i[o+4],e[5]=i[o+5],e[6]=i[o+6],e[7]=i[o+7],t[0]}function h(i,o){return e[7]=i[o],e[6]=i[o+1],e[5]=i[o+2],e[4]=i[o+3],e[3]=i[o+4],e[2]=i[o+5],e[1]=i[o+6],e[0]=i[o+7],t[0]}r.readDoubleLE=a?n:h,r.readDoubleBE=a?h:n}():function(){function t(a,f,s,n,h,i){var o=n<0?1:0;if(o&&(n=-n),n===0)a(0,h,i+f),a(1/n>0?0:2147483648,h,i+s);else if(isNaN(n))a(0,h,i+f),a(2146959360,h,i+s);else if(n>17976931348623157e292)a(0,h,i+f),a((o<<31|2146435072)>>>0,h,i+s);else{var u;if(n<22250738585072014e-324)u=n/5e-324,a(u>>>0,h,i+f),a((o<<31|u/4294967296)>>>0,h,i+s);else{var l=Math.floor(Math.log(n)/Math.LN2);l===1024&&(l=1023),u=n*Math.pow(2,-l),a(u*4503599627370496>>>0,h,i+f),a((o<<31|l+1023<<20|u*1048576&1048575)>>>0,h,i+s)}}}r.writeDoubleLE=t.bind(null,writeUintLE,0,4),r.writeDoubleBE=t.bind(null,writeUintBE,4,0);function e(a,f,s,n,h){var i=a(n,h+f),o=a(n,h+s),u=(o>>31)*2+1,l=o>>>20&2047,c=4294967296*(o&1048575)+i;return l===2047?c?NaN:u*Infinity:l===0?u*5e-324*c:u*Math.pow(2,l-1075)*(c+4503599627370496)}r.readDoubleLE=e.bind(null,readUintLE,0,4),r.readDoubleBE=e.bind(null,readUintBE,4,0)}(),r}function writeUintLE(r,t,e){t[e]=r&255,t[e+1]=r>>>8&255,t[e+2]=r>>>16&255,t[e+3]=r>>>24}function writeUintBE(r,t,e){t[e]=r>>>24,t[e+1]=r>>>16&255,t[e+2]=r>>>8&255,t[e+3]=r&255}function readUintLE(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16|r[t+3]<<24)>>>0}function readUintBE(r,t){return(r[t]<<24|r[t+1]<<16|r[t+2]<<8|r[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}var utf8_1=createCommonjsModule(function(r,t){var e=t;e.length=function(f){for(var s=0,n=0,h=0;h<f.length;++h)n=f.charCodeAt(h),n<128?s+=1:n<2048?s+=2:(n&64512)==55296&&(f.charCodeAt(h+1)&64512)==56320?(++h,s+=4):s+=3;return s},e.read=function(f,s,n){var h=n-s;if(h<1)return"";for(var i=null,o=[],u=0,l;s<n;)l=f[s++],l<128?o[u++]=l:l>191&&l<224?o[u++]=(l&31)<<6|f[s++]&63:l>239&&l<365?(l=((l&7)<<18|(f[s++]&63)<<12|(f[s++]&63)<<6|f[s++]&63)-65536,o[u++]=55296+(l>>10),o[u++]=56320+(l&1023)):o[u++]=(l&15)<<12|(f[s++]&63)<<6|f[s++]&63,u>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),u=0);return i?(u&&i.push(String.fromCharCode.apply(String,o.slice(0,u))),i.join("")):String.fromCharCode.apply(String,o.slice(0,u))},e.write=function(f,s,n){for(var h=n,i,o,u=0;u<f.length;++u)i=f.charCodeAt(u),i<128?s[n++]=i:i<2048?(s[n++]=i>>6|192,s[n++]=i&63|128):(i&64512)==55296&&((o=f.charCodeAt(u+1))&64512)==56320?(i=65536+((i&1023)<<10)+(o&1023),++u,s[n++]=i>>18|240,s[n++]=i>>12&63|128,s[n++]=i>>6&63|128,s[n++]=i&63|128):(s[n++]=i>>12|224,s[n++]=i>>6&63|128,s[n++]=i&63|128);return n-h}}),pool_1=pool;function pool(r,t,e){var a=e||8192,f=a>>>1,s=null,n=a;return function(i){if(i<1||i>f)return r(i);n+i>a&&(s=r(a),n=0);var o=t.call(s,n,n+=i);return n&7&&(n=(n|7)+1),o}}var longbits=LongBits$2;function LongBits$2(r,t){this.lo=r>>>0,this.hi=t>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function(t){if(t===0)return zero;var e=t<0;e&&(t=-t);var a=t>>>0,f=(t-a)/4294967296>>>0;return e&&(f=~f>>>0,a=~a>>>0,++a>4294967295&&(a=0,++f>4294967295&&(f=0))),new LongBits$2(a,f)},LongBits$2.from=function(t){if(typeof t=="number")return LongBits$2.fromNumber(t);if(minimal$1.isString(t))if(minimal$1.Long)t=minimal$1.Long.fromString(t);else return LongBits$2.fromNumber(parseInt(t,10));return t.low||t.high?new LongBits$2(t.low>>>0,t.high>>>0):zero},LongBits$2.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=~this.lo+1>>>0,a=~this.hi>>>0;return e||(a=a+1>>>0),-(e+a*4294967296)}return this.lo+this.hi*4294967296},LongBits$2.prototype.toLong=function(t){return minimal$1.Long?new minimal$1.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function(t){return t===zeroHash?zero:new LongBits$2((charCodeAt.call(t,0)|charCodeAt.call(t,1)<<8|charCodeAt.call(t,2)<<16|charCodeAt.call(t,3)<<24)>>>0,(charCodeAt.call(t,4)|charCodeAt.call(t,5)<<8|charCodeAt.call(t,6)<<16|charCodeAt.call(t,7)<<24)>>>0)},LongBits$2.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits$2.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},LongBits$2.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},LongBits$2.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,a=this.hi>>>24;return a===0?e===0?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:a<128?9:10};var minimal$1=createCommonjsModule(function(r,t){var e=t;e.asPromise=aspromise,e.base64=base64_1,e.EventEmitter=eventemitter,e.float=float_1,e.inquire=inquire_1,e.utf8=utf8_1,e.pool=pool_1,e.LongBits=longbits,e.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n},e.isString=function(n){return typeof n=="string"||n instanceof String},e.isObject=function(n){return n&&typeof n=="object"},e.isset=e.isSet=function(n,h){var i=n[h];return i!=null&&n.hasOwnProperty(h)?typeof i!="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0:!1},e.Buffer=function(){try{var s=e.inquire("buffer").Buffer;return s.prototype.utf8Write?s:null}catch(n){return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(n){return typeof n=="number"?e.Buffer?e._Buffer_allocUnsafe(n):new e.Array(n):e.Buffer?e._Buffer_from(n):typeof Uint8Array=="undefined"?n:new Uint8Array(n)},e.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(n){return n?e.LongBits.from(n).toHash():e.LongBits.zeroHash},e.longFromHash=function(n,h){var i=e.LongBits.fromHash(n);return e.Long?e.Long.fromBits(i.lo,i.hi,h):i.toNumber(Boolean(h))};function a(s,n,h){for(var i=Object.keys(n),o=0;o<i.length;++o)(s[i[o]]===void 0||!h)&&(s[i[o]]=n[i[o]]);return s}e.merge=a,e.lcFirst=function(n){return n.charAt(0).toLowerCase()+n.substring(1)};function f(s){function n(h,i){if(!(this instanceof n))return new n(h,i);Object.defineProperty(this,"message",{get:function(){return h}}),Error.captureStackTrace?Error.captureStackTrace(this,n):Object.defineProperty(this,"stack",{value:new Error().stack||""}),i&&a(this,i)}return(n.prototype=Object.create(Error.prototype)).constructor=n,Object.defineProperty(n.prototype,"name",{get:function(){return s}}),n.prototype.toString=function(){return this.name+": "+this.message},n}e.newError=f,e.ProtocolError=f("ProtocolError"),e.oneOfGetter=function(n){for(var h={},i=0;i<n.length;++i)h[n[i]]=1;return function(){for(var o=Object.keys(this),u=o.length-1;u>-1;--u)if(h[o[u]]===1&&this[o[u]]!==void 0&&this[o[u]]!==null)return o[u]}},e.oneOfSetter=function(n){return function(h){for(var i=0;i<n.length;++i)n[i]!==h&&delete this[n[i]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var s=e.Buffer;if(!s){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=s.from!==Uint8Array.from&&s.from||function(h,i){return new s(h,i)},e._Buffer_allocUnsafe=s.allocUnsafe||function(h){return new s(h)}}}),writer=Writer,BufferWriter$1,LongBits$1=minimal$1.LongBits,base64=minimal$1.base64,utf8$1=minimal$1.utf8;function Op(r,t,e){this.fn=r,this.len=t,this.next=void 0,this.val=e}function noop(){}function State(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function(){return minimal$1.Buffer?function(){return(Writer.create=function(){return new BufferWriter$1})()}:function(){return new Writer}};Writer.create=create$1(),Writer.alloc=function(t){return new minimal$1.Array(t)},minimal$1.Array!==Array&&(Writer.alloc=minimal$1.pool(Writer.alloc,minimal$1.Array.prototype.subarray)),Writer.prototype._push=function(t,e,a){return this.tail=this.tail.next=new Op(t,e,a),this.len+=e,this};function writeByte(r,t,e){t[e]=r&255}function writeVarint32(r,t,e){for(;r>127;)t[e++]=r&127|128,r>>>=7;t[e]=r}function VarintOp(r,t){this.len=r,this.next=void 0,this.val=t}VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new VarintOp((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},Writer.prototype.int32=function(t){return t<0?this._push(writeVarint64,10,LongBits$1.fromNumber(t)):this.uint32(t)},Writer.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function writeVarint64(r,t,e){for(;r.hi;)t[e++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)t[e++]=r.lo&127|128,r.lo=r.lo>>>7;t[e++]=r.lo}Writer.prototype.uint64=function(t){var e=LongBits$1.from(t);return this._push(writeVarint64,e.length(),e)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(t){var e=LongBits$1.from(t).zzEncode();return this._push(writeVarint64,e.length(),e)},Writer.prototype.bool=function(t){return this._push(writeByte,1,t?1:0)};function writeFixed32(r,t,e){t[e]=r&255,t[e+1]=r>>>8&255,t[e+2]=r>>>16&255,t[e+3]=r>>>24}Writer.prototype.fixed32=function(t){return this._push(writeFixed32,4,t>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(t){var e=LongBits$1.from(t);return this._push(writeFixed32,4,e.lo)._push(writeFixed32,4,e.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(t){return this._push(minimal$1.float.writeFloatLE,4,t)},Writer.prototype.double=function(t){return this._push(minimal$1.float.writeDoubleLE,8,t)};var writeBytes=minimal$1.Array.prototype.set?function(t,e,a){e.set(t,a)}:function(t,e,a){for(var f=0;f<t.length;++f)e[a+f]=t[f]};Writer.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(writeByte,1,0);if(minimal$1.isString(t)){var a=Writer.alloc(e=base64.length(t));base64.decode(t,a,0),t=a}return this.uint32(e)._push(writeBytes,e,t)},Writer.prototype.string=function(t){var e=utf8$1.length(t);return e?this.uint32(e)._push(utf8$1.write,e,t):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var t=this.head,e=this.tail,a=this.len;return this.reset().uint32(a),a&&(this.tail.next=t.next,this.tail=e,this.len+=a),this},Writer.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),a=0;t;)t.fn(t.val,e,a),a+=t.len,t=t.next;return e},Writer._configure=function(r){BufferWriter$1=r,Writer.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter;(BufferWriter.prototype=Object.create(writer.prototype)).constructor=BufferWriter;function BufferWriter(){writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=minimal$1._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=minimal$1.Buffer&&minimal$1.Buffer.prototype instanceof Uint8Array&&minimal$1.Buffer.prototype.set.name==="set"?function(t,e,a){e.set(t,a)}:function(t,e,a){if(t.copy)t.copy(e,a,0,t.length);else for(var f=0;f<t.length;)e[a++]=t[f++]}},BufferWriter.prototype.bytes=function(t){minimal$1.isString(t)&&(t=minimal$1._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(BufferWriter.writeBytesBuffer,e,t),this};function writeStringBuffer(r,t,e){r.length<40?minimal$1.utf8.write(r,t,e):t.utf8Write?t.utf8Write(r,e):t.write(r,e)}BufferWriter.prototype.string=function(t){var e=minimal$1.Buffer.byteLength(t);return this.uint32(e),e&&this._push(writeStringBuffer,e,t),this},BufferWriter._configure();var reader=Reader,BufferReader$1,LongBits=minimal$1.LongBits,utf8=minimal$1.utf8;function indexOutOfRange(r,t){return RangeError("index out of range: "+r.pos+" + "+(t||1)+" > "+r.len)}function Reader(r){this.buf=r,this.pos=0,this.len=r.length}var create_array=typeof Uint8Array!="undefined"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new Reader(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new Reader(t);throw Error("illegal buffer")},create=function(){return minimal$1.Buffer?function(e){return(Reader.create=function(f){return minimal$1.Buffer.isBuffer(f)?new BufferReader$1(f):create_array(f)})(e)}:create_array};Reader.create=create(),Reader.prototype._slice=minimal$1.Array.prototype.subarray||minimal$1.Array.prototype.slice,Reader.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return t}}(),Reader.prototype.int32=function(){return this.uint32()|0},Reader.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function readLongVarint(){var r=new LongBits(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,r}if(this.len-this.pos>4){for(;t<5;++t)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}Reader.prototype.bool=function(){return this.uint32()!==0};function readFixed32_end(r,t){return(r[t-4]|r[t-3]<<8|r[t-2]<<16|r[t-1]<<24)>>>0}Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var t=minimal$1.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var t=minimal$1.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},Reader.prototype.bytes=function(){var t=this.uint32(),e=this.pos,a=this.pos+t;if(a>this.len)throw indexOutOfRange(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,a):e===a?new this.buf.constructor(0):this._slice.call(this.buf,e,a)},Reader.prototype.string=function(){var t=this.bytes();return utf8.read(t,0,t.length)},Reader.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw indexOutOfRange(this,t);this.pos+=t}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this},Reader.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!=4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this},Reader._configure=function(r){BufferReader$1=r,Reader.create=create(),BufferReader$1._configure();var t=minimal$1.Long?"toLong":"toNumber";minimal$1.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader;(BufferReader.prototype=Object.create(reader.prototype)).constructor=BufferReader;function BufferReader(r){reader.call(this,r)}BufferReader._configure=function(){minimal$1.Buffer&&(BufferReader.prototype._slice=minimal$1.Buffer.prototype.slice)},BufferReader.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},BufferReader._configure();var service=Service;(Service.prototype=Object.create(minimal$1.EventEmitter.prototype)).constructor=Service;function Service(r,t,e){if(typeof r!="function")throw TypeError("rpcImpl must be a function");minimal$1.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(e)}Service.prototype.rpcCall=function r(t,e,a,f,s){if(!f)throw TypeError("request must be specified");var n=this;if(!s)return minimal$1.asPromise(r,n,t,e,a,f);if(!n.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return n.rpcImpl(t,e[n.requestDelimited?"encodeDelimited":"encode"](f).finish(),function(i,o){if(i)return n.emit("error",i,t),s(i);if(o===null){n.end(!0);return}if(!(o instanceof a))try{o=a[n.responseDelimited?"decodeDelimited":"decode"](o)}catch(u){return n.emit("error",u,t),s(u)}return n.emit("data",o,t),s(null,o)})}catch(h){n.emit("error",h,t),setTimeout(function(){s(h)},0);return}},Service.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule(function(r,t){var e=t;e.Service=service}),roots={},indexMinimal=createCommonjsModule(function(r,t){var e=t;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=minimal$1,e.rpc=rpc_1,e.roots=roots,e.configure=a;function a(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}a()}),minimal=indexMinimal;export default minimal;
