const p$1=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function a(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerpolicy&&(f.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?f.credentials="include":c.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(c){if(c.ep)return;c.ep=!0;const f=a(c);fetch(c.href,f)}};p$1();var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(o){if(o.__esModule)return o;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(o).forEach(function(a){var s=Object.getOwnPropertyDescriptor(o,a);Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:function(){return o[a]}})}),e}var react={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function shouldUseNative(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var e={},a=0;a<10;a++)e["_"+String.fromCharCode(a)]=a;var s=Object.getOwnPropertyNames(e).map(function(f){return e[f]});if(s.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(f){c[f]=f}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(o,e){for(var a,s=toObject(o),c,f=1;f<arguments.length;f++){a=Object(arguments[f]);for(var d in a)hasOwnProperty.call(a,d)&&(s[d]=a[d]);if(getOwnPropertySymbols){c=getOwnPropertySymbols(a);for(var h=0;h<c.length;h++)propIsEnumerable.call(a,c[h])&&(s[c[h]]=a[c[h]])}}return s};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=objectAssign,n=60103,p=60106;react_production_min.Fragment=60107;react_production_min.StrictMode=60108;react_production_min.Profiler=60114;var q=60109,r$1=60110,t=60112;react_production_min.Suspense=60113;var u=60115,v=60116;if(typeof Symbol=="function"&&Symbol.for){var w=Symbol.for;n=w("react.element"),p=w("react.portal"),react_production_min.Fragment=w("react.fragment"),react_production_min.StrictMode=w("react.strict_mode"),react_production_min.Profiler=w("react.profiler"),q=w("react.provider"),r$1=w("react.context"),t=w("react.forward_ref"),react_production_min.Suspense=w("react.suspense"),u=w("react.memo"),v=w("react.lazy")}var x=typeof Symbol=="function"&&Symbol.iterator;function y$1(o){return o===null||typeof o!="object"?null:(o=x&&o[x]||o["@@iterator"],typeof o=="function"?o:null)}function z(o){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+o,a=1;a<arguments.length;a++)e+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+o+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B$1={};function C(o,e,a){this.props=o,this.context=e,this.refs=B$1,this.updater=a||A}C.prototype.isReactComponent={};C.prototype.setState=function(o,e){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error(z(85));this.updater.enqueueSetState(this,o,e,"setState")};C.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function D$1(){}D$1.prototype=C.prototype;function E$1(o,e,a){this.props=o,this.context=e,this.refs=B$1,this.updater=a||A}var F$1=E$1.prototype=new D$1;F$1.constructor=E$1;l(F$1,C.prototype);F$1.isPureReactComponent=!0;var G$1={current:null},H$1=Object.prototype.hasOwnProperty,I$1={key:!0,ref:!0,__self:!0,__source:!0};function J(o,e,a){var s,c={},f=null,d=null;if(e!=null)for(s in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(f=""+e.key),e)H$1.call(e,s)&&!I$1.hasOwnProperty(s)&&(c[s]=e[s]);var h=arguments.length-2;if(h===1)c.children=a;else if(1<h){for(var g=Array(h),b=0;b<h;b++)g[b]=arguments[b+2];c.children=g}if(o&&o.defaultProps)for(s in h=o.defaultProps,h)c[s]===void 0&&(c[s]=h[s]);return{$$typeof:n,type:o,key:f,ref:d,props:c,_owner:G$1.current}}function K(o,e){return{$$typeof:n,type:o.type,key:e,ref:o.ref,props:o.props,_owner:o._owner}}function L(o){return typeof o=="object"&&o!==null&&o.$$typeof===n}function escape$2(o){var e={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(a){return e[a]})}var M$1=/\/+/g;function N$1(o,e){return typeof o=="object"&&o!==null&&o.key!=null?escape$2(""+o.key):e.toString(36)}function O$1(o,e,a,s,c){var f=typeof o;(f==="undefined"||f==="boolean")&&(o=null);var d=!1;if(o===null)d=!0;else switch(f){case"string":case"number":d=!0;break;case"object":switch(o.$$typeof){case n:case p:d=!0}}if(d)return d=o,c=c(d),o=s===""?"."+N$1(d,0):s,Array.isArray(c)?(a="",o!=null&&(a=o.replace(M$1,"$&/")+"/"),O$1(c,e,a,"",function(b){return b})):c!=null&&(L(c)&&(c=K(c,a+(!c.key||d&&d.key===c.key?"":(""+c.key).replace(M$1,"$&/")+"/")+o)),e.push(c)),1;if(d=0,s=s===""?".":s+":",Array.isArray(o))for(var h=0;h<o.length;h++){f=o[h];var g=s+N$1(f,h);d+=O$1(f,e,a,g,c)}else if(g=y$1(o),typeof g=="function")for(o=g.call(o),h=0;!(f=o.next()).done;)f=f.value,g=s+N$1(f,h++),d+=O$1(f,e,a,g,c);else if(f==="object")throw e=""+o,Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":e));return d}function P$1(o,e,a){if(o==null)return o;var s=[],c=0;return O$1(o,s,"","",function(f){return e.call(a,f,c++)}),s}function Q(o){if(o._status===-1){var e=o._result;e=e(),o._status=0,o._result=e,e.then(function(a){o._status===0&&(a=a.default,o._status=1,o._result=a)},function(a){o._status===0&&(o._status=2,o._result=a)})}if(o._status===1)return o._result;throw o._result}var R$1={current:null};function S$1(){var o=R$1.current;if(o===null)throw Error(z(321));return o}var T$1={ReactCurrentDispatcher:R$1,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G$1,IsSomeRendererActing:{current:!1},assign:l};react_production_min.Children={map:P$1,forEach:function(o,e,a){P$1(o,function(){e.apply(this,arguments)},a)},count:function(o){var e=0;return P$1(o,function(){e++}),e},toArray:function(o){return P$1(o,function(e){return e})||[]},only:function(o){if(!L(o))throw Error(z(143));return o}};react_production_min.Component=C;react_production_min.PureComponent=E$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T$1;react_production_min.cloneElement=function(o,e,a){if(o==null)throw Error(z(267,o));var s=l({},o.props),c=o.key,f=o.ref,d=o._owner;if(e!=null){if(e.ref!==void 0&&(f=e.ref,d=G$1.current),e.key!==void 0&&(c=""+e.key),o.type&&o.type.defaultProps)var h=o.type.defaultProps;for(g in e)H$1.call(e,g)&&!I$1.hasOwnProperty(g)&&(s[g]=e[g]===void 0&&h!==void 0?h[g]:e[g])}var g=arguments.length-2;if(g===1)s.children=a;else if(1<g){h=Array(g);for(var b=0;b<g;b++)h[b]=arguments[b+2];s.children=h}return{$$typeof:n,type:o.type,key:c,ref:f,props:s,_owner:d}};react_production_min.createContext=function(o,e){return e===void 0&&(e=null),o={$$typeof:r$1,_calculateChangedBits:e,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null},o.Provider={$$typeof:q,_context:o},o.Consumer=o};react_production_min.createElement=J;react_production_min.createFactory=function(o){var e=J.bind(null,o);return e.type=o,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(o){return{$$typeof:t,render:o}};react_production_min.isValidElement=L;react_production_min.lazy=function(o){return{$$typeof:v,_payload:{_status:-1,_result:o},_init:Q}};react_production_min.memo=function(o,e){return{$$typeof:u,type:o,compare:e===void 0?null:e}};react_production_min.useCallback=function(o,e){return S$1().useCallback(o,e)};react_production_min.useContext=function(o,e){return S$1().useContext(o,e)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(o,e){return S$1().useEffect(o,e)};react_production_min.useImperativeHandle=function(o,e,a){return S$1().useImperativeHandle(o,e,a)};react_production_min.useLayoutEffect=function(o,e){return S$1().useLayoutEffect(o,e)};react_production_min.useMemo=function(o,e){return S$1().useMemo(o,e)};react_production_min.useReducer=function(o,e,a){return S$1().useReducer(o,e,a)};react_production_min.useRef=function(o){return S$1().useRef(o)};react_production_min.useState=function(o){return S$1().useState(o)};react_production_min.version="17.0.2";react.exports=react_production_min;var React=react.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){var e,a,s,c;if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;o.unstable_now=function(){return f.now()}}else{var d=Date,h=d.now();o.unstable_now=function(){return d.now()-h}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var g=null,b=null,tt=function(){if(g!==null)try{var Gt=o.unstable_now();g(!0,Gt),g=null}catch(qt){throw setTimeout(tt,0),qt}};e=function(Gt){g!==null?setTimeout(e,0,Gt):(g=Gt,setTimeout(tt,0))},a=function(Gt,qt){b=setTimeout(Gt,qt)},s=function(){clearTimeout(b)},o.unstable_shouldYield=function(){return!1},c=o.unstable_forceFrameRate=function(){}}else{var j=window.setTimeout,_e=window.clearTimeout;if(typeof console!="undefined"){var nt=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof nt!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var rt=!1,at=null,it=-1,$=5,et=0;o.unstable_shouldYield=function(){return o.unstable_now()>=et},c=function(){},o.unstable_forceFrameRate=function(Gt){0>Gt||125<Gt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<Gt?Math.floor(1e3/Gt):5};var st=new MessageChannel,lt=st.port2;st.port1.onmessage=function(){if(at!==null){var Gt=o.unstable_now();et=Gt+$;try{at(!0,Gt)?lt.postMessage(null):(rt=!1,at=null)}catch(qt){throw lt.postMessage(null),qt}}else rt=!1},e=function(Gt){at=Gt,rt||(rt=!0,lt.postMessage(null))},a=function(Gt,qt){it=j(function(){Gt(o.unstable_now())},qt)},s=function(){_e(it),it=-1}}function ct(Gt,qt){var sn=Gt.length;Gt.push(qt);e:for(;;){var yn=sn-1>>>1,Yt=Gt[yn];if(Yt!==void 0&&0<pt(Yt,qt))Gt[yn]=qt,Gt[sn]=Yt,sn=yn;else break e}}function ut(Gt){return Gt=Gt[0],Gt===void 0?null:Gt}function ht(Gt){var qt=Gt[0];if(qt!==void 0){var sn=Gt.pop();if(sn!==qt){Gt[0]=sn;e:for(var yn=0,Yt=Gt.length;yn<Yt;){var _t=2*(yn+1)-1,yt=Gt[_t],At=_t+1,wt=Gt[At];if(yt!==void 0&&0>pt(yt,sn))wt!==void 0&&0>pt(wt,yt)?(Gt[yn]=wt,Gt[At]=sn,yn=At):(Gt[yn]=yt,Gt[_t]=sn,yn=_t);else if(wt!==void 0&&0>pt(wt,sn))Gt[yn]=wt,Gt[At]=sn,yn=At;else break e}}return qt}return null}function pt(Gt,qt){var sn=Gt.sortIndex-qt.sortIndex;return sn!==0?sn:Gt.id-qt.id}var mt=[],bt=[],St=1,Ft=null,It=3,Ct=!1,Pt=!1,Nt=!1;function zt(Gt){for(var qt=ut(bt);qt!==null;){if(qt.callback===null)ht(bt);else if(qt.startTime<=Gt)ht(bt),qt.sortIndex=qt.expirationTime,ct(mt,qt);else break;qt=ut(bt)}}function Xt(Gt){if(Nt=!1,zt(Gt),!Pt)if(ut(mt)!==null)Pt=!0,e(en);else{var qt=ut(bt);qt!==null&&a(Xt,qt.startTime-Gt)}}function en(Gt,qt){Pt=!1,Nt&&(Nt=!1,s()),Ct=!0;var sn=It;try{for(zt(qt),Ft=ut(mt);Ft!==null&&(!(Ft.expirationTime>qt)||Gt&&!o.unstable_shouldYield());){var yn=Ft.callback;if(typeof yn=="function"){Ft.callback=null,It=Ft.priorityLevel;var Yt=yn(Ft.expirationTime<=qt);qt=o.unstable_now(),typeof Yt=="function"?Ft.callback=Yt:Ft===ut(mt)&&ht(mt),zt(qt)}else ht(mt);Ft=ut(mt)}if(Ft!==null)var _t=!0;else{var yt=ut(bt);yt!==null&&a(Xt,yt.startTime-qt),_t=!1}return _t}finally{Ft=null,It=sn,Ct=!1}}var rn=c;o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(Gt){Gt.callback=null},o.unstable_continueExecution=function(){Pt||Ct||(Pt=!0,e(en))},o.unstable_getCurrentPriorityLevel=function(){return It},o.unstable_getFirstCallbackNode=function(){return ut(mt)},o.unstable_next=function(Gt){switch(It){case 1:case 2:case 3:var qt=3;break;default:qt=It}var sn=It;It=qt;try{return Gt()}finally{It=sn}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=rn,o.unstable_runWithPriority=function(Gt,qt){switch(Gt){case 1:case 2:case 3:case 4:case 5:break;default:Gt=3}var sn=It;It=Gt;try{return qt()}finally{It=sn}},o.unstable_scheduleCallback=function(Gt,qt,sn){var yn=o.unstable_now();switch(typeof sn=="object"&&sn!==null?(sn=sn.delay,sn=typeof sn=="number"&&0<sn?yn+sn:yn):sn=yn,Gt){case 1:var Yt=-1;break;case 2:Yt=250;break;case 5:Yt=1073741823;break;case 4:Yt=1e4;break;default:Yt=5e3}return Yt=sn+Yt,Gt={id:St++,callback:qt,priorityLevel:Gt,startTime:sn,expirationTime:Yt,sortIndex:-1},sn>yn?(Gt.sortIndex=sn,ct(bt,Gt),ut(mt)===null&&Gt===ut(bt)&&(Nt?s():Nt=!0,a(Xt,sn-yn))):(Gt.sortIndex=Yt,ct(mt,Gt),Pt||Ct||(Pt=!0,e(en))),Gt},o.unstable_wrapCallback=function(Gt){var qt=It;return function(){var sn=It;It=qt;try{return Gt.apply(this,arguments)}finally{It=sn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=react.exports,m=objectAssign,r=scheduler.exports;function y(o){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+o,a=1;a<arguments.length;a++)e+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+o+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(y(227));var ba=new Set,ca={};function da(o,e){ea(o,e),ea(o+"Capture",e)}function ea(o,e){for(ca[o]=e,o=0;o<e.length;o++)ba.add(e[o])}var fa=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ha=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ia=Object.prototype.hasOwnProperty,ja={},ka={};function la(o){return ia.call(ka,o)?!0:ia.call(ja,o)?!1:ha.test(o)?ka[o]=!0:(ja[o]=!0,!1)}function ma(o,e,a,s){if(a!==null&&a.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:a!==null?!a.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function na(o,e,a,s){if(e===null||typeof e=="undefined"||ma(o,e,a,s))return!0;if(s)return!1;if(a!==null)switch(a.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function B(o,e,a,s,c,f,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=c,this.mustUseProperty=a,this.propertyName=o,this.type=e,this.sanitizeURL=f,this.removeEmptyString=d}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){D[o]=new B(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var e=o[0];D[e]=new B(e,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){D[o]=new B(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){D[o]=new B(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){D[o]=new B(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){D[o]=new B(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){D[o]=new B(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){D[o]=new B(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){D[o]=new B(o,5,!1,o.toLowerCase(),null,!1,!1)});var oa=/[\-:]([a-z])/g;function pa(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var e=o.replace(oa,pa);D[e]=new B(e,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var e=o.replace(oa,pa);D[e]=new B(e,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var e=o.replace(oa,pa);D[e]=new B(e,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){D[o]=new B(o,1,!1,o.toLowerCase(),null,!1,!1)});D.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){D[o]=new B(o,1,!1,o.toLowerCase(),null,!0,!0)});function qa(o,e,a,s){var c=D.hasOwnProperty(e)?D[e]:null,f=c!==null?c.type===0:s?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");f||(na(e,a,c,s)&&(a=null),s||c===null?la(e)&&(a===null?o.removeAttribute(e):o.setAttribute(e,""+a)):c.mustUseProperty?o[c.propertyName]=a===null?c.type===3?!1:"":a:(e=c.attributeName,s=c.attributeNamespace,a===null?o.removeAttribute(e):(c=c.type,a=c===3||c===4&&a===!0?"":""+a,s?o.setAttributeNS(s,e,a):o.setAttribute(e,a))))}var ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;if(typeof Symbol=="function"&&Symbol.for){var E=Symbol.for;sa=E("react.element"),ta=E("react.portal"),ua=E("react.fragment"),wa=E("react.strict_mode"),xa=E("react.profiler"),ya=E("react.provider"),za=E("react.context"),Aa=E("react.forward_ref"),Ba=E("react.suspense"),Ca=E("react.suspense_list"),Da=E("react.memo"),Ea=E("react.lazy"),Fa=E("react.block"),E("react.scope"),Ga=E("react.opaque.id"),Ha=E("react.debug_trace_mode"),Ia=E("react.offscreen"),Ja=E("react.legacy_hidden")}var Ka=typeof Symbol=="function"&&Symbol.iterator;function La(o){return o===null||typeof o!="object"?null:(o=Ka&&o[Ka]||o["@@iterator"],typeof o=="function"?o:null)}var Ma;function Na(o){if(Ma===void 0)try{throw Error()}catch(a){var e=a.stack.trim().match(/\n( *(at )?)/);Ma=e&&e[1]||""}return`
`+Ma+o}var Oa=!1;function Pa(o,e){if(!o||Oa)return"";Oa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var s=g}Reflect.construct(o,[],e)}else{try{e.call()}catch(g){s=g}o.call(e.prototype)}else{try{throw Error()}catch(g){s=g}o()}}catch(g){if(g&&s&&typeof g.stack=="string"){for(var c=g.stack.split(`
`),f=s.stack.split(`
`),d=c.length-1,h=f.length-1;1<=d&&0<=h&&c[d]!==f[h];)h--;for(;1<=d&&0<=h;d--,h--)if(c[d]!==f[h]){if(d!==1||h!==1)do if(d--,h--,0>h||c[d]!==f[h])return`
`+c[d].replace(" at new "," at ");while(1<=d&&0<=h);break}}}finally{Oa=!1,Error.prepareStackTrace=a}return(o=o?o.displayName||o.name:"")?Na(o):""}function Qa(o){switch(o.tag){case 5:return Na(o.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return o=Pa(o.type,!1),o;case 11:return o=Pa(o.type.render,!1),o;case 22:return o=Pa(o.type._render,!1),o;case 1:return o=Pa(o.type,!0),o;default:return""}}function Ra(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ua:return"Fragment";case ta:return"Portal";case xa:return"Profiler";case wa:return"StrictMode";case Ba:return"Suspense";case Ca:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case za:return(o.displayName||"Context")+".Consumer";case ya:return(o._context.displayName||"Context")+".Provider";case Aa:var e=o.render;return e=e.displayName||e.name||"",o.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case Da:return Ra(o.type);case Fa:return Ra(o._render);case Ea:e=o._payload,o=o._init;try{return Ra(o(e))}catch{}}return null}function Sa(o){switch(typeof o){case"boolean":case"number":case"object":case"string":case"undefined":return o;default:return""}}function Ta(o){var e=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(o){var e=Ta(o)?"checked":"value",a=Object.getOwnPropertyDescriptor(o.constructor.prototype,e),s=""+o[e];if(!o.hasOwnProperty(e)&&typeof a!="undefined"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(o,e,{configurable:!0,get:function(){return c.call(this)},set:function(d){s=""+d,f.call(this,d)}}),Object.defineProperty(o,e,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(d){s=""+d},stopTracking:function(){o._valueTracker=null,delete o[e]}}}}function Va(o){o._valueTracker||(o._valueTracker=Ua(o))}function Wa(o){if(!o)return!1;var e=o._valueTracker;if(!e)return!0;var a=e.getValue(),s="";return o&&(s=Ta(o)?o.checked?"true":"false":o.value),o=s,o!==a?(e.setValue(o),!0):!1}function Xa(o){if(o=o||(typeof document!="undefined"?document:void 0),typeof o=="undefined")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ya(o,e){var a=e.checked;return m({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a!=null?a:o._wrapperState.initialChecked})}function Za(o,e){var a=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;a=Sa(e.value!=null?e.value:a),o._wrapperState={initialChecked:s,initialValue:a,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $a(o,e){e=e.checked,e!=null&&qa(o,"checked",e,!1)}function ab(o,e){$a(o,e);var a=Sa(e.value),s=e.type;if(a!=null)s==="number"?(a===0&&o.value===""||o.value!=a)&&(o.value=""+a):o.value!==""+a&&(o.value=""+a);else if(s==="submit"||s==="reset"){o.removeAttribute("value");return}e.hasOwnProperty("value")?bb(o,e.type,a):e.hasOwnProperty("defaultValue")&&bb(o,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(o.defaultChecked=!!e.defaultChecked)}function cb(o,e,a){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+o._wrapperState.initialValue,a||e===o.value||(o.value=e),o.defaultValue=e}a=o.name,a!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,a!==""&&(o.name=a)}function bb(o,e,a){(e!=="number"||Xa(o.ownerDocument)!==o)&&(a==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+a&&(o.defaultValue=""+a))}function db(o){var e="";return aa.Children.forEach(o,function(a){a!=null&&(e+=a)}),e}function eb(o,e){return o=m({children:void 0},e),(e=db(e.children))&&(o.children=e),o}function fb(o,e,a,s){if(o=o.options,e){e={};for(var c=0;c<a.length;c++)e["$"+a[c]]=!0;for(a=0;a<o.length;a++)c=e.hasOwnProperty("$"+o[a].value),o[a].selected!==c&&(o[a].selected=c),c&&s&&(o[a].defaultSelected=!0)}else{for(a=""+Sa(a),e=null,c=0;c<o.length;c++){if(o[c].value===a){o[c].selected=!0,s&&(o[c].defaultSelected=!0);return}e!==null||o[c].disabled||(e=o[c])}e!==null&&(e.selected=!0)}}function gb(o,e){if(e.dangerouslySetInnerHTML!=null)throw Error(y(91));return m({},e,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function hb(o,e){var a=e.value;if(a==null){if(a=e.children,e=e.defaultValue,a!=null){if(e!=null)throw Error(y(92));if(Array.isArray(a)){if(!(1>=a.length))throw Error(y(93));a=a[0]}e=a}e==null&&(e=""),a=e}o._wrapperState={initialValue:Sa(a)}}function ib(o,e){var a=Sa(e.value),s=Sa(e.defaultValue);a!=null&&(a=""+a,a!==o.value&&(o.value=a),e.defaultValue==null&&o.defaultValue!==a&&(o.defaultValue=a)),s!=null&&(o.defaultValue=""+s)}function jb(o){var e=o.textContent;e===o._wrapperState.initialValue&&e!==""&&e!==null&&(o.value=e)}var kb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function lb(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mb(o,e){return o==null||o==="http://www.w3.org/1999/xhtml"?lb(e):o==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var nb,ob=function(o){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,a,s,c){MSApp.execUnsafeLocalFunction(function(){return o(e,a,s,c)})}:o}(function(o,e){if(o.namespaceURI!==kb.svg||"innerHTML"in o)o.innerHTML=e;else{for(nb=nb||document.createElement("div"),nb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nb.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;e.firstChild;)o.appendChild(e.firstChild)}});function pb(o,e){if(e){var a=o.firstChild;if(a&&a===o.lastChild&&a.nodeType===3){a.nodeValue=e;return}}o.textContent=e}var qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];Object.keys(qb).forEach(function(o){rb.forEach(function(e){e=e+o.charAt(0).toUpperCase()+o.substring(1),qb[e]=qb[o]})});function sb(o,e,a){return e==null||typeof e=="boolean"||e===""?"":a||typeof e!="number"||e===0||qb.hasOwnProperty(o)&&qb[o]?(""+e).trim():e+"px"}function tb(o,e){o=o.style;for(var a in e)if(e.hasOwnProperty(a)){var s=a.indexOf("--")===0,c=sb(a,e[a],s);a==="float"&&(a="cssFloat"),s?o.setProperty(a,c):o[a]=c}}var ub=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vb(o,e){if(e){if(ub[o]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(y(137,o));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(y(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(y(62))}}function wb(o,e){if(o.indexOf("-")===-1)return typeof e.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xb(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yb=null,zb=null,Ab=null;function Bb(o){if(o=Cb(o)){if(typeof yb!="function")throw Error(y(280));var e=o.stateNode;e&&(e=Db(e),yb(o.stateNode,o.type,e))}}function Eb(o){zb?Ab?Ab.push(o):Ab=[o]:zb=o}function Fb(){if(zb){var o=zb,e=Ab;if(Ab=zb=null,Bb(o),e)for(o=0;o<e.length;o++)Bb(e[o])}}function Gb(o,e){return o(e)}function Hb(o,e,a,s,c){return o(e,a,s,c)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){(zb!==null||Ab!==null)&&(Ib(),Fb())}function Nb(o,e,a){if(Lb)return o(e,a);Lb=!0;try{return Jb(o,e,a)}finally{Lb=!1,Mb()}}function Ob(o,e){var a=o.stateNode;if(a===null)return null;var s=Db(a);if(s===null)return null;a=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(o=o.type,s=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!s;break e;default:o=!1}if(o)return null;if(a&&typeof a!="function")throw Error(y(231,e,typeof a));return a}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,"passive",{get:function(){Pb=!0}}),window.addEventListener("test",Qb,Qb),window.removeEventListener("test",Qb,Qb)}catch{Pb=!1}function Rb(o,e,a,s,c,f,d,h,g){var b=Array.prototype.slice.call(arguments,3);try{e.apply(a,b)}catch(tt){this.onError(tt)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(o){Sb=!0,Tb=o}};function Xb(o,e,a,s,c,f,d,h,g){Sb=!1,Tb=null,Rb.apply(Wb,arguments)}function Yb(o,e,a,s,c,f,d,h,g){if(Xb.apply(this,arguments),Sb){if(Sb){var b=Tb;Sb=!1,Tb=null}else throw Error(y(198));Ub||(Ub=!0,Vb=b)}}function Zb(o){var e=o,a=o;if(o.alternate)for(;e.return;)e=e.return;else{o=e;do e=o,(e.flags&1026)!==0&&(a=e.return),o=e.return;while(o)}return e.tag===3?a:null}function $b(o){if(o.tag===13){var e=o.memoizedState;if(e===null&&(o=o.alternate,o!==null&&(e=o.memoizedState)),e!==null)return e.dehydrated}return null}function ac(o){if(Zb(o)!==o)throw Error(y(188))}function bc(o){var e=o.alternate;if(!e){if(e=Zb(o),e===null)throw Error(y(188));return e!==o?null:o}for(var a=o,s=e;;){var c=a.return;if(c===null)break;var f=c.alternate;if(f===null){if(s=c.return,s!==null){a=s;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===a)return ac(c),o;if(f===s)return ac(c),e;f=f.sibling}throw Error(y(188))}if(a.return!==s.return)a=c,s=f;else{for(var d=!1,h=c.child;h;){if(h===a){d=!0,a=c,s=f;break}if(h===s){d=!0,s=c,a=f;break}h=h.sibling}if(!d){for(h=f.child;h;){if(h===a){d=!0,a=f,s=c;break}if(h===s){d=!0,s=f,a=c;break}h=h.sibling}if(!d)throw Error(y(189))}}if(a.alternate!==s)throw Error(y(190))}if(a.tag!==3)throw Error(y(188));return a.stateNode.current===a?o:e}function cc(o){if(o=bc(o),!o)return null;for(var e=o;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===o)break;for(;!e.sibling;){if(!e.return||e.return===o)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function dc(o,e){for(var a=o.alternate;e!==null;){if(e===o||e===a)return!0;e=e.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rc(o,e,a,s,c){return{blockedOn:o,domEventName:e,eventSystemFlags:a|16,nativeEvent:c,targetContainers:[s]}}function sc(o,e){switch(o){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":nc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(e.pointerId)}}function tc(o,e,a,s,c,f){return o===null||o.nativeEvent!==f?(o=rc(e,a,s,c,f),e!==null&&(e=Cb(e),e!==null&&fc(e)),o):(o.eventSystemFlags|=s,e=o.targetContainers,c!==null&&e.indexOf(c)===-1&&e.push(c),o)}function uc(o,e,a,s,c){switch(e){case"focusin":return kc=tc(kc,o,e,a,s,c),!0;case"dragenter":return lc=tc(lc,o,e,a,s,c),!0;case"mouseover":return mc=tc(mc,o,e,a,s,c),!0;case"pointerover":var f=c.pointerId;return nc.set(f,tc(nc.get(f)||null,o,e,a,s,c)),!0;case"gotpointercapture":return f=c.pointerId,oc.set(f,tc(oc.get(f)||null,o,e,a,s,c)),!0}return!1}function vc(o){var e=wc(o.target);if(e!==null){var a=Zb(e);if(a!==null){if(e=a.tag,e===13){if(e=$b(a),e!==null){o.blockedOn=e,hc(o.lanePriority,function(){r.unstable_runWithPriority(o.priority,function(){gc(a)})});return}}else if(e===3&&a.stateNode.hydrate){o.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}o.blockedOn=null}function xc(o){if(o.blockedOn!==null)return!1;for(var e=o.targetContainers;0<e.length;){var a=yc(o.domEventName,o.eventSystemFlags,e[0],o.nativeEvent);if(a!==null)return e=Cb(a),e!==null&&fc(e),o.blockedOn=a,!1;e.shift()}return!0}function zc(o,e,a){xc(o)&&a.delete(e)}function Ac(){for(ic=!1;0<jc.length;){var o=jc[0];if(o.blockedOn!==null){o=Cb(o.blockedOn),o!==null&&ec(o);break}for(var e=o.targetContainers;0<e.length;){var a=yc(o.domEventName,o.eventSystemFlags,e[0],o.nativeEvent);if(a!==null){o.blockedOn=a;break}e.shift()}o.blockedOn===null&&jc.shift()}kc!==null&&xc(kc)&&(kc=null),lc!==null&&xc(lc)&&(lc=null),mc!==null&&xc(mc)&&(mc=null),nc.forEach(zc),oc.forEach(zc)}function Bc(o,e){o.blockedOn===e&&(o.blockedOn=null,ic||(ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ac)))}function Cc(o){function e(c){return Bc(c,o)}if(0<jc.length){Bc(jc[0],o);for(var a=1;a<jc.length;a++){var s=jc[a];s.blockedOn===o&&(s.blockedOn=null)}}for(kc!==null&&Bc(kc,o),lc!==null&&Bc(lc,o),mc!==null&&Bc(mc,o),nc.forEach(e),oc.forEach(e),a=0;a<pc.length;a++)s=pc[a],s.blockedOn===o&&(s.blockedOn=null);for(;0<pc.length&&(a=pc[0],a.blockedOn===null);)vc(a),a.blockedOn===null&&pc.shift()}function Dc(o,e){var a={};return a[o.toLowerCase()]=e.toLowerCase(),a["Webkit"+o]="webkit"+e,a["Moz"+o]="moz"+e,a}var Ec={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Fc={},Gc={};fa&&(Gc=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Hc(o){if(Fc[o])return Fc[o];if(!Ec[o])return o;var e=Ec[o],a;for(a in e)if(e.hasOwnProperty(a)&&a in Gc)return Fc[o]=e[a];return o}var Ic=Hc("animationend"),Jc=Hc("animationiteration"),Kc=Hc("animationstart"),Lc=Hc("transitionend"),Mc=new Map,Nc=new Map,Oc=["abort","abort",Ic,"animationEnd",Jc,"animationIteration",Kc,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lc,"transitionEnd","waiting","waiting"];function Pc(o,e){for(var a=0;a<o.length;a+=2){var s=o[a],c=o[a+1];c="on"+(c[0].toUpperCase()+c.slice(1)),Nc.set(s,e),Mc.set(s,c),da(c,[s])}}var Qc=r.unstable_now;Qc();var F=8;function Rc(o){if((1&o)!==0)return F=15,1;if((2&o)!==0)return F=14,2;if((4&o)!==0)return F=13,4;var e=24&o;return e!==0?(F=12,e):(o&32)!==0?(F=11,32):(e=192&o,e!==0?(F=10,e):(o&256)!==0?(F=9,256):(e=3584&o,e!==0?(F=8,e):(o&4096)!==0?(F=7,4096):(e=4186112&o,e!==0?(F=6,e):(e=62914560&o,e!==0?(F=5,e):o&67108864?(F=4,67108864):(o&134217728)!==0?(F=3,134217728):(e=805306368&o,e!==0?(F=2,e):(1073741824&o)!==0?(F=1,1073741824):(F=8,o))))))}function Sc(o){switch(o){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(o){switch(o){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,o))}}function Uc(o,e){var a=o.pendingLanes;if(a===0)return F=0;var s=0,c=0,f=o.expiredLanes,d=o.suspendedLanes,h=o.pingedLanes;if(f!==0)s=f,c=F=15;else if(f=a&134217727,f!==0){var g=f&~d;g!==0?(s=Rc(g),c=F):(h&=f,h!==0&&(s=Rc(h),c=F))}else f=a&~d,f!==0?(s=Rc(f),c=F):h!==0&&(s=Rc(h),c=F);if(s===0)return 0;if(s=31-Vc(s),s=a&((0>s?0:1<<s)<<1)-1,e!==0&&e!==s&&(e&d)===0){if(Rc(e),c<=F)return e;F=c}if(e=o.entangledLanes,e!==0)for(o=o.entanglements,e&=s;0<e;)a=31-Vc(e),c=1<<a,s|=o[a],e&=~c;return s}function Wc(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Xc(o,e){switch(o){case 15:return 1;case 14:return 2;case 12:return o=Yc(24&~e),o===0?Xc(10,e):o;case 10:return o=Yc(192&~e),o===0?Xc(8,e):o;case 8:return o=Yc(3584&~e),o===0&&(o=Yc(4186112&~e),o===0&&(o=512)),o;case 2:return e=Yc(805306368&~e),e===0&&(e=268435456),e}throw Error(y(358,o))}function Yc(o){return o&-o}function Zc(o){for(var e=[],a=0;31>a;a++)e.push(o);return e}function $c(o,e,a){o.pendingLanes|=e;var s=e-1;o.suspendedLanes&=s,o.pingedLanes&=s,o=o.eventTimes,e=31-Vc(e),o[e]=a}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(o){return o===0?32:31-(bd(o)/cd|0)|0}var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function gd(o,e,a,s){Kb||Ib();var c=hd,f=Kb;Kb=!0;try{Hb(c,o,e,a,s)}finally{(Kb=f)||Mb()}}function id(o,e,a,s){ed(dd,hd.bind(null,o,e,a,s))}function hd(o,e,a,s){if(fd){var c;if((c=(e&4)===0)&&0<jc.length&&-1<qc.indexOf(o))o=rc(null,o,e,a,s),jc.push(o);else{var f=yc(o,e,a,s);if(f===null)c&&sc(o,s);else{if(c){if(-1<qc.indexOf(o)){o=rc(f,o,e,a,s),jc.push(o);return}if(uc(f,o,e,a,s))return;sc(o,s)}jd(o,e,s,null,a)}}}}function yc(o,e,a,s){var c=xb(s);if(c=wc(c),c!==null){var f=Zb(c);if(f===null)c=null;else{var d=f.tag;if(d===13){if(c=$b(f),c!==null)return c;c=null}else if(d===3){if(f.stateNode.hydrate)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return jd(o,e,s,c,a),null}var kd=null,ld=null,md=null;function nd(){if(md)return md;var o,e=ld,a=e.length,s,c="value"in kd?kd.value:kd.textContent,f=c.length;for(o=0;o<a&&e[o]===c[o];o++);var d=a-o;for(s=1;s<=d&&e[a-s]===c[f-s];s++);return md=c.slice(o,1<s?1-s:void 0)}function od(o){var e=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&e===13&&(o=13)):o=e,o===10&&(o=13),32<=o||o===13?o:0}function pd(){return!0}function qd(){return!1}function rd(o){function e(a,s,c,f,d){this._reactName=a,this._targetInst=c,this.type=s,this.nativeEvent=f,this.target=d,this.currentTarget=null;for(var h in o)o.hasOwnProperty(h)&&(a=o[h],this[h]=a?a(f):f[h]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return m(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==yd&&(yd&&o.type==="mousemove"?(wd=o.screenX-yd.screenX,xd=o.screenY-yd.screenY):xd=wd=0,yd=o),wd)},movementY:function(o){return"movementY"in o?o.movementY:xd}}),Bd=rd(Ad),Cd=m({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m({},sd,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(o){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(o):(o=Od[o])?!!e[o]:!1}function zd(){return Pd}var Qd=m({},ud,{key:function(o){if(o.key){var e=Md[o.key]||o.key;if(e!=="Unidentified")return e}return o.type==="keypress"?(o=od(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Nd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(o){return o.type==="keypress"?od(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?od(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Rd=rd(Qd),Sd=m({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m({},Ad,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&"CompositionEvent"in window,be=null;fa&&"documentMode"in document&&(be=document.documentMode);var ce=fa&&"TextEvent"in window&&!be,de=fa&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(o,e){switch(o){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ie=!1;function je(o,e){switch(o){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return o=e.data,o===ee&&fe?null:o;default:return null}}function ke(o,e){if(ie)return o==="compositionend"||!ae&&ge(o,e)?(o=nd(),md=ld=kd=null,ie=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(o){var e=o&&o.nodeName&&o.nodeName.toLowerCase();return e==="input"?!!le[o.type]:e==="textarea"}function ne(o,e,a,s){Eb(s),e=oe(e,"onChange"),0<e.length&&(a=new td("onChange","change",null,a,s),o.push({event:a,listeners:e}))}var pe=null,qe=null;function re(o){se(o,0)}function te(o){var e=ue(o);if(Wa(e))return o}function ve(o,e){if(o==="change")return e}var we=!1;if(fa){var xe;if(fa){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(o){if(o.propertyName==="value"&&te(qe)){var e=[];if(ne(e,qe,o,xb(o)),o=re,Kb)o(e);else{Kb=!0;try{Gb(o,e)}finally{Kb=!1,Mb()}}}}function Ce(o,e,a){o==="focusin"?(Ae(),pe=e,qe=a,pe.attachEvent("onpropertychange",Be)):o==="focusout"&&Ae()}function De(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return te(qe)}function Ee(o,e){if(o==="click")return te(e)}function Fe(o,e){if(o==="input"||o==="change")return te(e)}function Ge(o,e){return o===e&&(o!==0||1/o===1/e)||o!==o&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge,Ie=Object.prototype.hasOwnProperty;function Je(o,e){if(He(o,e))return!0;if(typeof o!="object"||o===null||typeof e!="object"||e===null)return!1;var a=Object.keys(o),s=Object.keys(e);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++)if(!Ie.call(e,a[s])||!He(o[a[s]],e[a[s]]))return!1;return!0}function Ke(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Le(o,e){var a=Ke(o);o=0;for(var s;a;){if(a.nodeType===3){if(s=o+a.textContent.length,o<=e&&s>=e)return{node:a,offset:e-o};o=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ke(a)}}function Me(o,e){return o&&e?o===e?!0:o&&o.nodeType===3?!1:e&&e.nodeType===3?Me(o,e.parentNode):"contains"in o?o.contains(e):o.compareDocumentPosition?!!(o.compareDocumentPosition(e)&16):!1:!1}function Ne(){for(var o=window,e=Xa();e instanceof o.HTMLIFrameElement;){try{var a=typeof e.contentWindow.location.href=="string"}catch{a=!1}if(a)o=e.contentWindow;else break;e=Xa(o.document)}return e}function Oe(o){var e=o&&o.nodeName&&o.nodeName.toLowerCase();return e&&(e==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||e==="textarea"||o.contentEditable==="true")}var Pe=fa&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(o,e,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Te||Qe==null||Qe!==Xa(s)||(s=Qe,"selectionStart"in s&&Oe(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Se&&Je(Se,s)||(Se=s,s=oe(Re,"onSelect"),0<s.length&&(e=new td("onSelect","select",null,e,a),o.push({event:e,listeners:s}),e.target=Qe)))}Pc("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Pc(Oc,2);for(var Ve="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We=0;We<Ve.length;We++)Nc.set(Ve[We],0);ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe));function Ze(o,e,a){var s=o.type||"unknown-event";o.currentTarget=a,Yb(s,e,void 0,o),o.currentTarget=null}function se(o,e){e=(e&4)!==0;for(var a=0;a<o.length;a++){var s=o[a],c=s.event;s=s.listeners;e:{var f=void 0;if(e)for(var d=s.length-1;0<=d;d--){var h=s[d],g=h.instance,b=h.currentTarget;if(h=h.listener,g!==f&&c.isPropagationStopped())break e;Ze(c,h,b),f=g}else for(d=0;d<s.length;d++){if(h=s[d],g=h.instance,b=h.currentTarget,h=h.listener,g!==f&&c.isPropagationStopped())break e;Ze(c,h,b),f=g}}}if(Ub)throw o=Vb,Ub=!1,Vb=null,o}function G(o,e){var a=$e(e),s=o+"__bubble";a.has(s)||(af(e,o,2,!1),a.add(s))}var bf="_reactListening"+Math.random().toString(36).slice(2);function cf(o){o[bf]||(o[bf]=!0,ba.forEach(function(e){Ye.has(e)||df(e,!1,o,null),df(e,!0,o,null)}))}function df(o,e,a,s){var c=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,f=a;if(o==="selectionchange"&&a.nodeType!==9&&(f=a.ownerDocument),s!==null&&!e&&Ye.has(o)){if(o!=="scroll")return;c|=2,f=s}var d=$e(f),h=o+"__"+(e?"capture":"bubble");d.has(h)||(e&&(c|=4),af(f,o,c,e),d.add(h))}function af(o,e,a,s){var c=Nc.get(e);switch(c===void 0?2:c){case 0:c=gd;break;case 1:c=id;break;default:c=hd}a=c.bind(null,e,a,o),c=void 0,!Pb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(c=!0),s?c!==void 0?o.addEventListener(e,a,{capture:!0,passive:c}):o.addEventListener(e,a,!0):c!==void 0?o.addEventListener(e,a,{passive:c}):o.addEventListener(e,a,!1)}function jd(o,e,a,s,c){var f=s;if((e&1)===0&&(e&2)===0&&s!==null)e:for(;;){if(s===null)return;var d=s.tag;if(d===3||d===4){var h=s.stateNode.containerInfo;if(h===c||h.nodeType===8&&h.parentNode===c)break;if(d===4)for(d=s.return;d!==null;){var g=d.tag;if((g===3||g===4)&&(g=d.stateNode.containerInfo,g===c||g.nodeType===8&&g.parentNode===c))return;d=d.return}for(;h!==null;){if(d=wc(h),d===null)return;if(g=d.tag,g===5||g===6){s=f=d;continue e}h=h.parentNode}}s=s.return}Nb(function(){var b=f,tt=xb(a),j=[];e:{var _e=Mc.get(o);if(_e!==void 0){var nt=td,rt=o;switch(o){case"keypress":if(od(a)===0)break e;case"keydown":case"keyup":nt=Rd;break;case"focusin":rt="focus",nt=Fd;break;case"focusout":rt="blur",nt=Fd;break;case"beforeblur":case"afterblur":nt=Fd;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=Vd;break;case Ic:case Jc:case Kc:nt=Hd;break;case Lc:nt=Xd;break;case"scroll":nt=vd;break;case"wheel":nt=Zd;break;case"copy":case"cut":case"paste":nt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=Td}var at=(e&4)!==0,it=!at&&o==="scroll",$=at?_e!==null?_e+"Capture":null:_e;at=[];for(var et=b,st;et!==null;){st=et;var lt=st.stateNode;if(st.tag===5&&lt!==null&&(st=lt,$!==null&&(lt=Ob(et,$),lt!=null&&at.push(ef(et,lt,st)))),it)break;et=et.return}0<at.length&&(_e=new nt(_e,rt,null,a,tt),j.push({event:_e,listeners:at}))}}if((e&7)===0){e:{if(_e=o==="mouseover"||o==="pointerover",nt=o==="mouseout"||o==="pointerout",_e&&(e&16)===0&&(rt=a.relatedTarget||a.fromElement)&&(wc(rt)||rt[ff]))break e;if((nt||_e)&&(_e=tt.window===tt?tt:(_e=tt.ownerDocument)?_e.defaultView||_e.parentWindow:window,nt?(rt=a.relatedTarget||a.toElement,nt=b,rt=rt?wc(rt):null,rt!==null&&(it=Zb(rt),rt!==it||rt.tag!==5&&rt.tag!==6)&&(rt=null)):(nt=null,rt=b),nt!==rt)){if(at=Bd,lt="onMouseLeave",$="onMouseEnter",et="mouse",(o==="pointerout"||o==="pointerover")&&(at=Td,lt="onPointerLeave",$="onPointerEnter",et="pointer"),it=nt==null?_e:ue(nt),st=rt==null?_e:ue(rt),_e=new at(lt,et+"leave",nt,a,tt),_e.target=it,_e.relatedTarget=st,lt=null,wc(tt)===b&&(at=new at($,et+"enter",rt,a,tt),at.target=st,at.relatedTarget=it,lt=at),it=lt,nt&&rt)t:{for(at=nt,$=rt,et=0,st=at;st;st=gf(st))et++;for(st=0,lt=$;lt;lt=gf(lt))st++;for(;0<et-st;)at=gf(at),et--;for(;0<st-et;)$=gf($),st--;for(;et--;){if(at===$||$!==null&&at===$.alternate)break t;at=gf(at),$=gf($)}at=null}else at=null;nt!==null&&hf(j,_e,nt,at,!1),rt!==null&&it!==null&&hf(j,it,rt,at,!0)}}e:{if(_e=b?ue(b):window,nt=_e.nodeName&&_e.nodeName.toLowerCase(),nt==="select"||nt==="input"&&_e.type==="file")var ct=ve;else if(me(_e))if(we)ct=Fe;else{ct=De;var ut=Ce}else(nt=_e.nodeName)&&nt.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(ct=Ee);if(ct&&(ct=ct(o,b))){ne(j,ct,a,tt);break e}ut&&ut(o,_e,b),o==="focusout"&&(ut=_e._wrapperState)&&ut.controlled&&_e.type==="number"&&bb(_e,"number",_e.value)}switch(ut=b?ue(b):window,o){case"focusin":(me(ut)||ut.contentEditable==="true")&&(Qe=ut,Re=b,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(j,a,tt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(j,a,tt)}var ht;if(ae)e:{switch(o){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else ie?ge(o,a)&&(pt="onCompositionEnd"):o==="keydown"&&a.keyCode===229&&(pt="onCompositionStart");pt&&(de&&a.locale!=="ko"&&(ie||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&ie&&(ht=nd()):(kd=tt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),ut=oe(b,pt),0<ut.length&&(pt=new Ld(pt,o,null,a,tt),j.push({event:pt,listeners:ut}),ht?pt.data=ht:(ht=he(a),ht!==null&&(pt.data=ht)))),(ht=ce?je(o,a):ke(o,a))&&(b=oe(b,"onBeforeInput"),0<b.length&&(tt=new Ld("onBeforeInput","beforeinput",null,a,tt),j.push({event:tt,listeners:b}),tt.data=ht))}se(j,e)})}function ef(o,e,a){return{instance:o,listener:e,currentTarget:a}}function oe(o,e){for(var a=e+"Capture",s=[];o!==null;){var c=o,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Ob(o,a),f!=null&&s.unshift(ef(o,f,c)),f=Ob(o,e),f!=null&&s.push(ef(o,f,c))),o=o.return}return s}function gf(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function hf(o,e,a,s,c){for(var f=e._reactName,d=[];a!==null&&a!==s;){var h=a,g=h.alternate,b=h.stateNode;if(g!==null&&g===s)break;h.tag===5&&b!==null&&(h=b,c?(g=Ob(a,f),g!=null&&d.unshift(ef(a,g,h))):c||(g=Ob(a,f),g!=null&&d.push(ef(a,g,h)))),a=a.return}d.length!==0&&o.push({event:e,listeners:d})}function jf(){}var kf=null,lf=null;function mf(o,e){switch(o){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function nf(o,e){return o==="textarea"||o==="option"||o==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var of=typeof setTimeout=="function"?setTimeout:void 0,pf=typeof clearTimeout=="function"?clearTimeout:void 0;function qf(o){o.nodeType===1?o.textContent="":o.nodeType===9&&(o=o.body,o!=null&&(o.textContent=""))}function rf(o){for(;o!=null;o=o.nextSibling){var e=o.nodeType;if(e===1||e===3)break}return o}function sf(o){o=o.previousSibling;for(var e=0;o;){if(o.nodeType===8){var a=o.data;if(a==="$"||a==="$!"||a==="$?"){if(e===0)return o;e--}else a==="/$"&&e++}o=o.previousSibling}return null}var tf=0;function uf(o){return{$$typeof:Ga,toString:o,valueOf:o}}var vf=Math.random().toString(36).slice(2),wf="__reactFiber$"+vf,xf="__reactProps$"+vf,ff="__reactContainer$"+vf,yf="__reactEvents$"+vf;function wc(o){var e=o[wf];if(e)return e;for(var a=o.parentNode;a;){if(e=a[ff]||a[wf]){if(a=e.alternate,e.child!==null||a!==null&&a.child!==null)for(o=sf(o);o!==null;){if(a=o[wf])return a;o=sf(o)}return e}o=a,a=o.parentNode}return null}function Cb(o){return o=o[wf]||o[ff],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ue(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(y(33))}function Db(o){return o[xf]||null}function $e(o){var e=o[yf];return e===void 0&&(e=o[yf]=new Set),e}var zf=[],Af=-1;function Bf(o){return{current:o}}function H(o){0>Af||(o.current=zf[Af],zf[Af]=null,Af--)}function I(o,e){Af++,zf[Af]=o.current,o.current=e}var Cf={},M=Bf(Cf),N=Bf(!1),Df=Cf;function Ef(o,e){var a=o.type.contextTypes;if(!a)return Cf;var s=o.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in a)c[f]=e[f];return s&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=e,o.__reactInternalMemoizedMaskedChildContext=c),c}function Ff(o){return o=o.childContextTypes,o!=null}function Gf(){H(N),H(M)}function Hf(o,e,a){if(M.current!==Cf)throw Error(y(168));I(M,e),I(N,a)}function If(o,e,a){var s=o.stateNode;if(o=e.childContextTypes,typeof s.getChildContext!="function")return a;s=s.getChildContext();for(var c in s)if(!(c in o))throw Error(y(108,Ra(e)||"Unknown",c));return m({},a,s)}function Jf(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Cf,Df=M.current,I(M,o),I(N,N.current),!0}function Kf(o,e,a){var s=o.stateNode;if(!s)throw Error(y(169));a?(o=If(o,e,Df),s.__reactInternalMemoizedMergedChildContext=o,H(N),H(M),I(M,o)):H(N),I(N,a)}var Lf=null,Mf=null,Nf=r.unstable_runWithPriority,Of=r.unstable_scheduleCallback,Pf=r.unstable_cancelCallback,Qf=r.unstable_shouldYield,Rf=r.unstable_requestPaint,Sf=r.unstable_now,Tf=r.unstable_getCurrentPriorityLevel,Uf=r.unstable_ImmediatePriority,Vf=r.unstable_UserBlockingPriority,Wf=r.unstable_NormalPriority,Xf=r.unstable_LowPriority,Yf=r.unstable_IdlePriority,Zf={},$f=Rf!==void 0?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1e4>dg?Sf:function(){return Sf()-dg};function eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y(332))}}function fg(o){switch(o){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y(332))}}function gg(o,e){return o=fg(o),Nf(o,e)}function hg(o,e,a){return o=fg(o),Of(o,e,a)}function ig(){if(bg!==null){var o=bg;bg=null,Pf(o)}jg()}function jg(){if(!cg&&ag!==null){cg=!0;var o=0;try{var e=ag;gg(99,function(){for(;o<e.length;o++){var a=e[o];do a=a(!0);while(a!==null)}}),ag=null}catch(a){throw ag!==null&&(ag=ag.slice(o+1)),Of(Uf,ig),a}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(o,e){if(o&&o.defaultProps){e=m({},e),o=o.defaultProps;for(var a in o)e[a]===void 0&&(e[a]=o[a]);return e}return e}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}function rg(o){var e=mg.current;H(mg),o.type._context._currentValue=e}function sg(o,e){for(;o!==null;){var a=o.alternate;if((o.childLanes&e)===e){if(a===null||(a.childLanes&e)===e)break;a.childLanes|=e}else o.childLanes|=e,a!==null&&(a.childLanes|=e);o=o.return}}function tg(o,e){ng=o,pg=og=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&e)!==0&&(ug=!0),o.firstContext=null)}function vg(o,e){if(pg!==o&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(pg=o,e=1073741823),e={context:o,observedBits:e,next:null},og===null){if(ng===null)throw Error(y(308));og=e,ng.dependencies={lanes:0,firstContext:e,responders:null}}else og=og.next=e;return o._currentValue}var wg=!1;function xg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function yg(o,e){o=o.updateQueue,e.updateQueue===o&&(e.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function zg(o,e){return{eventTime:o,lane:e,tag:0,payload:null,callback:null,next:null}}function Ag(o,e){if(o=o.updateQueue,o!==null){o=o.shared;var a=o.pending;a===null?e.next=e:(e.next=a.next,a.next=e),o.pending=e}}function Bg(o,e){var a=o.updateQueue,s=o.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var c=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var d={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?c=f=d:f=f.next=d,a=a.next}while(a!==null);f===null?c=f=e:f=f.next=e}else c=f=e;a={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:s.shared,effects:s.effects},o.updateQueue=a;return}o=a.lastBaseUpdate,o===null?a.firstBaseUpdate=e:o.next=e,a.lastBaseUpdate=e}function Cg(o,e,a,s){var c=o.updateQueue;wg=!1;var f=c.firstBaseUpdate,d=c.lastBaseUpdate,h=c.shared.pending;if(h!==null){c.shared.pending=null;var g=h,b=g.next;g.next=null,d===null?f=b:d.next=b,d=g;var tt=o.alternate;if(tt!==null){tt=tt.updateQueue;var j=tt.lastBaseUpdate;j!==d&&(j===null?tt.firstBaseUpdate=b:j.next=b,tt.lastBaseUpdate=g)}}if(f!==null){j=c.baseState,d=0,tt=b=g=null;do{h=f.lane;var _e=f.eventTime;if((s&h)===h){tt!==null&&(tt=tt.next={eventTime:_e,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var nt=o,rt=f;switch(h=e,_e=a,rt.tag){case 1:if(nt=rt.payload,typeof nt=="function"){j=nt.call(_e,j,h);break e}j=nt;break e;case 3:nt.flags=nt.flags&-4097|64;case 0:if(nt=rt.payload,h=typeof nt=="function"?nt.call(_e,j,h):nt,h==null)break e;j=m({},j,h);break e;case 2:wg=!0}}f.callback!==null&&(o.flags|=32,h=c.effects,h===null?c.effects=[f]:h.push(f))}else _e={eventTime:_e,lane:h,tag:f.tag,payload:f.payload,callback:f.callback,next:null},tt===null?(b=tt=_e,g=j):tt=tt.next=_e,d|=h;if(f=f.next,f===null){if(h=c.shared.pending,h===null)break;f=h.next,h.next=null,c.lastBaseUpdate=h,c.shared.pending=null}}while(1);tt===null&&(g=j),c.baseState=g,c.firstBaseUpdate=b,c.lastBaseUpdate=tt,Dg|=d,o.lanes=d,o.memoizedState=j}}function Eg(o,e,a){if(o=e.effects,e.effects=null,o!==null)for(e=0;e<o.length;e++){var s=o[e],c=s.callback;if(c!==null){if(s.callback=null,s=a,typeof c!="function")throw Error(y(191,c));c.call(s)}}}var Fg=new aa.Component().refs;function Gg(o,e,a,s){e=o.memoizedState,a=a(s,e),a=a==null?e:m({},e,a),o.memoizedState=a,o.lanes===0&&(o.updateQueue.baseState=a)}var Kg={isMounted:function(o){return(o=o._reactInternals)?Zb(o)===o:!1},enqueueSetState:function(o,e,a){o=o._reactInternals;var s=Hg(),c=Ig(o),f=zg(s,c);f.payload=e,a!=null&&(f.callback=a),Ag(o,f),Jg(o,c,s)},enqueueReplaceState:function(o,e,a){o=o._reactInternals;var s=Hg(),c=Ig(o),f=zg(s,c);f.tag=1,f.payload=e,a!=null&&(f.callback=a),Ag(o,f),Jg(o,c,s)},enqueueForceUpdate:function(o,e){o=o._reactInternals;var a=Hg(),s=Ig(o),c=zg(a,s);c.tag=2,e!=null&&(c.callback=e),Ag(o,c),Jg(o,s,a)}};function Lg(o,e,a,s,c,f,d){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(s,f,d):e.prototype&&e.prototype.isPureReactComponent?!Je(a,s)||!Je(c,f):!0}function Mg(o,e,a){var s=!1,c=Cf,f=e.contextType;return typeof f=="object"&&f!==null?f=vg(f):(c=Ff(e)?Df:M.current,s=e.contextTypes,f=(s=s!=null)?Ef(o,c):Cf),e=new e(a,f),o.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kg,o.stateNode=e,e._reactInternals=o,s&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=f),e}function Ng(o,e,a,s){o=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(a,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(a,s),e.state!==o&&Kg.enqueueReplaceState(e,e.state,null)}function Og(o,e,a,s){var c=o.stateNode;c.props=a,c.state=o.memoizedState,c.refs=Fg,xg(o);var f=e.contextType;typeof f=="object"&&f!==null?c.context=vg(f):(f=Ff(e)?Df:M.current,c.context=Ef(o,f)),Cg(o,a,c,s),c.state=o.memoizedState,f=e.getDerivedStateFromProps,typeof f=="function"&&(Gg(o,e,f,a),c.state=o.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(e=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),e!==c.state&&Kg.enqueueReplaceState(c,c.state,null),Cg(o,a,c,s),c.state=o.memoizedState),typeof c.componentDidMount=="function"&&(o.flags|=4)}var Pg=Array.isArray;function Qg(o,e,a){if(o=a.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(y(309));var s=a.stateNode}if(!s)throw Error(y(147,o));var c=""+o;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(f){var d=s.refs;d===Fg&&(d=s.refs={}),f===null?delete d[c]:d[c]=f},e._stringRef=c,e)}if(typeof o!="string")throw Error(y(284));if(!a._owner)throw Error(y(290,o))}return o}function Rg(o,e){if(o.type!=="textarea")throw Error(y(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function Sg(o){function e(it,$){if(o){var et=it.lastEffect;et!==null?(et.nextEffect=$,it.lastEffect=$):it.firstEffect=it.lastEffect=$,$.nextEffect=null,$.flags=8}}function a(it,$){if(!o)return null;for(;$!==null;)e(it,$),$=$.sibling;return null}function s(it,$){for(it=new Map;$!==null;)$.key!==null?it.set($.key,$):it.set($.index,$),$=$.sibling;return it}function c(it,$){return it=Tg(it,$),it.index=0,it.sibling=null,it}function f(it,$,et){return it.index=et,o?(et=it.alternate,et!==null?(et=et.index,et<$?(it.flags=2,$):et):(it.flags=2,$)):$}function d(it){return o&&it.alternate===null&&(it.flags=2),it}function h(it,$,et,st){return $===null||$.tag!==6?($=Ug(et,it.mode,st),$.return=it,$):($=c($,et),$.return=it,$)}function g(it,$,et,st){return $!==null&&$.elementType===et.type?(st=c($,et.props),st.ref=Qg(it,$,et),st.return=it,st):(st=Vg(et.type,et.key,et.props,null,it.mode,st),st.ref=Qg(it,$,et),st.return=it,st)}function b(it,$,et,st){return $===null||$.tag!==4||$.stateNode.containerInfo!==et.containerInfo||$.stateNode.implementation!==et.implementation?($=Wg(et,it.mode,st),$.return=it,$):($=c($,et.children||[]),$.return=it,$)}function tt(it,$,et,st,lt){return $===null||$.tag!==7?($=Xg(et,it.mode,st,lt),$.return=it,$):($=c($,et),$.return=it,$)}function j(it,$,et){if(typeof $=="string"||typeof $=="number")return $=Ug(""+$,it.mode,et),$.return=it,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case sa:return et=Vg($.type,$.key,$.props,null,it.mode,et),et.ref=Qg(it,null,$),et.return=it,et;case ta:return $=Wg($,it.mode,et),$.return=it,$}if(Pg($)||La($))return $=Xg($,it.mode,et,null),$.return=it,$;Rg(it,$)}return null}function _e(it,$,et,st){var lt=$!==null?$.key:null;if(typeof et=="string"||typeof et=="number")return lt!==null?null:h(it,$,""+et,st);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case sa:return et.key===lt?et.type===ua?tt(it,$,et.props.children,st,lt):g(it,$,et,st):null;case ta:return et.key===lt?b(it,$,et,st):null}if(Pg(et)||La(et))return lt!==null?null:tt(it,$,et,st,null);Rg(it,et)}return null}function nt(it,$,et,st,lt){if(typeof st=="string"||typeof st=="number")return it=it.get(et)||null,h($,it,""+st,lt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case sa:return it=it.get(st.key===null?et:st.key)||null,st.type===ua?tt($,it,st.props.children,lt,st.key):g($,it,st,lt);case ta:return it=it.get(st.key===null?et:st.key)||null,b($,it,st,lt)}if(Pg(st)||La(st))return it=it.get(et)||null,tt($,it,st,lt,null);Rg($,st)}return null}function rt(it,$,et,st){for(var lt=null,ct=null,ut=$,ht=$=0,pt=null;ut!==null&&ht<et.length;ht++){ut.index>ht?(pt=ut,ut=null):pt=ut.sibling;var mt=_e(it,ut,et[ht],st);if(mt===null){ut===null&&(ut=pt);break}o&&ut&&mt.alternate===null&&e(it,ut),$=f(mt,$,ht),ct===null?lt=mt:ct.sibling=mt,ct=mt,ut=pt}if(ht===et.length)return a(it,ut),lt;if(ut===null){for(;ht<et.length;ht++)ut=j(it,et[ht],st),ut!==null&&($=f(ut,$,ht),ct===null?lt=ut:ct.sibling=ut,ct=ut);return lt}for(ut=s(it,ut);ht<et.length;ht++)pt=nt(ut,it,ht,et[ht],st),pt!==null&&(o&&pt.alternate!==null&&ut.delete(pt.key===null?ht:pt.key),$=f(pt,$,ht),ct===null?lt=pt:ct.sibling=pt,ct=pt);return o&&ut.forEach(function(bt){return e(it,bt)}),lt}function at(it,$,et,st){var lt=La(et);if(typeof lt!="function")throw Error(y(150));if(et=lt.call(et),et==null)throw Error(y(151));for(var ct=lt=null,ut=$,ht=$=0,pt=null,mt=et.next();ut!==null&&!mt.done;ht++,mt=et.next()){ut.index>ht?(pt=ut,ut=null):pt=ut.sibling;var bt=_e(it,ut,mt.value,st);if(bt===null){ut===null&&(ut=pt);break}o&&ut&&bt.alternate===null&&e(it,ut),$=f(bt,$,ht),ct===null?lt=bt:ct.sibling=bt,ct=bt,ut=pt}if(mt.done)return a(it,ut),lt;if(ut===null){for(;!mt.done;ht++,mt=et.next())mt=j(it,mt.value,st),mt!==null&&($=f(mt,$,ht),ct===null?lt=mt:ct.sibling=mt,ct=mt);return lt}for(ut=s(it,ut);!mt.done;ht++,mt=et.next())mt=nt(ut,it,ht,mt.value,st),mt!==null&&(o&&mt.alternate!==null&&ut.delete(mt.key===null?ht:mt.key),$=f(mt,$,ht),ct===null?lt=mt:ct.sibling=mt,ct=mt);return o&&ut.forEach(function(St){return e(it,St)}),lt}return function(it,$,et,st){var lt=typeof et=="object"&&et!==null&&et.type===ua&&et.key===null;lt&&(et=et.props.children);var ct=typeof et=="object"&&et!==null;if(ct)switch(et.$$typeof){case sa:e:{for(ct=et.key,lt=$;lt!==null;){if(lt.key===ct){switch(lt.tag){case 7:if(et.type===ua){a(it,lt.sibling),$=c(lt,et.props.children),$.return=it,it=$;break e}break;default:if(lt.elementType===et.type){a(it,lt.sibling),$=c(lt,et.props),$.ref=Qg(it,lt,et),$.return=it,it=$;break e}}a(it,lt);break}else e(it,lt);lt=lt.sibling}et.type===ua?($=Xg(et.props.children,it.mode,st,et.key),$.return=it,it=$):(st=Vg(et.type,et.key,et.props,null,it.mode,st),st.ref=Qg(it,$,et),st.return=it,it=st)}return d(it);case ta:e:{for(lt=et.key;$!==null;){if($.key===lt)if($.tag===4&&$.stateNode.containerInfo===et.containerInfo&&$.stateNode.implementation===et.implementation){a(it,$.sibling),$=c($,et.children||[]),$.return=it,it=$;break e}else{a(it,$);break}else e(it,$);$=$.sibling}$=Wg(et,it.mode,st),$.return=it,it=$}return d(it)}if(typeof et=="string"||typeof et=="number")return et=""+et,$!==null&&$.tag===6?(a(it,$.sibling),$=c($,et),$.return=it,it=$):(a(it,$),$=Ug(et,it.mode,st),$.return=it,it=$),d(it);if(Pg(et))return rt(it,$,et,st);if(La(et))return at(it,$,et,st);if(ct&&Rg(it,et),typeof et=="undefined"&&!lt)switch(it.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,Ra(it.type)||"Component"))}return a(it,$)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);function dh(o){if(o===$g)throw Error(y(174));return o}function eh(o,e){switch(I(ch,e),I(bh,o),I(ah,$g),o=e.nodeType,o){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mb(null,"");break;default:o=o===8?e.parentNode:e,e=o.namespaceURI||null,o=o.tagName,e=mb(e,o)}H(ah),I(ah,e)}function fh(){H(ah),H(bh),H(ch)}function gh(o){dh(ch.current);var e=dh(ah.current),a=mb(e,o.type);e!==a&&(I(bh,o),I(ah,a))}function hh(o){bh.current===o&&(H(ah),H(bh))}var P=Bf(0);function ih(o){for(var e=o;e!==null;){if(e.tag===13){var a=e.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===o)break;for(;e.sibling===null;){if(e.return===null||e.return===o)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jh=null,kh=null,lh=!1;function mh(o,e){var a=nh(5,null,null,0);a.elementType="DELETED",a.type="DELETED",a.stateNode=e,a.return=o,a.flags=8,o.lastEffect!==null?(o.lastEffect.nextEffect=a,o.lastEffect=a):o.firstEffect=o.lastEffect=a}function oh(o,e){switch(o.tag){case 5:var a=o.type;return e=e.nodeType!==1||a.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(o.stateNode=e,!0):!1;case 6:return e=o.pendingProps===""||e.nodeType!==3?null:e,e!==null?(o.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function ph(o){if(lh){var e=kh;if(e){var a=e;if(!oh(o,e)){if(e=rf(a.nextSibling),!e||!oh(o,e)){o.flags=o.flags&-1025|2,lh=!1,jh=o;return}mh(jh,a)}jh=o,kh=rf(e.firstChild)}else o.flags=o.flags&-1025|2,lh=!1,jh=o}}function qh(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;jh=o}function rh(o){if(o!==jh)return!1;if(!lh)return qh(o),lh=!0,!1;var e=o.type;if(o.tag!==5||e!=="head"&&e!=="body"&&!nf(e,o.memoizedProps))for(e=kh;e;)mh(o,e),e=rf(e.nextSibling);if(qh(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(y(317));e:{for(o=o.nextSibling,e=0;o;){if(o.nodeType===8){var a=o.data;if(a==="/$"){if(e===0){kh=rf(o.nextSibling);break e}e--}else a!=="$"&&a!=="$!"&&a!=="$?"||e++}o=o.nextSibling}kh=null}}else kh=jh?rf(o.stateNode.nextSibling):null;return!0}function sh(){kh=jh=null,lh=!1}var th=[];function uh(){for(var o=0;o<th.length;o++)th[o]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S=null,T=null,yh=!1,zh=!1;function Ah(){throw Error(y(321))}function Bh(o,e){if(e===null)return!1;for(var a=0;a<e.length&&a<o.length;a++)if(!He(o[a],e[a]))return!1;return!0}function Ch(o,e,a,s,c,f){if(xh=f,R=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vh.current=o===null||o.memoizedState===null?Dh:Eh,o=a(s,c),zh){f=0;do{if(zh=!1,!(25>f))throw Error(y(301));f+=1,T=S=null,e.updateQueue=null,vh.current=Fh,o=a(s,c)}while(zh)}if(vh.current=Gh,e=S!==null&&S.next!==null,xh=0,T=S=R=null,yh=!1,e)throw Error(y(300));return o}function Hh(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return T===null?R.memoizedState=T=o:T=T.next=o,T}function Ih(){if(S===null){var o=R.alternate;o=o!==null?o.memoizedState:null}else o=S.next;var e=T===null?R.memoizedState:T.next;if(e!==null)T=e,S=o;else{if(o===null)throw Error(y(310));S=o,o={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null},T===null?R.memoizedState=T=o:T=T.next=o}return T}function Jh(o,e){return typeof e=="function"?e(o):e}function Kh(o){var e=Ih(),a=e.queue;if(a===null)throw Error(y(311));a.lastRenderedReducer=o;var s=S,c=s.baseQueue,f=a.pending;if(f!==null){if(c!==null){var d=c.next;c.next=f.next,f.next=d}s.baseQueue=c=f,a.pending=null}if(c!==null){c=c.next,s=s.baseState;var h=d=f=null,g=c;do{var b=g.lane;if((xh&b)===b)h!==null&&(h=h.next={lane:0,action:g.action,eagerReducer:g.eagerReducer,eagerState:g.eagerState,next:null}),s=g.eagerReducer===o?g.eagerState:o(s,g.action);else{var tt={lane:b,action:g.action,eagerReducer:g.eagerReducer,eagerState:g.eagerState,next:null};h===null?(d=h=tt,f=s):h=h.next=tt,R.lanes|=b,Dg|=b}g=g.next}while(g!==null&&g!==c);h===null?f=s:h.next=d,He(s,e.memoizedState)||(ug=!0),e.memoizedState=s,e.baseState=f,e.baseQueue=h,a.lastRenderedState=s}return[e.memoizedState,a.dispatch]}function Lh(o){var e=Ih(),a=e.queue;if(a===null)throw Error(y(311));a.lastRenderedReducer=o;var s=a.dispatch,c=a.pending,f=e.memoizedState;if(c!==null){a.pending=null;var d=c=c.next;do f=o(f,d.action),d=d.next;while(d!==c);He(f,e.memoizedState)||(ug=!0),e.memoizedState=f,e.baseQueue===null&&(e.baseState=f),a.lastRenderedState=f}return[f,s]}function Mh(o,e,a){var s=e._getVersion;s=s(e._source);var c=e._workInProgressVersionPrimary;if(c!==null?o=c===s:(o=o.mutableReadLanes,(o=(xh&o)===o)&&(e._workInProgressVersionPrimary=s,th.push(e))),o)return a(e._source);throw th.push(e),Error(y(350))}function Nh(o,e,a,s){var c=U;if(c===null)throw Error(y(349));var f=e._getVersion,d=f(e._source),h=vh.current,g=h.useState(function(){return Mh(c,e,a)}),b=g[1],tt=g[0];g=T;var j=o.memoizedState,_e=j.refs,nt=_e.getSnapshot,rt=j.source;j=j.subscribe;var at=R;return o.memoizedState={refs:_e,source:e,subscribe:s},h.useEffect(function(){_e.getSnapshot=a,_e.setSnapshot=b;var it=f(e._source);if(!He(d,it)){it=a(e._source),He(tt,it)||(b(it),it=Ig(at),c.mutableReadLanes|=it&c.pendingLanes),it=c.mutableReadLanes,c.entangledLanes|=it;for(var $=c.entanglements,et=it;0<et;){var st=31-Vc(et),lt=1<<st;$[st]|=it,et&=~lt}}},[a,e,s]),h.useEffect(function(){return s(e._source,function(){var it=_e.getSnapshot,$=_e.setSnapshot;try{$(it(e._source));var et=Ig(at);c.mutableReadLanes|=et&c.pendingLanes}catch(st){$(function(){throw st})}})},[e,s]),He(nt,a)&&He(rt,e)&&He(j,s)||(o={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:tt},o.dispatch=b=Oh.bind(null,R,o),g.queue=o,g.baseQueue=null,tt=Mh(c,e,a),g.memoizedState=g.baseState=tt),tt}function Ph(o,e,a){var s=Ih();return Nh(s,o,e,a)}function Qh(o){var e=Hh();return typeof o=="function"&&(o=o()),e.memoizedState=e.baseState=o,o=e.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:o},o=o.dispatch=Oh.bind(null,R,o),[e.memoizedState,o]}function Rh(o,e,a,s){return o={tag:o,create:e,destroy:a,deps:s,next:null},e=R.updateQueue,e===null?(e={lastEffect:null},R.updateQueue=e,e.lastEffect=o.next=o):(a=e.lastEffect,a===null?e.lastEffect=o.next=o:(s=a.next,a.next=o,o.next=s,e.lastEffect=o)),o}function Sh(o){var e=Hh();return o={current:o},e.memoizedState=o}function Th(){return Ih().memoizedState}function Uh(o,e,a,s){var c=Hh();R.flags|=o,c.memoizedState=Rh(1|e,a,void 0,s===void 0?null:s)}function Vh(o,e,a,s){var c=Ih();s=s===void 0?null:s;var f=void 0;if(S!==null){var d=S.memoizedState;if(f=d.destroy,s!==null&&Bh(s,d.deps)){Rh(e,a,f,s);return}}R.flags|=o,c.memoizedState=Rh(1|e,a,f,s)}function Wh(o,e){return Uh(516,4,o,e)}function Xh(o,e){return Vh(516,4,o,e)}function Yh(o,e){return Vh(4,2,o,e)}function Zh(o,e){if(typeof e=="function")return o=o(),e(o),function(){e(null)};if(e!=null)return o=o(),e.current=o,function(){e.current=null}}function $h(o,e,a){return a=a!=null?a.concat([o]):null,Vh(4,2,Zh.bind(null,e,o),a)}function ai(){}function bi(o,e){var a=Ih();e=e===void 0?null:e;var s=a.memoizedState;return s!==null&&e!==null&&Bh(e,s[1])?s[0]:(a.memoizedState=[o,e],o)}function ci(o,e){var a=Ih();e=e===void 0?null:e;var s=a.memoizedState;return s!==null&&e!==null&&Bh(e,s[1])?s[0]:(o=o(),a.memoizedState=[o,e],o)}function di(o,e){var a=eg();gg(98>a?98:a,function(){o(!0)}),gg(97<a?97:a,function(){var s=wh.transition;wh.transition=1;try{o(!1),e()}finally{wh.transition=s}})}function Oh(o,e,a){var s=Hg(),c=Ig(o),f={lane:c,action:a,eagerReducer:null,eagerState:null,next:null},d=e.pending;if(d===null?f.next=f:(f.next=d.next,d.next=f),e.pending=f,d=o.alternate,o===R||d!==null&&d===R)zh=yh=!0;else{if(o.lanes===0&&(d===null||d.lanes===0)&&(d=e.lastRenderedReducer,d!==null))try{var h=e.lastRenderedState,g=d(h,a);if(f.eagerReducer=d,f.eagerState=g,He(g,h))return}catch{}finally{}Jg(o,c,s)}}var Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(o,e){return Hh().memoizedState=[o,e===void 0?null:e],o},useContext:vg,useEffect:Wh,useImperativeHandle:function(o,e,a){return a=a!=null?a.concat([o]):null,Uh(4,2,Zh.bind(null,e,o),a)},useLayoutEffect:function(o,e){return Uh(4,2,o,e)},useMemo:function(o,e){var a=Hh();return e=e===void 0?null:e,o=o(),a.memoizedState=[o,e],o},useReducer:function(o,e,a){var s=Hh();return e=a!==void 0?a(e):e,s.memoizedState=s.baseState=e,o=s.queue={pending:null,dispatch:null,lastRenderedReducer:o,lastRenderedState:e},o=o.dispatch=Oh.bind(null,R,o),[s.memoizedState,o]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(o){var e=Qh(o),a=e[0],s=e[1];return Wh(function(){var c=wh.transition;wh.transition=1;try{s(o)}finally{wh.transition=c}},[o]),a},useTransition:function(){var o=Qh(!1),e=o[0];return o=di.bind(null,o[1]),Sh(o),[o,e]},useMutableSource:function(o,e,a){var s=Hh();return s.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:o,subscribe:a},Nh(s,o,e,a)},useOpaqueIdentifier:function(){if(lh){var o=!1,e=uf(function(){throw o||(o=!0,a("r:"+(tf++).toString(36))),Error(y(355))}),a=Qh(e)[1];return(R.mode&2)===0&&(R.flags|=516,Rh(5,function(){a("r:"+(tf++).toString(36))},void 0,null)),e}return e="r:"+(tf++).toString(36),Qh(e),e},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(o){var e=Kh(Jh),a=e[0],s=e[1];return Xh(function(){var c=wh.transition;wh.transition=1;try{s(o)}finally{wh.transition=c}},[o]),a},useTransition:function(){var o=Kh(Jh)[0];return[Th().current,o]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(o){var e=Lh(Jh),a=e[0],s=e[1];return Xh(function(){var c=wh.transition;wh.transition=1;try{s(o)}finally{wh.transition=c}},[o]),a},useTransition:function(){var o=Lh(Jh)[0];return[Th().current,o]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(o,e,a,s){e.child=o===null?Zg(e,null,a,s):Yg(e,o.child,a,s)}function gi(o,e,a,s,c){a=a.render;var f=e.ref;return tg(e,c),s=Ch(o,e,a,s,f,c),o!==null&&!ug?(e.updateQueue=o.updateQueue,e.flags&=-517,o.lanes&=~c,hi(o,e,c)):(e.flags|=1,fi(o,e,s,c),e.child)}function ii(o,e,a,s,c,f){if(o===null){var d=a.type;return typeof d=="function"&&!ji(d)&&d.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(e.tag=15,e.type=d,ki(o,e,d,s,c,f)):(o=Vg(a.type,null,s,e,e.mode,f),o.ref=e.ref,o.return=e,e.child=o)}return d=o.child,(c&f)===0&&(c=d.memoizedProps,a=a.compare,a=a!==null?a:Je,a(c,s)&&o.ref===e.ref)?hi(o,e,f):(e.flags|=1,o=Tg(d,s),o.ref=e.ref,o.return=e,e.child=o)}function ki(o,e,a,s,c,f){if(o!==null&&Je(o.memoizedProps,s)&&o.ref===e.ref)if(ug=!1,(f&c)!==0)(o.flags&16384)!==0&&(ug=!0);else return e.lanes=o.lanes,hi(o,e,f);return li(o,e,a,s,f)}function mi(o,e,a){var s=e.pendingProps,c=s.children,f=o!==null?o.memoizedState:null;if(s.mode==="hidden"||s.mode==="unstable-defer-without-hiding")if((e.mode&4)===0)e.memoizedState={baseLanes:0},ni(e,a);else if((a&1073741824)!==0)e.memoizedState={baseLanes:0},ni(e,f!==null?f.baseLanes:a);else return o=f!==null?f.baseLanes|a:a,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:o},ni(e,o),null;else f!==null?(s=f.baseLanes|a,e.memoizedState=null):s=a,ni(e,s);return fi(o,e,c,a),e.child}function oi(o,e){var a=e.ref;(o===null&&a!==null||o!==null&&o.ref!==a)&&(e.flags|=128)}function li(o,e,a,s,c){var f=Ff(a)?Df:M.current;return f=Ef(e,f),tg(e,c),a=Ch(o,e,a,s,f,c),o!==null&&!ug?(e.updateQueue=o.updateQueue,e.flags&=-517,o.lanes&=~c,hi(o,e,c)):(e.flags|=1,fi(o,e,a,c),e.child)}function pi(o,e,a,s,c){if(Ff(a)){var f=!0;Jf(e)}else f=!1;if(tg(e,c),e.stateNode===null)o!==null&&(o.alternate=null,e.alternate=null,e.flags|=2),Mg(e,a,s),Og(e,a,s,c),s=!0;else if(o===null){var d=e.stateNode,h=e.memoizedProps;d.props=h;var g=d.context,b=a.contextType;typeof b=="object"&&b!==null?b=vg(b):(b=Ff(a)?Df:M.current,b=Ef(e,b));var tt=a.getDerivedStateFromProps,j=typeof tt=="function"||typeof d.getSnapshotBeforeUpdate=="function";j||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==s||g!==b)&&Ng(e,d,s,b),wg=!1;var _e=e.memoizedState;d.state=_e,Cg(e,s,d,c),g=e.memoizedState,h!==s||_e!==g||N.current||wg?(typeof tt=="function"&&(Gg(e,a,tt,s),g=e.memoizedState),(h=wg||Lg(e,a,h,s,_e,g,b))?(j||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4)):(typeof d.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=s,e.memoizedState=g),d.props=s,d.state=g,d.context=b,s=h):(typeof d.componentDidMount=="function"&&(e.flags|=4),s=!1)}else{d=e.stateNode,yg(o,e),h=e.memoizedProps,b=e.type===e.elementType?h:lg(e.type,h),d.props=b,j=e.pendingProps,_e=d.context,g=a.contextType,typeof g=="object"&&g!==null?g=vg(g):(g=Ff(a)?Df:M.current,g=Ef(e,g));var nt=a.getDerivedStateFromProps;(tt=typeof nt=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==j||_e!==g)&&Ng(e,d,s,g),wg=!1,_e=e.memoizedState,d.state=_e,Cg(e,s,d,c);var rt=e.memoizedState;h!==j||_e!==rt||N.current||wg?(typeof nt=="function"&&(Gg(e,a,nt,s),rt=e.memoizedState),(b=wg||Lg(e,a,b,s,_e,rt,g))?(tt||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,rt,g),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,rt,g)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof d.componentDidUpdate!="function"||h===o.memoizedProps&&_e===o.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===o.memoizedProps&&_e===o.memoizedState||(e.flags|=256),e.memoizedProps=s,e.memoizedState=rt),d.props=s,d.state=rt,d.context=g,s=b):(typeof d.componentDidUpdate!="function"||h===o.memoizedProps&&_e===o.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===o.memoizedProps&&_e===o.memoizedState||(e.flags|=256),s=!1)}return qi(o,e,a,s,f,c)}function qi(o,e,a,s,c,f){oi(o,e);var d=(e.flags&64)!==0;if(!s&&!d)return c&&Kf(e,a,!1),hi(o,e,f);s=e.stateNode,ei.current=e;var h=d&&typeof a.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,o!==null&&d?(e.child=Yg(e,o.child,null,f),e.child=Yg(e,null,h,f)):fi(o,e,h,f),e.memoizedState=s.state,c&&Kf(e,a,!0),e.child}function ri(o){var e=o.stateNode;e.pendingContext?Hf(o,e.pendingContext,e.pendingContext!==e.context):e.context&&Hf(o,e.context,!1),eh(o,e.containerInfo)}var si={dehydrated:null,retryLane:0};function ti(o,e,a){var s=e.pendingProps,c=P.current,f=!1,d;return(d=(e.flags&64)!==0)||(d=o!==null&&o.memoizedState===null?!1:(c&2)!==0),d?(f=!0,e.flags&=-65):o!==null&&o.memoizedState===null||s.fallback===void 0||s.unstable_avoidThisFallback===!0||(c|=1),I(P,c&1),o===null?(s.fallback!==void 0&&ph(e),o=s.children,c=s.fallback,f?(o=ui(e,o,c,a),e.child.memoizedState={baseLanes:a},e.memoizedState=si,o):typeof s.unstable_expectedLoadTime=="number"?(o=ui(e,o,c,a),e.child.memoizedState={baseLanes:a},e.memoizedState=si,e.lanes=33554432,o):(a=vi({mode:"visible",children:o},e.mode,a,null),a.return=e,e.child=a)):o.memoizedState!==null?f?(s=wi(o,e,s.children,s.fallback,a),f=e.child,c=o.child.memoizedState,f.memoizedState=c===null?{baseLanes:a}:{baseLanes:c.baseLanes|a},f.childLanes=o.childLanes&~a,e.memoizedState=si,s):(a=xi(o,e,s.children,a),e.memoizedState=null,a):f?(s=wi(o,e,s.children,s.fallback,a),f=e.child,c=o.child.memoizedState,f.memoizedState=c===null?{baseLanes:a}:{baseLanes:c.baseLanes|a},f.childLanes=o.childLanes&~a,e.memoizedState=si,s):(a=xi(o,e,s.children,a),e.memoizedState=null,a)}function ui(o,e,a,s){var c=o.mode,f=o.child;return e={mode:"hidden",children:e},(c&2)===0&&f!==null?(f.childLanes=0,f.pendingProps=e):f=vi(e,c,0,null),a=Xg(a,c,s,null),f.return=o,a.return=o,f.sibling=a,o.child=f,a}function xi(o,e,a,s){var c=o.child;return o=c.sibling,a=Tg(c,{mode:"visible",children:a}),(e.mode&2)===0&&(a.lanes=s),a.return=e,a.sibling=null,o!==null&&(o.nextEffect=null,o.flags=8,e.firstEffect=e.lastEffect=o),e.child=a}function wi(o,e,a,s,c){var f=e.mode,d=o.child;o=d.sibling;var h={mode:"hidden",children:a};return(f&2)===0&&e.child!==d?(a=e.child,a.childLanes=0,a.pendingProps=h,d=a.lastEffect,d!==null?(e.firstEffect=a.firstEffect,e.lastEffect=d,d.nextEffect=null):e.firstEffect=e.lastEffect=null):a=Tg(d,h),o!==null?s=Tg(o,s):(s=Xg(s,f,c,null),s.flags|=2),s.return=e,a.return=e,a.sibling=s,e.child=a,s}function yi(o,e){o.lanes|=e;var a=o.alternate;a!==null&&(a.lanes|=e),sg(o.return,e)}function zi(o,e,a,s,c,f){var d=o.memoizedState;d===null?o.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:c,lastEffect:f}:(d.isBackwards=e,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=a,d.tailMode=c,d.lastEffect=f)}function Ai(o,e,a){var s=e.pendingProps,c=s.revealOrder,f=s.tail;if(fi(o,e,s.children,a),s=P.current,(s&2)!==0)s=s&1|2,e.flags|=64;else{if(o!==null&&(o.flags&64)!==0)e:for(o=e.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&yi(o,a);else if(o.tag===19)yi(o,a);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}s&=1}if(I(P,s),(e.mode&2)===0)e.memoizedState=null;else switch(c){case"forwards":for(a=e.child,c=null;a!==null;)o=a.alternate,o!==null&&ih(o)===null&&(c=a),a=a.sibling;a=c,a===null?(c=e.child,e.child=null):(c=a.sibling,a.sibling=null),zi(e,!1,c,a,f,e.lastEffect);break;case"backwards":for(a=null,c=e.child,e.child=null;c!==null;){if(o=c.alternate,o!==null&&ih(o)===null){e.child=c;break}o=c.sibling,c.sibling=a,a=c,c=o}zi(e,!0,a,null,f,e.lastEffect);break;case"together":zi(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function hi(o,e,a){if(o!==null&&(e.dependencies=o.dependencies),Dg|=e.lanes,(a&e.childLanes)!==0){if(o!==null&&e.child!==o.child)throw Error(y(153));if(e.child!==null){for(o=e.child,a=Tg(o,o.pendingProps),e.child=a,a.return=e;o.sibling!==null;)o=o.sibling,a=a.sibling=Tg(o,o.pendingProps),a.return=e;a.sibling=null}return e.child}return null}var Bi,Ci,Di,Ei;Bi=function(o,e){for(var a=e.child;a!==null;){if(a.tag===5||a.tag===6)o.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Ci=function(){};Di=function(o,e,a,s){var c=o.memoizedProps;if(c!==s){o=e.stateNode,dh(ah.current);var f=null;switch(a){case"input":c=Ya(o,c),s=Ya(o,s),f=[];break;case"option":c=eb(o,c),s=eb(o,s),f=[];break;case"select":c=m({},c,{value:void 0}),s=m({},s,{value:void 0}),f=[];break;case"textarea":c=gb(o,c),s=gb(o,s),f=[];break;default:typeof c.onClick!="function"&&typeof s.onClick=="function"&&(o.onclick=jf)}vb(a,s);var d;a=null;for(b in c)if(!s.hasOwnProperty(b)&&c.hasOwnProperty(b)&&c[b]!=null)if(b==="style"){var h=c[b];for(d in h)h.hasOwnProperty(d)&&(a||(a={}),a[d]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(ca.hasOwnProperty(b)?f||(f=[]):(f=f||[]).push(b,null));for(b in s){var g=s[b];if(h=c!=null?c[b]:void 0,s.hasOwnProperty(b)&&g!==h&&(g!=null||h!=null))if(b==="style")if(h){for(d in h)!h.hasOwnProperty(d)||g&&g.hasOwnProperty(d)||(a||(a={}),a[d]="");for(d in g)g.hasOwnProperty(d)&&h[d]!==g[d]&&(a||(a={}),a[d]=g[d])}else a||(f||(f=[]),f.push(b,a)),a=g;else b==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,h=h?h.__html:void 0,g!=null&&h!==g&&(f=f||[]).push(b,g)):b==="children"?typeof g!="string"&&typeof g!="number"||(f=f||[]).push(b,""+g):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(ca.hasOwnProperty(b)?(g!=null&&b==="onScroll"&&G("scroll",o),f||h===g||(f=[])):typeof g=="object"&&g!==null&&g.$$typeof===Ga?g.toString():(f=f||[]).push(b,g))}a&&(f=f||[]).push("style",a);var b=f;(e.updateQueue=b)&&(e.flags|=4)}};Ei=function(o,e,a,s){a!==s&&(e.flags|=4)};function Fi(o,e){if(!lh)switch(o.tailMode){case"hidden":e=o.tail;for(var a=null;e!==null;)e.alternate!==null&&(a=e),e=e.sibling;a===null?o.tail=null:a.sibling=null;break;case"collapsed":a=o.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?e||o.tail===null?o.tail=null:o.tail.sibling=null:s.sibling=null}}function Gi(o,e,a){var s=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(e.type)&&Gf(),null;case 3:return fh(),H(N),H(M),uh(),s=e.stateNode,s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(o===null||o.child===null)&&(rh(e)?e.flags|=4:s.hydrate||(e.flags|=256)),Ci(e),null;case 5:hh(e);var c=dh(ch.current);if(a=e.type,o!==null&&e.stateNode!=null)Di(o,e,a,s,c),o.ref!==e.ref&&(e.flags|=128);else{if(!s){if(e.stateNode===null)throw Error(y(166));return null}if(o=dh(ah.current),rh(e)){s=e.stateNode,a=e.type;var f=e.memoizedProps;switch(s[wf]=e,s[xf]=f,a){case"dialog":G("cancel",s),G("close",s);break;case"iframe":case"object":case"embed":G("load",s);break;case"video":case"audio":for(o=0;o<Xe.length;o++)G(Xe[o],s);break;case"source":G("error",s);break;case"img":case"image":case"link":G("error",s),G("load",s);break;case"details":G("toggle",s);break;case"input":Za(s,f),G("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!f.multiple},G("invalid",s);break;case"textarea":hb(s,f),G("invalid",s)}vb(a,f),o=null;for(var d in f)f.hasOwnProperty(d)&&(c=f[d],d==="children"?typeof c=="string"?s.textContent!==c&&(o=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(o=["children",""+c]):ca.hasOwnProperty(d)&&c!=null&&d==="onScroll"&&G("scroll",s));switch(a){case"input":Va(s),cb(s,f,!0);break;case"textarea":Va(s),jb(s);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(s.onclick=jf)}s=o,e.updateQueue=s,s!==null&&(e.flags|=4)}else{switch(d=c.nodeType===9?c:c.ownerDocument,o===kb.html&&(o=lb(a)),o===kb.html?a==="script"?(o=d.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof s.is=="string"?o=d.createElement(a,{is:s.is}):(o=d.createElement(a),a==="select"&&(d=o,s.multiple?d.multiple=!0:s.size&&(d.size=s.size))):o=d.createElementNS(o,a),o[wf]=e,o[xf]=s,Bi(o,e,!1,!1),e.stateNode=o,d=wb(a,s),a){case"dialog":G("cancel",o),G("close",o),c=s;break;case"iframe":case"object":case"embed":G("load",o),c=s;break;case"video":case"audio":for(c=0;c<Xe.length;c++)G(Xe[c],o);c=s;break;case"source":G("error",o),c=s;break;case"img":case"image":case"link":G("error",o),G("load",o),c=s;break;case"details":G("toggle",o),c=s;break;case"input":Za(o,s),c=Ya(o,s),G("invalid",o);break;case"option":c=eb(o,s);break;case"select":o._wrapperState={wasMultiple:!!s.multiple},c=m({},s,{value:void 0}),G("invalid",o);break;case"textarea":hb(o,s),c=gb(o,s),G("invalid",o);break;default:c=s}vb(a,c);var h=c;for(f in h)if(h.hasOwnProperty(f)){var g=h[f];f==="style"?tb(o,g):f==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&ob(o,g)):f==="children"?typeof g=="string"?(a!=="textarea"||g!=="")&&pb(o,g):typeof g=="number"&&pb(o,""+g):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ca.hasOwnProperty(f)?g!=null&&f==="onScroll"&&G("scroll",o):g!=null&&qa(o,f,g,d))}switch(a){case"input":Va(o),cb(o,s,!1);break;case"textarea":Va(o),jb(o);break;case"option":s.value!=null&&o.setAttribute("value",""+Sa(s.value));break;case"select":o.multiple=!!s.multiple,f=s.value,f!=null?fb(o,!!s.multiple,f,!1):s.defaultValue!=null&&fb(o,!!s.multiple,s.defaultValue,!0);break;default:typeof c.onClick=="function"&&(o.onclick=jf)}mf(a,s)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(o&&e.stateNode!=null)Ei(o,e,o.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(y(166));a=dh(ch.current),dh(ah.current),rh(e)?(s=e.stateNode,a=e.memoizedProps,s[wf]=e,s.nodeValue!==a&&(e.flags|=4)):(s=(a.nodeType===9?a:a.ownerDocument).createTextNode(s),s[wf]=e,e.stateNode=s)}return null;case 13:return H(P),s=e.memoizedState,(e.flags&64)!==0?(e.lanes=a,e):(s=s!==null,a=!1,o===null?e.memoizedProps.fallback!==void 0&&rh(e):a=o.memoizedState!==null,s&&!a&&(e.mode&2)!==0&&(o===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(P.current&1)!==0?V===0&&(V=3):((V===0||V===3)&&(V=4),U===null||(Dg&134217727)===0&&(Hi&134217727)===0||Ii(U,W))),(s||a)&&(e.flags|=4),null);case 4:return fh(),Ci(e),o===null&&cf(e.stateNode.containerInfo),null;case 10:return rg(e),null;case 17:return Ff(e.type)&&Gf(),null;case 19:if(H(P),s=e.memoizedState,s===null)return null;if(f=(e.flags&64)!==0,d=s.rendering,d===null)if(f)Fi(s,!1);else{if(V!==0||o!==null&&(o.flags&64)!==0)for(o=e.child;o!==null;){if(d=ih(o),d!==null){for(e.flags|=64,Fi(s,!1),f=d.updateQueue,f!==null&&(e.updateQueue=f,e.flags|=4),s.lastEffect===null&&(e.firstEffect=null),e.lastEffect=s.lastEffect,s=a,a=e.child;a!==null;)f=a,o=s,f.flags&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,d=f.alternate,d===null?(f.childLanes=0,f.lanes=o,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=d.childLanes,f.lanes=d.lanes,f.child=d.child,f.memoizedProps=d.memoizedProps,f.memoizedState=d.memoizedState,f.updateQueue=d.updateQueue,f.type=d.type,o=d.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a=a.sibling;return I(P,P.current&1|2),e.child}o=o.sibling}s.tail!==null&&O()>Ji&&(e.flags|=64,f=!0,Fi(s,!1),e.lanes=33554432)}else{if(!f)if(o=ih(d),o!==null){if(e.flags|=64,f=!0,a=o.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),Fi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!d.alternate&&!lh)return e=e.lastEffect=s.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*O()-s.renderingStartTime>Ji&&a!==1073741824&&(e.flags|=64,f=!0,Fi(s,!1),e.lanes=33554432);s.isBackwards?(d.sibling=e.child,e.child=d):(a=s.last,a!==null?a.sibling=d:e.child=d,s.last=d)}return s.tail!==null?(a=s.tail,s.rendering=a,s.tail=a.sibling,s.lastEffect=e.lastEffect,s.renderingStartTime=O(),a.sibling=null,e=P.current,I(P,f?e&1|2:e&1),a):null;case 23:case 24:return Ki(),o!==null&&o.memoizedState!==null!=(e.memoizedState!==null)&&s.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(y(156,e.tag))}function Li(o){switch(o.tag){case 1:Ff(o.type)&&Gf();var e=o.flags;return e&4096?(o.flags=e&-4097|64,o):null;case 3:if(fh(),H(N),H(M),uh(),e=o.flags,(e&64)!==0)throw Error(y(285));return o.flags=e&-4097|64,o;case 5:return hh(o),null;case 13:return H(P),e=o.flags,e&4096?(o.flags=e&-4097|64,o):null;case 19:return H(P),null;case 4:return fh(),null;case 10:return rg(o),null;case 23:case 24:return Ki(),null;default:return null}}function Mi(o,e){try{var a="",s=e;do a+=Qa(s),s=s.return;while(s);var c=a}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:o,source:e,stack:c}}function Ni(o,e){try{console.error(e.value)}catch(a){setTimeout(function(){throw a})}}var Oi=typeof WeakMap=="function"?WeakMap:Map;function Pi(o,e,a){a=zg(-1,a),a.tag=3,a.payload={element:null};var s=e.value;return a.callback=function(){Qi||(Qi=!0,Ri=s),Ni(o,e)},a}function Si(o,e,a){a=zg(-1,a),a.tag=3;var s=o.type.getDerivedStateFromError;if(typeof s=="function"){var c=e.value;a.payload=function(){return Ni(o,e),s(c)}}var f=o.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){typeof s!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this),Ni(o,e));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),a}var Ui=typeof WeakSet=="function"?WeakSet:Set;function Vi(o){var e=o.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(a){Wi(o,a)}else e.current=null}function Xi(o,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&o!==null){var a=o.memoizedProps,s=o.memoizedState;o=e.stateNode,e=o.getSnapshotBeforeUpdate(e.elementType===e.type?a:lg(e.type,a),s),o.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&qf(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y(163))}function Yi(o,e,a){switch(a.tag){case 0:case 11:case 15:case 22:if(e=a.updateQueue,e=e!==null?e.lastEffect:null,e!==null){o=e=e.next;do{if((o.tag&3)===3){var s=o.create;o.destroy=s()}o=o.next}while(o!==e)}if(e=a.updateQueue,e=e!==null?e.lastEffect:null,e!==null){o=e=e.next;do{var c=o;s=c.next,c=c.tag,(c&4)!==0&&(c&1)!==0&&(Zi(a,o),$i(a,o)),o=s}while(o!==e)}return;case 1:o=a.stateNode,a.flags&4&&(e===null?o.componentDidMount():(s=a.elementType===a.type?e.memoizedProps:lg(a.type,e.memoizedProps),o.componentDidUpdate(s,e.memoizedState,o.__reactInternalSnapshotBeforeUpdate))),e=a.updateQueue,e!==null&&Eg(a,e,o);return;case 3:if(e=a.updateQueue,e!==null){if(o=null,a.child!==null)switch(a.child.tag){case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}Eg(a,e,o)}return;case 5:o=a.stateNode,e===null&&a.flags&4&&mf(a.type,a.memoizedProps)&&o.focus();return;case 6:return;case 4:return;case 12:return;case 13:a.memoizedState===null&&(a=a.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&Cc(a))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y(163))}function aj(o,e){for(var a=o;;){if(a.tag===5){var s=a.stateNode;if(e)s=s.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{s=a.stateNode;var c=a.memoizedProps.style;c=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=sb("display",c)}}else if(a.tag===6)a.stateNode.nodeValue=e?"":a.memoizedProps;else if((a.tag!==23&&a.tag!==24||a.memoizedState===null||a===o)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return;a=a.return}a.sibling.return=a.return,a=a.sibling}}function bj(o,e){if(Mf&&typeof Mf.onCommitFiberUnmount=="function")try{Mf.onCommitFiberUnmount(Lf,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(o=e.updateQueue,o!==null&&(o=o.lastEffect,o!==null)){var a=o=o.next;do{var s=a,c=s.destroy;if(s=s.tag,c!==void 0)if((s&4)!==0)Zi(e,a);else{s=e;try{c()}catch(f){Wi(s,f)}}a=a.next}while(a!==o)}break;case 1:if(Vi(e),o=e.stateNode,typeof o.componentWillUnmount=="function")try{o.props=e.memoizedProps,o.state=e.memoizedState,o.componentWillUnmount()}catch(f){Wi(e,f)}break;case 5:Vi(e);break;case 4:cj(o,e)}}function dj(o){o.alternate=null,o.child=null,o.dependencies=null,o.firstEffect=null,o.lastEffect=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.return=null,o.updateQueue=null}function ej(o){return o.tag===5||o.tag===3||o.tag===4}function fj(o){e:{for(var e=o.return;e!==null;){if(ej(e))break e;e=e.return}throw Error(y(160))}var a=e;switch(e=a.stateNode,a.tag){case 5:var s=!1;break;case 3:e=e.containerInfo,s=!0;break;case 4:e=e.containerInfo,s=!0;break;default:throw Error(y(161))}a.flags&16&&(pb(e,""),a.flags&=-17);e:t:for(a=o;;){for(;a.sibling===null;){if(a.return===null||ej(a.return)){a=null;break e}a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2)){a=a.stateNode;break e}}s?gj(o,a,e):hj(o,a,e)}function gj(o,e,a){var s=o.tag,c=s===5||s===6;if(c)o=c?o.stateNode:o.stateNode.instance,e?a.nodeType===8?a.parentNode.insertBefore(o,e):a.insertBefore(o,e):(a.nodeType===8?(e=a.parentNode,e.insertBefore(o,a)):(e=a,e.appendChild(o)),a=a._reactRootContainer,a!=null||e.onclick!==null||(e.onclick=jf));else if(s!==4&&(o=o.child,o!==null))for(gj(o,e,a),o=o.sibling;o!==null;)gj(o,e,a),o=o.sibling}function hj(o,e,a){var s=o.tag,c=s===5||s===6;if(c)o=c?o.stateNode:o.stateNode.instance,e?a.insertBefore(o,e):a.appendChild(o);else if(s!==4&&(o=o.child,o!==null))for(hj(o,e,a),o=o.sibling;o!==null;)hj(o,e,a),o=o.sibling}function cj(o,e){for(var a=e,s=!1,c,f;;){if(!s){s=a.return;e:for(;;){if(s===null)throw Error(y(160));switch(c=s.stateNode,s.tag){case 5:f=!1;break e;case 3:c=c.containerInfo,f=!0;break e;case 4:c=c.containerInfo,f=!0;break e}s=s.return}s=!0}if(a.tag===5||a.tag===6){e:for(var d=o,h=a,g=h;;)if(bj(d,g),g.child!==null&&g.tag!==4)g.child.return=g,g=g.child;else{if(g===h)break e;for(;g.sibling===null;){if(g.return===null||g.return===h)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}f?(d=c,h=a.stateNode,d.nodeType===8?d.parentNode.removeChild(h):d.removeChild(h)):c.removeChild(a.stateNode)}else if(a.tag===4){if(a.child!==null){c=a.stateNode.containerInfo,f=!0,a.child.return=a,a=a.child;continue}}else if(bj(o,a),a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return;a=a.return,a.tag===4&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function ij(o,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var a=e.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var s=a=a.next;do(s.tag&3)===3&&(o=s.destroy,s.destroy=void 0,o!==void 0&&o()),s=s.next;while(s!==a)}return;case 1:return;case 5:if(a=e.stateNode,a!=null){s=e.memoizedProps;var c=o!==null?o.memoizedProps:s;o=e.type;var f=e.updateQueue;if(e.updateQueue=null,f!==null){for(a[xf]=s,o==="input"&&s.type==="radio"&&s.name!=null&&$a(a,s),wb(o,c),e=wb(o,s),c=0;c<f.length;c+=2){var d=f[c],h=f[c+1];d==="style"?tb(a,h):d==="dangerouslySetInnerHTML"?ob(a,h):d==="children"?pb(a,h):qa(a,d,h,e)}switch(o){case"input":ab(a,s);break;case"textarea":ib(a,s);break;case"select":o=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!s.multiple,f=s.value,f!=null?fb(a,!!s.multiple,f,!1):o!==!!s.multiple&&(s.defaultValue!=null?fb(a,!!s.multiple,s.defaultValue,!0):fb(a,!!s.multiple,s.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(y(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:a=e.stateNode,a.hydrate&&(a.hydrate=!1,Cc(a.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(jj=O(),aj(e.child,!0)),kj(e);return;case 19:kj(e);return;case 17:return;case 23:case 24:aj(e,e.memoizedState!==null);return}throw Error(y(163))}function kj(o){var e=o.updateQueue;if(e!==null){o.updateQueue=null;var a=o.stateNode;a===null&&(a=o.stateNode=new Ui),e.forEach(function(s){var c=lj.bind(null,o,s);a.has(s)||(a.add(s),s.then(c,c))})}}function mj(o,e){return o!==null&&(o=o.memoizedState,o===null||o.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=1/0;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return(X&48)!==0?O():Fj!==-1?Fj:Fj=O()}function Ig(o){if(o=o.mode,(o&2)===0)return 1;if((o&4)===0)return eg()===99?1:2;if(Gj===0&&(Gj=tj),kg.transition!==0){Hj!==0&&(Hj=vj!==null?vj.pendingLanes:0),o=Gj;var e=4186112&~Hj;return e&=-e,e===0&&(o=4186112&~o,e=o&-o,e===0&&(e=8192)),e}return o=eg(),(X&4)!==0&&o===98?o=Xc(12,Gj):(o=Sc(o),o=Xc(o,Gj)),o}function Jg(o,e,a){if(50<Dj)throw Dj=0,Ej=null,Error(y(185));if(o=Kj(o,e),o===null)return null;$c(o,e,a),o===U&&(Hi|=e,V===4&&Ii(o,W));var s=eg();e===1?(X&8)!==0&&(X&48)===0?Lj(o):(Mj(o,a),X===0&&(wj(),ig())):((X&4)===0||s!==98&&s!==99||(Cj===null?Cj=new Set([o]):Cj.add(o)),Mj(o,a)),vj=o}function Kj(o,e){o.lanes|=e;var a=o.alternate;for(a!==null&&(a.lanes|=e),a=o,o=o.return;o!==null;)o.childLanes|=e,a=o.alternate,a!==null&&(a.childLanes|=e),a=o,o=o.return;return a.tag===3?a.stateNode:null}function Mj(o,e){for(var a=o.callbackNode,s=o.suspendedLanes,c=o.pingedLanes,f=o.expirationTimes,d=o.pendingLanes;0<d;){var h=31-Vc(d),g=1<<h,b=f[h];if(b===-1){if((g&s)===0||(g&c)!==0){b=e,Rc(g);var tt=F;f[h]=10<=tt?b+250:6<=tt?b+5e3:-1}}else b<=e&&(o.expiredLanes|=g);d&=~g}if(s=Uc(o,o===U?W:0),e=F,s===0)a!==null&&(a!==Zf&&Pf(a),o.callbackNode=null,o.callbackPriority=0);else{if(a!==null){if(o.callbackPriority===e)return;a!==Zf&&Pf(a)}e===15?(a=Lj.bind(null,o),ag===null?(ag=[a],bg=Of(Uf,jg)):ag.push(a),a=Zf):e===14?a=hg(99,Lj.bind(null,o)):(a=Tc(e),a=hg(a,Nj.bind(null,o))),o.callbackPriority=e,o.callbackNode=a}}function Nj(o){if(Fj=-1,Hj=Gj=0,(X&48)!==0)throw Error(y(327));var e=o.callbackNode;if(Oj()&&o.callbackNode!==e)return null;var a=Uc(o,o===U?W:0);if(a===0)return null;var s=a,c=X;X|=16;var f=Pj();(U!==o||W!==s)&&(wj(),Qj(o,s));do try{Rj();break}catch(h){Sj(o,h)}while(1);if(qg(),oj.current=f,X=c,Y!==null?s=0:(U=null,W=0,s=V),(tj&Hi)!==0)Qj(o,0);else if(s!==0){if(s===2&&(X|=64,o.hydrate&&(o.hydrate=!1,qf(o.containerInfo)),a=Wc(o),a!==0&&(s=Tj(o,a))),s===1)throw e=sj,Qj(o,0),Ii(o,a),Mj(o,O()),e;switch(o.finishedWork=o.current.alternate,o.finishedLanes=a,s){case 0:case 1:throw Error(y(345));case 2:Uj(o);break;case 3:if(Ii(o,a),(a&62914560)===a&&(s=jj+500-O(),10<s)){if(Uc(o,0)!==0)break;if(c=o.suspendedLanes,(c&a)!==a){Hg(),o.pingedLanes|=o.suspendedLanes&c;break}o.timeoutHandle=of(Uj.bind(null,o),s);break}Uj(o);break;case 4:if(Ii(o,a),(a&4186112)===a)break;for(s=o.eventTimes,c=-1;0<a;){var d=31-Vc(a);f=1<<d,d=s[d],d>c&&(c=d),a&=~f}if(a=c,a=O()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*nj(a/1960))-a,10<a){o.timeoutHandle=of(Uj.bind(null,o),a);break}Uj(o);break;case 5:Uj(o);break;default:throw Error(y(329))}}return Mj(o,O()),o.callbackNode===e?Nj.bind(null,o):null}function Ii(o,e){for(e&=~uj,e&=~Hi,o.suspendedLanes|=e,o.pingedLanes&=~e,o=o.expirationTimes;0<e;){var a=31-Vc(e),s=1<<a;o[a]=-1,e&=~s}}function Lj(o){if((X&48)!==0)throw Error(y(327));if(Oj(),o===U&&(o.expiredLanes&W)!==0){var e=W,a=Tj(o,e);(tj&Hi)!==0&&(e=Uc(o,e),a=Tj(o,e))}else e=Uc(o,0),a=Tj(o,e);if(o.tag!==0&&a===2&&(X|=64,o.hydrate&&(o.hydrate=!1,qf(o.containerInfo)),e=Wc(o),e!==0&&(a=Tj(o,e))),a===1)throw a=sj,Qj(o,0),Ii(o,e),Mj(o,O()),a;return o.finishedWork=o.current.alternate,o.finishedLanes=e,Uj(o),Mj(o,O()),null}function Vj(){if(Cj!==null){var o=Cj;Cj=null,o.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Mj(e,O())})}ig()}function Wj(o,e){var a=X;X|=1;try{return o(e)}finally{X=a,X===0&&(wj(),ig())}}function Xj(o,e){var a=X;X&=-2,X|=8;try{return o(e)}finally{X=a,X===0&&(wj(),ig())}}function ni(o,e){I(rj,qj),qj|=e,tj|=e}function Ki(){qj=rj.current,H(rj)}function Qj(o,e){o.finishedWork=null,o.finishedLanes=0;var a=o.timeoutHandle;if(a!==-1&&(o.timeoutHandle=-1,pf(a)),Y!==null)for(a=Y.return;a!==null;){var s=a;switch(s.tag){case 1:s=s.type.childContextTypes,s!=null&&Gf();break;case 3:fh(),H(N),H(M),uh();break;case 5:hh(s);break;case 4:fh();break;case 13:H(P);break;case 19:H(P);break;case 10:rg(s);break;case 23:case 24:Ki()}a=a.return}U=o,Y=Tg(o.current,null),W=qj=tj=e,V=0,sj=null,uj=Hi=Dg=0}function Sj(o,e){do{var a=Y;try{if(qg(),vh.current=Gh,yh){for(var s=R.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}yh=!1}if(xh=0,T=S=R=null,zh=!1,pj.current=null,a===null||a.return===null){V=1,sj=e,Y=null;break}e:{var f=o,d=a.return,h=a,g=e;if(e=W,h.flags|=2048,h.firstEffect=h.lastEffect=null,g!==null&&typeof g=="object"&&typeof g.then=="function"){var b=g;if((h.mode&2)===0){var tt=h.alternate;tt?(h.updateQueue=tt.updateQueue,h.memoizedState=tt.memoizedState,h.lanes=tt.lanes):(h.updateQueue=null,h.memoizedState=null)}var j=(P.current&1)!==0,_e=d;do{var nt;if(nt=_e.tag===13){var rt=_e.memoizedState;if(rt!==null)nt=rt.dehydrated!==null;else{var at=_e.memoizedProps;nt=at.fallback===void 0?!1:at.unstable_avoidThisFallback!==!0?!0:!j}}if(nt){var it=_e.updateQueue;if(it===null){var $=new Set;$.add(b),_e.updateQueue=$}else it.add(b);if((_e.mode&2)===0){if(_e.flags|=64,h.flags|=16384,h.flags&=-2981,h.tag===1)if(h.alternate===null)h.tag=17;else{var et=zg(-1,1);et.tag=2,Ag(h,et)}h.lanes|=1;break e}g=void 0,h=e;var st=f.pingCache;if(st===null?(st=f.pingCache=new Oi,g=new Set,st.set(b,g)):(g=st.get(b),g===void 0&&(g=new Set,st.set(b,g))),!g.has(h)){g.add(h);var lt=Yj.bind(null,f,b,h);b.then(lt,lt)}_e.flags|=4096,_e.lanes=e;break e}_e=_e.return}while(_e!==null);g=Error((Ra(h.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}V!==5&&(V=2),g=Mi(g,h),_e=d;do{switch(_e.tag){case 3:f=g,_e.flags|=4096,e&=-e,_e.lanes|=e;var ct=Pi(_e,f,e);Bg(_e,ct);break e;case 1:f=g;var ut=_e.type,ht=_e.stateNode;if((_e.flags&64)===0&&(typeof ut.getDerivedStateFromError=="function"||ht!==null&&typeof ht.componentDidCatch=="function"&&(Ti===null||!Ti.has(ht)))){_e.flags|=4096,e&=-e,_e.lanes|=e;var pt=Si(_e,f,e);Bg(_e,pt);break e}}_e=_e.return}while(_e!==null)}Zj(a)}catch(mt){e=mt,Y===a&&a!==null&&(Y=a=a.return);continue}break}while(1)}function Pj(){var o=oj.current;return oj.current=Gh,o===null?Gh:o}function Tj(o,e){var a=X;X|=16;var s=Pj();U===o&&W===e||Qj(o,e);do try{ak();break}catch(c){Sj(o,c)}while(1);if(qg(),X=a,oj.current=s,Y!==null)throw Error(y(261));return U=null,W=0,V}function ak(){for(;Y!==null;)bk(Y)}function Rj(){for(;Y!==null&&!Qf();)bk(Y)}function bk(o){var e=ck(o.alternate,o,qj);o.memoizedProps=o.pendingProps,e===null?Zj(o):Y=e,pj.current=null}function Zj(o){var e=o;do{var a=e.alternate;if(o=e.return,(e.flags&2048)===0){if(a=Gi(a,e,qj),a!==null){Y=a;return}if(a=e,a.tag!==24&&a.tag!==23||a.memoizedState===null||(qj&1073741824)!==0||(a.mode&4)===0){for(var s=0,c=a.child;c!==null;)s|=c.lanes|c.childLanes,c=c.sibling;a.childLanes=s}o!==null&&(o.flags&2048)===0&&(o.firstEffect===null&&(o.firstEffect=e.firstEffect),e.lastEffect!==null&&(o.lastEffect!==null&&(o.lastEffect.nextEffect=e.firstEffect),o.lastEffect=e.lastEffect),1<e.flags&&(o.lastEffect!==null?o.lastEffect.nextEffect=e:o.firstEffect=e,o.lastEffect=e))}else{if(a=Li(e),a!==null){a.flags&=2047,Y=a;return}o!==null&&(o.firstEffect=o.lastEffect=null,o.flags|=2048)}if(e=e.sibling,e!==null){Y=e;return}Y=e=o}while(e!==null);V===0&&(V=5)}function Uj(o){var e=eg();return gg(99,dk.bind(null,o,e)),null}function dk(o,e){do Oj();while(yj!==null);if((X&48)!==0)throw Error(y(327));var a=o.finishedWork;if(a===null)return null;if(o.finishedWork=null,o.finishedLanes=0,a===o.current)throw Error(y(177));o.callbackNode=null;var s=a.lanes|a.childLanes,c=s,f=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;for(var d=o.eventTimes,h=o.expirationTimes;0<f;){var g=31-Vc(f),b=1<<g;c[g]=0,d[g]=-1,h[g]=-1,f&=~b}if(Cj!==null&&(s&24)===0&&Cj.has(o)&&Cj.delete(o),o===U&&(Y=U=null,W=0),1<a.flags?a.lastEffect!==null?(a.lastEffect.nextEffect=a,s=a.firstEffect):s=a:s=a.firstEffect,s!==null){if(c=X,X|=32,pj.current=null,kf=fd,d=Ne(),Oe(d)){if("selectionStart"in d)h={start:d.selectionStart,end:d.selectionEnd};else e:if(h=(h=d.ownerDocument)&&h.defaultView||window,(b=h.getSelection&&h.getSelection())&&b.rangeCount!==0){h=b.anchorNode,f=b.anchorOffset,g=b.focusNode,b=b.focusOffset;try{h.nodeType,g.nodeType}catch{h=null;break e}var tt=0,j=-1,_e=-1,nt=0,rt=0,at=d,it=null;t:for(;;){for(var $;at!==h||f!==0&&at.nodeType!==3||(j=tt+f),at!==g||b!==0&&at.nodeType!==3||(_e=tt+b),at.nodeType===3&&(tt+=at.nodeValue.length),($=at.firstChild)!==null;)it=at,at=$;for(;;){if(at===d)break t;if(it===h&&++nt===f&&(j=tt),it===g&&++rt===b&&(_e=tt),($=at.nextSibling)!==null)break;at=it,it=at.parentNode}at=$}h=j===-1||_e===-1?null:{start:j,end:_e}}else h=null;h=h||{start:0,end:0}}else h=null;lf={focusedElem:d,selectionRange:h},fd=!1,Ij=null,Jj=!1,Z=s;do try{ek()}catch(mt){if(Z===null)throw Error(y(330));Wi(Z,mt),Z=Z.nextEffect}while(Z!==null);Ij=null,Z=s;do try{for(d=o;Z!==null;){var et=Z.flags;if(et&16&&pb(Z.stateNode,""),et&128){var st=Z.alternate;if(st!==null){var lt=st.ref;lt!==null&&(typeof lt=="function"?lt(null):lt.current=null)}}switch(et&1038){case 2:fj(Z),Z.flags&=-3;break;case 6:fj(Z),Z.flags&=-3,ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025,ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:h=Z,cj(d,h);var ct=h.alternate;dj(h),ct!==null&&dj(ct)}Z=Z.nextEffect}}catch(mt){if(Z===null)throw Error(y(330));Wi(Z,mt),Z=Z.nextEffect}while(Z!==null);if(lt=lf,st=Ne(),et=lt.focusedElem,d=lt.selectionRange,st!==et&&et&&et.ownerDocument&&Me(et.ownerDocument.documentElement,et)){for(d!==null&&Oe(et)&&(st=d.start,lt=d.end,lt===void 0&&(lt=st),"selectionStart"in et?(et.selectionStart=st,et.selectionEnd=Math.min(lt,et.value.length)):(lt=(st=et.ownerDocument||document)&&st.defaultView||window,lt.getSelection&&(lt=lt.getSelection(),h=et.textContent.length,ct=Math.min(d.start,h),d=d.end===void 0?ct:Math.min(d.end,h),!lt.extend&&ct>d&&(h=d,d=ct,ct=h),h=Le(et,ct),f=Le(et,d),h&&f&&(lt.rangeCount!==1||lt.anchorNode!==h.node||lt.anchorOffset!==h.offset||lt.focusNode!==f.node||lt.focusOffset!==f.offset)&&(st=st.createRange(),st.setStart(h.node,h.offset),lt.removeAllRanges(),ct>d?(lt.addRange(st),lt.extend(f.node,f.offset)):(st.setEnd(f.node,f.offset),lt.addRange(st)))))),st=[],lt=et;lt=lt.parentNode;)lt.nodeType===1&&st.push({element:lt,left:lt.scrollLeft,top:lt.scrollTop});for(typeof et.focus=="function"&&et.focus(),et=0;et<st.length;et++)lt=st[et],lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}fd=!!kf,lf=kf=null,o.current=a,Z=s;do try{for(et=o;Z!==null;){var ut=Z.flags;if(ut&36&&Yi(et,Z.alternate,Z),ut&128){st=void 0;var ht=Z.ref;if(ht!==null){var pt=Z.stateNode;switch(Z.tag){case 5:st=pt;break;default:st=pt}typeof ht=="function"?ht(st):ht.current=st}}Z=Z.nextEffect}}catch(mt){if(Z===null)throw Error(y(330));Wi(Z,mt),Z=Z.nextEffect}while(Z!==null);Z=null,$f(),X=c}else o.current=a;if(xj)xj=!1,yj=o,zj=e;else for(Z=s;Z!==null;)e=Z.nextEffect,Z.nextEffect=null,Z.flags&8&&(ut=Z,ut.sibling=null,ut.stateNode=null),Z=e;if(s=o.pendingLanes,s===0&&(Ti=null),s===1?o===Ej?Dj++:(Dj=0,Ej=o):Dj=0,a=a.stateNode,Mf&&typeof Mf.onCommitFiberRoot=="function")try{Mf.onCommitFiberRoot(Lf,a,void 0,(a.current.flags&64)===64)}catch{}if(Mj(o,O()),Qi)throw Qi=!1,o=Ri,Ri=null,o;return(X&8)!==0||ig(),null}function ek(){for(;Z!==null;){var o=Z.alternate;Jj||Ij===null||((Z.flags&8)!==0?dc(Z,Ij)&&(Jj=!0):Z.tag===13&&mj(o,Z)&&dc(Z,Ij)&&(Jj=!0));var e=Z.flags;(e&256)!==0&&Xi(o,Z),(e&512)===0||xj||(xj=!0,hg(97,function(){return Oj(),null})),Z=Z.nextEffect}}function Oj(){if(zj!==90){var o=97<zj?97:zj;return zj=90,gg(o,fk)}return!1}function $i(o,e){Aj.push(e,o),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function Zi(o,e){Bj.push(e,o),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function fk(){if(yj===null)return!1;var o=yj;if(yj=null,(X&48)!==0)throw Error(y(331));var e=X;X|=32;var a=Bj;Bj=[];for(var s=0;s<a.length;s+=2){var c=a[s],f=a[s+1],d=c.destroy;if(c.destroy=void 0,typeof d=="function")try{d()}catch(g){if(f===null)throw Error(y(330));Wi(f,g)}}for(a=Aj,Aj=[],s=0;s<a.length;s+=2){c=a[s],f=a[s+1];try{var h=c.create;c.destroy=h()}catch(g){if(f===null)throw Error(y(330));Wi(f,g)}}for(h=o.current.firstEffect;h!==null;)o=h.nextEffect,h.nextEffect=null,h.flags&8&&(h.sibling=null,h.stateNode=null),h=o;return X=e,ig(),!0}function gk(o,e,a){e=Mi(a,e),e=Pi(o,e,1),Ag(o,e),e=Hg(),o=Kj(o,1),o!==null&&($c(o,1,e),Mj(o,e))}function Wi(o,e){if(o.tag===3)gk(o,o,e);else for(var a=o.return;a!==null;){if(a.tag===3){gk(a,o,e);break}else if(a.tag===1){var s=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ti===null||!Ti.has(s))){o=Mi(e,o);var c=Si(a,o,1);if(Ag(a,c),c=Hg(),a=Kj(a,1),a!==null)$c(a,1,c),Mj(a,c);else if(typeof s.componentDidCatch=="function"&&(Ti===null||!Ti.has(s)))try{s.componentDidCatch(e,o)}catch{}break}}a=a.return}}function Yj(o,e,a){var s=o.pingCache;s!==null&&s.delete(e),e=Hg(),o.pingedLanes|=o.suspendedLanes&a,U===o&&(W&a)===a&&(V===4||V===3&&(W&62914560)===W&&500>O()-jj?Qj(o,0):uj|=a),Mj(o,e)}function lj(o,e){var a=o.stateNode;a!==null&&a.delete(e),e=0,e===0&&(e=o.mode,(e&2)===0?e=1:(e&4)===0?e=eg()===99?1:2:(Gj===0&&(Gj=tj),e=Yc(62914560&~Gj),e===0&&(e=4194304))),a=Hg(),o=Kj(o,e),o!==null&&($c(o,e,a),Mj(o,a))}var ck;ck=function(o,e,a){var s=e.lanes;if(o!==null)if(o.memoizedProps!==e.pendingProps||N.current)ug=!0;else if((a&s)!==0)ug=(o.flags&16384)!==0;else{switch(ug=!1,e.tag){case 3:ri(e),sh();break;case 5:gh(e);break;case 1:Ff(e.type)&&Jf(e);break;case 4:eh(e,e.stateNode.containerInfo);break;case 10:s=e.memoizedProps.value;var c=e.type._context;I(mg,c._currentValue),c._currentValue=s;break;case 13:if(e.memoizedState!==null)return(a&e.child.childLanes)!==0?ti(o,e,a):(I(P,P.current&1),e=hi(o,e,a),e!==null?e.sibling:null);I(P,P.current&1);break;case 19:if(s=(a&e.childLanes)!==0,(o.flags&64)!==0){if(s)return Ai(o,e,a);e.flags|=64}if(c=e.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),I(P,P.current),s)break;return null;case 23:case 24:return e.lanes=0,mi(o,e,a)}return hi(o,e,a)}else ug=!1;switch(e.lanes=0,e.tag){case 2:if(s=e.type,o!==null&&(o.alternate=null,e.alternate=null,e.flags|=2),o=e.pendingProps,c=Ef(e,M.current),tg(e,a),c=Ch(null,e,s,o,c,a),e.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ff(s)){var f=!0;Jf(e)}else f=!1;e.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,xg(e);var d=s.getDerivedStateFromProps;typeof d=="function"&&Gg(e,s,d,o),c.updater=Kg,e.stateNode=c,c._reactInternals=e,Og(e,s,o,a),e=qi(null,e,s,!0,f,a)}else e.tag=0,fi(null,e,c,a),e=e.child;return e;case 16:c=e.elementType;e:{switch(o!==null&&(o.alternate=null,e.alternate=null,e.flags|=2),o=e.pendingProps,f=c._init,c=f(c._payload),e.type=c,f=e.tag=hk(c),o=lg(c,o),f){case 0:e=li(null,e,c,o,a);break e;case 1:e=pi(null,e,c,o,a);break e;case 11:e=gi(null,e,c,o,a);break e;case 14:e=ii(null,e,c,lg(c.type,o),s,a);break e}throw Error(y(306,c,""))}return e;case 0:return s=e.type,c=e.pendingProps,c=e.elementType===s?c:lg(s,c),li(o,e,s,c,a);case 1:return s=e.type,c=e.pendingProps,c=e.elementType===s?c:lg(s,c),pi(o,e,s,c,a);case 3:if(ri(e),s=e.updateQueue,o===null||s===null)throw Error(y(282));if(s=e.pendingProps,c=e.memoizedState,c=c!==null?c.element:null,yg(o,e),Cg(e,s,null,a),s=e.memoizedState.element,s===c)sh(),e=hi(o,e,a);else{if(c=e.stateNode,(f=c.hydrate)&&(kh=rf(e.stateNode.containerInfo.firstChild),jh=e,f=lh=!0),f){if(o=c.mutableSourceEagerHydrationData,o!=null)for(c=0;c<o.length;c+=2)f=o[c],f._workInProgressVersionPrimary=o[c+1],th.push(f);for(a=Zg(e,null,s,a),e.child=a;a;)a.flags=a.flags&-3|1024,a=a.sibling}else fi(o,e,s,a),sh();e=e.child}return e;case 5:return gh(e),o===null&&ph(e),s=e.type,c=e.pendingProps,f=o!==null?o.memoizedProps:null,d=c.children,nf(s,c)?d=null:f!==null&&nf(s,f)&&(e.flags|=16),oi(o,e),fi(o,e,d,a),e.child;case 6:return o===null&&ph(e),null;case 13:return ti(o,e,a);case 4:return eh(e,e.stateNode.containerInfo),s=e.pendingProps,o===null?e.child=Yg(e,null,s,a):fi(o,e,s,a),e.child;case 11:return s=e.type,c=e.pendingProps,c=e.elementType===s?c:lg(s,c),gi(o,e,s,c,a);case 7:return fi(o,e,e.pendingProps,a),e.child;case 8:return fi(o,e,e.pendingProps.children,a),e.child;case 12:return fi(o,e,e.pendingProps.children,a),e.child;case 10:e:{s=e.type._context,c=e.pendingProps,d=e.memoizedProps,f=c.value;var h=e.type._context;if(I(mg,h._currentValue),h._currentValue=f,d!==null)if(h=d.value,f=He(h,f)?0:(typeof s._calculateChangedBits=="function"?s._calculateChangedBits(h,f):1073741823)|0,f===0){if(d.children===c.children&&!N.current){e=hi(o,e,a);break e}}else for(h=e.child,h!==null&&(h.return=e);h!==null;){var g=h.dependencies;if(g!==null){d=h.child;for(var b=g.firstContext;b!==null;){if(b.context===s&&(b.observedBits&f)!==0){h.tag===1&&(b=zg(-1,a&-a),b.tag=2,Ag(h,b)),h.lanes|=a,b=h.alternate,b!==null&&(b.lanes|=a),sg(h.return,a),g.lanes|=a;break}b=b.next}}else d=h.tag===10&&h.type===e.type?null:h.child;if(d!==null)d.return=h;else for(d=h;d!==null;){if(d===e){d=null;break}if(h=d.sibling,h!==null){h.return=d.return,d=h;break}d=d.return}h=d}fi(o,e,c.children,a),e=e.child}return e;case 9:return c=e.type,f=e.pendingProps,s=f.children,tg(e,a),c=vg(c,f.unstable_observedBits),s=s(c),e.flags|=1,fi(o,e,s,a),e.child;case 14:return c=e.type,f=lg(c,e.pendingProps),f=lg(c.type,f),ii(o,e,c,f,s,a);case 15:return ki(o,e,e.type,e.pendingProps,s,a);case 17:return s=e.type,c=e.pendingProps,c=e.elementType===s?c:lg(s,c),o!==null&&(o.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Ff(s)?(o=!0,Jf(e)):o=!1,tg(e,a),Mg(e,s,c),Og(e,s,c,a),qi(null,e,s,!0,o,a);case 19:return Ai(o,e,a);case 23:return mi(o,e,a);case 24:return mi(o,e,a)}throw Error(y(156,e.tag))};function ik(o,e,a,s){this.tag=o,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function nh(o,e,a,s){return new ik(o,e,a,s)}function ji(o){return o=o.prototype,!(!o||!o.isReactComponent)}function hk(o){if(typeof o=="function")return ji(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Aa)return 11;if(o===Da)return 14}return 2}function Tg(o,e){var a=o.alternate;return a===null?(a=nh(o.tag,e,o.key,o.mode),a.elementType=o.elementType,a.type=o.type,a.stateNode=o.stateNode,a.alternate=o,o.alternate=a):(a.pendingProps=e,a.type=o.type,a.flags=0,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null),a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},a.sibling=o.sibling,a.index=o.index,a.ref=o.ref,a}function Vg(o,e,a,s,c,f){var d=2;if(s=o,typeof o=="function")ji(o)&&(d=1);else if(typeof o=="string")d=5;else e:switch(o){case ua:return Xg(a.children,c,f,e);case Ha:d=8,c|=16;break;case wa:d=8,c|=1;break;case xa:return o=nh(12,a,e,c|8),o.elementType=xa,o.type=xa,o.lanes=f,o;case Ba:return o=nh(13,a,e,c),o.type=Ba,o.elementType=Ba,o.lanes=f,o;case Ca:return o=nh(19,a,e,c),o.elementType=Ca,o.lanes=f,o;case Ia:return vi(a,c,f,e);case Ja:return o=nh(24,a,e,c),o.elementType=Ja,o.lanes=f,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case ya:d=10;break e;case za:d=9;break e;case Aa:d=11;break e;case Da:d=14;break e;case Ea:d=16,s=null;break e;case Fa:d=22;break e}throw Error(y(130,o==null?o:typeof o,""))}return e=nh(d,a,e,c),e.elementType=o,e.type=s,e.lanes=f,e}function Xg(o,e,a,s){return o=nh(7,o,s,e),o.lanes=a,o}function vi(o,e,a,s){return o=nh(23,o,s,e),o.elementType=Ia,o.lanes=a,o}function Ug(o,e,a){return o=nh(6,o,null,e),o.lanes=a,o}function Wg(o,e,a){return e=nh(4,o.children!==null?o.children:[],o.key,e),e.lanes=a,e.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},e}function jk(o,e,a){this.tag=e,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=a,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.mutableSourceEagerHydrationData=null}function kk(o,e,a){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:s==null?null:""+s,children:o,containerInfo:e,implementation:a}}function lk(o,e,a,s){var c=e.current,f=Hg(),d=Ig(c);e:if(a){a=a._reactInternals;t:{if(Zb(a)!==a||a.tag!==1)throw Error(y(170));var h=a;do{switch(h.tag){case 3:h=h.stateNode.context;break t;case 1:if(Ff(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break t}}h=h.return}while(h!==null);throw Error(y(171))}if(a.tag===1){var g=a.type;if(Ff(g)){a=If(a,g,h);break e}}a=h}else a=Cf;return e.context===null?e.context=a:e.pendingContext=a,e=zg(f,d),e.payload={element:o},s=s===void 0?null:s,s!==null&&(e.callback=s),Ag(c,e),Jg(c,d,f),d}function mk(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function nk(o,e){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var a=o.retryLane;o.retryLane=a!==0&&a<e?a:e}}function ok(o,e){nk(o,e),(o=o.alternate)&&nk(o,e)}function pk(){return null}function qk(o,e,a){var s=a!=null&&a.hydrationOptions!=null&&a.hydrationOptions.mutableSources||null;if(a=new jk(o,e,a!=null&&a.hydrate===!0),e=nh(3,null,null,e===2?7:e===1?3:0),a.current=e,e.stateNode=a,xg(e),o[ff]=a.current,cf(o.nodeType===8?o.parentNode:o),s)for(o=0;o<s.length;o++){e=s[o];var c=e._getVersion;c=c(e._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[e,c]:a.mutableSourceEagerHydrationData.push(e,c)}this._internalRoot=a}qk.prototype.render=function(o){lk(o,this._internalRoot,null,null)};qk.prototype.unmount=function(){var o=this._internalRoot,e=o.containerInfo;lk(null,o,null,function(){e[ff]=null})};function rk(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function sk(o,e){if(e||(e=o?o.nodeType===9?o.documentElement:o.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var a;a=o.lastChild;)o.removeChild(a);return new qk(o,0,e?{hydrate:!0}:void 0)}function tk(o,e,a,s,c){var f=a._reactRootContainer;if(f){var d=f._internalRoot;if(typeof c=="function"){var h=c;c=function(){var b=mk(d);h.call(b)}}lk(e,d,o,c)}else{if(f=a._reactRootContainer=sk(a,s),d=f._internalRoot,typeof c=="function"){var g=c;c=function(){var b=mk(d);g.call(b)}}Xj(function(){lk(e,d,o,c)})}return mk(d)}ec=function(o){if(o.tag===13){var e=Hg();Jg(o,4,e),ok(o,4)}};fc=function(o){if(o.tag===13){var e=Hg();Jg(o,67108864,e),ok(o,67108864)}};gc=function(o){if(o.tag===13){var e=Hg(),a=Ig(o);Jg(o,a,e),ok(o,a)}};hc=function(o,e){return e()};yb=function(o,e,a){switch(e){case"input":if(ab(o,a),e=a.name,a.type==="radio"&&e!=null){for(a=o;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<a.length;e++){var s=a[e];if(s!==o&&s.form===o.form){var c=Db(s);if(!c)throw Error(y(90));Wa(s),ab(s,c)}}}break;case"textarea":ib(o,a);break;case"select":e=a.value,e!=null&&fb(o,!!a.multiple,e,!1)}};Gb=Wj;Hb=function(o,e,a,s,c){var f=X;X|=4;try{return gg(98,o.bind(null,e,a,s,c))}finally{X=f,X===0&&(wj(),ig())}};Ib=function(){(X&49)===0&&(Vj(),Oj())};Jb=function(o,e){var a=X;X|=2;try{return o(e)}finally{X=a,X===0&&(wj(),ig())}};function uk(o,e){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rk(e))throw Error(y(200));return kk(o,e,null,a)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=cc(o),o===null?null:o.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;reactDom_production_min.createPortal=uk;reactDom_production_min.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var e=o._reactInternals;if(e===void 0)throw typeof o.render=="function"?Error(y(188)):Error(y(268,Object.keys(o)));return o=cc(e),o=o===null?null:o.stateNode,o};reactDom_production_min.flushSync=function(o,e){var a=X;if((a&48)!==0)return o(e);X|=1;try{if(o)return gg(99,o.bind(null,e))}finally{X=a,ig()}};reactDom_production_min.hydrate=function(o,e,a){if(!rk(e))throw Error(y(200));return tk(null,o,e,!0,a)};reactDom_production_min.render=function(o,e,a){if(!rk(e))throw Error(y(200));return tk(null,o,e,!1,a)};reactDom_production_min.unmountComponentAtNode=function(o){if(!rk(o))throw Error(y(40));return o._reactRootContainer?(Xj(function(){tk(null,null,o,!1,function(){o._reactRootContainer=null,o[ff]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Wj;reactDom_production_min.unstable_createPortal=function(o,e){return uk(o,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(o,e,a,s){if(!rk(a))throw Error(y(200));if(o==null||o._reactInternals===void 0)throw Error(y(38));return tk(o,e,a,!1,s)};reactDom_production_min.version="17.0.2";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(o){console.error(o)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports;const REVISION="125",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es";function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(o,e){this._listeners===void 0&&(this._listeners={});const a=this._listeners;a[o]===void 0&&(a[o]=[]),a[o].indexOf(e)===-1&&a[o].push(e)},hasEventListener:function(o,e){if(this._listeners===void 0)return!1;const a=this._listeners;return a[o]!==void 0&&a[o].indexOf(e)!==-1},removeEventListener:function(o,e){if(this._listeners===void 0)return;const s=this._listeners[o];if(s!==void 0){const c=s.indexOf(e);c!==-1&&s.splice(c,1)}},dispatchEvent:function(o){if(this._listeners===void 0)return;const a=this._listeners[o.type];if(a!==void 0){o.target=this;const s=a.slice(0);for(let c=0,f=s.length;c<f;c++)s[c].call(this,o)}}});const _lut=[];for(let o=0;o<256;o++)_lut[o]=(o<16?"0":"")+o.toString(16);let _seed=1234567;const MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const o=Math.random()*4294967295|0,e=Math.random()*4294967295|0,a=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return(_lut[o&255]+_lut[o>>8&255]+_lut[o>>16&255]+_lut[o>>24&255]+"-"+_lut[e&255]+_lut[e>>8&255]+"-"+_lut[e>>16&15|64]+_lut[e>>24&255]+"-"+_lut[a&63|128]+_lut[a>>8&255]+"-"+_lut[a>>16&255]+_lut[a>>24&255]+_lut[s&255]+_lut[s>>8&255]+_lut[s>>16&255]+_lut[s>>24&255]).toUpperCase()},clamp:function(o,e,a){return Math.max(e,Math.min(a,o))},euclideanModulo:function(o,e){return(o%e+e)%e},mapLinear:function(o,e,a,s,c){return s+(o-e)*(c-s)/(a-e)},lerp:function(o,e,a){return(1-a)*o+a*e},damp:function(o,e,a,s){return MathUtils.lerp(o,e,1-Math.exp(-a*s))},pingpong:function(o,e=1){return e-Math.abs(MathUtils.euclideanModulo(o,e*2)-e)},smoothstep:function(o,e,a){return o<=e?0:o>=a?1:(o=(o-e)/(a-e),o*o*(3-2*o))},smootherstep:function(o,e,a){return o<=e?0:o>=a?1:(o=(o-e)/(a-e),o*o*o*(o*(o*6-15)+10))},randInt:function(o,e){return o+Math.floor(Math.random()*(e-o+1))},randFloat:function(o,e){return o+Math.random()*(e-o)},randFloatSpread:function(o){return o*(.5-Math.random())},seededRandom:function(o){return o!==void 0&&(_seed=o%2147483647),_seed=_seed*16807%2147483647,(_seed-1)/2147483646},degToRad:function(o){return o*MathUtils.DEG2RAD},radToDeg:function(o){return o*MathUtils.RAD2DEG},isPowerOfTwo:function(o){return(o&o-1)===0&&o!==0},ceilPowerOfTwo:function(o){return Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},floorPowerOfTwo:function(o){return Math.pow(2,Math.floor(Math.log(o)/Math.LN2))},setQuaternionFromProperEuler:function(o,e,a,s,c){const f=Math.cos,d=Math.sin,h=f(a/2),g=d(a/2),b=f((e+s)/2),tt=d((e+s)/2),j=f((e-s)/2),_e=d((e-s)/2),nt=f((s-e)/2),rt=d((s-e)/2);switch(c){case"XYX":o.set(h*tt,g*j,g*_e,h*b);break;case"YZY":o.set(g*_e,h*tt,g*j,h*b);break;case"ZXZ":o.set(g*j,g*_e,h*tt,h*b);break;case"XZX":o.set(h*tt,g*rt,g*nt,h*b);break;case"YXY":o.set(g*nt,h*tt,g*rt,h*b);break;case"ZYZ":o.set(g*rt,g*nt,h*tt,h*b);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+c)}}};class Vector2{constructor(e=0,a=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=a}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,a){return this.x=e,this.y=a,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,a){switch(e){case 0:this.x=a;break;case 1:this.y=a;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,a){return a!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,a)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,a){return this.x=e.x+a.x,this.y=e.y+a.y,this}addScaledVector(e,a){return this.x+=e.x*a,this.y+=e.y*a,this}sub(e,a){return a!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,a)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,a){return this.x=e.x-a.x,this.y=e.y-a.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const a=this.x,s=this.y,c=e.elements;return this.x=c[0]*a+c[3]*s+c[6],this.y=c[1]*a+c[4]*s+c[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,a){return this.x=Math.max(e.x,Math.min(a.x,this.x)),this.y=Math.max(e.y,Math.min(a.y,this.y)),this}clampScalar(e,a){return this.x=Math.max(e,Math.min(a,this.x)),this.y=Math.max(e,Math.min(a,this.y)),this}clampLength(e,a){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(a,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const a=this.x-e.x,s=this.y-e.y;return a*a+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,a){return this.x+=(e.x-this.x)*a,this.y+=(e.y-this.y)*a,this}lerpVectors(e,a,s){return this.x=e.x+(a.x-e.x)*s,this.y=e.y+(a.y-e.y)*s,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,a=0){return this.x=e[a],this.y=e[a+1],this}toArray(e=[],a=0){return e[a]=this.x,e[a+1]=this.y,e}fromBufferAttribute(e,a,s){return s!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(a),this.y=e.getY(a),this}rotateAround(e,a){const s=Math.cos(a),c=Math.sin(a),f=this.x-e.x,d=this.y-e.y;return this.x=f*s-d*c+e.x,this.y=f*c+d*s+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class Matrix3{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,a,s,c,f,d,h,g,b){const tt=this.elements;return tt[0]=e,tt[1]=c,tt[2]=h,tt[3]=a,tt[4]=f,tt[5]=g,tt[6]=s,tt[7]=d,tt[8]=b,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return new this.constructor().fromArray(this.elements)}copy(e){const a=this.elements,s=e.elements;return a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],a[4]=s[4],a[5]=s[5],a[6]=s[6],a[7]=s[7],a[8]=s[8],this}extractBasis(e,a,s){return e.setFromMatrix3Column(this,0),a.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const a=e.elements;return this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,a){const s=e.elements,c=a.elements,f=this.elements,d=s[0],h=s[3],g=s[6],b=s[1],tt=s[4],j=s[7],_e=s[2],nt=s[5],rt=s[8],at=c[0],it=c[3],$=c[6],et=c[1],st=c[4],lt=c[7],ct=c[2],ut=c[5],ht=c[8];return f[0]=d*at+h*et+g*ct,f[3]=d*it+h*st+g*ut,f[6]=d*$+h*lt+g*ht,f[1]=b*at+tt*et+j*ct,f[4]=b*it+tt*st+j*ut,f[7]=b*$+tt*lt+j*ht,f[2]=_e*at+nt*et+rt*ct,f[5]=_e*it+nt*st+rt*ut,f[8]=_e*$+nt*lt+rt*ht,this}multiplyScalar(e){const a=this.elements;return a[0]*=e,a[3]*=e,a[6]*=e,a[1]*=e,a[4]*=e,a[7]*=e,a[2]*=e,a[5]*=e,a[8]*=e,this}determinant(){const e=this.elements,a=e[0],s=e[1],c=e[2],f=e[3],d=e[4],h=e[5],g=e[6],b=e[7],tt=e[8];return a*d*tt-a*h*b-s*f*tt+s*h*g+c*f*b-c*d*g}invert(){const e=this.elements,a=e[0],s=e[1],c=e[2],f=e[3],d=e[4],h=e[5],g=e[6],b=e[7],tt=e[8],j=tt*d-h*b,_e=h*g-tt*f,nt=b*f-d*g,rt=a*j+s*_e+c*nt;if(rt===0)return this.set(0,0,0,0,0,0,0,0,0);const at=1/rt;return e[0]=j*at,e[1]=(c*b-tt*s)*at,e[2]=(h*s-c*d)*at,e[3]=_e*at,e[4]=(tt*a-c*g)*at,e[5]=(c*f-h*a)*at,e[6]=nt*at,e[7]=(s*g-b*a)*at,e[8]=(d*a-s*f)*at,this}transpose(){let e;const a=this.elements;return e=a[1],a[1]=a[3],a[3]=e,e=a[2],a[2]=a[6],a[6]=e,e=a[5],a[5]=a[7],a[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).copy(this).invert().transpose()}transposeIntoArray(e){const a=this.elements;return e[0]=a[0],e[1]=a[3],e[2]=a[6],e[3]=a[1],e[4]=a[4],e[5]=a[7],e[6]=a[2],e[7]=a[5],e[8]=a[8],this}setUvTransform(e,a,s,c,f,d,h){const g=Math.cos(f),b=Math.sin(f);return this.set(s*g,s*b,-s*(g*d+b*h)+d+e,-c*b,c*g,-c*(-b*d+g*h)+h+a,0,0,1),this}scale(e,a){const s=this.elements;return s[0]*=e,s[3]*=e,s[6]*=e,s[1]*=a,s[4]*=a,s[7]*=a,this}rotate(e){const a=Math.cos(e),s=Math.sin(e),c=this.elements,f=c[0],d=c[3],h=c[6],g=c[1],b=c[4],tt=c[7];return c[0]=a*f+s*g,c[3]=a*d+s*b,c[6]=a*h+s*tt,c[1]=-s*f+a*g,c[4]=-s*d+a*b,c[7]=-s*h+a*tt,this}translate(e,a){const s=this.elements;return s[0]+=e*s[2],s[3]+=e*s[5],s[6]+=e*s[8],s[1]+=a*s[2],s[4]+=a*s[5],s[7]+=a*s[8],this}equals(e){const a=this.elements,s=e.elements;for(let c=0;c<9;c++)if(a[c]!==s[c])return!1;return!0}fromArray(e,a=0){for(let s=0;s<9;s++)this.elements[s]=e[s+a];return this}toArray(e=[],a=0){const s=this.elements;return e[a]=s[0],e[a+1]=s[1],e[a+2]=s[2],e[a+3]=s[3],e[a+4]=s[4],e[a+5]=s[5],e[a+6]=s[6],e[a+7]=s[7],e[a+8]=s[8],e}}let _canvas;const ImageUtils={getDataURL:function(o){if(/^data:/i.test(o.src)||typeof HTMLCanvasElement=="undefined")return o.src;let e;if(o instanceof HTMLCanvasElement)e=o;else{_canvas===void 0&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=o.width,_canvas.height=o.height;const a=_canvas.getContext("2d");o instanceof ImageData?a.putImageData(o,0,0):a.drawImage(o,0,0,o.width,o.height),e=_canvas}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}};let textureId=0;function Texture(o=Texture.DEFAULT_IMAGE,e=Texture.DEFAULT_MAPPING,a=ClampToEdgeWrapping,s=ClampToEdgeWrapping,c=LinearFilter,f=LinearMipmapLinearFilter,d=RGBAFormat,h=UnsignedByteType,g=1,b=LinearEncoding){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=o,this.mipmaps=[],this.mapping=e,this.wrapS=a,this.wrapT=s,this.magFilter=c,this.minFilter=f,this.anisotropy=g,this.format=d,this.internalFormat=null,this.type=h,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=b,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(o){return this.name=o.name,this.image=o.image,this.mipmaps=o.mipmaps.slice(0),this.mapping=o.mapping,this.wrapS=o.wrapS,this.wrapT=o.wrapT,this.magFilter=o.magFilter,this.minFilter=o.minFilter,this.anisotropy=o.anisotropy,this.format=o.format,this.internalFormat=o.internalFormat,this.type=o.type,this.offset.copy(o.offset),this.repeat.copy(o.repeat),this.center.copy(o.center),this.rotation=o.rotation,this.matrixAutoUpdate=o.matrixAutoUpdate,this.matrix.copy(o.matrix),this.generateMipmaps=o.generateMipmaps,this.premultiplyAlpha=o.premultiplyAlpha,this.flipY=o.flipY,this.unpackAlignment=o.unpackAlignment,this.encoding=o.encoding,this},toJSON:function(o){const e=o===void 0||typeof o=="string";if(!e&&o.textures[this.uuid]!==void 0)return o.textures[this.uuid];const a={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const s=this.image;if(s.uuid===void 0&&(s.uuid=MathUtils.generateUUID()),!e&&o.images[s.uuid]===void 0){let c;if(Array.isArray(s)){c=[];for(let f=0,d=s.length;f<d;f++)s[f].isDataTexture?c.push(serializeImage(s[f].image)):c.push(serializeImage(s[f]))}else c=serializeImage(s);o.images[s.uuid]={uuid:s.uuid,url:c}}a.image=s.uuid}return e||(o.textures[this.uuid]=a),a},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(o){if(this.mapping!==UVMapping)return o;if(o.applyMatrix3(this.matrix),o.x<0||o.x>1)switch(this.wrapS){case RepeatWrapping:o.x=o.x-Math.floor(o.x);break;case ClampToEdgeWrapping:o.x=o.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(o.x)%2)===1?o.x=Math.ceil(o.x)-o.x:o.x=o.x-Math.floor(o.x);break}if(o.y<0||o.y>1)switch(this.wrapT){case RepeatWrapping:o.y=o.y-Math.floor(o.y);break;case ClampToEdgeWrapping:o.y=o.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(o.y)%2)===1?o.y=Math.ceil(o.y)-o.y:o.y=o.y-Math.floor(o.y);break}return this.flipY&&(o.y=1-o.y),o}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(o){o===!0&&this.version++}});function serializeImage(o){return typeof HTMLImageElement!="undefined"&&o instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&o instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&o instanceof ImageBitmap?ImageUtils.getDataURL(o):o.data?{data:Array.prototype.slice.call(o.data),width:o.width,height:o.height,type:o.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Vector4{constructor(e=0,a=0,s=0,c=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=a,this.z=s,this.w=c}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,a,s,c){return this.x=e,this.y=a,this.z=s,this.w=c,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,a){switch(e){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;case 3:this.w=a;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,a){return a!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,a)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,a){return this.x=e.x+a.x,this.y=e.y+a.y,this.z=e.z+a.z,this.w=e.w+a.w,this}addScaledVector(e,a){return this.x+=e.x*a,this.y+=e.y*a,this.z+=e.z*a,this.w+=e.w*a,this}sub(e,a){return a!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,a)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,a){return this.x=e.x-a.x,this.y=e.y-a.y,this.z=e.z-a.z,this.w=e.w-a.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const a=this.x,s=this.y,c=this.z,f=this.w,d=e.elements;return this.x=d[0]*a+d[4]*s+d[8]*c+d[12]*f,this.y=d[1]*a+d[5]*s+d[9]*c+d[13]*f,this.z=d[2]*a+d[6]*s+d[10]*c+d[14]*f,this.w=d[3]*a+d[7]*s+d[11]*c+d[15]*f,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const a=Math.sqrt(1-e.w*e.w);return a<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/a,this.y=e.y/a,this.z=e.z/a),this}setAxisAngleFromRotationMatrix(e){let a,s,c,f;const g=e.elements,b=g[0],tt=g[4],j=g[8],_e=g[1],nt=g[5],rt=g[9],at=g[2],it=g[6],$=g[10];if(Math.abs(tt-_e)<.01&&Math.abs(j-at)<.01&&Math.abs(rt-it)<.01){if(Math.abs(tt+_e)<.1&&Math.abs(j+at)<.1&&Math.abs(rt+it)<.1&&Math.abs(b+nt+$-3)<.1)return this.set(1,0,0,0),this;a=Math.PI;const st=(b+1)/2,lt=(nt+1)/2,ct=($+1)/2,ut=(tt+_e)/4,ht=(j+at)/4,pt=(rt+it)/4;return st>lt&&st>ct?st<.01?(s=0,c=.707106781,f=.707106781):(s=Math.sqrt(st),c=ut/s,f=ht/s):lt>ct?lt<.01?(s=.707106781,c=0,f=.707106781):(c=Math.sqrt(lt),s=ut/c,f=pt/c):ct<.01?(s=.707106781,c=.707106781,f=0):(f=Math.sqrt(ct),s=ht/f,c=pt/f),this.set(s,c,f,a),this}let et=Math.sqrt((it-rt)*(it-rt)+(j-at)*(j-at)+(_e-tt)*(_e-tt));return Math.abs(et)<.001&&(et=1),this.x=(it-rt)/et,this.y=(j-at)/et,this.z=(_e-tt)/et,this.w=Math.acos((b+nt+$-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,a){return this.x=Math.max(e.x,Math.min(a.x,this.x)),this.y=Math.max(e.y,Math.min(a.y,this.y)),this.z=Math.max(e.z,Math.min(a.z,this.z)),this.w=Math.max(e.w,Math.min(a.w,this.w)),this}clampScalar(e,a){return this.x=Math.max(e,Math.min(a,this.x)),this.y=Math.max(e,Math.min(a,this.y)),this.z=Math.max(e,Math.min(a,this.z)),this.w=Math.max(e,Math.min(a,this.w)),this}clampLength(e,a){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(a,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,a){return this.x+=(e.x-this.x)*a,this.y+=(e.y-this.y)*a,this.z+=(e.z-this.z)*a,this.w+=(e.w-this.w)*a,this}lerpVectors(e,a,s){return this.x=e.x+(a.x-e.x)*s,this.y=e.y+(a.y-e.y)*s,this.z=e.z+(a.z-e.z)*s,this.w=e.w+(a.w-e.w)*s,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,a=0){return this.x=e[a],this.y=e[a+1],this.z=e[a+2],this.w=e[a+3],this}toArray(e=[],a=0){return e[a]=this.x,e[a+1]=this.y,e[a+2]=this.z,e[a+3]=this.w,e}fromBufferAttribute(e,a,s){return s!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(a),this.y=e.getY(a),this.z=e.getZ(a),this.w=e.getW(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}class WebGLRenderTarget extends EventDispatcher{constructor(e,a,s){super(),Object.defineProperty(this,"isWebGLRenderTarget",{value:!0}),this.width=e,this.height=a,this.scissor=new Vector4(0,0,e,a),this.scissorTest=!1,this.viewport=new Vector4(0,0,e,a),s=s||{},this.texture=new Texture(void 0,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=a,this.texture.generateMipmaps=s.generateMipmaps!==void 0?s.generateMipmaps:!1,this.texture.minFilter=s.minFilter!==void 0?s.minFilter:LinearFilter,this.depthBuffer=s.depthBuffer!==void 0?s.depthBuffer:!0,this.stencilBuffer=s.stencilBuffer!==void 0?s.stencilBuffer:!1,this.depthTexture=s.depthTexture!==void 0?s.depthTexture:null}setSize(e,a){(this.width!==e||this.height!==a)&&(this.width=e,this.height=a,this.texture.image.width=e,this.texture.image.height=a,this.dispose()),this.viewport.set(0,0,e,a),this.scissor.set(0,0,e,a)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLMultisampleRenderTarget extends WebGLRenderTarget{constructor(e,a,s){super(e,a,s),Object.defineProperty(this,"isWebGLMultisampleRenderTarget",{value:!0}),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}class Quaternion{constructor(e=0,a=0,s=0,c=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=a,this._z=s,this._w=c}static slerp(e,a,s,c){return s.copy(e).slerp(a,c)}static slerpFlat(e,a,s,c,f,d,h){let g=s[c+0],b=s[c+1],tt=s[c+2],j=s[c+3];const _e=f[d+0],nt=f[d+1],rt=f[d+2],at=f[d+3];if(j!==at||g!==_e||b!==nt||tt!==rt){let it=1-h;const $=g*_e+b*nt+tt*rt+j*at,et=$>=0?1:-1,st=1-$*$;if(st>Number.EPSILON){const ct=Math.sqrt(st),ut=Math.atan2(ct,$*et);it=Math.sin(it*ut)/ct,h=Math.sin(h*ut)/ct}const lt=h*et;if(g=g*it+_e*lt,b=b*it+nt*lt,tt=tt*it+rt*lt,j=j*it+at*lt,it===1-h){const ct=1/Math.sqrt(g*g+b*b+tt*tt+j*j);g*=ct,b*=ct,tt*=ct,j*=ct}}e[a]=g,e[a+1]=b,e[a+2]=tt,e[a+3]=j}static multiplyQuaternionsFlat(e,a,s,c,f,d){const h=s[c],g=s[c+1],b=s[c+2],tt=s[c+3],j=f[d],_e=f[d+1],nt=f[d+2],rt=f[d+3];return e[a]=h*rt+tt*j+g*nt-b*_e,e[a+1]=g*rt+tt*_e+b*j-h*nt,e[a+2]=b*rt+tt*nt+h*_e-g*j,e[a+3]=tt*rt-h*j-g*_e-b*nt,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,a,s,c){return this._x=e,this._y=a,this._z=s,this._w=c,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,a){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const s=e._x,c=e._y,f=e._z,d=e._order,h=Math.cos,g=Math.sin,b=h(s/2),tt=h(c/2),j=h(f/2),_e=g(s/2),nt=g(c/2),rt=g(f/2);switch(d){case"XYZ":this._x=_e*tt*j+b*nt*rt,this._y=b*nt*j-_e*tt*rt,this._z=b*tt*rt+_e*nt*j,this._w=b*tt*j-_e*nt*rt;break;case"YXZ":this._x=_e*tt*j+b*nt*rt,this._y=b*nt*j-_e*tt*rt,this._z=b*tt*rt-_e*nt*j,this._w=b*tt*j+_e*nt*rt;break;case"ZXY":this._x=_e*tt*j-b*nt*rt,this._y=b*nt*j+_e*tt*rt,this._z=b*tt*rt+_e*nt*j,this._w=b*tt*j-_e*nt*rt;break;case"ZYX":this._x=_e*tt*j-b*nt*rt,this._y=b*nt*j+_e*tt*rt,this._z=b*tt*rt-_e*nt*j,this._w=b*tt*j+_e*nt*rt;break;case"YZX":this._x=_e*tt*j+b*nt*rt,this._y=b*nt*j+_e*tt*rt,this._z=b*tt*rt-_e*nt*j,this._w=b*tt*j-_e*nt*rt;break;case"XZY":this._x=_e*tt*j-b*nt*rt,this._y=b*nt*j-_e*tt*rt,this._z=b*tt*rt+_e*nt*j,this._w=b*tt*j+_e*nt*rt;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return a!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,a){const s=a/2,c=Math.sin(s);return this._x=e.x*c,this._y=e.y*c,this._z=e.z*c,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(e){const a=e.elements,s=a[0],c=a[4],f=a[8],d=a[1],h=a[5],g=a[9],b=a[2],tt=a[6],j=a[10],_e=s+h+j;if(_e>0){const nt=.5/Math.sqrt(_e+1);this._w=.25/nt,this._x=(tt-g)*nt,this._y=(f-b)*nt,this._z=(d-c)*nt}else if(s>h&&s>j){const nt=2*Math.sqrt(1+s-h-j);this._w=(tt-g)/nt,this._x=.25*nt,this._y=(c+d)/nt,this._z=(f+b)/nt}else if(h>j){const nt=2*Math.sqrt(1+h-s-j);this._w=(f-b)/nt,this._x=(c+d)/nt,this._y=.25*nt,this._z=(g+tt)/nt}else{const nt=2*Math.sqrt(1+j-s-h);this._w=(d-c)/nt,this._x=(f+b)/nt,this._y=(g+tt)/nt,this._z=.25*nt}return this._onChangeCallback(),this}setFromUnitVectors(e,a){let c=e.dot(a)+1;return c<1e-6?(c=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=c):(this._x=0,this._y=-e.z,this._z=e.y,this._w=c)):(this._x=e.y*a.z-e.z*a.y,this._y=e.z*a.x-e.x*a.z,this._z=e.x*a.y-e.y*a.x,this._w=c),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(e),-1,1)))}rotateTowards(e,a){const s=this.angleTo(e);if(s===0)return this;const c=Math.min(1,a/s);return this.slerp(e,c),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,a){return a!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,a)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,a){const s=e._x,c=e._y,f=e._z,d=e._w,h=a._x,g=a._y,b=a._z,tt=a._w;return this._x=s*tt+d*h+c*b-f*g,this._y=c*tt+d*g+f*h-s*b,this._z=f*tt+d*b+s*g-c*h,this._w=d*tt-s*h-c*g-f*b,this._onChangeCallback(),this}slerp(e,a){if(a===0)return this;if(a===1)return this.copy(e);const s=this._x,c=this._y,f=this._z,d=this._w;let h=d*e._w+s*e._x+c*e._y+f*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=d,this._x=s,this._y=c,this._z=f,this;const g=1-h*h;if(g<=Number.EPSILON){const nt=1-a;return this._w=nt*d+a*this._w,this._x=nt*s+a*this._x,this._y=nt*c+a*this._y,this._z=nt*f+a*this._z,this.normalize(),this._onChangeCallback(),this}const b=Math.sqrt(g),tt=Math.atan2(b,h),j=Math.sin((1-a)*tt)/b,_e=Math.sin(a*tt)/b;return this._w=d*j+this._w*_e,this._x=s*j+this._x*_e,this._y=c*j+this._y*_e,this._z=f*j+this._z*_e,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,a=0){return this._x=e[a],this._y=e[a+1],this._z=e[a+2],this._w=e[a+3],this._onChangeCallback(),this}toArray(e=[],a=0){return e[a]=this._x,e[a+1]=this._y,e[a+2]=this._z,e[a+3]=this._w,e}fromBufferAttribute(e,a){return this._x=e.getX(a),this._y=e.getY(a),this._z=e.getZ(a),this._w=e.getW(a),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}class Vector3{constructor(e=0,a=0,s=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=a,this.z=s}set(e,a,s){return s===void 0&&(s=this.z),this.x=e,this.y=a,this.z=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,a){switch(e){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,a){return a!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,a)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,a){return this.x=e.x+a.x,this.y=e.y+a.y,this.z=e.z+a.z,this}addScaledVector(e,a){return this.x+=e.x*a,this.y+=e.y*a,this.z+=e.z*a,this}sub(e,a){return a!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,a)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,a){return this.x=e.x-a.x,this.y=e.y-a.y,this.z=e.z-a.z,this}multiply(e,a){return a!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,a)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,a){return this.x=e.x*a.x,this.y=e.y*a.y,this.z=e.z*a.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(e))}applyAxisAngle(e,a){return this.applyQuaternion(_quaternion.setFromAxisAngle(e,a))}applyMatrix3(e){const a=this.x,s=this.y,c=this.z,f=e.elements;return this.x=f[0]*a+f[3]*s+f[6]*c,this.y=f[1]*a+f[4]*s+f[7]*c,this.z=f[2]*a+f[5]*s+f[8]*c,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const a=this.x,s=this.y,c=this.z,f=e.elements,d=1/(f[3]*a+f[7]*s+f[11]*c+f[15]);return this.x=(f[0]*a+f[4]*s+f[8]*c+f[12])*d,this.y=(f[1]*a+f[5]*s+f[9]*c+f[13])*d,this.z=(f[2]*a+f[6]*s+f[10]*c+f[14])*d,this}applyQuaternion(e){const a=this.x,s=this.y,c=this.z,f=e.x,d=e.y,h=e.z,g=e.w,b=g*a+d*c-h*s,tt=g*s+h*a-f*c,j=g*c+f*s-d*a,_e=-f*a-d*s-h*c;return this.x=b*g+_e*-f+tt*-h-j*-d,this.y=tt*g+_e*-d+j*-f-b*-h,this.z=j*g+_e*-h+b*-d-tt*-f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const a=this.x,s=this.y,c=this.z,f=e.elements;return this.x=f[0]*a+f[4]*s+f[8]*c,this.y=f[1]*a+f[5]*s+f[9]*c,this.z=f[2]*a+f[6]*s+f[10]*c,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,a){return this.x=Math.max(e.x,Math.min(a.x,this.x)),this.y=Math.max(e.y,Math.min(a.y,this.y)),this.z=Math.max(e.z,Math.min(a.z,this.z)),this}clampScalar(e,a){return this.x=Math.max(e,Math.min(a,this.x)),this.y=Math.max(e,Math.min(a,this.y)),this.z=Math.max(e,Math.min(a,this.z)),this}clampLength(e,a){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(a,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,a){return this.x+=(e.x-this.x)*a,this.y+=(e.y-this.y)*a,this.z+=(e.z-this.z)*a,this}lerpVectors(e,a,s){return this.x=e.x+(a.x-e.x)*s,this.y=e.y+(a.y-e.y)*s,this.z=e.z+(a.z-e.z)*s,this}cross(e,a){return a!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,a)):this.crossVectors(this,e)}crossVectors(e,a){const s=e.x,c=e.y,f=e.z,d=a.x,h=a.y,g=a.z;return this.x=c*g-f*h,this.y=f*d-s*g,this.z=s*h-c*d,this}projectOnVector(e){const a=e.lengthSq();if(a===0)return this.set(0,0,0);const s=e.dot(this)/a;return this.copy(e).multiplyScalar(s)}projectOnPlane(e){return _vector.copy(this).projectOnVector(e),this.sub(_vector)}reflect(e){return this.sub(_vector.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const a=Math.sqrt(this.lengthSq()*e.lengthSq());if(a===0)return Math.PI/2;const s=this.dot(e)/a;return Math.acos(MathUtils.clamp(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const a=this.x-e.x,s=this.y-e.y,c=this.z-e.z;return a*a+s*s+c*c}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,a,s){const c=Math.sin(a)*e;return this.x=c*Math.sin(s),this.y=Math.cos(a)*e,this.z=c*Math.cos(s),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,a,s){return this.x=e*Math.sin(a),this.y=s,this.z=e*Math.cos(a),this}setFromMatrixPosition(e){const a=e.elements;return this.x=a[12],this.y=a[13],this.z=a[14],this}setFromMatrixScale(e){const a=this.setFromMatrixColumn(e,0).length(),s=this.setFromMatrixColumn(e,1).length(),c=this.setFromMatrixColumn(e,2).length();return this.x=a,this.y=s,this.z=c,this}setFromMatrixColumn(e,a){return this.fromArray(e.elements,a*4)}setFromMatrix3Column(e,a){return this.fromArray(e.elements,a*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,a=0){return this.x=e[a],this.y=e[a+1],this.z=e[a+2],this}toArray(e=[],a=0){return e[a]=this.x,e[a+1]=this.y,e[a+2]=this.z,e}fromBufferAttribute(e,a,s){return s!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(a),this.y=e.getY(a),this.z=e.getZ(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const _vector=new Vector3,_quaternion=new Quaternion;class Box3{constructor(e,a){Object.defineProperty(this,"isBox3",{value:!0}),this.min=e!==void 0?e:new Vector3(1/0,1/0,1/0),this.max=a!==void 0?a:new Vector3(-1/0,-1/0,-1/0)}set(e,a){return this.min.copy(e),this.max.copy(a),this}setFromArray(e){let a=1/0,s=1/0,c=1/0,f=-1/0,d=-1/0,h=-1/0;for(let g=0,b=e.length;g<b;g+=3){const tt=e[g],j=e[g+1],_e=e[g+2];tt<a&&(a=tt),j<s&&(s=j),_e<c&&(c=_e),tt>f&&(f=tt),j>d&&(d=j),_e>h&&(h=_e)}return this.min.set(a,s,c),this.max.set(f,d,h),this}setFromBufferAttribute(e){let a=1/0,s=1/0,c=1/0,f=-1/0,d=-1/0,h=-1/0;for(let g=0,b=e.count;g<b;g++){const tt=e.getX(g),j=e.getY(g),_e=e.getZ(g);tt<a&&(a=tt),j<s&&(s=j),_e<c&&(c=_e),tt>f&&(f=tt),j>d&&(d=j),_e>h&&(h=_e)}return this.min.set(a,s,c),this.max.set(f,d,h),this}setFromPoints(e){this.makeEmpty();for(let a=0,s=e.length;a<s;a++)this.expandByPoint(e[a]);return this}setFromCenterAndSize(e,a){const s=_vector$1.copy(a).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Vector3),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Vector3),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const a=e.geometry;a!==void 0&&(a.boundingBox===null&&a.computeBoundingBox(),_box.copy(a.boundingBox),_box.applyMatrix4(e.matrixWorld),this.union(_box));const s=e.children;for(let c=0,f=s.length;c<f;c++)this.expandByObject(s[c]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,a){return a===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),a=new Vector3),a.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,_vector$1),_vector$1.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let a,s;return e.normal.x>0?(a=e.normal.x*this.min.x,s=e.normal.x*this.max.x):(a=e.normal.x*this.max.x,s=e.normal.x*this.min.x),e.normal.y>0?(a+=e.normal.y*this.min.y,s+=e.normal.y*this.max.y):(a+=e.normal.y*this.max.y,s+=e.normal.y*this.min.y),e.normal.z>0?(a+=e.normal.z*this.min.z,s+=e.normal.z*this.max.z):(a+=e.normal.z*this.max.z,s+=e.normal.z*this.min.z),a<=-e.constant&&s>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(e.a,_center),_v1.subVectors(e.b,_center),_v2.subVectors(e.c,_center),_f0.subVectors(_v1,_v0),_f1.subVectors(_v2,_v1),_f2.subVectors(_v0,_v2);let a=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(a,_v0,_v1,_v2,_extents)||(a=[1,0,0,0,1,0,0,0,1],!satForAxes(a,_v0,_v1,_v2,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),a=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(a,_v0,_v1,_v2,_extents))}clampPoint(e,a){return a===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),a=new Vector3),a.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return _vector$1.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=this.getSize(_vector$1).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_points),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}function satForAxes(o,e,a,s,c){for(let f=0,d=o.length-3;f<=d;f+=3){_testAxis.fromArray(o,f);const h=c.x*Math.abs(_testAxis.x)+c.y*Math.abs(_testAxis.y)+c.z*Math.abs(_testAxis.z),g=e.dot(_testAxis),b=a.dot(_testAxis),tt=s.dot(_testAxis);if(Math.max(-Math.max(g,b,tt),Math.min(g,b,tt))>h)return!1}return!0}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3,_box$1=new Box3;class Sphere{constructor(e,a){this.center=e!==void 0?e:new Vector3,this.radius=a!==void 0?a:-1}set(e,a){return this.center.copy(e),this.radius=a,this}setFromPoints(e,a){const s=this.center;a!==void 0?s.copy(a):_box$1.setFromPoints(e).getCenter(s);let c=0;for(let f=0,d=e.length;f<d;f++)c=Math.max(c,s.distanceToSquared(e[f]));return this.radius=Math.sqrt(c),this}clone(){return new this.constructor().copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const a=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=a*a}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,a){const s=this.center.distanceToSquared(e);return a===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),a=new Vector3),a.copy(e),s>this.radius*this.radius&&(a.sub(this.center).normalize(),a.multiplyScalar(this.radius).add(this.center)),a}getBoundingBox(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Box3),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}}const _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;class Ray{constructor(e,a){this.origin=e!==void 0?e:new Vector3,this.direction=a!==void 0?a:new Vector3(0,0,-1)}set(e,a){return this.origin.copy(e),this.direction.copy(a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,a){return a===void 0&&(console.warn("THREE.Ray: .at() target is now required"),a=new Vector3),a.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_vector$2)),this}closestPointToPoint(e,a){a===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),a=new Vector3),a.subVectors(e,this.origin);const s=a.dot(this.direction);return s<0?a.copy(this.origin):a.copy(this.direction).multiplyScalar(s).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const a=_vector$2.subVectors(e,this.origin).dot(this.direction);return a<0?this.origin.distanceToSquared(e):(_vector$2.copy(this.direction).multiplyScalar(a).add(this.origin),_vector$2.distanceToSquared(e))}distanceSqToSegment(e,a,s,c){_segCenter.copy(e).add(a).multiplyScalar(.5),_segDir.copy(a).sub(e).normalize(),_diff.copy(this.origin).sub(_segCenter);const f=e.distanceTo(a)*.5,d=-this.direction.dot(_segDir),h=_diff.dot(this.direction),g=-_diff.dot(_segDir),b=_diff.lengthSq(),tt=Math.abs(1-d*d);let j,_e,nt,rt;if(tt>0)if(j=d*g-h,_e=d*h-g,rt=f*tt,j>=0)if(_e>=-rt)if(_e<=rt){const at=1/tt;j*=at,_e*=at,nt=j*(j+d*_e+2*h)+_e*(d*j+_e+2*g)+b}else _e=f,j=Math.max(0,-(d*_e+h)),nt=-j*j+_e*(_e+2*g)+b;else _e=-f,j=Math.max(0,-(d*_e+h)),nt=-j*j+_e*(_e+2*g)+b;else _e<=-rt?(j=Math.max(0,-(-d*f+h)),_e=j>0?-f:Math.min(Math.max(-f,-g),f),nt=-j*j+_e*(_e+2*g)+b):_e<=rt?(j=0,_e=Math.min(Math.max(-f,-g),f),nt=_e*(_e+2*g)+b):(j=Math.max(0,-(d*f+h)),_e=j>0?f:Math.min(Math.max(-f,-g),f),nt=-j*j+_e*(_e+2*g)+b);else _e=d>0?-f:f,j=Math.max(0,-(d*_e+h)),nt=-j*j+_e*(_e+2*g)+b;return s&&s.copy(this.direction).multiplyScalar(j).add(this.origin),c&&c.copy(_segDir).multiplyScalar(_e).add(_segCenter),nt}intersectSphere(e,a){_vector$2.subVectors(e.center,this.origin);const s=_vector$2.dot(this.direction),c=_vector$2.dot(_vector$2)-s*s,f=e.radius*e.radius;if(c>f)return null;const d=Math.sqrt(f-c),h=s-d,g=s+d;return h<0&&g<0?null:h<0?this.at(g,a):this.at(h,a)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const a=e.normal.dot(this.direction);if(a===0)return e.distanceToPoint(this.origin)===0?0:null;const s=-(this.origin.dot(e.normal)+e.constant)/a;return s>=0?s:null}intersectPlane(e,a){const s=this.distanceToPlane(e);return s===null?null:this.at(s,a)}intersectsPlane(e){const a=e.distanceToPoint(this.origin);return a===0||e.normal.dot(this.direction)*a<0}intersectBox(e,a){let s,c,f,d,h,g;const b=1/this.direction.x,tt=1/this.direction.y,j=1/this.direction.z,_e=this.origin;return b>=0?(s=(e.min.x-_e.x)*b,c=(e.max.x-_e.x)*b):(s=(e.max.x-_e.x)*b,c=(e.min.x-_e.x)*b),tt>=0?(f=(e.min.y-_e.y)*tt,d=(e.max.y-_e.y)*tt):(f=(e.max.y-_e.y)*tt,d=(e.min.y-_e.y)*tt),s>d||f>c||((f>s||s!==s)&&(s=f),(d<c||c!==c)&&(c=d),j>=0?(h=(e.min.z-_e.z)*j,g=(e.max.z-_e.z)*j):(h=(e.max.z-_e.z)*j,g=(e.min.z-_e.z)*j),s>g||h>c)||((h>s||s!==s)&&(s=h),(g<c||c!==c)&&(c=g),c<0)?null:this.at(s>=0?s:c,a)}intersectsBox(e){return this.intersectBox(e,_vector$2)!==null}intersectTriangle(e,a,s,c,f){_edge1.subVectors(a,e),_edge2.subVectors(s,e),_normal.crossVectors(_edge1,_edge2);let d=this.direction.dot(_normal),h;if(d>0){if(c)return null;h=1}else if(d<0)h=-1,d=-d;else return null;_diff.subVectors(this.origin,e);const g=h*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(g<0)return null;const b=h*this.direction.dot(_edge1.cross(_diff));if(b<0||g+b>d)return null;const tt=-h*_diff.dot(_normal);return tt<0?null:this.at(tt/d,f)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}class Matrix4{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,a,s,c,f,d,h,g,b,tt,j,_e,nt,rt,at,it){const $=this.elements;return $[0]=e,$[4]=a,$[8]=s,$[12]=c,$[1]=f,$[5]=d,$[9]=h,$[13]=g,$[2]=b,$[6]=tt,$[10]=j,$[14]=_e,$[3]=nt,$[7]=rt,$[11]=at,$[15]=it,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(e){const a=this.elements,s=e.elements;return a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],a[4]=s[4],a[5]=s[5],a[6]=s[6],a[7]=s[7],a[8]=s[8],a[9]=s[9],a[10]=s[10],a[11]=s[11],a[12]=s[12],a[13]=s[13],a[14]=s[14],a[15]=s[15],this}copyPosition(e){const a=this.elements,s=e.elements;return a[12]=s[12],a[13]=s[13],a[14]=s[14],this}setFromMatrix3(e){const a=e.elements;return this.set(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0,0,0,0,1),this}extractBasis(e,a,s){return e.setFromMatrixColumn(this,0),a.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(e,a,s){return this.set(e.x,a.x,s.x,0,e.y,a.y,s.y,0,e.z,a.z,s.z,0,0,0,0,1),this}extractRotation(e){const a=this.elements,s=e.elements,c=1/_v1$1.setFromMatrixColumn(e,0).length(),f=1/_v1$1.setFromMatrixColumn(e,1).length(),d=1/_v1$1.setFromMatrixColumn(e,2).length();return a[0]=s[0]*c,a[1]=s[1]*c,a[2]=s[2]*c,a[3]=0,a[4]=s[4]*f,a[5]=s[5]*f,a[6]=s[6]*f,a[7]=0,a[8]=s[8]*d,a[9]=s[9]*d,a[10]=s[10]*d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const a=this.elements,s=e.x,c=e.y,f=e.z,d=Math.cos(s),h=Math.sin(s),g=Math.cos(c),b=Math.sin(c),tt=Math.cos(f),j=Math.sin(f);if(e.order==="XYZ"){const _e=d*tt,nt=d*j,rt=h*tt,at=h*j;a[0]=g*tt,a[4]=-g*j,a[8]=b,a[1]=nt+rt*b,a[5]=_e-at*b,a[9]=-h*g,a[2]=at-_e*b,a[6]=rt+nt*b,a[10]=d*g}else if(e.order==="YXZ"){const _e=g*tt,nt=g*j,rt=b*tt,at=b*j;a[0]=_e+at*h,a[4]=rt*h-nt,a[8]=d*b,a[1]=d*j,a[5]=d*tt,a[9]=-h,a[2]=nt*h-rt,a[6]=at+_e*h,a[10]=d*g}else if(e.order==="ZXY"){const _e=g*tt,nt=g*j,rt=b*tt,at=b*j;a[0]=_e-at*h,a[4]=-d*j,a[8]=rt+nt*h,a[1]=nt+rt*h,a[5]=d*tt,a[9]=at-_e*h,a[2]=-d*b,a[6]=h,a[10]=d*g}else if(e.order==="ZYX"){const _e=d*tt,nt=d*j,rt=h*tt,at=h*j;a[0]=g*tt,a[4]=rt*b-nt,a[8]=_e*b+at,a[1]=g*j,a[5]=at*b+_e,a[9]=nt*b-rt,a[2]=-b,a[6]=h*g,a[10]=d*g}else if(e.order==="YZX"){const _e=d*g,nt=d*b,rt=h*g,at=h*b;a[0]=g*tt,a[4]=at-_e*j,a[8]=rt*j+nt,a[1]=j,a[5]=d*tt,a[9]=-h*tt,a[2]=-b*tt,a[6]=nt*j+rt,a[10]=_e-at*j}else if(e.order==="XZY"){const _e=d*g,nt=d*b,rt=h*g,at=h*b;a[0]=g*tt,a[4]=-j,a[8]=b*tt,a[1]=_e*j+at,a[5]=d*tt,a[9]=nt*j-rt,a[2]=rt*j-nt,a[6]=h*tt,a[10]=at*j+_e}return a[3]=0,a[7]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_zero,e,_one)}lookAt(e,a,s){const c=this.elements;return _z.subVectors(e,a),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(s,_z),_x.lengthSq()===0&&(Math.abs(s.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(s,_z)),_x.normalize(),_y.crossVectors(_z,_x),c[0]=_x.x,c[4]=_y.x,c[8]=_z.x,c[1]=_x.y,c[5]=_y.y,c[9]=_z.y,c[2]=_x.z,c[6]=_y.z,c[10]=_z.z,this}multiply(e,a){return a!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,a)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,a){const s=e.elements,c=a.elements,f=this.elements,d=s[0],h=s[4],g=s[8],b=s[12],tt=s[1],j=s[5],_e=s[9],nt=s[13],rt=s[2],at=s[6],it=s[10],$=s[14],et=s[3],st=s[7],lt=s[11],ct=s[15],ut=c[0],ht=c[4],pt=c[8],mt=c[12],bt=c[1],St=c[5],Ft=c[9],It=c[13],Ct=c[2],Pt=c[6],Nt=c[10],zt=c[14],Xt=c[3],en=c[7],rn=c[11],Gt=c[15];return f[0]=d*ut+h*bt+g*Ct+b*Xt,f[4]=d*ht+h*St+g*Pt+b*en,f[8]=d*pt+h*Ft+g*Nt+b*rn,f[12]=d*mt+h*It+g*zt+b*Gt,f[1]=tt*ut+j*bt+_e*Ct+nt*Xt,f[5]=tt*ht+j*St+_e*Pt+nt*en,f[9]=tt*pt+j*Ft+_e*Nt+nt*rn,f[13]=tt*mt+j*It+_e*zt+nt*Gt,f[2]=rt*ut+at*bt+it*Ct+$*Xt,f[6]=rt*ht+at*St+it*Pt+$*en,f[10]=rt*pt+at*Ft+it*Nt+$*rn,f[14]=rt*mt+at*It+it*zt+$*Gt,f[3]=et*ut+st*bt+lt*Ct+ct*Xt,f[7]=et*ht+st*St+lt*Pt+ct*en,f[11]=et*pt+st*Ft+lt*Nt+ct*rn,f[15]=et*mt+st*It+lt*zt+ct*Gt,this}multiplyScalar(e){const a=this.elements;return a[0]*=e,a[4]*=e,a[8]*=e,a[12]*=e,a[1]*=e,a[5]*=e,a[9]*=e,a[13]*=e,a[2]*=e,a[6]*=e,a[10]*=e,a[14]*=e,a[3]*=e,a[7]*=e,a[11]*=e,a[15]*=e,this}determinant(){const e=this.elements,a=e[0],s=e[4],c=e[8],f=e[12],d=e[1],h=e[5],g=e[9],b=e[13],tt=e[2],j=e[6],_e=e[10],nt=e[14],rt=e[3],at=e[7],it=e[11],$=e[15];return rt*(+f*g*j-c*b*j-f*h*_e+s*b*_e+c*h*nt-s*g*nt)+at*(+a*g*nt-a*b*_e+f*d*_e-c*d*nt+c*b*tt-f*g*tt)+it*(+a*b*j-a*h*nt-f*d*j+s*d*nt+f*h*tt-s*b*tt)+$*(-c*h*tt-a*g*j+a*h*_e+c*d*j-s*d*_e+s*g*tt)}transpose(){const e=this.elements;let a;return a=e[1],e[1]=e[4],e[4]=a,a=e[2],e[2]=e[8],e[8]=a,a=e[6],e[6]=e[9],e[9]=a,a=e[3],e[3]=e[12],e[12]=a,a=e[7],e[7]=e[13],e[13]=a,a=e[11],e[11]=e[14],e[14]=a,this}setPosition(e,a,s){const c=this.elements;return e.isVector3?(c[12]=e.x,c[13]=e.y,c[14]=e.z):(c[12]=e,c[13]=a,c[14]=s),this}invert(){const e=this.elements,a=e[0],s=e[1],c=e[2],f=e[3],d=e[4],h=e[5],g=e[6],b=e[7],tt=e[8],j=e[9],_e=e[10],nt=e[11],rt=e[12],at=e[13],it=e[14],$=e[15],et=j*it*b-at*_e*b+at*g*nt-h*it*nt-j*g*$+h*_e*$,st=rt*_e*b-tt*it*b-rt*g*nt+d*it*nt+tt*g*$-d*_e*$,lt=tt*at*b-rt*j*b+rt*h*nt-d*at*nt-tt*h*$+d*j*$,ct=rt*j*g-tt*at*g-rt*h*_e+d*at*_e+tt*h*it-d*j*it,ut=a*et+s*st+c*lt+f*ct;if(ut===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ht=1/ut;return e[0]=et*ht,e[1]=(at*_e*f-j*it*f-at*c*nt+s*it*nt+j*c*$-s*_e*$)*ht,e[2]=(h*it*f-at*g*f+at*c*b-s*it*b-h*c*$+s*g*$)*ht,e[3]=(j*g*f-h*_e*f-j*c*b+s*_e*b+h*c*nt-s*g*nt)*ht,e[4]=st*ht,e[5]=(tt*it*f-rt*_e*f+rt*c*nt-a*it*nt-tt*c*$+a*_e*$)*ht,e[6]=(rt*g*f-d*it*f-rt*c*b+a*it*b+d*c*$-a*g*$)*ht,e[7]=(d*_e*f-tt*g*f+tt*c*b-a*_e*b-d*c*nt+a*g*nt)*ht,e[8]=lt*ht,e[9]=(rt*j*f-tt*at*f-rt*s*nt+a*at*nt+tt*s*$-a*j*$)*ht,e[10]=(d*at*f-rt*h*f+rt*s*b-a*at*b-d*s*$+a*h*$)*ht,e[11]=(tt*h*f-d*j*f-tt*s*b+a*j*b+d*s*nt-a*h*nt)*ht,e[12]=ct*ht,e[13]=(tt*at*c-rt*j*c+rt*s*_e-a*at*_e-tt*s*it+a*j*it)*ht,e[14]=(rt*h*c-d*at*c-rt*s*g+a*at*g+d*s*it-a*h*it)*ht,e[15]=(d*j*c-tt*h*c+tt*s*g-a*j*g-d*s*_e+a*h*_e)*ht,this}scale(e){const a=this.elements,s=e.x,c=e.y,f=e.z;return a[0]*=s,a[4]*=c,a[8]*=f,a[1]*=s,a[5]*=c,a[9]*=f,a[2]*=s,a[6]*=c,a[10]*=f,a[3]*=s,a[7]*=c,a[11]*=f,this}getMaxScaleOnAxis(){const e=this.elements,a=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],s=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],c=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(a,s,c))}makeTranslation(e,a,s){return this.set(1,0,0,e,0,1,0,a,0,0,1,s,0,0,0,1),this}makeRotationX(e){const a=Math.cos(e),s=Math.sin(e);return this.set(1,0,0,0,0,a,-s,0,0,s,a,0,0,0,0,1),this}makeRotationY(e){const a=Math.cos(e),s=Math.sin(e);return this.set(a,0,s,0,0,1,0,0,-s,0,a,0,0,0,0,1),this}makeRotationZ(e){const a=Math.cos(e),s=Math.sin(e);return this.set(a,-s,0,0,s,a,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,a){const s=Math.cos(a),c=Math.sin(a),f=1-s,d=e.x,h=e.y,g=e.z,b=f*d,tt=f*h;return this.set(b*d+s,b*h-c*g,b*g+c*h,0,b*h+c*g,tt*h+s,tt*g-c*d,0,b*g-c*h,tt*g+c*d,f*g*g+s,0,0,0,0,1),this}makeScale(e,a,s){return this.set(e,0,0,0,0,a,0,0,0,0,s,0,0,0,0,1),this}makeShear(e,a,s){return this.set(1,a,s,0,e,1,s,0,e,a,1,0,0,0,0,1),this}compose(e,a,s){const c=this.elements,f=a._x,d=a._y,h=a._z,g=a._w,b=f+f,tt=d+d,j=h+h,_e=f*b,nt=f*tt,rt=f*j,at=d*tt,it=d*j,$=h*j,et=g*b,st=g*tt,lt=g*j,ct=s.x,ut=s.y,ht=s.z;return c[0]=(1-(at+$))*ct,c[1]=(nt+lt)*ct,c[2]=(rt-st)*ct,c[3]=0,c[4]=(nt-lt)*ut,c[5]=(1-(_e+$))*ut,c[6]=(it+et)*ut,c[7]=0,c[8]=(rt+st)*ht,c[9]=(it-et)*ht,c[10]=(1-(_e+at))*ht,c[11]=0,c[12]=e.x,c[13]=e.y,c[14]=e.z,c[15]=1,this}decompose(e,a,s){const c=this.elements;let f=_v1$1.set(c[0],c[1],c[2]).length();const d=_v1$1.set(c[4],c[5],c[6]).length(),h=_v1$1.set(c[8],c[9],c[10]).length();this.determinant()<0&&(f=-f),e.x=c[12],e.y=c[13],e.z=c[14],_m1.copy(this);const b=1/f,tt=1/d,j=1/h;return _m1.elements[0]*=b,_m1.elements[1]*=b,_m1.elements[2]*=b,_m1.elements[4]*=tt,_m1.elements[5]*=tt,_m1.elements[6]*=tt,_m1.elements[8]*=j,_m1.elements[9]*=j,_m1.elements[10]*=j,a.setFromRotationMatrix(_m1),s.x=f,s.y=d,s.z=h,this}makePerspective(e,a,s,c,f,d){d===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const h=this.elements,g=2*f/(a-e),b=2*f/(s-c),tt=(a+e)/(a-e),j=(s+c)/(s-c),_e=-(d+f)/(d-f),nt=-2*d*f/(d-f);return h[0]=g,h[4]=0,h[8]=tt,h[12]=0,h[1]=0,h[5]=b,h[9]=j,h[13]=0,h[2]=0,h[6]=0,h[10]=_e,h[14]=nt,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,a,s,c,f,d){const h=this.elements,g=1/(a-e),b=1/(s-c),tt=1/(d-f),j=(a+e)*g,_e=(s+c)*b,nt=(d+f)*tt;return h[0]=2*g,h[4]=0,h[8]=0,h[12]=-j,h[1]=0,h[5]=2*b,h[9]=0,h[13]=-_e,h[2]=0,h[6]=0,h[10]=-2*tt,h[14]=-nt,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const a=this.elements,s=e.elements;for(let c=0;c<16;c++)if(a[c]!==s[c])return!1;return!0}fromArray(e,a=0){for(let s=0;s<16;s++)this.elements[s]=e[s+a];return this}toArray(e=[],a=0){const s=this.elements;return e[a]=s[0],e[a+1]=s[1],e[a+2]=s[2],e[a+3]=s[3],e[a+4]=s[4],e[a+5]=s[5],e[a+6]=s[6],e[a+7]=s[7],e[a+8]=s[8],e[a+9]=s[9],e[a+10]=s[10],e[a+11]=s[11],e[a+12]=s[12],e[a+13]=s[13],e[a+14]=s[14],e[a+15]=s[15],e}}const _v1$1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;class Euler{constructor(e=0,a=0,s=0,c=Euler.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=a,this._z=s,this._order=c}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,a,s,c){return this._x=e,this._y=a,this._z=s,this._order=c||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,a,s){const c=MathUtils.clamp,f=e.elements,d=f[0],h=f[4],g=f[8],b=f[1],tt=f[5],j=f[9],_e=f[2],nt=f[6],rt=f[10];switch(a=a||this._order,a){case"XYZ":this._y=Math.asin(c(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-j,rt),this._z=Math.atan2(-h,d)):(this._x=Math.atan2(nt,tt),this._z=0);break;case"YXZ":this._x=Math.asin(-c(j,-1,1)),Math.abs(j)<.9999999?(this._y=Math.atan2(g,rt),this._z=Math.atan2(b,tt)):(this._y=Math.atan2(-_e,d),this._z=0);break;case"ZXY":this._x=Math.asin(c(nt,-1,1)),Math.abs(nt)<.9999999?(this._y=Math.atan2(-_e,rt),this._z=Math.atan2(-h,tt)):(this._y=0,this._z=Math.atan2(b,d));break;case"ZYX":this._y=Math.asin(-c(_e,-1,1)),Math.abs(_e)<.9999999?(this._x=Math.atan2(nt,rt),this._z=Math.atan2(b,d)):(this._x=0,this._z=Math.atan2(-h,tt));break;case"YZX":this._z=Math.asin(c(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(-j,tt),this._y=Math.atan2(-_e,d)):(this._x=0,this._y=Math.atan2(g,rt));break;case"XZY":this._z=Math.asin(-c(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(nt,tt),this._y=Math.atan2(g,d)):(this._x=Math.atan2(-j,rt),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+a)}return this._order=a,s!==!1&&this._onChangeCallback(),this}setFromQuaternion(e,a,s){return _matrix.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_matrix,a,s)}setFromVector3(e,a){return this.set(e.x,e.y,e.z,a||this._order)}reorder(e){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],a=0){return e[a]=this._x,e[a+1]=this._y,e[a+2]=this._z,e[a+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Euler.DefaultOrder="XYZ";Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const _matrix=new Matrix4,_quaternion$1=new Quaternion;class Layers{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}}let _object3DId=0;const _v1$2=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();const o=new Vector3,e=new Euler,a=new Quaternion,s=new Vector3(1,1,1);function c(){a.setFromEuler(e,!1)}function f(){e.setFromQuaternion(a,void 0,!1)}e._onChange(c),a._onChange(f),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:o},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(o){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(o),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(o){return this.quaternion.premultiply(o),this},setRotationFromAxisAngle:function(o,e){this.quaternion.setFromAxisAngle(o,e)},setRotationFromEuler:function(o){this.quaternion.setFromEuler(o,!0)},setRotationFromMatrix:function(o){this.quaternion.setFromRotationMatrix(o)},setRotationFromQuaternion:function(o){this.quaternion.copy(o)},rotateOnAxis:function(o,e){return _q1.setFromAxisAngle(o,e),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(o,e){return _q1.setFromAxisAngle(o,e),this.quaternion.premultiply(_q1),this},rotateX:function(o){return this.rotateOnAxis(_xAxis,o)},rotateY:function(o){return this.rotateOnAxis(_yAxis,o)},rotateZ:function(o){return this.rotateOnAxis(_zAxis,o)},translateOnAxis:function(o,e){return _v1$2.copy(o).applyQuaternion(this.quaternion),this.position.add(_v1$2.multiplyScalar(e)),this},translateX:function(o){return this.translateOnAxis(_xAxis,o)},translateY:function(o){return this.translateOnAxis(_yAxis,o)},translateZ:function(o){return this.translateOnAxis(_zAxis,o)},localToWorld:function(o){return o.applyMatrix4(this.matrixWorld)},worldToLocal:function(o){return o.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())},lookAt:function(o,e,a){o.isVector3?_target.copy(o):_target.set(o,e,a);const s=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),s&&(_m1$1.extractRotation(s.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))},add:function(o){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return o===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",o),this):(o&&o.isObject3D?(o.parent!==null&&o.parent.remove(o),o.parent=this,this.children.push(o),o.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",o),this)},remove:function(o){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.remove(arguments[a]);return this}const e=this.children.indexOf(o);return e!==-1&&(o.parent=null,this.children.splice(e,1),o.dispatchEvent(_removedEvent)),this},clear:function(){for(let o=0;o<this.children.length;o++){const e=this.children[o];e.parent=null,e.dispatchEvent(_removedEvent)}return this.children.length=0,this},attach:function(o){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),o.parent!==null&&(o.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(o.parent.matrixWorld)),o.applyMatrix4(_m1$1),o.updateWorldMatrix(!1,!1),this.add(o),this},getObjectById:function(o){return this.getObjectByProperty("id",o)},getObjectByName:function(o){return this.getObjectByProperty("name",o)},getObjectByProperty:function(o,e){if(this[o]===e)return this;for(let a=0,s=this.children.length;a<s;a++){const f=this.children[a].getObjectByProperty(o,e);if(f!==void 0)return f}},getWorldPosition:function(o){return o===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),o=new Vector3),this.updateWorldMatrix(!0,!1),o.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(o){return o===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),o=new Quaternion),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position,o,_scale),o},getWorldScale:function(o){return o===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),o=new Vector3),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position,_quaternion$2,o),o},getWorldDirection:function(o){o===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),o=new Vector3),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return o.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(o){o(this);const e=this.children;for(let a=0,s=e.length;a<s;a++)e[a].traverse(o)},traverseVisible:function(o){if(this.visible===!1)return;o(this);const e=this.children;for(let a=0,s=e.length;a<s;a++)e[a].traverseVisible(o)},traverseAncestors:function(o){const e=this.parent;e!==null&&(o(e),e.traverseAncestors(o))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(o){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||o)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,o=!0);const e=this.children;for(let a=0,s=e.length;a<s;a++)e[a].updateMatrixWorld(o)},updateWorldMatrix:function(o,e){const a=this.parent;if(o===!0&&a!==null&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const s=this.children;for(let c=0,f=s.length;c<f;c++)s[c].updateWorldMatrix(!1,!0)}},toJSON:function(o){const e=o===void 0||typeof o=="string",a={};e&&(o={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},a.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON());function c(d,h){return d[h.uuid]===void 0&&(d[h.uuid]=h.toJSON(o)),h.uuid}if(this.isMesh||this.isLine||this.isPoints){s.geometry=c(o.geometries,this.geometry);const d=this.geometry.parameters;if(d!==void 0&&d.shapes!==void 0){const h=d.shapes;if(Array.isArray(h))for(let g=0,b=h.length;g<b;g++){const tt=h[g];c(o.shapes,tt)}else c(o.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(c(o.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const d=[];for(let h=0,g=this.material.length;h<g;h++)d.push(c(o.materials,this.material[h]));s.material=d}else s.material=c(o.materials,this.material);if(this.children.length>0){s.children=[];for(let d=0;d<this.children.length;d++)s.children.push(this.children[d].toJSON(o).object)}if(this.animations.length>0){s.animations=[];for(let d=0;d<this.animations.length;d++){const h=this.animations[d];s.animations.push(c(o.animations,h))}}if(e){const d=f(o.geometries),h=f(o.materials),g=f(o.textures),b=f(o.images),tt=f(o.shapes),j=f(o.skeletons),_e=f(o.animations);d.length>0&&(a.geometries=d),h.length>0&&(a.materials=h),g.length>0&&(a.textures=g),b.length>0&&(a.images=b),tt.length>0&&(a.shapes=tt),j.length>0&&(a.skeletons=j),_e.length>0&&(a.animations=_e)}return a.object=s,a;function f(d){const h=[];for(const g in d){const b=d[g];delete b.metadata,h.push(b)}return h}},clone:function(o){return new this.constructor().copy(this,o)},copy:function(o,e=!0){if(this.name=o.name,this.up.copy(o.up),this.position.copy(o.position),this.rotation.order=o.rotation.order,this.quaternion.copy(o.quaternion),this.scale.copy(o.scale),this.matrix.copy(o.matrix),this.matrixWorld.copy(o.matrixWorld),this.matrixAutoUpdate=o.matrixAutoUpdate,this.matrixWorldNeedsUpdate=o.matrixWorldNeedsUpdate,this.layers.mask=o.layers.mask,this.visible=o.visible,this.castShadow=o.castShadow,this.receiveShadow=o.receiveShadow,this.frustumCulled=o.frustumCulled,this.renderOrder=o.renderOrder,this.userData=JSON.parse(JSON.stringify(o.userData)),e===!0)for(let a=0;a<o.children.length;a++){const s=o.children[a];this.add(s.clone())}return this}});const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(e,a){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=e!==void 0?e:new Vector3(1,0,0),this.constant=a!==void 0?a:0}set(e,a){return this.normal.copy(e),this.constant=a,this}setComponents(e,a,s,c){return this.normal.set(e,a,s),this.constant=c,this}setFromNormalAndCoplanarPoint(e,a){return this.normal.copy(e),this.constant=-a.dot(this.normal),this}setFromCoplanarPoints(e,a,s){const c=_vector1.subVectors(s,a).cross(_vector2.subVectors(e,a)).normalize();return this.setFromNormalAndCoplanarPoint(c,e),this}clone(){return new this.constructor().copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,a){return a===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),a=new Vector3),a.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,a){a===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),a=new Vector3);const s=e.delta(_vector1),c=this.normal.dot(s);if(c===0)return this.distanceToPoint(e.start)===0?a.copy(e.start):void 0;const f=-(e.start.dot(this.normal)+this.constant)/c;if(!(f<0||f>1))return a.copy(s).multiplyScalar(f).add(e.start)}intersectsLine(e){const a=this.distanceToPoint(e.start),s=this.distanceToPoint(e.end);return a<0&&s>0||s<0&&a>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Vector3),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,a){const s=a||_normalMatrix.getNormalMatrix(e),c=this.coplanarPoint(_vector1).applyMatrix4(e),f=this.normal.applyMatrix3(s).normalize();return this.constant=-c.dot(f),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}const _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;class Triangle{constructor(e,a,s){this.a=e!==void 0?e:new Vector3,this.b=a!==void 0?a:new Vector3,this.c=s!==void 0?s:new Vector3}static getNormal(e,a,s,c){c===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),c=new Vector3),c.subVectors(s,a),_v0$1.subVectors(e,a),c.cross(_v0$1);const f=c.lengthSq();return f>0?c.multiplyScalar(1/Math.sqrt(f)):c.set(0,0,0)}static getBarycoord(e,a,s,c,f){_v0$1.subVectors(c,a),_v1$3.subVectors(s,a),_v2$1.subVectors(e,a);const d=_v0$1.dot(_v0$1),h=_v0$1.dot(_v1$3),g=_v0$1.dot(_v2$1),b=_v1$3.dot(_v1$3),tt=_v1$3.dot(_v2$1),j=d*b-h*h;if(f===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),f=new Vector3),j===0)return f.set(-2,-1,-1);const _e=1/j,nt=(b*g-h*tt)*_e,rt=(d*tt-h*g)*_e;return f.set(1-nt-rt,rt,nt)}static containsPoint(e,a,s,c){return this.getBarycoord(e,a,s,c,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1}static getUV(e,a,s,c,f,d,h,g){return this.getBarycoord(e,a,s,c,_v3),g.set(0,0),g.addScaledVector(f,_v3.x),g.addScaledVector(d,_v3.y),g.addScaledVector(h,_v3.z),g}static isFrontFacing(e,a,s,c){return _v0$1.subVectors(s,a),_v1$3.subVectors(e,a),_v0$1.cross(_v1$3).dot(c)<0}set(e,a,s){return this.a.copy(e),this.b.copy(a),this.c.copy(s),this}setFromPointsAndIndices(e,a,s,c){return this.a.copy(e[a]),this.b.copy(e[s]),this.c.copy(e[c]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Vector3),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Triangle.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Plane),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,a){return Triangle.getBarycoord(e,this.a,this.b,this.c,a)}getUV(e,a,s,c,f){return Triangle.getUV(e,this.a,this.b,this.c,a,s,c,f)}containsPoint(e){return Triangle.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Triangle.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,a){a===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),a=new Vector3);const s=this.a,c=this.b,f=this.c;let d,h;_vab.subVectors(c,s),_vac.subVectors(f,s),_vap.subVectors(e,s);const g=_vab.dot(_vap),b=_vac.dot(_vap);if(g<=0&&b<=0)return a.copy(s);_vbp.subVectors(e,c);const tt=_vab.dot(_vbp),j=_vac.dot(_vbp);if(tt>=0&&j<=tt)return a.copy(c);const _e=g*j-tt*b;if(_e<=0&&g>=0&&tt<=0)return d=g/(g-tt),a.copy(s).addScaledVector(_vab,d);_vcp.subVectors(e,f);const nt=_vab.dot(_vcp),rt=_vac.dot(_vcp);if(rt>=0&&nt<=rt)return a.copy(f);const at=nt*b-g*rt;if(at<=0&&b>=0&&rt<=0)return h=b/(b-rt),a.copy(s).addScaledVector(_vac,h);const it=tt*rt-nt*j;if(it<=0&&j-tt>=0&&nt-rt>=0)return _vbc.subVectors(f,c),h=(j-tt)/(j-tt+(nt-rt)),a.copy(c).addScaledVector(_vbc,h);const $=1/(it+at+_e);return d=at*$,h=_e*$,a.copy(s).addScaledVector(_vab,d).addScaledVector(_vac,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(o,e,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?o+(e-o)*6*a:a<1/2?e:a<2/3?o+(e-o)*6*(2/3-a):o}function SRGBToLinear(o){return o<.04045?o*.0773993808:Math.pow(o*.9478672986+.0521327014,2.4)}function LinearToSRGB(o){return o<.0031308?o*12.92:1.055*Math.pow(o,.41666)-.055}class Color{constructor(e,a,s){return Object.defineProperty(this,"isColor",{value:!0}),a===void 0&&s===void 0?this.set(e):this.setRGB(e,a,s)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,a,s){return this.r=e,this.g=a,this.b=s,this}setHSL(e,a,s){if(e=MathUtils.euclideanModulo(e,1),a=MathUtils.clamp(a,0,1),s=MathUtils.clamp(s,0,1),a===0)this.r=this.g=this.b=s;else{const c=s<=.5?s*(1+a):s+a-s*a,f=2*s-c;this.r=hue2rgb(f,c,e+1/3),this.g=hue2rgb(f,c,e),this.b=hue2rgb(f,c,e-1/3)}return this}setStyle(e){function a(c){c!==void 0&&parseFloat(c)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let c;const f=s[1],d=s[2];switch(f){case"rgb":case"rgba":if(c=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,a(c[4]),this;if(c=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,a(c[4]),this;break;case"hsl":case"hsla":if(c=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d)){const h=parseFloat(c[1])/360,g=parseInt(c[2],10)/100,b=parseInt(c[3],10)/100;return a(c[4]),this.setHSL(h,g,b)}break}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const c=s[1],f=c.length;if(f===3)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(f===6)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const a=_colorKeywords[e];return a!==void 0?this.setHex(a):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,a=2){return this.r=Math.pow(e.r,a),this.g=Math.pow(e.g,a),this.b=Math.pow(e.b,a),this}copyLinearToGamma(e,a=2){const s=a>0?1/a:1;return this.r=Math.pow(e.r,s),this.g=Math.pow(e.g,s),this.b=Math.pow(e.b,s),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=SRGBToLinear(e.r),this.g=SRGBToLinear(e.g),this.b=SRGBToLinear(e.b),this}copyLinearToSRGB(e){return this.r=LinearToSRGB(e.r),this.g=LinearToSRGB(e.g),this.b=LinearToSRGB(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const a=this.r,s=this.g,c=this.b,f=Math.max(a,s,c),d=Math.min(a,s,c);let h,g;const b=(d+f)/2;if(d===f)h=0,g=0;else{const tt=f-d;switch(g=b<=.5?tt/(f+d):tt/(2-f-d),f){case a:h=(s-c)/tt+(s<c?6:0);break;case s:h=(c-a)/tt+2;break;case c:h=(a-s)/tt+4;break}h/=6}return e.h=h,e.s=g,e.l=b,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,a,s){return this.getHSL(_hslA),_hslA.h+=e,_hslA.s+=a,_hslA.l+=s,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,a){return this.r=e.r+a.r,this.g=e.g+a.g,this.b=e.b+a.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,a){return this.r+=(e.r-this.r)*a,this.g+=(e.g-this.g)*a,this.b+=(e.b-this.b)*a,this}lerpColors(e,a,s){return this.r=e.r+(a.r-e.r)*s,this.g=e.g+(a.g-e.g)*s,this.b=e.b+(a.b-e.b)*s,this}lerpHSL(e,a){this.getHSL(_hslA),e.getHSL(_hslB);const s=MathUtils.lerp(_hslA.h,_hslB.h,a),c=MathUtils.lerp(_hslA.s,_hslB.s,a),f=MathUtils.lerp(_hslA.l,_hslB.l,a);return this.setHSL(s,c,f),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,a=0){return this.r=e[a],this.g=e[a+1],this.b=e[a+2],this}toArray(e=[],a=0){return e[a]=this.r,e[a+1]=this.g,e[a+2]=this.b,e}fromBufferAttribute(e,a){return this.r=e.getX(a),this.g=e.getY(a),this.b=e.getZ(a),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Color.NAMES=_colorKeywords;Color.prototype.r=1;Color.prototype.g=1;Color.prototype.b=1;class Face3{constructor(e,a,s,c,f,d=0){this.a=e,this.b=a,this.c=s,this.normal=c&&c.isVector3?c:new Vector3,this.vertexNormals=Array.isArray(c)?c:[],this.color=f&&f.isColor?f:new Color,this.vertexColors=Array.isArray(f)?f:[],this.materialIndex=d}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let a=0,s=e.vertexNormals.length;a<s;a++)this.vertexNormals[a]=e.vertexNormals[a].clone();for(let a=0,s=e.vertexColors.length;a<s;a++)this.vertexColors[a]=e.vertexColors[a].clone();return this}}let materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(o){if(o!==void 0)for(const e in o){const a=o[e];if(a===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=a===FlatShading;continue}const s=this[e];if(s===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}s&&s.isColor?s.set(a):s&&s.isVector3&&a&&a.isVector3?s.copy(a):this[e]=a}},toJSON:function(o){const e=o===void 0||typeof o=="string";e&&(o={textures:{},images:{}});const a={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.color&&this.color.isColor&&(a.color=this.color.getHex()),this.roughness!==void 0&&(a.roughness=this.roughness),this.metalness!==void 0&&(a.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(a.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(a.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(a.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(a.specular=this.specular.getHex()),this.shininess!==void 0&&(a.shininess=this.shininess),this.clearcoat!==void 0&&(a.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(a.clearcoatMap=this.clearcoatMap.toJSON(o).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(a.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(o).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(a.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(o).uuid,a.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(a.map=this.map.toJSON(o).uuid),this.matcap&&this.matcap.isTexture&&(a.matcap=this.matcap.toJSON(o).uuid),this.alphaMap&&this.alphaMap.isTexture&&(a.alphaMap=this.alphaMap.toJSON(o).uuid),this.lightMap&&this.lightMap.isTexture&&(a.lightMap=this.lightMap.toJSON(o).uuid),this.aoMap&&this.aoMap.isTexture&&(a.aoMap=this.aoMap.toJSON(o).uuid,a.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(a.bumpMap=this.bumpMap.toJSON(o).uuid,a.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(a.normalMap=this.normalMap.toJSON(o).uuid,a.normalMapType=this.normalMapType,a.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(a.displacementMap=this.displacementMap.toJSON(o).uuid,a.displacementScale=this.displacementScale,a.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(a.roughnessMap=this.roughnessMap.toJSON(o).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(a.metalnessMap=this.metalnessMap.toJSON(o).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(a.emissiveMap=this.emissiveMap.toJSON(o).uuid),this.specularMap&&this.specularMap.isTexture&&(a.specularMap=this.specularMap.toJSON(o).uuid),this.envMap&&this.envMap.isTexture&&(a.envMap=this.envMap.toJSON(o).uuid,a.reflectivity=this.reflectivity,a.refractionRatio=this.refractionRatio,this.combine!==void 0&&(a.combine=this.combine),this.envMapIntensity!==void 0&&(a.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(a.gradientMap=this.gradientMap.toJSON(o).uuid),this.size!==void 0&&(a.size=this.size),this.sizeAttenuation!==void 0&&(a.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(a.blending=this.blending),this.flatShading===!0&&(a.flatShading=this.flatShading),this.side!==FrontSide&&(a.side=this.side),this.vertexColors&&(a.vertexColors=!0),this.opacity<1&&(a.opacity=this.opacity),this.transparent===!0&&(a.transparent=this.transparent),a.depthFunc=this.depthFunc,a.depthTest=this.depthTest,a.depthWrite=this.depthWrite,a.stencilWrite=this.stencilWrite,a.stencilWriteMask=this.stencilWriteMask,a.stencilFunc=this.stencilFunc,a.stencilRef=this.stencilRef,a.stencilFuncMask=this.stencilFuncMask,a.stencilFail=this.stencilFail,a.stencilZFail=this.stencilZFail,a.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(a.rotation=this.rotation),this.polygonOffset===!0&&(a.polygonOffset=!0),this.polygonOffsetFactor!==0&&(a.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(a.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(a.linewidth=this.linewidth),this.dashSize!==void 0&&(a.dashSize=this.dashSize),this.gapSize!==void 0&&(a.gapSize=this.gapSize),this.scale!==void 0&&(a.scale=this.scale),this.dithering===!0&&(a.dithering=!0),this.alphaTest>0&&(a.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(a.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(a.wireframe=this.wireframe),this.wireframeLinewidth>1&&(a.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(a.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(a.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(a.morphTargets=!0),this.morphNormals===!0&&(a.morphNormals=!0),this.skinning===!0&&(a.skinning=!0),this.visible===!1&&(a.visible=!1),this.toneMapped===!1&&(a.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(a.userData=this.userData);function s(c){const f=[];for(const d in c){const h=c[d];delete h.metadata,f.push(h)}return f}if(e){const c=s(o.textures),f=s(o.images);c.length>0&&(a.textures=c),f.length>0&&(a.images=f)}return a},clone:function(){return new this.constructor().copy(this)},copy:function(o){this.name=o.name,this.fog=o.fog,this.blending=o.blending,this.side=o.side,this.flatShading=o.flatShading,this.vertexColors=o.vertexColors,this.opacity=o.opacity,this.transparent=o.transparent,this.blendSrc=o.blendSrc,this.blendDst=o.blendDst,this.blendEquation=o.blendEquation,this.blendSrcAlpha=o.blendSrcAlpha,this.blendDstAlpha=o.blendDstAlpha,this.blendEquationAlpha=o.blendEquationAlpha,this.depthFunc=o.depthFunc,this.depthTest=o.depthTest,this.depthWrite=o.depthWrite,this.stencilWriteMask=o.stencilWriteMask,this.stencilFunc=o.stencilFunc,this.stencilRef=o.stencilRef,this.stencilFuncMask=o.stencilFuncMask,this.stencilFail=o.stencilFail,this.stencilZFail=o.stencilZFail,this.stencilZPass=o.stencilZPass,this.stencilWrite=o.stencilWrite;const e=o.clippingPlanes;let a=null;if(e!==null){const s=e.length;a=new Array(s);for(let c=0;c!==s;++c)a[c]=e[c].clone()}return this.clippingPlanes=a,this.clipIntersection=o.clipIntersection,this.clipShadows=o.clipShadows,this.shadowSide=o.shadowSide,this.colorWrite=o.colorWrite,this.precision=o.precision,this.polygonOffset=o.polygonOffset,this.polygonOffsetFactor=o.polygonOffsetFactor,this.polygonOffsetUnits=o.polygonOffsetUnits,this.dithering=o.dithering,this.alphaTest=o.alphaTest,this.premultipliedAlpha=o.premultipliedAlpha,this.visible=o.visible,this.toneMapped=o.toneMapped,this.userData=JSON.parse(JSON.stringify(o.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function(o){o===!0&&this.version++}});function MeshBasicMaterial(o){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(o)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(o){return Material.prototype.copy.call(this,o),this.color.copy(o.color),this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this};const _vector$3=new Vector3,_vector2$1=new Vector2;function BufferAttribute(o,e,a){if(Array.isArray(o))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=o,this.itemSize=e,this.count=o!==void 0?o.length/e:0,this.normalized=a===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(o){o===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(o){return this.usage=o,this},copy:function(o){return this.name=o.name,this.array=new o.array.constructor(o.array),this.itemSize=o.itemSize,this.count=o.count,this.normalized=o.normalized,this.usage=o.usage,this},copyAt:function(o,e,a){o*=this.itemSize,a*=e.itemSize;for(let s=0,c=this.itemSize;s<c;s++)this.array[o+s]=e.array[a+s];return this},copyArray:function(o){return this.array.set(o),this},copyColorsArray:function(o){const e=this.array;let a=0;for(let s=0,c=o.length;s<c;s++){let f=o[s];f===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),f=new Color),e[a++]=f.r,e[a++]=f.g,e[a++]=f.b}return this},copyVector2sArray:function(o){const e=this.array;let a=0;for(let s=0,c=o.length;s<c;s++){let f=o[s];f===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),f=new Vector2),e[a++]=f.x,e[a++]=f.y}return this},copyVector3sArray:function(o){const e=this.array;let a=0;for(let s=0,c=o.length;s<c;s++){let f=o[s];f===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),f=new Vector3),e[a++]=f.x,e[a++]=f.y,e[a++]=f.z}return this},copyVector4sArray:function(o){const e=this.array;let a=0;for(let s=0,c=o.length;s<c;s++){let f=o[s];f===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),f=new Vector4),e[a++]=f.x,e[a++]=f.y,e[a++]=f.z,e[a++]=f.w}return this},applyMatrix3:function(o){if(this.itemSize===2)for(let e=0,a=this.count;e<a;e++)_vector2$1.fromBufferAttribute(this,e),_vector2$1.applyMatrix3(o),this.setXY(e,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let e=0,a=this.count;e<a;e++)_vector$3.fromBufferAttribute(this,e),_vector$3.applyMatrix3(o),this.setXYZ(e,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(o){for(let e=0,a=this.count;e<a;e++)_vector$3.x=this.getX(e),_vector$3.y=this.getY(e),_vector$3.z=this.getZ(e),_vector$3.applyMatrix4(o),this.setXYZ(e,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(o){for(let e=0,a=this.count;e<a;e++)_vector$3.x=this.getX(e),_vector$3.y=this.getY(e),_vector$3.z=this.getZ(e),_vector$3.applyNormalMatrix(o),this.setXYZ(e,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(o){for(let e=0,a=this.count;e<a;e++)_vector$3.x=this.getX(e),_vector$3.y=this.getY(e),_vector$3.z=this.getZ(e),_vector$3.transformDirection(o),this.setXYZ(e,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(o,e=0){return this.array.set(o,e),this},getX:function(o){return this.array[o*this.itemSize]},setX:function(o,e){return this.array[o*this.itemSize]=e,this},getY:function(o){return this.array[o*this.itemSize+1]},setY:function(o,e){return this.array[o*this.itemSize+1]=e,this},getZ:function(o){return this.array[o*this.itemSize+2]},setZ:function(o,e){return this.array[o*this.itemSize+2]=e,this},getW:function(o){return this.array[o*this.itemSize+3]},setW:function(o,e){return this.array[o*this.itemSize+3]=e,this},setXY:function(o,e,a){return o*=this.itemSize,this.array[o+0]=e,this.array[o+1]=a,this},setXYZ:function(o,e,a,s){return o*=this.itemSize,this.array[o+0]=e,this.array[o+1]=a,this.array[o+2]=s,this},setXYZW:function(o,e,a,s,c){return o*=this.itemSize,this.array[o+0]=e,this.array[o+1]=a,this.array[o+2]=s,this.array[o+3]=c,this},onUpload:function(o){return this.onUploadCallback=o,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Int8BufferAttribute(o,e,a){BufferAttribute.call(this,new Int8Array(o),e,a)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(o,e,a){BufferAttribute.call(this,new Uint8Array(o),e,a)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(o,e,a){BufferAttribute.call(this,new Uint8ClampedArray(o),e,a)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(o,e,a){BufferAttribute.call(this,new Int16Array(o),e,a)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(o,e,a){BufferAttribute.call(this,new Uint16Array(o),e,a)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(o,e,a){BufferAttribute.call(this,new Int32Array(o),e,a)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(o,e,a){BufferAttribute.call(this,new Uint32Array(o),e,a)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float16BufferAttribute(o,e,a){BufferAttribute.call(this,new Uint16Array(o),e,a)}Float16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float16BufferAttribute.prototype.constructor=Float16BufferAttribute;Float16BufferAttribute.prototype.isFloat16BufferAttribute=!0;function Float32BufferAttribute(o,e,a){BufferAttribute.call(this,new Float32Array(o),e,a)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(o,e,a){BufferAttribute.call(this,new Float64Array(o),e,a)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function arrayMax(o){if(o.length===0)return-1/0;let e=o[0];for(let a=1,s=o.length;a<s;++a)o[a]>e&&(e=o[a]);return e}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(o,e){return new TYPED_ARRAYS[o](e)}let _id=0;const _m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_id++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(o){return Array.isArray(o)?this.index=new(arrayMax(o)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(o,1):this.index=o,this},getAttribute:function(o){return this.attributes[o]},setAttribute:function(o,e){return this.attributes[o]=e,this},deleteAttribute:function(o){return delete this.attributes[o],this},hasAttribute:function(o){return this.attributes[o]!==void 0},addGroup:function(o,e,a=0){this.groups.push({start:o,count:e,materialIndex:a})},clearGroups:function(){this.groups=[]},setDrawRange:function(o,e){this.drawRange.start=o,this.drawRange.count=e},applyMatrix4:function(o){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(o),e.needsUpdate=!0);const a=this.attributes.normal;if(a!==void 0){const c=new Matrix3().getNormalMatrix(o);a.applyNormalMatrix(c),a.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(o),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(o){return _m1$2.makeRotationX(o),this.applyMatrix4(_m1$2),this},rotateY:function(o){return _m1$2.makeRotationY(o),this.applyMatrix4(_m1$2),this},rotateZ:function(o){return _m1$2.makeRotationZ(o),this.applyMatrix4(_m1$2),this},translate:function(o,e,a){return _m1$2.makeTranslation(o,e,a),this.applyMatrix4(_m1$2),this},scale:function(o,e,a){return _m1$2.makeScale(o,e,a),this.applyMatrix4(_m1$2),this},lookAt:function(o){return _obj.lookAt(o),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromPoints:function(o){const e=[];for(let a=0,s=o.length;a<s;a++){const c=o[a];e.push(c.x,c.y,c.z||0)}return this.setAttribute("position",new Float32BufferAttribute(e,3)),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);const o=this.attributes.position,e=this.morphAttributes.position;if(o&&o.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(o!==void 0){if(this.boundingBox.setFromBufferAttribute(o),e)for(let a=0,s=e.length;a<s;a++){const c=e[a];_box$2.setFromBufferAttribute(c),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const o=this.attributes.position,e=this.morphAttributes.position;if(o&&o.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(o){const a=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(o),e)for(let c=0,f=e.length;c<f;c++){const d=e[c];_boxMorphTargets.setFromBufferAttribute(d),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(a);let s=0;for(let c=0,f=o.count;c<f;c++)_vector$4.fromBufferAttribute(o,c),s=Math.max(s,a.distanceToSquared(_vector$4));if(e)for(let c=0,f=e.length;c<f;c++){const d=e[c],h=this.morphTargetsRelative;for(let g=0,b=d.count;g<b;g++)_vector$4.fromBufferAttribute(d,g),h&&(_offset.fromBufferAttribute(o,g),_vector$4.add(_offset)),s=Math.max(s,a.distanceToSquared(_vector$4))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){const o=this.index,e=this.attributes;if(o===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const a=o.array,s=e.position.array,c=e.normal.array,f=e.uv.array,d=s.length/3;e.tangent===void 0&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*d),4));const h=e.tangent.array,g=[],b=[];for(let mt=0;mt<d;mt++)g[mt]=new Vector3,b[mt]=new Vector3;const tt=new Vector3,j=new Vector3,_e=new Vector3,nt=new Vector2,rt=new Vector2,at=new Vector2,it=new Vector3,$=new Vector3;function et(mt,bt,St){tt.fromArray(s,mt*3),j.fromArray(s,bt*3),_e.fromArray(s,St*3),nt.fromArray(f,mt*2),rt.fromArray(f,bt*2),at.fromArray(f,St*2),j.sub(tt),_e.sub(tt),rt.sub(nt),at.sub(nt);const Ft=1/(rt.x*at.y-at.x*rt.y);!isFinite(Ft)||(it.copy(j).multiplyScalar(at.y).addScaledVector(_e,-rt.y).multiplyScalar(Ft),$.copy(_e).multiplyScalar(rt.x).addScaledVector(j,-at.x).multiplyScalar(Ft),g[mt].add(it),g[bt].add(it),g[St].add(it),b[mt].add($),b[bt].add($),b[St].add($))}let st=this.groups;st.length===0&&(st=[{start:0,count:a.length}]);for(let mt=0,bt=st.length;mt<bt;++mt){const St=st[mt],Ft=St.start,It=St.count;for(let Ct=Ft,Pt=Ft+It;Ct<Pt;Ct+=3)et(a[Ct+0],a[Ct+1],a[Ct+2])}const lt=new Vector3,ct=new Vector3,ut=new Vector3,ht=new Vector3;function pt(mt){ut.fromArray(c,mt*3),ht.copy(ut);const bt=g[mt];lt.copy(bt),lt.sub(ut.multiplyScalar(ut.dot(bt))).normalize(),ct.crossVectors(ht,bt);const Ft=ct.dot(b[mt])<0?-1:1;h[mt*4]=lt.x,h[mt*4+1]=lt.y,h[mt*4+2]=lt.z,h[mt*4+3]=Ft}for(let mt=0,bt=st.length;mt<bt;++mt){const St=st[mt],Ft=St.start,It=St.count;for(let Ct=Ft,Pt=Ft+It;Ct<Pt;Ct+=3)pt(a[Ct+0]),pt(a[Ct+1]),pt(a[Ct+2])}},computeVertexNormals:function(){const o=this.index,e=this.getAttribute("position");if(e!==void 0){let a=this.getAttribute("normal");if(a===void 0)a=new BufferAttribute(new Float32Array(e.count*3),3),this.setAttribute("normal",a);else for(let j=0,_e=a.count;j<_e;j++)a.setXYZ(j,0,0,0);const s=new Vector3,c=new Vector3,f=new Vector3,d=new Vector3,h=new Vector3,g=new Vector3,b=new Vector3,tt=new Vector3;if(o)for(let j=0,_e=o.count;j<_e;j+=3){const nt=o.getX(j+0),rt=o.getX(j+1),at=o.getX(j+2);s.fromBufferAttribute(e,nt),c.fromBufferAttribute(e,rt),f.fromBufferAttribute(e,at),b.subVectors(f,c),tt.subVectors(s,c),b.cross(tt),d.fromBufferAttribute(a,nt),h.fromBufferAttribute(a,rt),g.fromBufferAttribute(a,at),d.add(b),h.add(b),g.add(b),a.setXYZ(nt,d.x,d.y,d.z),a.setXYZ(rt,h.x,h.y,h.z),a.setXYZ(at,g.x,g.y,g.z)}else for(let j=0,_e=e.count;j<_e;j+=3)s.fromBufferAttribute(e,j+0),c.fromBufferAttribute(e,j+1),f.fromBufferAttribute(e,j+2),b.subVectors(f,c),tt.subVectors(s,c),b.cross(tt),a.setXYZ(j+0,b.x,b.y,b.z),a.setXYZ(j+1,b.x,b.y,b.z),a.setXYZ(j+2,b.x,b.y,b.z);this.normalizeNormals(),a.needsUpdate=!0}},merge:function(o,e){if(!(o&&o.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",o);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const a=this.attributes;for(const s in a){if(o.attributes[s]===void 0)continue;const f=a[s].array,d=o.attributes[s],h=d.array,g=d.itemSize*e,b=Math.min(h.length,f.length-g);for(let tt=0,j=g;tt<b;tt++,j++)f[j]=h[tt]}return this},normalizeNormals:function(){const o=this.attributes.normal;for(let e=0,a=o.count;e<a;e++)_vector$4.fromBufferAttribute(o,e),_vector$4.normalize(),o.setXYZ(e,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function o(d,h){const g=d.array,b=d.itemSize,tt=d.normalized,j=new g.constructor(h.length*b);let _e=0,nt=0;for(let rt=0,at=h.length;rt<at;rt++){_e=h[rt]*b;for(let it=0;it<b;it++)j[nt++]=g[_e++]}return new BufferAttribute(j,b,tt)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new BufferGeometry,a=this.index.array,s=this.attributes;for(const d in s){const h=s[d],g=o(h,a);e.setAttribute(d,g)}const c=this.morphAttributes;for(const d in c){const h=[],g=c[d];for(let b=0,tt=g.length;b<tt;b++){const j=g[b],_e=o(j,a);h.push(_e)}e.morphAttributes[d]=h}e.morphTargetsRelative=this.morphTargetsRelative;const f=this.groups;for(let d=0,h=f.length;d<h;d++){const g=f[d];e.addGroup(g.start,g.count,g.materialIndex)}return e},toJSON:function(){const o={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),Object.keys(this.userData).length>0&&(o.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const g in h)h[g]!==void 0&&(o[g]=h[g]);return o}o.data={attributes:{}};const e=this.index;e!==null&&(o.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const a=this.attributes;for(const h in a){const g=a[h],b=g.toJSON(o.data);g.name!==""&&(b.name=g.name),o.data.attributes[h]=b}const s={};let c=!1;for(const h in this.morphAttributes){const g=this.morphAttributes[h],b=[];for(let tt=0,j=g.length;tt<j;tt++){const _e=g[tt],nt=_e.toJSON(o.data);_e.name!==""&&(nt.name=_e.name),b.push(nt)}b.length>0&&(s[h]=b,c=!0)}c&&(o.data.morphAttributes=s,o.data.morphTargetsRelative=this.morphTargetsRelative);const f=this.groups;f.length>0&&(o.data.groups=JSON.parse(JSON.stringify(f)));const d=this.boundingSphere;return d!==null&&(o.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),o},clone:function(){return new BufferGeometry().copy(this)},copy:function(o){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=o.name;const a=o.index;a!==null&&this.setIndex(a.clone(e));const s=o.attributes;for(const g in s){const b=s[g];this.setAttribute(g,b.clone(e))}const c=o.morphAttributes;for(const g in c){const b=[],tt=c[g];for(let j=0,_e=tt.length;j<_e;j++)b.push(tt[j].clone(e));this.morphAttributes[g]=b}this.morphTargetsRelative=o.morphTargetsRelative;const f=o.groups;for(let g=0,b=f.length;g<b;g++){const tt=f[g];this.addGroup(tt.start,tt.count,tt.materialIndex)}const d=o.boundingBox;d!==null&&(this.boundingBox=d.clone());const h=o.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=o.drawRange.start,this.drawRange.count=o.drawRange.count,this.userData=o.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(o=new BufferGeometry,e=new MeshBasicMaterial){Object3D.call(this),this.type="Mesh",this.geometry=o,this.material=e,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(o){return Object3D.prototype.copy.call(this,o),o.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=o.morphTargetInfluences.slice()),o.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},o.morphTargetDictionary)),this.material=o.material,this.geometry=o.geometry,this},updateMorphTargets:function(){const o=this.geometry;if(o.isBufferGeometry){const e=o.morphAttributes,a=Object.keys(e);if(a.length>0){const s=e[a[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,f=s.length;c<f;c++){const d=s[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=c}}}}else{const e=o.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(o,e){const a=this.geometry,s=this.material,c=this.matrixWorld;if(s===void 0||(a.boundingSphere===null&&a.computeBoundingSphere(),_sphere.copy(a.boundingSphere),_sphere.applyMatrix4(c),o.ray.intersectsSphere(_sphere)===!1)||(_inverseMatrix.copy(c).invert(),_ray.copy(o.ray).applyMatrix4(_inverseMatrix),a.boundingBox!==null&&_ray.intersectsBox(a.boundingBox)===!1))return;let f;if(a.isBufferGeometry){const d=a.index,h=a.attributes.position,g=a.morphAttributes.position,b=a.morphTargetsRelative,tt=a.attributes.uv,j=a.attributes.uv2,_e=a.groups,nt=a.drawRange;if(d!==null)if(Array.isArray(s))for(let rt=0,at=_e.length;rt<at;rt++){const it=_e[rt],$=s[it.materialIndex],et=Math.max(it.start,nt.start),st=Math.min(it.start+it.count,nt.start+nt.count);for(let lt=et,ct=st;lt<ct;lt+=3){const ut=d.getX(lt),ht=d.getX(lt+1),pt=d.getX(lt+2);f=checkBufferGeometryIntersection(this,$,o,_ray,h,g,b,tt,j,ut,ht,pt),f&&(f.faceIndex=Math.floor(lt/3),f.face.materialIndex=it.materialIndex,e.push(f))}}else{const rt=Math.max(0,nt.start),at=Math.min(d.count,nt.start+nt.count);for(let it=rt,$=at;it<$;it+=3){const et=d.getX(it),st=d.getX(it+1),lt=d.getX(it+2);f=checkBufferGeometryIntersection(this,s,o,_ray,h,g,b,tt,j,et,st,lt),f&&(f.faceIndex=Math.floor(it/3),e.push(f))}}else if(h!==void 0)if(Array.isArray(s))for(let rt=0,at=_e.length;rt<at;rt++){const it=_e[rt],$=s[it.materialIndex],et=Math.max(it.start,nt.start),st=Math.min(it.start+it.count,nt.start+nt.count);for(let lt=et,ct=st;lt<ct;lt+=3){const ut=lt,ht=lt+1,pt=lt+2;f=checkBufferGeometryIntersection(this,$,o,_ray,h,g,b,tt,j,ut,ht,pt),f&&(f.faceIndex=Math.floor(lt/3),f.face.materialIndex=it.materialIndex,e.push(f))}}else{const rt=Math.max(0,nt.start),at=Math.min(h.count,nt.start+nt.count);for(let it=rt,$=at;it<$;it+=3){const et=it,st=it+1,lt=it+2;f=checkBufferGeometryIntersection(this,s,o,_ray,h,g,b,tt,j,et,st,lt),f&&(f.faceIndex=Math.floor(it/3),e.push(f))}}}else a.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});function checkIntersection(o,e,a,s,c,f,d,h){let g;if(e.side===BackSide?g=s.intersectTriangle(d,f,c,!0,h):g=s.intersectTriangle(c,f,d,e.side!==DoubleSide,h),g===null)return null;_intersectionPointWorld.copy(h),_intersectionPointWorld.applyMatrix4(o.matrixWorld);const b=a.ray.origin.distanceTo(_intersectionPointWorld);return b<a.near||b>a.far?null:{distance:b,point:_intersectionPointWorld.clone(),object:o}}function checkBufferGeometryIntersection(o,e,a,s,c,f,d,h,g,b,tt,j){_vA.fromBufferAttribute(c,b),_vB.fromBufferAttribute(c,tt),_vC.fromBufferAttribute(c,j);const _e=o.morphTargetInfluences;if(e.morphTargets&&f&&_e){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(let rt=0,at=f.length;rt<at;rt++){const it=_e[rt],$=f[rt];it!==0&&(_tempA.fromBufferAttribute($,b),_tempB.fromBufferAttribute($,tt),_tempC.fromBufferAttribute($,j),d?(_morphA.addScaledVector(_tempA,it),_morphB.addScaledVector(_tempB,it),_morphC.addScaledVector(_tempC,it)):(_morphA.addScaledVector(_tempA.sub(_vA),it),_morphB.addScaledVector(_tempB.sub(_vB),it),_morphC.addScaledVector(_tempC.sub(_vC),it)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}o.isSkinnedMesh&&(o.boneTransform(b,_vA),o.boneTransform(tt,_vB),o.boneTransform(j,_vC));const nt=checkIntersection(o,e,a,s,_vA,_vB,_vC,_intersectionPoint);if(nt){h&&(_uvA.fromBufferAttribute(h,b),_uvB.fromBufferAttribute(h,tt),_uvC.fromBufferAttribute(h,j),nt.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),g&&(_uvA.fromBufferAttribute(g,b),_uvB.fromBufferAttribute(g,tt),_uvC.fromBufferAttribute(g,j),nt.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));const rt=new Face3(b,tt,j);Triangle.getNormal(_vA,_vB,_vC,rt.normal),nt.face=rt}return nt}class BoxGeometry extends BufferGeometry{constructor(e=1,a=1,s=1,c=1,f=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:a,depth:s,widthSegments:c,heightSegments:f,depthSegments:d};const h=this;c=Math.floor(c),f=Math.floor(f),d=Math.floor(d);const g=[],b=[],tt=[],j=[];let _e=0,nt=0;rt("z","y","x",-1,-1,s,a,e,d,f,0),rt("z","y","x",1,-1,s,a,-e,d,f,1),rt("x","z","y",1,1,e,s,a,c,d,2),rt("x","z","y",1,-1,e,s,-a,c,d,3),rt("x","y","z",1,-1,e,a,s,c,f,4),rt("x","y","z",-1,-1,e,a,-s,c,f,5),this.setIndex(g),this.setAttribute("position",new Float32BufferAttribute(b,3)),this.setAttribute("normal",new Float32BufferAttribute(tt,3)),this.setAttribute("uv",new Float32BufferAttribute(j,2));function rt(at,it,$,et,st,lt,ct,ut,ht,pt,mt){const bt=lt/ht,St=ct/pt,Ft=lt/2,It=ct/2,Ct=ut/2,Pt=ht+1,Nt=pt+1;let zt=0,Xt=0;const en=new Vector3;for(let rn=0;rn<Nt;rn++){const Gt=rn*St-It;for(let qt=0;qt<Pt;qt++){const sn=qt*bt-Ft;en[at]=sn*et,en[it]=Gt*st,en[$]=Ct,b.push(en.x,en.y,en.z),en[at]=0,en[it]=0,en[$]=ut>0?1:-1,tt.push(en.x,en.y,en.z),j.push(qt/ht),j.push(1-rn/pt),zt+=1}}for(let rn=0;rn<pt;rn++)for(let Gt=0;Gt<ht;Gt++){const qt=_e+Gt+Pt*rn,sn=_e+Gt+Pt*(rn+1),yn=_e+(Gt+1)+Pt*(rn+1),Yt=_e+(Gt+1)+Pt*rn;g.push(qt,sn,Yt),g.push(sn,yn,Yt),Xt+=6}h.addGroup(nt,Xt,mt),nt+=Xt,_e+=zt}}}function cloneUniforms(o){const e={};for(const a in o){e[a]={};for(const s in o[a]){const c=o[a][s];c&&(c.isColor||c.isMatrix3||c.isMatrix4||c.isVector2||c.isVector3||c.isVector4||c.isTexture)?e[a][s]=c.clone():Array.isArray(c)?e[a][s]=c.slice():e[a][s]=c}}return e}function mergeUniforms(o){const e={};for(let a=0;a<o.length;a++){const s=cloneUniforms(o[a]);for(const c in s)e[c]=s[c]}return e}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ShaderMaterial(o){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,o!==void 0&&(o.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(o))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(o){return Material.prototype.copy.call(this,o),this.fragmentShader=o.fragmentShader,this.vertexShader=o.vertexShader,this.uniforms=cloneUniforms(o.uniforms),this.defines=Object.assign({},o.defines),this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.lights=o.lights,this.clipping=o.clipping,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.morphNormals=o.morphNormals,this.extensions=Object.assign({},o.extensions),this.glslVersion=o.glslVersion,this};ShaderMaterial.prototype.toJSON=function(o){const e=Material.prototype.toJSON.call(this,o);e.glslVersion=this.glslVersion,e.uniforms={};for(const s in this.uniforms){const f=this.uniforms[s].value;f&&f.isTexture?e.uniforms[s]={type:"t",value:f.toJSON(o).uuid}:f&&f.isColor?e.uniforms[s]={type:"c",value:f.getHex()}:f&&f.isVector2?e.uniforms[s]={type:"v2",value:f.toArray()}:f&&f.isVector3?e.uniforms[s]={type:"v3",value:f.toArray()}:f&&f.isVector4?e.uniforms[s]={type:"v4",value:f.toArray()}:f&&f.isMatrix3?e.uniforms[s]={type:"m3",value:f.toArray()}:f&&f.isMatrix4?e.uniforms[s]={type:"m4",value:f.toArray()}:e.uniforms[s]={value:f}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const a={};for(const s in this.extensions)this.extensions[s]===!0&&(a[s]=!0);return Object.keys(a).length>0&&(e.extensions=a),e};function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(o,e){return Object3D.prototype.copy.call(this,o,e),this.matrixWorldInverse.copy(o.matrixWorldInverse),this.projectionMatrix.copy(o.projectionMatrix),this.projectionMatrixInverse.copy(o.projectionMatrixInverse),this},getWorldDirection:function(o){o===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),o=new Vector3),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return o.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(o){Object3D.prototype.updateMatrixWorld.call(this,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(o,e){Object3D.prototype.updateWorldMatrix.call(this,o,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(o=50,e=1,a=.1,s=2e3){Camera.call(this),this.type="PerspectiveCamera",this.fov=o,this.zoom=1,this.near=a,this.far=s,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(o,e){return Camera.prototype.copy.call(this,o,e),this.fov=o.fov,this.zoom=o.zoom,this.near=o.near,this.far=o.far,this.focus=o.focus,this.aspect=o.aspect,this.view=o.view===null?null:Object.assign({},o.view),this.filmGauge=o.filmGauge,this.filmOffset=o.filmOffset,this},setFocalLength:function(o){const e=.5*this.getFilmHeight()/o;this.fov=MathUtils.RAD2DEG*2*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const o=Math.tan(MathUtils.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/o},getEffectiveFOV:function(){return MathUtils.RAD2DEG*2*Math.atan(Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(o,e,a,s,c,f){this.aspect=o/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=e,this.view.offsetX=a,this.view.offsetY=s,this.view.width=c,this.view.height=f,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const o=this.near;let e=o*Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom,a=2*e,s=this.aspect*a,c=-.5*s;const f=this.view;if(this.view!==null&&this.view.enabled){const h=f.fullWidth,g=f.fullHeight;c+=f.offsetX*s/h,e-=f.offsetY*a/g,s*=f.width/h,a*=f.height/g}const d=this.filmOffset;d!==0&&(c+=o*d/this.getFilmWidth()),this.projectionMatrix.makePerspective(c,c+s,e,e-a,o,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(o){const e=Object3D.prototype.toJSON.call(this,o);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});const fov=90,aspect=1;function CubeCamera(o,e,a){if(Object3D.call(this),this.type="CubeCamera",a.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=a;const s=new PerspectiveCamera(fov,aspect,o,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Vector3(1,0,0)),this.add(s);const c=new PerspectiveCamera(fov,aspect,o,e);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Vector3(-1,0,0)),this.add(c);const f=new PerspectiveCamera(fov,aspect,o,e);f.layers=this.layers,f.up.set(0,0,1),f.lookAt(new Vector3(0,1,0)),this.add(f);const d=new PerspectiveCamera(fov,aspect,o,e);d.layers=this.layers,d.up.set(0,0,-1),d.lookAt(new Vector3(0,-1,0)),this.add(d);const h=new PerspectiveCamera(fov,aspect,o,e);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new Vector3(0,0,1)),this.add(h);const g=new PerspectiveCamera(fov,aspect,o,e);g.layers=this.layers,g.up.set(0,-1,0),g.lookAt(new Vector3(0,0,-1)),this.add(g),this.update=function(b,tt){this.parent===null&&this.updateMatrixWorld();const j=b.xr.enabled,_e=b.getRenderTarget();b.xr.enabled=!1;const nt=a.texture.generateMipmaps;a.texture.generateMipmaps=!1,b.setRenderTarget(a,0),b.render(tt,s),b.setRenderTarget(a,1),b.render(tt,c),b.setRenderTarget(a,2),b.render(tt,f),b.setRenderTarget(a,3),b.render(tt,d),b.setRenderTarget(a,4),b.render(tt,h),a.texture.generateMipmaps=nt,b.setRenderTarget(a,5),b.render(tt,g),b.setRenderTarget(_e),b.xr.enabled=j}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function CubeTexture(o,e,a,s,c,f,d,h,g,b){o=o!==void 0?o:[],e=e!==void 0?e:CubeReflectionMapping,d=d!==void 0?d:RGBFormat,Texture.call(this,o,e,a,s,c,f,d,h,g,b),this.flipY=!1,this._needsFlipEnvMap=!0}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(o){this.image=o}});class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(e,a,s){Number.isInteger(a)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),a=s),super(e,e,a),Object.defineProperty(this,"isWebGLCubeRenderTarget",{value:!0}),a=a||{},this.texture=new CubeTexture(void 0,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,a){this.texture.type=a.type,this.texture.format=RGBAFormat,this.texture.encoding=a.encoding,this.texture.generateMipmaps=a.generateMipmaps,this.texture.minFilter=a.minFilter,this.texture.magFilter=a.magFilter;const s={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},c=new BoxGeometry(5,5,5),f=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,side:BackSide,blending:NoBlending});f.uniforms.tEquirect.value=a;const d=new Mesh(c,f),h=a.minFilter;return a.minFilter===LinearMipmapLinearFilter&&(a.minFilter=LinearFilter),new CubeCamera(1,10,this).update(e,d),a.minFilter=h,d.geometry.dispose(),d.material.dispose(),this}clear(e,a,s,c){const f=e.getRenderTarget();for(let d=0;d<6;d++)e.setRenderTarget(this,d),e.clear(a,s,c);e.setRenderTarget(f)}}function DataTexture(o,e,a,s,c,f,d,h,g,b,tt,j){Texture.call(this,null,f,d,h,g,b,s,c,tt,j),this.image={data:o||null,width:e||1,height:a||1},this.magFilter=g!==void 0?g:NearestFilter,this.minFilter=b!==void 0?b:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;const _sphere$1=new Sphere,_vector$5=new Vector3;class Frustum{constructor(e,a,s,c,f,d){this.planes=[e!==void 0?e:new Plane,a!==void 0?a:new Plane,s!==void 0?s:new Plane,c!==void 0?c:new Plane,f!==void 0?f:new Plane,d!==void 0?d:new Plane]}set(e,a,s,c,f,d){const h=this.planes;return h[0].copy(e),h[1].copy(a),h[2].copy(s),h[3].copy(c),h[4].copy(f),h[5].copy(d),this}clone(){return new this.constructor().copy(this)}copy(e){const a=this.planes;for(let s=0;s<6;s++)a[s].copy(e.planes[s]);return this}setFromProjectionMatrix(e){const a=this.planes,s=e.elements,c=s[0],f=s[1],d=s[2],h=s[3],g=s[4],b=s[5],tt=s[6],j=s[7],_e=s[8],nt=s[9],rt=s[10],at=s[11],it=s[12],$=s[13],et=s[14],st=s[15];return a[0].setComponents(h-c,j-g,at-_e,st-it).normalize(),a[1].setComponents(h+c,j+g,at+_e,st+it).normalize(),a[2].setComponents(h+f,j+b,at+nt,st+$).normalize(),a[3].setComponents(h-f,j-b,at-nt,st-$).normalize(),a[4].setComponents(h-d,j-tt,at-rt,st-et).normalize(),a[5].setComponents(h+d,j+tt,at+rt,st+et).normalize(),this}intersectsObject(e){const a=e.geometry;return a.boundingSphere===null&&a.computeBoundingSphere(),_sphere$1.copy(a.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(_sphere$1)}intersectsSprite(e){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(e.matrixWorld),this.intersectsSphere(_sphere$1)}intersectsSphere(e){const a=this.planes,s=e.center,c=-e.radius;for(let f=0;f<6;f++)if(a[f].distanceToPoint(s)<c)return!1;return!0}intersectsBox(e){const a=this.planes;for(let s=0;s<6;s++){const c=a[s];if(_vector$5.x=c.normal.x>0?e.max.x:e.min.x,_vector$5.y=c.normal.y>0?e.max.y:e.min.y,_vector$5.z=c.normal.z>0?e.max.z:e.min.z,c.distanceToPoint(_vector$5)<0)return!1}return!0}containsPoint(e){const a=this.planes;for(let s=0;s<6;s++)if(a[s].distanceToPoint(e)<0)return!1;return!0}}function WebGLAnimation(){let o=null,e=!1,a=null,s=null;function c(f,d){a(f,d),s=o.requestAnimationFrame(c)}return{start:function(){e!==!0&&a!==null&&(s=o.requestAnimationFrame(c),e=!0)},stop:function(){o.cancelAnimationFrame(s),e=!1},setAnimationLoop:function(f){a=f},setContext:function(f){o=f}}}function WebGLAttributes(o,e){const a=e.isWebGL2,s=new WeakMap;function c(b,tt){const j=b.array,_e=b.usage,nt=o.createBuffer();o.bindBuffer(tt,nt),o.bufferData(tt,j,_e),b.onUploadCallback();let rt=5126;return j instanceof Float32Array?rt=5126:j instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):j instanceof Uint16Array?b.isFloat16BufferAttribute?a?rt=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):rt=5123:j instanceof Int16Array?rt=5122:j instanceof Uint32Array?rt=5125:j instanceof Int32Array?rt=5124:j instanceof Int8Array?rt=5120:j instanceof Uint8Array&&(rt=5121),{buffer:nt,type:rt,bytesPerElement:j.BYTES_PER_ELEMENT,version:b.version}}function f(b,tt,j){const _e=tt.array,nt=tt.updateRange;o.bindBuffer(j,b),nt.count===-1?o.bufferSubData(j,0,_e):(a?o.bufferSubData(j,nt.offset*_e.BYTES_PER_ELEMENT,_e,nt.offset,nt.count):o.bufferSubData(j,nt.offset*_e.BYTES_PER_ELEMENT,_e.subarray(nt.offset,nt.offset+nt.count)),nt.count=-1)}function d(b){return b.isInterleavedBufferAttribute&&(b=b.data),s.get(b)}function h(b){b.isInterleavedBufferAttribute&&(b=b.data);const tt=s.get(b);tt&&(o.deleteBuffer(tt.buffer),s.delete(b))}function g(b,tt){if(b.isGLBufferAttribute){const _e=s.get(b);(!_e||_e.version<b.version)&&s.set(b,{buffer:b.buffer,type:b.type,bytesPerElement:b.elementSize,version:b.version});return}b.isInterleavedBufferAttribute&&(b=b.data);const j=s.get(b);j===void 0?s.set(b,c(b,tt)):j.version<b.version&&(f(j.buffer,b,tt),j.version=b.version)}return{get:d,remove:h,update:g}}class PlaneGeometry extends BufferGeometry{constructor(e=1,a=1,s=1,c=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:a,widthSegments:s,heightSegments:c};const f=e/2,d=a/2,h=Math.floor(s),g=Math.floor(c),b=h+1,tt=g+1,j=e/h,_e=a/g,nt=[],rt=[],at=[],it=[];for(let $=0;$<tt;$++){const et=$*_e-d;for(let st=0;st<b;st++){const lt=st*j-f;rt.push(lt,-et,0),at.push(0,0,1),it.push(st/h),it.push(1-$/g)}}for(let $=0;$<g;$++)for(let et=0;et<h;et++){const st=et+b*$,lt=et+b*($+1),ct=et+1+b*($+1),ut=et+1+b*$;nt.push(st,lt,ut),nt.push(lt,ct,ut)}this.setIndex(nt),this.setAttribute("position",new Float32BufferAttribute(rt,3)),this.setAttribute("normal",new Float32BufferAttribute(at,3)),this.setAttribute("uv",new Float32BufferAttribute(it,2))}}var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor.xyz *= color.xyz;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmissionmap_fragment=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,transmissionmap_pars_fragment=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmissionmap_fragment,transmissionmap_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_frag,background_vert,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshmatcap_frag,meshmatcap_vert,meshtoon_frag,meshtoon_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert,sprite_frag,sprite_vert},UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(o,e,a,s,c){const f=new Color(0);let d=0,h,g,b=null,tt=0,j=null;function _e(rt,at,it,$){let et=at.isScene===!0?at.background:null;et&&et.isTexture&&(et=e.get(et));const st=o.xr,lt=st.getSession&&st.getSession();lt&&lt.environmentBlendMode==="additive"&&(et=null),et===null?nt(f,d):et&&et.isColor&&(nt(et,1),$=!0),(o.autoClear||$)&&o.clear(o.autoClearColor,o.autoClearDepth,o.autoClearStencil),et&&(et.isCubeTexture||et.isWebGLCubeRenderTarget||et.mapping===CubeUVReflectionMapping)?(g===void 0&&(g=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(ct,ut,ht){this.matrixWorld.copyPosition(ht.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(g)),et.isWebGLCubeRenderTarget&&(et=et.texture),g.material.uniforms.envMap.value=et,g.material.uniforms.flipEnvMap.value=et.isCubeTexture&&et._needsFlipEnvMap?-1:1,(b!==et||tt!==et.version||j!==o.toneMapping)&&(g.material.needsUpdate=!0,b=et,tt=et.version,j=o.toneMapping),rt.unshift(g,g.geometry,g.material,0,0,null)):et&&et.isTexture&&(h===void 0&&(h=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(h)),h.material.uniforms.t2D.value=et,et.matrixAutoUpdate===!0&&et.updateMatrix(),h.material.uniforms.uvTransform.value.copy(et.matrix),(b!==et||tt!==et.version||j!==o.toneMapping)&&(h.material.needsUpdate=!0,b=et,tt=et.version,j=o.toneMapping),rt.unshift(h,h.geometry,h.material,0,0,null))}function nt(rt,at){a.buffers.color.setClear(rt.r,rt.g,rt.b,at,c)}return{getClearColor:function(){return f},setClearColor:function(rt,at=1){f.set(rt),d=at,nt(f,d)},getClearAlpha:function(){return d},setClearAlpha:function(rt){d=rt,nt(f,d)},render:_e}}function WebGLBindingStates(o,e,a,s){const c=o.getParameter(34921),f=s.isWebGL2?null:e.get("OES_vertex_array_object"),d=s.isWebGL2||f!==null,h={},g=at(null);let b=g;function tt(It,Ct,Pt,Nt,zt){let Xt=!1;if(d){const en=rt(Nt,Pt,Ct);b!==en&&(b=en,_e(b.object)),Xt=it(Nt,zt),Xt&&$(Nt,zt)}else{const en=Ct.wireframe===!0;(b.geometry!==Nt.id||b.program!==Pt.id||b.wireframe!==en)&&(b.geometry=Nt.id,b.program=Pt.id,b.wireframe=en,Xt=!0)}It.isInstancedMesh===!0&&(Xt=!0),zt!==null&&a.update(zt,34963),Xt&&(ht(It,Ct,Pt,Nt),zt!==null&&o.bindBuffer(34963,a.get(zt).buffer))}function j(){return s.isWebGL2?o.createVertexArray():f.createVertexArrayOES()}function _e(It){return s.isWebGL2?o.bindVertexArray(It):f.bindVertexArrayOES(It)}function nt(It){return s.isWebGL2?o.deleteVertexArray(It):f.deleteVertexArrayOES(It)}function rt(It,Ct,Pt){const Nt=Pt.wireframe===!0;let zt=h[It.id];zt===void 0&&(zt={},h[It.id]=zt);let Xt=zt[Ct.id];Xt===void 0&&(Xt={},zt[Ct.id]=Xt);let en=Xt[Nt];return en===void 0&&(en=at(j()),Xt[Nt]=en),en}function at(It){const Ct=[],Pt=[],Nt=[];for(let zt=0;zt<c;zt++)Ct[zt]=0,Pt[zt]=0,Nt[zt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ct,enabledAttributes:Pt,attributeDivisors:Nt,object:It,attributes:{},index:null}}function it(It,Ct){const Pt=b.attributes,Nt=It.attributes;let zt=0;for(const Xt in Nt){const en=Pt[Xt],rn=Nt[Xt];if(en===void 0||en.attribute!==rn||en.data!==rn.data)return!0;zt++}return b.attributesNum!==zt||b.index!==Ct}function $(It,Ct){const Pt={},Nt=It.attributes;let zt=0;for(const Xt in Nt){const en=Nt[Xt],rn={};rn.attribute=en,en.data&&(rn.data=en.data),Pt[Xt]=rn,zt++}b.attributes=Pt,b.attributesNum=zt,b.index=Ct}function et(){const It=b.newAttributes;for(let Ct=0,Pt=It.length;Ct<Pt;Ct++)It[Ct]=0}function st(It){lt(It,0)}function lt(It,Ct){const Pt=b.newAttributes,Nt=b.enabledAttributes,zt=b.attributeDivisors;Pt[It]=1,Nt[It]===0&&(o.enableVertexAttribArray(It),Nt[It]=1),zt[It]!==Ct&&((s.isWebGL2?o:e.get("ANGLE_instanced_arrays"))[s.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](It,Ct),zt[It]=Ct)}function ct(){const It=b.newAttributes,Ct=b.enabledAttributes;for(let Pt=0,Nt=Ct.length;Pt<Nt;Pt++)Ct[Pt]!==It[Pt]&&(o.disableVertexAttribArray(Pt),Ct[Pt]=0)}function ut(It,Ct,Pt,Nt,zt,Xt){s.isWebGL2===!0&&(Pt===5124||Pt===5125)?o.vertexAttribIPointer(It,Ct,Pt,zt,Xt):o.vertexAttribPointer(It,Ct,Pt,Nt,zt,Xt)}function ht(It,Ct,Pt,Nt){if(s.isWebGL2===!1&&(It.isInstancedMesh||Nt.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;et();const zt=Nt.attributes,Xt=Pt.getAttributes(),en=Ct.defaultAttributeValues;for(const rn in Xt){const Gt=Xt[rn];if(Gt>=0){const qt=zt[rn];if(qt!==void 0){const sn=qt.normalized,yn=qt.itemSize,Yt=a.get(qt);if(Yt===void 0)continue;const _t=Yt.buffer,yt=Yt.type,At=Yt.bytesPerElement;if(qt.isInterleavedBufferAttribute){const wt=qt.data,Rt=wt.stride,Bt=qt.offset;wt&&wt.isInstancedInterleavedBuffer?(lt(Gt,wt.meshPerAttribute),Nt._maxInstanceCount===void 0&&(Nt._maxInstanceCount=wt.meshPerAttribute*wt.count)):st(Gt),o.bindBuffer(34962,_t),ut(Gt,yn,yt,sn,Rt*At,Bt*At)}else qt.isInstancedBufferAttribute?(lt(Gt,qt.meshPerAttribute),Nt._maxInstanceCount===void 0&&(Nt._maxInstanceCount=qt.meshPerAttribute*qt.count)):st(Gt),o.bindBuffer(34962,_t),ut(Gt,yn,yt,sn,0,0)}else if(rn==="instanceMatrix"){const sn=a.get(It.instanceMatrix);if(sn===void 0)continue;const yn=sn.buffer,Yt=sn.type;lt(Gt+0,1),lt(Gt+1,1),lt(Gt+2,1),lt(Gt+3,1),o.bindBuffer(34962,yn),o.vertexAttribPointer(Gt+0,4,Yt,!1,64,0),o.vertexAttribPointer(Gt+1,4,Yt,!1,64,16),o.vertexAttribPointer(Gt+2,4,Yt,!1,64,32),o.vertexAttribPointer(Gt+3,4,Yt,!1,64,48)}else if(rn==="instanceColor"){const sn=a.get(It.instanceColor);if(sn===void 0)continue;const yn=sn.buffer,Yt=sn.type;lt(Gt,1),o.bindBuffer(34962,yn),o.vertexAttribPointer(Gt,3,Yt,!1,12,0)}else if(en!==void 0){const sn=en[rn];if(sn!==void 0)switch(sn.length){case 2:o.vertexAttrib2fv(Gt,sn);break;case 3:o.vertexAttrib3fv(Gt,sn);break;case 4:o.vertexAttrib4fv(Gt,sn);break;default:o.vertexAttrib1fv(Gt,sn)}}}}ct()}function pt(){St();for(const It in h){const Ct=h[It];for(const Pt in Ct){const Nt=Ct[Pt];for(const zt in Nt)nt(Nt[zt].object),delete Nt[zt];delete Ct[Pt]}delete h[It]}}function mt(It){if(h[It.id]===void 0)return;const Ct=h[It.id];for(const Pt in Ct){const Nt=Ct[Pt];for(const zt in Nt)nt(Nt[zt].object),delete Nt[zt];delete Ct[Pt]}delete h[It.id]}function bt(It){for(const Ct in h){const Pt=h[Ct];if(Pt[It.id]===void 0)continue;const Nt=Pt[It.id];for(const zt in Nt)nt(Nt[zt].object),delete Nt[zt];delete Pt[It.id]}}function St(){Ft(),b!==g&&(b=g,_e(b.object))}function Ft(){g.geometry=null,g.program=null,g.wireframe=!1}return{setup:tt,reset:St,resetDefaultState:Ft,dispose:pt,releaseStatesOfGeometry:mt,releaseStatesOfProgram:bt,initAttributes:et,enableAttribute:st,disableUnusedAttributes:ct}}function WebGLBufferRenderer(o,e,a,s){const c=s.isWebGL2;let f;function d(b){f=b}function h(b,tt){o.drawArrays(f,b,tt),a.update(tt,f,1)}function g(b,tt,j){if(j===0)return;let _e,nt;if(c)_e=o,nt="drawArraysInstanced";else if(_e=e.get("ANGLE_instanced_arrays"),nt="drawArraysInstancedANGLE",_e===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_e[nt](f,b,tt,j),a.update(tt,f,j)}this.setMode=d,this.render=h,this.renderInstances=g}function WebGLCapabilities(o,e,a){let s;function c(){if(s!==void 0)return s;const ut=e.get("EXT_texture_filter_anisotropic");return ut!==null?s=o.getParameter(ut.MAX_TEXTURE_MAX_ANISOTROPY_EXT):s=0,s}function f(ut){if(ut==="highp"){if(o.getShaderPrecisionFormat(35633,36338).precision>0&&o.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";ut="mediump"}return ut==="mediump"&&o.getShaderPrecisionFormat(35633,36337).precision>0&&o.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const d=typeof WebGL2RenderingContext!="undefined"&&o instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&o instanceof WebGL2ComputeRenderingContext;let h=a.precision!==void 0?a.precision:"highp";const g=f(h);g!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",g,"instead."),h=g);const b=a.logarithmicDepthBuffer===!0,tt=o.getParameter(34930),j=o.getParameter(35660),_e=o.getParameter(3379),nt=o.getParameter(34076),rt=o.getParameter(34921),at=o.getParameter(36347),it=o.getParameter(36348),$=o.getParameter(36349),et=j>0,st=d||!!e.get("OES_texture_float"),lt=et&&st,ct=d?o.getParameter(36183):0;return{isWebGL2:d,getMaxAnisotropy:c,getMaxPrecision:f,precision:h,logarithmicDepthBuffer:b,maxTextures:tt,maxVertexTextures:j,maxTextureSize:_e,maxCubemapSize:nt,maxAttributes:rt,maxVertexUniforms:at,maxVaryings:it,maxFragmentUniforms:$,vertexTextures:et,floatFragmentTextures:st,floatVertexTextures:lt,maxSamples:ct}}function WebGLClipping(o){const e=this;let a=null,s=0,c=!1,f=!1;const d=new Plane,h=new Matrix3,g={value:null,needsUpdate:!1};this.uniform=g,this.numPlanes=0,this.numIntersection=0,this.init=function(j,_e,nt){const rt=j.length!==0||_e||s!==0||c;return c=_e,a=tt(j,nt,0),s=j.length,rt},this.beginShadows=function(){f=!0,tt(null)},this.endShadows=function(){f=!1,b()},this.setState=function(j,_e,nt){const rt=j.clippingPlanes,at=j.clipIntersection,it=j.clipShadows,$=o.get(j);if(!c||rt===null||rt.length===0||f&&!it)f?tt(null):b();else{const et=f?0:s,st=et*4;let lt=$.clippingState||null;g.value=lt,lt=tt(rt,_e,st,nt);for(let ct=0;ct!==st;++ct)lt[ct]=a[ct];$.clippingState=lt,this.numIntersection=at?this.numPlanes:0,this.numPlanes+=et}};function b(){g.value!==a&&(g.value=a,g.needsUpdate=s>0),e.numPlanes=s,e.numIntersection=0}function tt(j,_e,nt,rt){const at=j!==null?j.length:0;let it=null;if(at!==0){if(it=g.value,rt!==!0||it===null){const $=nt+at*4,et=_e.matrixWorldInverse;h.getNormalMatrix(et),(it===null||it.length<$)&&(it=new Float32Array($));for(let st=0,lt=nt;st!==at;++st,lt+=4)d.copy(j[st]).applyMatrix4(et,h),d.normal.toArray(it,lt),it[lt+3]=d.constant}g.value=it,g.needsUpdate=!0}return e.numPlanes=at,e.numIntersection=0,it}}function WebGLCubeMaps(o){let e=new WeakMap;function a(d,h){return h===EquirectangularReflectionMapping?d.mapping=CubeReflectionMapping:h===EquirectangularRefractionMapping&&(d.mapping=CubeRefractionMapping),d}function s(d){if(d&&d.isTexture){const h=d.mapping;if(h===EquirectangularReflectionMapping||h===EquirectangularRefractionMapping)if(e.has(d)){const g=e.get(d).texture;return a(g,d.mapping)}else{const g=d.image;if(g&&g.height>0){const b=o.getRenderList(),tt=o.getRenderTarget(),j=new WebGLCubeRenderTarget(g.height/2);return j.fromEquirectangularTexture(o,d),e.set(d,j),o.setRenderTarget(tt),o.setRenderList(b),d.addEventListener("dispose",c),a(j.texture,d.mapping)}else return null}}return d}function c(d){const h=d.target;h.removeEventListener("dispose",c);const g=e.get(h);g!==void 0&&(e.delete(h),g.dispose())}function f(){e=new WeakMap}return{get:s,dispose:f}}function WebGLExtensions(o){const e={};function a(s){if(e[s]!==void 0)return e[s];let c;switch(s){case"WEBGL_depth_texture":c=o.getExtension("WEBGL_depth_texture")||o.getExtension("MOZ_WEBGL_depth_texture")||o.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":c=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":c=o.getExtension("WEBGL_compressed_texture_s3tc")||o.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||o.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":c=o.getExtension("WEBGL_compressed_texture_pvrtc")||o.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:c=o.getExtension(s)}return e[s]=c,c}return{has:function(s){return a(s)!==null},init:function(s){s.isWebGL2?a("EXT_color_buffer_float"):(a("WEBGL_depth_texture"),a("OES_texture_float"),a("OES_texture_half_float"),a("OES_texture_half_float_linear"),a("OES_standard_derivatives"),a("OES_element_index_uint"),a("OES_vertex_array_object"),a("ANGLE_instanced_arrays")),a("OES_texture_float_linear"),a("EXT_color_buffer_half_float")},get:function(s){const c=a(s);return c===null&&console.warn("THREE.WebGLRenderer: "+s+" extension not supported."),c}}}function WebGLGeometries(o,e,a,s){const c={},f=new WeakMap;function d(j){const _e=j.target;_e.index!==null&&e.remove(_e.index);for(const rt in _e.attributes)e.remove(_e.attributes[rt]);_e.removeEventListener("dispose",d),delete c[_e.id];const nt=f.get(_e);nt&&(e.remove(nt),f.delete(_e)),s.releaseStatesOfGeometry(_e),_e.isInstancedBufferGeometry===!0&&delete _e._maxInstanceCount,a.memory.geometries--}function h(j,_e){return c[_e.id]===!0||(_e.addEventListener("dispose",d),c[_e.id]=!0,a.memory.geometries++),_e}function g(j){const _e=j.attributes;for(const rt in _e)e.update(_e[rt],34962);const nt=j.morphAttributes;for(const rt in nt){const at=nt[rt];for(let it=0,$=at.length;it<$;it++)e.update(at[it],34962)}}function b(j){const _e=[],nt=j.index,rt=j.attributes.position;let at=0;if(nt!==null){const et=nt.array;at=nt.version;for(let st=0,lt=et.length;st<lt;st+=3){const ct=et[st+0],ut=et[st+1],ht=et[st+2];_e.push(ct,ut,ut,ht,ht,ct)}}else{const et=rt.array;at=rt.version;for(let st=0,lt=et.length/3-1;st<lt;st+=3){const ct=st+0,ut=st+1,ht=st+2;_e.push(ct,ut,ut,ht,ht,ct)}}const it=new(arrayMax(_e)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(_e,1);it.version=at;const $=f.get(j);$&&e.remove($),f.set(j,it)}function tt(j){const _e=f.get(j);if(_e){const nt=j.index;nt!==null&&_e.version<nt.version&&b(j)}else b(j);return f.get(j)}return{get:h,update:g,getWireframeAttribute:tt}}function WebGLIndexedBufferRenderer(o,e,a,s){const c=s.isWebGL2;let f;function d(_e){f=_e}let h,g;function b(_e){h=_e.type,g=_e.bytesPerElement}function tt(_e,nt){o.drawElements(f,nt,h,_e*g),a.update(nt,f,1)}function j(_e,nt,rt){if(rt===0)return;let at,it;if(c)at=o,it="drawElementsInstanced";else if(at=e.get("ANGLE_instanced_arrays"),it="drawElementsInstancedANGLE",at===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}at[it](f,nt,h,_e*g,rt),a.update(nt,f,rt)}this.setMode=d,this.setIndex=b,this.render=tt,this.renderInstances=j}function WebGLInfo(o){const e={geometries:0,textures:0},a={frame:0,calls:0,triangles:0,points:0,lines:0};function s(f,d,h){switch(a.calls++,d){case 4:a.triangles+=h*(f/3);break;case 1:a.lines+=h*(f/2);break;case 3:a.lines+=h*(f-1);break;case 2:a.lines+=h*f;break;case 0:a.points+=h*f;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d);break}}function c(){a.frame++,a.calls=0,a.triangles=0,a.points=0,a.lines=0}return{memory:e,render:a,programs:null,autoReset:!0,reset:c,update:s}}function numericalSort(o,e){return o[0]-e[0]}function absNumericalSort(o,e){return Math.abs(e[1])-Math.abs(o[1])}function WebGLMorphtargets(o){const e={},a=new Float32Array(8),s=[];for(let f=0;f<8;f++)s[f]=[f,0];function c(f,d,h,g){const b=f.morphTargetInfluences,tt=b===void 0?0:b.length;let j=e[d.id];if(j===void 0){j=[];for(let it=0;it<tt;it++)j[it]=[it,0];e[d.id]=j}for(let it=0;it<tt;it++){const $=j[it];$[0]=it,$[1]=b[it]}j.sort(absNumericalSort);for(let it=0;it<8;it++)it<tt&&j[it][1]?(s[it][0]=j[it][0],s[it][1]=j[it][1]):(s[it][0]=Number.MAX_SAFE_INTEGER,s[it][1]=0);s.sort(numericalSort);const _e=h.morphTargets&&d.morphAttributes.position,nt=h.morphNormals&&d.morphAttributes.normal;let rt=0;for(let it=0;it<8;it++){const $=s[it],et=$[0],st=$[1];et!==Number.MAX_SAFE_INTEGER&&st?(_e&&d.getAttribute("morphTarget"+it)!==_e[et]&&d.setAttribute("morphTarget"+it,_e[et]),nt&&d.getAttribute("morphNormal"+it)!==nt[et]&&d.setAttribute("morphNormal"+it,nt[et]),a[it]=st,rt+=st):(_e&&d.hasAttribute("morphTarget"+it)===!0&&d.deleteAttribute("morphTarget"+it),nt&&d.hasAttribute("morphNormal"+it)===!0&&d.deleteAttribute("morphNormal"+it),a[it]=0)}const at=d.morphTargetsRelative?1:1-rt;g.getUniforms().setValue(o,"morphTargetBaseInfluence",at),g.getUniforms().setValue(o,"morphTargetInfluences",a)}return{update:c}}function WebGLObjects(o,e,a,s){let c=new WeakMap;function f(g){const b=s.render.frame,tt=g.geometry,j=e.get(g,tt);return c.get(j)!==b&&(e.update(j),c.set(j,b)),g.isInstancedMesh&&(g.hasEventListener("dispose",h)===!1&&g.addEventListener("dispose",h),a.update(g.instanceMatrix,34962),g.instanceColor!==null&&a.update(g.instanceColor,34962)),j}function d(){c=new WeakMap}function h(g){const b=g.target;b.removeEventListener("dispose",h),a.remove(b.instanceMatrix),b.instanceColor!==null&&a.remove(b.instanceColor)}return{update:f,dispose:d}}function DataTexture2DArray(o=null,e=1,a=1,s=1){Texture.call(this,null),this.image={data:o,width:e,height:a,depth:s},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=!0;function DataTexture3D(o=null,e=1,a=1,s=1){Texture.call(this,null),this.image={data:o,width:e,height:a,depth:s},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=!0;const emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(o,e,a){const s=o[0];if(s<=0||s>0)return o;const c=e*a;let f=arrayCacheF32[c];if(f===void 0&&(f=new Float32Array(c),arrayCacheF32[c]=f),e!==0){s.toArray(f,0);for(let d=1,h=0;d!==e;++d)h+=a,o[d].toArray(f,h)}return f}function arraysEqual(o,e){if(o.length!==e.length)return!1;for(let a=0,s=o.length;a<s;a++)if(o[a]!==e[a])return!1;return!0}function copyArray(o,e){for(let a=0,s=e.length;a<s;a++)o[a]=e[a]}function allocTexUnits(o,e){let a=arrayCacheI32[e];a===void 0&&(a=new Int32Array(e),arrayCacheI32[e]=a);for(let s=0;s!==e;++s)a[s]=o.allocateTextureUnit();return a}function setValueV1f(o,e){const a=this.cache;a[0]!==e&&(o.uniform1f(this.addr,e),a[0]=e)}function setValueV2f(o,e){const a=this.cache;if(e.x!==void 0)(a[0]!==e.x||a[1]!==e.y)&&(o.uniform2f(this.addr,e.x,e.y),a[0]=e.x,a[1]=e.y);else{if(arraysEqual(a,e))return;o.uniform2fv(this.addr,e),copyArray(a,e)}}function setValueV3f(o,e){const a=this.cache;if(e.x!==void 0)(a[0]!==e.x||a[1]!==e.y||a[2]!==e.z)&&(o.uniform3f(this.addr,e.x,e.y,e.z),a[0]=e.x,a[1]=e.y,a[2]=e.z);else if(e.r!==void 0)(a[0]!==e.r||a[1]!==e.g||a[2]!==e.b)&&(o.uniform3f(this.addr,e.r,e.g,e.b),a[0]=e.r,a[1]=e.g,a[2]=e.b);else{if(arraysEqual(a,e))return;o.uniform3fv(this.addr,e),copyArray(a,e)}}function setValueV4f(o,e){const a=this.cache;if(e.x!==void 0)(a[0]!==e.x||a[1]!==e.y||a[2]!==e.z||a[3]!==e.w)&&(o.uniform4f(this.addr,e.x,e.y,e.z,e.w),a[0]=e.x,a[1]=e.y,a[2]=e.z,a[3]=e.w);else{if(arraysEqual(a,e))return;o.uniform4fv(this.addr,e),copyArray(a,e)}}function setValueM2(o,e){const a=this.cache,s=e.elements;if(s===void 0){if(arraysEqual(a,e))return;o.uniformMatrix2fv(this.addr,!1,e),copyArray(a,e)}else{if(arraysEqual(a,s))return;mat2array.set(s),o.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(a,s)}}function setValueM3(o,e){const a=this.cache,s=e.elements;if(s===void 0){if(arraysEqual(a,e))return;o.uniformMatrix3fv(this.addr,!1,e),copyArray(a,e)}else{if(arraysEqual(a,s))return;mat3array.set(s),o.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(a,s)}}function setValueM4(o,e){const a=this.cache,s=e.elements;if(s===void 0){if(arraysEqual(a,e))return;o.uniformMatrix4fv(this.addr,!1,e),copyArray(a,e)}else{if(arraysEqual(a,s))return;mat4array.set(s),o.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(a,s)}}function setValueT1(o,e,a){const s=this.cache,c=a.allocateTextureUnit();s[0]!==c&&(o.uniform1i(this.addr,c),s[0]=c),a.safeSetTexture2D(e||emptyTexture,c)}function setValueT2DArray1(o,e,a){const s=this.cache,c=a.allocateTextureUnit();s[0]!==c&&(o.uniform1i(this.addr,c),s[0]=c),a.setTexture2DArray(e||emptyTexture2dArray,c)}function setValueT3D1(o,e,a){const s=this.cache,c=a.allocateTextureUnit();s[0]!==c&&(o.uniform1i(this.addr,c),s[0]=c),a.setTexture3D(e||emptyTexture3d,c)}function setValueT6(o,e,a){const s=this.cache,c=a.allocateTextureUnit();s[0]!==c&&(o.uniform1i(this.addr,c),s[0]=c),a.safeSetTextureCube(e||emptyCubeTexture,c)}function setValueV1i(o,e){const a=this.cache;a[0]!==e&&(o.uniform1i(this.addr,e),a[0]=e)}function setValueV2i(o,e){const a=this.cache;arraysEqual(a,e)||(o.uniform2iv(this.addr,e),copyArray(a,e))}function setValueV3i(o,e){const a=this.cache;arraysEqual(a,e)||(o.uniform3iv(this.addr,e),copyArray(a,e))}function setValueV4i(o,e){const a=this.cache;arraysEqual(a,e)||(o.uniform4iv(this.addr,e),copyArray(a,e))}function setValueV1ui(o,e){const a=this.cache;a[0]!==e&&(o.uniform1ui(this.addr,e),a[0]=e)}function getSingularSetter(o){switch(o){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(o,e){o.uniform1fv(this.addr,e)}function setValueV1iArray(o,e){o.uniform1iv(this.addr,e)}function setValueV2iArray(o,e){o.uniform2iv(this.addr,e)}function setValueV3iArray(o,e){o.uniform3iv(this.addr,e)}function setValueV4iArray(o,e){o.uniform4iv(this.addr,e)}function setValueV2fArray(o,e){const a=flatten(e,this.size,2);o.uniform2fv(this.addr,a)}function setValueV3fArray(o,e){const a=flatten(e,this.size,3);o.uniform3fv(this.addr,a)}function setValueV4fArray(o,e){const a=flatten(e,this.size,4);o.uniform4fv(this.addr,a)}function setValueM2Array(o,e){const a=flatten(e,this.size,4);o.uniformMatrix2fv(this.addr,!1,a)}function setValueM3Array(o,e){const a=flatten(e,this.size,9);o.uniformMatrix3fv(this.addr,!1,a)}function setValueM4Array(o,e){const a=flatten(e,this.size,16);o.uniformMatrix4fv(this.addr,!1,a)}function setValueT1Array(o,e,a){const s=e.length,c=allocTexUnits(a,s);o.uniform1iv(this.addr,c);for(let f=0;f!==s;++f)a.safeSetTexture2D(e[f]||emptyTexture,c[f])}function setValueT6Array(o,e,a){const s=e.length,c=allocTexUnits(a,s);o.uniform1iv(this.addr,c);for(let f=0;f!==s;++f)a.safeSetTextureCube(e[f]||emptyCubeTexture,c[f])}function getPureArraySetter(o){switch(o){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(o,e,a){this.id=o,this.addr=a,this.cache=[],this.setValue=getSingularSetter(e.type)}function PureArrayUniform(o,e,a){this.id=o,this.addr=a,this.cache=[],this.size=e.size,this.setValue=getPureArraySetter(e.type)}PureArrayUniform.prototype.updateCache=function(o){const e=this.cache;o instanceof Float32Array&&e.length!==o.length&&(this.cache=new Float32Array(o.length)),copyArray(e,o)};function StructuredUniform(o){this.id=o,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(o,e,a){const s=this.seq;for(let c=0,f=s.length;c!==f;++c){const d=s[c];d.setValue(o,e[d.id],a)}};const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(o,e){o.seq.push(e),o.map[e.id]=e}function parseUniform(o,e,a){const s=o.name,c=s.length;for(RePathPart.lastIndex=0;;){const f=RePathPart.exec(s),d=RePathPart.lastIndex;let h=f[1];const g=f[2]==="]",b=f[3];if(g&&(h=h|0),b===void 0||b==="["&&d+2===c){addUniform(a,b===void 0?new SingleUniform(h,o,e):new PureArrayUniform(h,o,e));break}else{let j=a.map[h];j===void 0&&(j=new StructuredUniform(h),addUniform(a,j)),a=j}}}function WebGLUniforms(o,e){this.seq=[],this.map={};const a=o.getProgramParameter(e,35718);for(let s=0;s<a;++s){const c=o.getActiveUniform(e,s),f=o.getUniformLocation(e,c.name);parseUniform(c,f,this)}}WebGLUniforms.prototype.setValue=function(o,e,a,s){const c=this.map[e];c!==void 0&&c.setValue(o,a,s)};WebGLUniforms.prototype.setOptional=function(o,e,a){const s=e[a];s!==void 0&&this.setValue(o,a,s)};WebGLUniforms.upload=function(o,e,a,s){for(let c=0,f=e.length;c!==f;++c){const d=e[c],h=a[d.id];h.needsUpdate!==!1&&d.setValue(o,h.value,s)}};WebGLUniforms.seqWithValue=function(o,e){const a=[];for(let s=0,c=o.length;s!==c;++s){const f=o[s];f.id in e&&a.push(f)}return a};function WebGLShader(o,e,a){const s=o.createShader(e);return o.shaderSource(s,a),o.compileShader(s),s}let programIdCount=0;function addLineNumbers(o){const e=o.split(`
`);for(let a=0;a<e.length;a++)e[a]=a+1+": "+e[a];return e.join(`
`)}function getEncodingComponents(o){switch(o){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",o),["Linear","( value )"]}}function getShaderErrors(o,e,a){const s=o.getShaderParameter(e,35713),c=o.getShaderInfoLog(e).trim();if(s&&c==="")return"";const f=o.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+a+`
`+c+addLineNumbers(f)}function getTexelDecodingFunction(o,e){const a=getEncodingComponents(e);return"vec4 "+o+"( vec4 value ) { return "+a[0]+"ToLinear"+a[1]+"; }"}function getTexelEncodingFunction(o,e){const a=getEncodingComponents(e);return"vec4 "+o+"( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"}function getToneMappingFunction(o,e){let a;switch(e){case LinearToneMapping:a="Linear";break;case ReinhardToneMapping:a="Reinhard";break;case CineonToneMapping:a="OptimizedCineon";break;case ACESFilmicToneMapping:a="ACESFilmic";break;case CustomToneMapping:a="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),a="Linear"}return"vec3 "+o+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function generateExtensions(o){return[o.extensionDerivatives||o.envMapCubeUV||o.bumpMap||o.tangentSpaceNormalMap||o.clearcoatNormalMap||o.flatShading||o.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(o.extensionFragDepth||o.logarithmicDepthBuffer)&&o.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",o.extensionDrawBuffers&&o.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(o.extensionShaderTextureLOD||o.envMap)&&o.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateDefines(o){const e=[];for(const a in o){const s=o[a];s!==!1&&e.push("#define "+a+" "+s)}return e.join(`
`)}function fetchAttributeLocations(o,e){const a={},s=o.getProgramParameter(e,35721);for(let c=0;c<s;c++){const d=o.getActiveAttrib(e,c).name;a[d]=o.getAttribLocation(e,d)}return a}function filterEmptyLine(o){return o!==""}function replaceLightNums(o,e){return o.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function replaceClippingPlaneNums(o,e){return o.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(o){return o.replace(includePattern,includeReplacer)}function includeReplacer(o,e){const a=ShaderChunk[e];if(a===void 0)throw new Error("Can not resolve #include <"+e+">");return resolveIncludes(a)}const deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(o){return o.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(o,e,a,s){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(o,e,a,s)}function loopReplacer(o,e,a,s){let c="";for(let f=parseInt(e);f<parseInt(a);f++)c+=s.replace(/\[\s*i\s*\]/g,"[ "+f+" ]").replace(/UNROLLED_LOOP_INDEX/g,f);return c}function generatePrecision(o){let e="precision "+o.precision+` float;
precision `+o.precision+" int;";return o.precision==="highp"?e+=`
#define HIGH_PRECISION`:o.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:o.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function generateShadowMapTypeDefine(o){let e="SHADOWMAP_TYPE_BASIC";return o.shadowMapType===PCFShadowMap?e="SHADOWMAP_TYPE_PCF":o.shadowMapType===PCFSoftShadowMap?e="SHADOWMAP_TYPE_PCF_SOFT":o.shadowMapType===VSMShadowMap&&(e="SHADOWMAP_TYPE_VSM"),e}function generateEnvMapTypeDefine(o){let e="ENVMAP_TYPE_CUBE";if(o.envMap)switch(o.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:e="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:e="ENVMAP_TYPE_CUBE_UV";break}return e}function generateEnvMapModeDefine(o){let e="ENVMAP_MODE_REFLECTION";if(o.envMap)switch(o.envMapMode){case CubeRefractionMapping:case CubeUVRefractionMapping:e="ENVMAP_MODE_REFRACTION";break}return e}function generateEnvMapBlendingDefine(o){let e="ENVMAP_BLENDING_NONE";if(o.envMap)switch(o.combine){case MultiplyOperation:e="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:e="ENVMAP_BLENDING_MIX";break;case AddOperation:e="ENVMAP_BLENDING_ADD";break}return e}function WebGLProgram(o,e,a,s){const c=o.getContext(),f=a.defines;let d=a.vertexShader,h=a.fragmentShader;const g=generateShadowMapTypeDefine(a),b=generateEnvMapTypeDefine(a),tt=generateEnvMapModeDefine(a),j=generateEnvMapBlendingDefine(a),_e=o.gammaFactor>0?o.gammaFactor:1,nt=a.isWebGL2?"":generateExtensions(a),rt=generateDefines(f),at=c.createProgram();let it,$,et=a.glslVersion?"#version "+a.glslVersion+`
`:"";a.isRawShaderMaterial?(it=[rt].filter(filterEmptyLine).join(`
`),it.length>0&&(it+=`
`),$=[nt,rt].filter(filterEmptyLine).join(`
`),$.length>0&&($+=`
`)):(it=[generatePrecision(a),"#define SHADER_NAME "+a.shaderName,rt,a.instancing?"#define USE_INSTANCING":"",a.instancingColor?"#define USE_INSTANCING_COLOR":"",a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+_e,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+tt:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&a.flatShading===!1?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+g:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),$=[nt,generatePrecision(a),"#define SHADER_NAME "+a.shaderName,rt,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+_e,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+b:"",a.envMap?"#define "+tt:"",a.envMap?"#define "+j:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.sheen?"#define USE_SHEEN":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors||a.instancingColor?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+g:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(a.extensionShaderTextureLOD||a.envMap)&&a.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",a.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",a.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",a.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",ShaderChunk.encodings_pars_fragment,a.map?getTexelDecodingFunction("mapTexelToLinear",a.mapEncoding):"",a.matcap?getTexelDecodingFunction("matcapTexelToLinear",a.matcapEncoding):"",a.envMap?getTexelDecodingFunction("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMap?getTexelDecodingFunction("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.lightMap?getTexelDecodingFunction("lightMapTexelToLinear",a.lightMapEncoding):"",getTexelEncodingFunction("linearToOutputTexel",a.outputEncoding),a.depthPacking?"#define DEPTH_PACKING "+a.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),d=resolveIncludes(d),d=replaceLightNums(d,a),d=replaceClippingPlaneNums(d,a),h=resolveIncludes(h),h=replaceLightNums(h,a),h=replaceClippingPlaneNums(h,a),d=unrollLoops(d),h=unrollLoops(h),a.isWebGL2&&a.isRawShaderMaterial!==!0&&(et=`#version 300 es
`,it=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+it,$=["#define varying in",a.glslVersion===GLSL3?"":"out highp vec4 pc_fragColor;",a.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+$);const st=et+it+d,lt=et+$+h,ct=WebGLShader(c,35633,st),ut=WebGLShader(c,35632,lt);if(c.attachShader(at,ct),c.attachShader(at,ut),a.index0AttributeName!==void 0?c.bindAttribLocation(at,0,a.index0AttributeName):a.morphTargets===!0&&c.bindAttribLocation(at,0,"position"),c.linkProgram(at),o.debug.checkShaderErrors){const mt=c.getProgramInfoLog(at).trim(),bt=c.getShaderInfoLog(ct).trim(),St=c.getShaderInfoLog(ut).trim();let Ft=!0,It=!0;if(c.getProgramParameter(at,35714)===!1){Ft=!1;const Ct=getShaderErrors(c,ct,"vertex"),Pt=getShaderErrors(c,ut,"fragment");console.error("THREE.WebGLProgram: shader error: ",c.getError(),"35715",c.getProgramParameter(at,35715),"gl.getProgramInfoLog",mt,Ct,Pt)}else mt!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",mt):(bt===""||St==="")&&(It=!1);It&&(this.diagnostics={runnable:Ft,programLog:mt,vertexShader:{log:bt,prefix:it},fragmentShader:{log:St,prefix:$}})}c.deleteShader(ct),c.deleteShader(ut);let ht;this.getUniforms=function(){return ht===void 0&&(ht=new WebGLUniforms(c,at)),ht};let pt;return this.getAttributes=function(){return pt===void 0&&(pt=fetchAttributeLocations(c,at)),pt},this.destroy=function(){s.releaseStatesOfProgram(this),c.deleteProgram(at),this.program=void 0},this.name=a.shaderName,this.id=programIdCount++,this.cacheKey=e,this.usedTimes=1,this.program=at,this.vertexShader=ct,this.fragmentShader=ut,this}function WebGLPrograms(o,e,a,s,c,f){const d=[],h=s.isWebGL2,g=s.logarithmicDepthBuffer,b=s.floatVertexTextures,tt=s.maxVertexUniforms,j=s.vertexTextures;let _e=s.precision;const nt={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},rt=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function at(ut){const pt=ut.skeleton.bones;if(b)return 1024;{const bt=Math.floor((tt-20)/4),St=Math.min(bt,pt.length);return St<pt.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+pt.length+" bones. This GPU supports "+St+"."),0):St}}function it(ut){let ht;return ut&&ut.isTexture?ht=ut.encoding:ut&&ut.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ht=ut.texture.encoding):ht=LinearEncoding,ht}function $(ut,ht,pt,mt,bt){const St=mt.fog,Ft=ut.isMeshStandardMaterial?mt.environment:null,It=e.get(ut.envMap||Ft),Ct=nt[ut.type],Pt=bt.isSkinnedMesh?at(bt):0;ut.precision!==null&&(_e=s.getMaxPrecision(ut.precision),_e!==ut.precision&&console.warn("THREE.WebGLProgram.getParameters:",ut.precision,"not supported, using",_e,"instead."));let Nt,zt;if(Ct){const rn=ShaderLib[Ct];Nt=rn.vertexShader,zt=rn.fragmentShader}else Nt=ut.vertexShader,zt=ut.fragmentShader;const Xt=o.getRenderTarget();return{isWebGL2:h,shaderID:Ct,shaderName:ut.type,vertexShader:Nt,fragmentShader:zt,defines:ut.defines,isRawShaderMaterial:ut.isRawShaderMaterial===!0,glslVersion:ut.glslVersion,precision:_e,instancing:bt.isInstancedMesh===!0,instancingColor:bt.isInstancedMesh===!0&&bt.instanceColor!==null,supportsVertexTextures:j,outputEncoding:Xt!==null?it(Xt.texture):o.outputEncoding,map:!!ut.map,mapEncoding:it(ut.map),matcap:!!ut.matcap,matcapEncoding:it(ut.matcap),envMap:!!It,envMapMode:It&&It.mapping,envMapEncoding:it(It),envMapCubeUV:!!It&&(It.mapping===CubeUVReflectionMapping||It.mapping===CubeUVRefractionMapping),lightMap:!!ut.lightMap,lightMapEncoding:it(ut.lightMap),aoMap:!!ut.aoMap,emissiveMap:!!ut.emissiveMap,emissiveMapEncoding:it(ut.emissiveMap),bumpMap:!!ut.bumpMap,normalMap:!!ut.normalMap,objectSpaceNormalMap:ut.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:ut.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!ut.clearcoatMap,clearcoatRoughnessMap:!!ut.clearcoatRoughnessMap,clearcoatNormalMap:!!ut.clearcoatNormalMap,displacementMap:!!ut.displacementMap,roughnessMap:!!ut.roughnessMap,metalnessMap:!!ut.metalnessMap,specularMap:!!ut.specularMap,alphaMap:!!ut.alphaMap,gradientMap:!!ut.gradientMap,sheen:!!ut.sheen,transmissionMap:!!ut.transmissionMap,combine:ut.combine,vertexTangents:ut.normalMap&&ut.vertexTangents,vertexColors:ut.vertexColors,vertexUvs:!!ut.map||!!ut.bumpMap||!!ut.normalMap||!!ut.specularMap||!!ut.alphaMap||!!ut.emissiveMap||!!ut.roughnessMap||!!ut.metalnessMap||!!ut.clearcoatMap||!!ut.clearcoatRoughnessMap||!!ut.clearcoatNormalMap||!!ut.displacementMap||!!ut.transmissionMap,uvsVertexOnly:!(!!ut.map||!!ut.bumpMap||!!ut.normalMap||!!ut.specularMap||!!ut.alphaMap||!!ut.emissiveMap||!!ut.roughnessMap||!!ut.metalnessMap||!!ut.clearcoatNormalMap||!!ut.transmissionMap)&&!!ut.displacementMap,fog:!!St,useFog:ut.fog,fogExp2:St&&St.isFogExp2,flatShading:ut.flatShading,sizeAttenuation:ut.sizeAttenuation,logarithmicDepthBuffer:g,skinning:ut.skinning&&Pt>0,maxBones:Pt,useVertexTexture:b,morphTargets:ut.morphTargets,morphNormals:ut.morphNormals,maxMorphTargets:o.maxMorphTargets,maxMorphNormals:o.maxMorphNormals,numDirLights:ht.directional.length,numPointLights:ht.point.length,numSpotLights:ht.spot.length,numRectAreaLights:ht.rectArea.length,numHemiLights:ht.hemi.length,numDirLightShadows:ht.directionalShadowMap.length,numPointLightShadows:ht.pointShadowMap.length,numSpotLightShadows:ht.spotShadowMap.length,numClippingPlanes:f.numPlanes,numClipIntersection:f.numIntersection,dithering:ut.dithering,shadowMapEnabled:o.shadowMap.enabled&&pt.length>0,shadowMapType:o.shadowMap.type,toneMapping:ut.toneMapped?o.toneMapping:NoToneMapping,physicallyCorrectLights:o.physicallyCorrectLights,premultipliedAlpha:ut.premultipliedAlpha,alphaTest:ut.alphaTest,doubleSided:ut.side===DoubleSide,flipSided:ut.side===BackSide,depthPacking:ut.depthPacking!==void 0?ut.depthPacking:!1,index0AttributeName:ut.index0AttributeName,extensionDerivatives:ut.extensions&&ut.extensions.derivatives,extensionFragDepth:ut.extensions&&ut.extensions.fragDepth,extensionDrawBuffers:ut.extensions&&ut.extensions.drawBuffers,extensionShaderTextureLOD:ut.extensions&&ut.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||a.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||a.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||a.has("EXT_shader_texture_lod"),customProgramCacheKey:ut.customProgramCacheKey()}}function et(ut){const ht=[];if(ut.shaderID?ht.push(ut.shaderID):(ht.push(ut.fragmentShader),ht.push(ut.vertexShader)),ut.defines!==void 0)for(const pt in ut.defines)ht.push(pt),ht.push(ut.defines[pt]);if(ut.isRawShaderMaterial===!1){for(let pt=0;pt<rt.length;pt++)ht.push(ut[rt[pt]]);ht.push(o.outputEncoding),ht.push(o.gammaFactor)}return ht.push(ut.customProgramCacheKey),ht.join()}function st(ut){const ht=nt[ut.type];let pt;if(ht){const mt=ShaderLib[ht];pt=UniformsUtils.clone(mt.uniforms)}else pt=ut.uniforms;return pt}function lt(ut,ht){let pt;for(let mt=0,bt=d.length;mt<bt;mt++){const St=d[mt];if(St.cacheKey===ht){pt=St,++pt.usedTimes;break}}return pt===void 0&&(pt=new WebGLProgram(o,ht,ut,c),d.push(pt)),pt}function ct(ut){if(--ut.usedTimes===0){const ht=d.indexOf(ut);d[ht]=d[d.length-1],d.pop(),ut.destroy()}}return{getParameters:$,getProgramCacheKey:et,getUniforms:st,acquireProgram:lt,releaseProgram:ct,programs:d}}function WebGLProperties(){let o=new WeakMap;function e(f){let d=o.get(f);return d===void 0&&(d={},o.set(f,d)),d}function a(f){o.delete(f)}function s(f,d,h){o.get(f)[d]=h}function c(){o=new WeakMap}return{get:e,remove:a,update:s,dispose:c}}function painterSortStable(o,e){return o.groupOrder!==e.groupOrder?o.groupOrder-e.groupOrder:o.renderOrder!==e.renderOrder?o.renderOrder-e.renderOrder:o.program!==e.program?o.program.id-e.program.id:o.material.id!==e.material.id?o.material.id-e.material.id:o.z!==e.z?o.z-e.z:o.id-e.id}function reversePainterSortStable(o,e){return o.groupOrder!==e.groupOrder?o.groupOrder-e.groupOrder:o.renderOrder!==e.renderOrder?o.renderOrder-e.renderOrder:o.z!==e.z?e.z-o.z:o.id-e.id}function WebGLRenderList(o){const e=[];let a=0;const s=[],c=[],f={id:-1};function d(){a=0,s.length=0,c.length=0}function h(_e,nt,rt,at,it,$){let et=e[a];const st=o.get(rt);return et===void 0?(et={id:_e.id,object:_e,geometry:nt,material:rt,program:st.program||f,groupOrder:at,renderOrder:_e.renderOrder,z:it,group:$},e[a]=et):(et.id=_e.id,et.object=_e,et.geometry=nt,et.material=rt,et.program=st.program||f,et.groupOrder=at,et.renderOrder=_e.renderOrder,et.z=it,et.group=$),a++,et}function g(_e,nt,rt,at,it,$){const et=h(_e,nt,rt,at,it,$);(rt.transparent===!0?c:s).push(et)}function b(_e,nt,rt,at,it,$){const et=h(_e,nt,rt,at,it,$);(rt.transparent===!0?c:s).unshift(et)}function tt(_e,nt){s.length>1&&s.sort(_e||painterSortStable),c.length>1&&c.sort(nt||reversePainterSortStable)}function j(){for(let _e=a,nt=e.length;_e<nt;_e++){const rt=e[_e];if(rt.id===null)break;rt.id=null,rt.object=null,rt.geometry=null,rt.material=null,rt.program=null,rt.group=null}}return{opaque:s,transparent:c,init:d,push:g,unshift:b,finish:j,sort:tt}}function WebGLRenderLists(o){let e=new WeakMap;function a(c,f){const d=e.get(c);let h;return d===void 0?(h=new WebGLRenderList(o),e.set(c,new WeakMap),e.get(c).set(f,h)):(h=d.get(f),h===void 0&&(h=new WebGLRenderList(o),d.set(f,h))),h}function s(){e=new WeakMap}return{get:a,dispose:s}}function UniformsCache(){const o={};return{get:function(e){if(o[e.id]!==void 0)return o[e.id];let a;switch(e.type){case"DirectionalLight":a={direction:new Vector3,color:new Color};break;case"SpotLight":a={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":a={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":a={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":a={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return o[e.id]=a,a}}}function ShadowUniformsCache(){const o={};return{get:function(e){if(o[e.id]!==void 0)return o[e.id];let a;switch(e.type){case"DirectionalLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return o[e.id]=a,a}}}let nextVersion=0;function shadowCastingLightsFirst(o,e){return(e.castShadow?1:0)-(o.castShadow?1:0)}function WebGLLights(o,e){const a=new UniformsCache,s=ShadowUniformsCache(),c={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let tt=0;tt<9;tt++)c.probe.push(new Vector3);const f=new Vector3,d=new Matrix4,h=new Matrix4;function g(tt){let j=0,_e=0,nt=0;for(let ht=0;ht<9;ht++)c.probe[ht].set(0,0,0);let rt=0,at=0,it=0,$=0,et=0,st=0,lt=0,ct=0;tt.sort(shadowCastingLightsFirst);for(let ht=0,pt=tt.length;ht<pt;ht++){const mt=tt[ht],bt=mt.color,St=mt.intensity,Ft=mt.distance,It=mt.shadow&&mt.shadow.map?mt.shadow.map.texture:null;if(mt.isAmbientLight)j+=bt.r*St,_e+=bt.g*St,nt+=bt.b*St;else if(mt.isLightProbe)for(let Ct=0;Ct<9;Ct++)c.probe[Ct].addScaledVector(mt.sh.coefficients[Ct],St);else if(mt.isDirectionalLight){const Ct=a.get(mt);if(Ct.color.copy(mt.color).multiplyScalar(mt.intensity),mt.castShadow){const Pt=mt.shadow,Nt=s.get(mt);Nt.shadowBias=Pt.bias,Nt.shadowNormalBias=Pt.normalBias,Nt.shadowRadius=Pt.radius,Nt.shadowMapSize=Pt.mapSize,c.directionalShadow[rt]=Nt,c.directionalShadowMap[rt]=It,c.directionalShadowMatrix[rt]=mt.shadow.matrix,st++}c.directional[rt]=Ct,rt++}else if(mt.isSpotLight){const Ct=a.get(mt);if(Ct.position.setFromMatrixPosition(mt.matrixWorld),Ct.color.copy(bt).multiplyScalar(St),Ct.distance=Ft,Ct.coneCos=Math.cos(mt.angle),Ct.penumbraCos=Math.cos(mt.angle*(1-mt.penumbra)),Ct.decay=mt.decay,mt.castShadow){const Pt=mt.shadow,Nt=s.get(mt);Nt.shadowBias=Pt.bias,Nt.shadowNormalBias=Pt.normalBias,Nt.shadowRadius=Pt.radius,Nt.shadowMapSize=Pt.mapSize,c.spotShadow[it]=Nt,c.spotShadowMap[it]=It,c.spotShadowMatrix[it]=mt.shadow.matrix,ct++}c.spot[it]=Ct,it++}else if(mt.isRectAreaLight){const Ct=a.get(mt);Ct.color.copy(bt).multiplyScalar(St),Ct.halfWidth.set(mt.width*.5,0,0),Ct.halfHeight.set(0,mt.height*.5,0),c.rectArea[$]=Ct,$++}else if(mt.isPointLight){const Ct=a.get(mt);if(Ct.color.copy(mt.color).multiplyScalar(mt.intensity),Ct.distance=mt.distance,Ct.decay=mt.decay,mt.castShadow){const Pt=mt.shadow,Nt=s.get(mt);Nt.shadowBias=Pt.bias,Nt.shadowNormalBias=Pt.normalBias,Nt.shadowRadius=Pt.radius,Nt.shadowMapSize=Pt.mapSize,Nt.shadowCameraNear=Pt.camera.near,Nt.shadowCameraFar=Pt.camera.far,c.pointShadow[at]=Nt,c.pointShadowMap[at]=It,c.pointShadowMatrix[at]=mt.shadow.matrix,lt++}c.point[at]=Ct,at++}else if(mt.isHemisphereLight){const Ct=a.get(mt);Ct.skyColor.copy(mt.color).multiplyScalar(St),Ct.groundColor.copy(mt.groundColor).multiplyScalar(St),c.hemi[et]=Ct,et++}}$>0&&(e.isWebGL2||o.has("OES_texture_float_linear")===!0?(c.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,c.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):o.has("OES_texture_half_float_linear")===!0?(c.rectAreaLTC1=UniformsLib.LTC_HALF_1,c.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),c.ambient[0]=j,c.ambient[1]=_e,c.ambient[2]=nt;const ut=c.hash;(ut.directionalLength!==rt||ut.pointLength!==at||ut.spotLength!==it||ut.rectAreaLength!==$||ut.hemiLength!==et||ut.numDirectionalShadows!==st||ut.numPointShadows!==lt||ut.numSpotShadows!==ct)&&(c.directional.length=rt,c.spot.length=it,c.rectArea.length=$,c.point.length=at,c.hemi.length=et,c.directionalShadow.length=st,c.directionalShadowMap.length=st,c.pointShadow.length=lt,c.pointShadowMap.length=lt,c.spotShadow.length=ct,c.spotShadowMap.length=ct,c.directionalShadowMatrix.length=st,c.pointShadowMatrix.length=lt,c.spotShadowMatrix.length=ct,ut.directionalLength=rt,ut.pointLength=at,ut.spotLength=it,ut.rectAreaLength=$,ut.hemiLength=et,ut.numDirectionalShadows=st,ut.numPointShadows=lt,ut.numSpotShadows=ct,c.version=nextVersion++)}function b(tt,j){let _e=0,nt=0,rt=0,at=0,it=0;const $=j.matrixWorldInverse;for(let et=0,st=tt.length;et<st;et++){const lt=tt[et];if(lt.isDirectionalLight){const ct=c.directional[_e];ct.direction.setFromMatrixPosition(lt.matrixWorld),f.setFromMatrixPosition(lt.target.matrixWorld),ct.direction.sub(f),ct.direction.transformDirection($),_e++}else if(lt.isSpotLight){const ct=c.spot[rt];ct.position.setFromMatrixPosition(lt.matrixWorld),ct.position.applyMatrix4($),ct.direction.setFromMatrixPosition(lt.matrixWorld),f.setFromMatrixPosition(lt.target.matrixWorld),ct.direction.sub(f),ct.direction.transformDirection($),rt++}else if(lt.isRectAreaLight){const ct=c.rectArea[at];ct.position.setFromMatrixPosition(lt.matrixWorld),ct.position.applyMatrix4($),h.identity(),d.copy(lt.matrixWorld),d.premultiply($),h.extractRotation(d),ct.halfWidth.set(lt.width*.5,0,0),ct.halfHeight.set(0,lt.height*.5,0),ct.halfWidth.applyMatrix4(h),ct.halfHeight.applyMatrix4(h),at++}else if(lt.isPointLight){const ct=c.point[nt];ct.position.setFromMatrixPosition(lt.matrixWorld),ct.position.applyMatrix4($),nt++}else if(lt.isHemisphereLight){const ct=c.hemi[it];ct.direction.setFromMatrixPosition(lt.matrixWorld),ct.direction.transformDirection($),ct.direction.normalize(),it++}}}return{setup:g,setupView:b,state:c}}function WebGLRenderState(o,e){const a=new WebGLLights(o,e),s=[],c=[];function f(){s.length=0,c.length=0}function d(j){s.push(j)}function h(j){c.push(j)}function g(){a.setup(s)}function b(j){a.setupView(s,j)}return{init:f,state:{lightsArray:s,shadowsArray:c,lights:a},setupLights:g,setupLightsView:b,pushLight:d,pushShadow:h}}function WebGLRenderStates(o,e){let a=new WeakMap;function s(f,d=0){let h;return a.has(f)===!1?(h=new WebGLRenderState(o,e),a.set(f,[]),a.get(f).push(h)):d>=a.get(f).length?(h=new WebGLRenderState(o,e),a.get(f).push(h)):h=a.get(f)[d],h}function c(){a=new WeakMap}return{get:s,dispose:c}}function MeshDepthMaterial(o){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(o)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(o){return Material.prototype.copy.call(this,o),this.depthPacking=o.depthPacking,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this};function MeshDistanceMaterial(o){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(o)}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;MeshDistanceMaterial.prototype.copy=function(o){return Material.prototype.copy.call(this,o),this.referencePosition.copy(o.referencePosition),this.nearDistance=o.nearDistance,this.farDistance=o.farDistance,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this};var vsm_frag=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,vsm_vert=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function WebGLShadowMap(o,e,a){let s=new Frustum;const c=new Vector2,f=new Vector2,d=new Vector4,h=[],g=[],b={},tt={0:BackSide,1:FrontSide,2:DoubleSide},j=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),_e=j.clone();_e.defines.HORIZONTAL_PASS=1;const nt=new BufferGeometry;nt.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const rt=new Mesh(nt,j),at=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(ct,ut,ht){if(at.enabled===!1||at.autoUpdate===!1&&at.needsUpdate===!1||ct.length===0)return;const pt=o.getRenderTarget(),mt=o.getActiveCubeFace(),bt=o.getActiveMipmapLevel(),St=o.state;St.setBlending(NoBlending),St.buffers.color.setClear(1,1,1,1),St.buffers.depth.setTest(!0),St.setScissorTest(!1);for(let Ft=0,It=ct.length;Ft<It;Ft++){const Ct=ct[Ft],Pt=Ct.shadow;if(Pt===void 0){console.warn("THREE.WebGLShadowMap:",Ct,"has no shadow.");continue}if(Pt.autoUpdate===!1&&Pt.needsUpdate===!1)continue;c.copy(Pt.mapSize);const Nt=Pt.getFrameExtents();if(c.multiply(Nt),f.copy(Pt.mapSize),(c.x>a||c.y>a)&&(c.x>a&&(f.x=Math.floor(a/Nt.x),c.x=f.x*Nt.x,Pt.mapSize.x=f.x),c.y>a&&(f.y=Math.floor(a/Nt.y),c.y=f.y*Nt.y,Pt.mapSize.y=f.y)),Pt.map===null&&!Pt.isPointLightShadow&&this.type===VSMShadowMap){const Xt={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};Pt.map=new WebGLRenderTarget(c.x,c.y,Xt),Pt.map.texture.name=Ct.name+".shadowMap",Pt.mapPass=new WebGLRenderTarget(c.x,c.y,Xt),Pt.camera.updateProjectionMatrix()}if(Pt.map===null){const Xt={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};Pt.map=new WebGLRenderTarget(c.x,c.y,Xt),Pt.map.texture.name=Ct.name+".shadowMap",Pt.camera.updateProjectionMatrix()}o.setRenderTarget(Pt.map),o.clear();const zt=Pt.getViewportCount();for(let Xt=0;Xt<zt;Xt++){const en=Pt.getViewport(Xt);d.set(f.x*en.x,f.y*en.y,f.x*en.z,f.y*en.w),St.viewport(d),Pt.updateMatrices(Ct,Xt),s=Pt.getFrustum(),lt(ut,ht,Pt.camera,Ct,this.type)}!Pt.isPointLightShadow&&this.type===VSMShadowMap&&it(Pt,ht),Pt.needsUpdate=!1}at.needsUpdate=!1,o.setRenderTarget(pt,mt,bt)};function it(ct,ut){const ht=e.update(rt);j.uniforms.shadow_pass.value=ct.map.texture,j.uniforms.resolution.value=ct.mapSize,j.uniforms.radius.value=ct.radius,o.setRenderTarget(ct.mapPass),o.clear(),o.renderBufferDirect(ut,null,ht,j,rt,null),_e.uniforms.shadow_pass.value=ct.mapPass.texture,_e.uniforms.resolution.value=ct.mapSize,_e.uniforms.radius.value=ct.radius,o.setRenderTarget(ct.map),o.clear(),o.renderBufferDirect(ut,null,ht,_e,rt,null)}function $(ct,ut,ht){const pt=ct<<0|ut<<1|ht<<2;let mt=h[pt];return mt===void 0&&(mt=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:ct,skinning:ut}),h[pt]=mt),mt}function et(ct,ut,ht){const pt=ct<<0|ut<<1|ht<<2;let mt=g[pt];return mt===void 0&&(mt=new MeshDistanceMaterial({morphTargets:ct,skinning:ut}),g[pt]=mt),mt}function st(ct,ut,ht,pt,mt,bt,St){let Ft=null,It=$,Ct=ct.customDepthMaterial;if(pt.isPointLight===!0&&(It=et,Ct=ct.customDistanceMaterial),Ct===void 0){let Pt=!1;ht.morphTargets===!0&&(Pt=ut.morphAttributes&&ut.morphAttributes.position&&ut.morphAttributes.position.length>0);let Nt=!1;ct.isSkinnedMesh===!0&&(ht.skinning===!0?Nt=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",ct));const zt=ct.isInstancedMesh===!0;Ft=It(Pt,Nt,zt)}else Ft=Ct;if(o.localClippingEnabled&&ht.clipShadows===!0&&ht.clippingPlanes.length!==0){const Pt=Ft.uuid,Nt=ht.uuid;let zt=b[Pt];zt===void 0&&(zt={},b[Pt]=zt);let Xt=zt[Nt];Xt===void 0&&(Xt=Ft.clone(),zt[Nt]=Xt),Ft=Xt}return Ft.visible=ht.visible,Ft.wireframe=ht.wireframe,St===VSMShadowMap?Ft.side=ht.shadowSide!==null?ht.shadowSide:ht.side:Ft.side=ht.shadowSide!==null?ht.shadowSide:tt[ht.side],Ft.clipShadows=ht.clipShadows,Ft.clippingPlanes=ht.clippingPlanes,Ft.clipIntersection=ht.clipIntersection,Ft.wireframeLinewidth=ht.wireframeLinewidth,Ft.linewidth=ht.linewidth,pt.isPointLight===!0&&Ft.isMeshDistanceMaterial===!0&&(Ft.referencePosition.setFromMatrixPosition(pt.matrixWorld),Ft.nearDistance=mt,Ft.farDistance=bt),Ft}function lt(ct,ut,ht,pt,mt){if(ct.visible===!1)return;if(ct.layers.test(ut.layers)&&(ct.isMesh||ct.isLine||ct.isPoints)&&(ct.castShadow||ct.receiveShadow&&mt===VSMShadowMap)&&(!ct.frustumCulled||s.intersectsObject(ct))){ct.modelViewMatrix.multiplyMatrices(ht.matrixWorldInverse,ct.matrixWorld);const Ft=e.update(ct),It=ct.material;if(Array.isArray(It)){const Ct=Ft.groups;for(let Pt=0,Nt=Ct.length;Pt<Nt;Pt++){const zt=Ct[Pt],Xt=It[zt.materialIndex];if(Xt&&Xt.visible){const en=st(ct,Ft,Xt,pt,ht.near,ht.far,mt);o.renderBufferDirect(ht,null,Ft,en,ct,zt)}}}else if(It.visible){const Ct=st(ct,Ft,It,pt,ht.near,ht.far,mt);o.renderBufferDirect(ht,null,Ft,Ct,ct,null)}}const St=ct.children;for(let Ft=0,It=St.length;Ft<It;Ft++)lt(St[Ft],ut,ht,pt,mt)}}function WebGLState(o,e,a){const s=a.isWebGL2;function c(){let Ot=!1;const tn=new Vector4;let on=null;const ln=new Vector4(0,0,0,0);return{setMask:function(an){on!==an&&!Ot&&(o.colorMask(an,an,an,an),on=an)},setLocked:function(an){Ot=an},setClear:function(an,pn,gn,Mn,fn){fn===!0&&(an*=Mn,pn*=Mn,gn*=Mn),tn.set(an,pn,gn,Mn),ln.equals(tn)===!1&&(o.clearColor(an,pn,gn,Mn),ln.copy(tn))},reset:function(){Ot=!1,on=null,ln.set(-1,0,0,0)}}}function f(){let Ot=!1,tn=null,on=null,ln=null;return{setTest:function(an){an?rn(2929):Gt(2929)},setMask:function(an){tn!==an&&!Ot&&(o.depthMask(an),tn=an)},setFunc:function(an){if(on!==an){if(an)switch(an){case NeverDepth:o.depthFunc(512);break;case AlwaysDepth:o.depthFunc(519);break;case LessDepth:o.depthFunc(513);break;case LessEqualDepth:o.depthFunc(515);break;case EqualDepth:o.depthFunc(514);break;case GreaterEqualDepth:o.depthFunc(518);break;case GreaterDepth:o.depthFunc(516);break;case NotEqualDepth:o.depthFunc(517);break;default:o.depthFunc(515)}else o.depthFunc(515);on=an}},setLocked:function(an){Ot=an},setClear:function(an){ln!==an&&(o.clearDepth(an),ln=an)},reset:function(){Ot=!1,tn=null,on=null,ln=null}}}function d(){let Ot=!1,tn=null,on=null,ln=null,an=null,pn=null,gn=null,Mn=null,fn=null;return{setTest:function(vn){Ot||(vn?rn(2960):Gt(2960))},setMask:function(vn){tn!==vn&&!Ot&&(o.stencilMask(vn),tn=vn)},setFunc:function(vn,Tn,Wn){(on!==vn||ln!==Tn||an!==Wn)&&(o.stencilFunc(vn,Tn,Wn),on=vn,ln=Tn,an=Wn)},setOp:function(vn,Tn,Wn){(pn!==vn||gn!==Tn||Mn!==Wn)&&(o.stencilOp(vn,Tn,Wn),pn=vn,gn=Tn,Mn=Wn)},setLocked:function(vn){Ot=vn},setClear:function(vn){fn!==vn&&(o.clearStencil(vn),fn=vn)},reset:function(){Ot=!1,tn=null,on=null,ln=null,an=null,pn=null,gn=null,Mn=null,fn=null}}}const h=new c,g=new f,b=new d;let tt={},j=null,_e=null,nt=null,rt=null,at=null,it=null,$=null,et=null,st=null,lt=!1,ct=null,ut=null,ht=null,pt=null,mt=null;const bt=o.getParameter(35661);let St=!1,Ft=0;const It=o.getParameter(7938);It.indexOf("WebGL")!==-1?(Ft=parseFloat(/^WebGL (\d)/.exec(It)[1]),St=Ft>=1):It.indexOf("OpenGL ES")!==-1&&(Ft=parseFloat(/^OpenGL ES (\d)/.exec(It)[1]),St=Ft>=2);let Ct=null,Pt={};const Nt=new Vector4,zt=new Vector4;function Xt(Ot,tn,on){const ln=new Uint8Array(4),an=o.createTexture();o.bindTexture(Ot,an),o.texParameteri(Ot,10241,9728),o.texParameteri(Ot,10240,9728);for(let pn=0;pn<on;pn++)o.texImage2D(tn+pn,0,6408,1,1,0,6408,5121,ln);return an}const en={};en[3553]=Xt(3553,3553,1),en[34067]=Xt(34067,34069,6),h.setClear(0,0,0,1),g.setClear(1),b.setClear(0),rn(2929),g.setFunc(LessEqualDepth),yt(!1),At(CullFaceBack),rn(2884),Yt(NoBlending);function rn(Ot){tt[Ot]!==!0&&(o.enable(Ot),tt[Ot]=!0)}function Gt(Ot){tt[Ot]!==!1&&(o.disable(Ot),tt[Ot]=!1)}function qt(Ot){return j!==Ot?(o.useProgram(Ot),j=Ot,!0):!1}const sn={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(s)sn[MinEquation]=32775,sn[MaxEquation]=32776;else{const Ot=e.get("EXT_blend_minmax");Ot!==null&&(sn[MinEquation]=Ot.MIN_EXT,sn[MaxEquation]=Ot.MAX_EXT)}const yn={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function Yt(Ot,tn,on,ln,an,pn,gn,Mn){if(Ot===NoBlending){_e&&(Gt(3042),_e=!1);return}if(_e||(rn(3042),_e=!0),Ot!==CustomBlending){if(Ot!==nt||Mn!==lt){if((rt!==AddEquation||$!==AddEquation)&&(o.blendEquation(32774),rt=AddEquation,$=AddEquation),Mn)switch(Ot){case NormalBlending:o.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:o.blendFunc(1,1);break;case SubtractiveBlending:o.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:o.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ot);break}else switch(Ot){case NormalBlending:o.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:o.blendFunc(770,1);break;case SubtractiveBlending:o.blendFunc(0,769);break;case MultiplyBlending:o.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ot);break}at=null,it=null,et=null,st=null,nt=Ot,lt=Mn}return}an=an||tn,pn=pn||on,gn=gn||ln,(tn!==rt||an!==$)&&(o.blendEquationSeparate(sn[tn],sn[an]),rt=tn,$=an),(on!==at||ln!==it||pn!==et||gn!==st)&&(o.blendFuncSeparate(yn[on],yn[ln],yn[pn],yn[gn]),at=on,it=ln,et=pn,st=gn),nt=Ot,lt=null}function _t(Ot,tn){Ot.side===DoubleSide?Gt(2884):rn(2884);let on=Ot.side===BackSide;tn&&(on=!on),yt(on),Ot.blending===NormalBlending&&Ot.transparent===!1?Yt(NoBlending):Yt(Ot.blending,Ot.blendEquation,Ot.blendSrc,Ot.blendDst,Ot.blendEquationAlpha,Ot.blendSrcAlpha,Ot.blendDstAlpha,Ot.premultipliedAlpha),g.setFunc(Ot.depthFunc),g.setTest(Ot.depthTest),g.setMask(Ot.depthWrite),h.setMask(Ot.colorWrite);const ln=Ot.stencilWrite;b.setTest(ln),ln&&(b.setMask(Ot.stencilWriteMask),b.setFunc(Ot.stencilFunc,Ot.stencilRef,Ot.stencilFuncMask),b.setOp(Ot.stencilFail,Ot.stencilZFail,Ot.stencilZPass)),Rt(Ot.polygonOffset,Ot.polygonOffsetFactor,Ot.polygonOffsetUnits)}function yt(Ot){ct!==Ot&&(Ot?o.frontFace(2304):o.frontFace(2305),ct=Ot)}function At(Ot){Ot!==CullFaceNone?(rn(2884),Ot!==ut&&(Ot===CullFaceBack?o.cullFace(1029):Ot===CullFaceFront?o.cullFace(1028):o.cullFace(1032))):Gt(2884),ut=Ot}function wt(Ot){Ot!==ht&&(St&&o.lineWidth(Ot),ht=Ot)}function Rt(Ot,tn,on){Ot?(rn(32823),(pt!==tn||mt!==on)&&(o.polygonOffset(tn,on),pt=tn,mt=on)):Gt(32823)}function Bt(Ot){Ot?rn(3089):Gt(3089)}function Lt(Ot){Ot===void 0&&(Ot=33984+bt-1),Ct!==Ot&&(o.activeTexture(Ot),Ct=Ot)}function Et(Ot,tn){Ct===null&&Lt();let on=Pt[Ct];on===void 0&&(on={type:void 0,texture:void 0},Pt[Ct]=on),(on.type!==Ot||on.texture!==tn)&&(o.bindTexture(Ot,tn||en[Ot]),on.type=Ot,on.texture=tn)}function Dt(){const Ot=Pt[Ct];Ot!==void 0&&Ot.type!==void 0&&(o.bindTexture(Ot.type,null),Ot.type=void 0,Ot.texture=void 0)}function Ht(){try{o.compressedTexImage2D.apply(o,arguments)}catch(Ot){console.error("THREE.WebGLState:",Ot)}}function Ut(){try{o.texImage2D.apply(o,arguments)}catch(Ot){console.error("THREE.WebGLState:",Ot)}}function xt(){try{o.texImage3D.apply(o,arguments)}catch(Ot){console.error("THREE.WebGLState:",Ot)}}function vt(Ot){Nt.equals(Ot)===!1&&(o.scissor(Ot.x,Ot.y,Ot.z,Ot.w),Nt.copy(Ot))}function Zt(Ot){zt.equals(Ot)===!1&&(o.viewport(Ot.x,Ot.y,Ot.z,Ot.w),zt.copy(Ot))}function Wt(){tt={},Ct=null,Pt={},j=null,_e=null,nt=null,rt=null,at=null,it=null,$=null,et=null,st=null,lt=!1,ct=null,ut=null,ht=null,pt=null,mt=null,h.reset(),g.reset(),b.reset()}return{buffers:{color:h,depth:g,stencil:b},enable:rn,disable:Gt,useProgram:qt,setBlending:Yt,setMaterial:_t,setFlipSided:yt,setCullFace:At,setLineWidth:wt,setPolygonOffset:Rt,setScissorTest:Bt,activeTexture:Lt,bindTexture:Et,unbindTexture:Dt,compressedTexImage2D:Ht,texImage2D:Ut,texImage3D:xt,scissor:vt,viewport:Zt,reset:Wt}}function WebGLTextures(o,e,a,s,c,f,d){const h=c.isWebGL2,g=c.maxTextures,b=c.maxCubemapSize,tt=c.maxTextureSize,j=c.maxSamples,_e=new WeakMap;let nt,rt=!1;try{rt=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function at(xt,vt){return rt?new OffscreenCanvas(xt,vt):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function it(xt,vt,Zt,Wt){let Ot=1;if((xt.width>Wt||xt.height>Wt)&&(Ot=Wt/Math.max(xt.width,xt.height)),Ot<1||vt===!0)if(typeof HTMLImageElement!="undefined"&&xt instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&xt instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&xt instanceof ImageBitmap){const tn=vt?MathUtils.floorPowerOfTwo:Math.floor,on=tn(Ot*xt.width),ln=tn(Ot*xt.height);nt===void 0&&(nt=at(on,ln));const an=Zt?at(on,ln):nt;return an.width=on,an.height=ln,an.getContext("2d").drawImage(xt,0,0,on,ln),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+xt.width+"x"+xt.height+") to ("+on+"x"+ln+")."),an}else return"data"in xt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+xt.width+"x"+xt.height+")."),xt;return xt}function $(xt){return MathUtils.isPowerOfTwo(xt.width)&&MathUtils.isPowerOfTwo(xt.height)}function et(xt){return h?!1:xt.wrapS!==ClampToEdgeWrapping||xt.wrapT!==ClampToEdgeWrapping||xt.minFilter!==NearestFilter&&xt.minFilter!==LinearFilter}function st(xt,vt){return xt.generateMipmaps&&vt&&xt.minFilter!==NearestFilter&&xt.minFilter!==LinearFilter}function lt(xt,vt,Zt,Wt){o.generateMipmap(xt);const Ot=s.get(vt);Ot.__maxMipLevel=Math.log(Math.max(Zt,Wt))*Math.LOG2E}function ct(xt,vt,Zt){if(h===!1)return vt;if(xt!==null){if(o[xt]!==void 0)return o[xt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+xt+"'")}let Wt=vt;return vt===6403&&(Zt===5126&&(Wt=33326),Zt===5131&&(Wt=33325),Zt===5121&&(Wt=33321)),vt===6407&&(Zt===5126&&(Wt=34837),Zt===5131&&(Wt=34843),Zt===5121&&(Wt=32849)),vt===6408&&(Zt===5126&&(Wt=34836),Zt===5131&&(Wt=34842),Zt===5121&&(Wt=32856)),(Wt===33325||Wt===33326||Wt===34842||Wt===34836)&&e.get("EXT_color_buffer_float"),Wt}function ut(xt){return xt===NearestFilter||xt===NearestMipmapNearestFilter||xt===NearestMipmapLinearFilter?9728:9729}function ht(xt){const vt=xt.target;vt.removeEventListener("dispose",ht),mt(vt),vt.isVideoTexture&&_e.delete(vt),d.memory.textures--}function pt(xt){const vt=xt.target;vt.removeEventListener("dispose",pt),bt(vt),d.memory.textures--}function mt(xt){const vt=s.get(xt);vt.__webglInit!==void 0&&(o.deleteTexture(vt.__webglTexture),s.remove(xt))}function bt(xt){const vt=s.get(xt),Zt=s.get(xt.texture);if(!!xt){if(Zt.__webglTexture!==void 0&&o.deleteTexture(Zt.__webglTexture),xt.depthTexture&&xt.depthTexture.dispose(),xt.isWebGLCubeRenderTarget)for(let Wt=0;Wt<6;Wt++)o.deleteFramebuffer(vt.__webglFramebuffer[Wt]),vt.__webglDepthbuffer&&o.deleteRenderbuffer(vt.__webglDepthbuffer[Wt]);else o.deleteFramebuffer(vt.__webglFramebuffer),vt.__webglDepthbuffer&&o.deleteRenderbuffer(vt.__webglDepthbuffer),vt.__webglMultisampledFramebuffer&&o.deleteFramebuffer(vt.__webglMultisampledFramebuffer),vt.__webglColorRenderbuffer&&o.deleteRenderbuffer(vt.__webglColorRenderbuffer),vt.__webglDepthRenderbuffer&&o.deleteRenderbuffer(vt.__webglDepthRenderbuffer);s.remove(xt.texture),s.remove(xt)}}let St=0;function Ft(){St=0}function It(){const xt=St;return xt>=g&&console.warn("THREE.WebGLTextures: Trying to use "+xt+" texture units while this GPU supports only "+g),St+=1,xt}function Ct(xt,vt){const Zt=s.get(xt);if(xt.isVideoTexture&&Lt(xt),xt.version>0&&Zt.__version!==xt.version){const Wt=xt.image;if(Wt===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Wt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{qt(Zt,xt,vt);return}}a.activeTexture(33984+vt),a.bindTexture(3553,Zt.__webglTexture)}function Pt(xt,vt){const Zt=s.get(xt);if(xt.version>0&&Zt.__version!==xt.version){qt(Zt,xt,vt);return}a.activeTexture(33984+vt),a.bindTexture(35866,Zt.__webglTexture)}function Nt(xt,vt){const Zt=s.get(xt);if(xt.version>0&&Zt.__version!==xt.version){qt(Zt,xt,vt);return}a.activeTexture(33984+vt),a.bindTexture(32879,Zt.__webglTexture)}function zt(xt,vt){const Zt=s.get(xt);if(xt.version>0&&Zt.__version!==xt.version){sn(Zt,xt,vt);return}a.activeTexture(33984+vt),a.bindTexture(34067,Zt.__webglTexture)}const Xt={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},en={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function rn(xt,vt,Zt){Zt?(o.texParameteri(xt,10242,Xt[vt.wrapS]),o.texParameteri(xt,10243,Xt[vt.wrapT]),(xt===32879||xt===35866)&&o.texParameteri(xt,32882,Xt[vt.wrapR]),o.texParameteri(xt,10240,en[vt.magFilter]),o.texParameteri(xt,10241,en[vt.minFilter])):(o.texParameteri(xt,10242,33071),o.texParameteri(xt,10243,33071),(xt===32879||xt===35866)&&o.texParameteri(xt,32882,33071),(vt.wrapS!==ClampToEdgeWrapping||vt.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),o.texParameteri(xt,10240,ut(vt.magFilter)),o.texParameteri(xt,10241,ut(vt.minFilter)),vt.minFilter!==NearestFilter&&vt.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const Wt=e.get("EXT_texture_filter_anisotropic");if(Wt){if(vt.type===FloatType&&e.get("OES_texture_float_linear")===null||vt.type===HalfFloatType&&(h||e.get("OES_texture_half_float_linear"))===null)return;(vt.anisotropy>1||s.get(vt).__currentAnisotropy)&&(o.texParameterf(xt,Wt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(vt.anisotropy,c.getMaxAnisotropy())),s.get(vt).__currentAnisotropy=vt.anisotropy)}}function Gt(xt,vt){xt.__webglInit===void 0&&(xt.__webglInit=!0,vt.addEventListener("dispose",ht),xt.__webglTexture=o.createTexture(),d.memory.textures++)}function qt(xt,vt,Zt){let Wt=3553;vt.isDataTexture2DArray&&(Wt=35866),vt.isDataTexture3D&&(Wt=32879),Gt(xt,vt),a.activeTexture(33984+Zt),a.bindTexture(Wt,xt.__webglTexture),o.pixelStorei(37440,vt.flipY),o.pixelStorei(37441,vt.premultiplyAlpha),o.pixelStorei(3317,vt.unpackAlignment);const Ot=et(vt)&&$(vt.image)===!1,tn=it(vt.image,Ot,!1,tt),on=$(tn)||h,ln=f.convert(vt.format);let an=f.convert(vt.type),pn=ct(vt.internalFormat,ln,an);rn(Wt,vt,on);let gn;const Mn=vt.mipmaps;if(vt.isDepthTexture)pn=6402,h?vt.type===FloatType?pn=36012:vt.type===UnsignedIntType?pn=33190:vt.type===UnsignedInt248Type?pn=35056:pn=33189:vt.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),vt.format===DepthFormat&&pn===6402&&vt.type!==UnsignedShortType&&vt.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),vt.type=UnsignedShortType,an=f.convert(vt.type)),vt.format===DepthStencilFormat&&pn===6402&&(pn=34041,vt.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),vt.type=UnsignedInt248Type,an=f.convert(vt.type))),a.texImage2D(3553,0,pn,tn.width,tn.height,0,ln,an,null);else if(vt.isDataTexture)if(Mn.length>0&&on){for(let fn=0,vn=Mn.length;fn<vn;fn++)gn=Mn[fn],a.texImage2D(3553,fn,pn,gn.width,gn.height,0,ln,an,gn.data);vt.generateMipmaps=!1,xt.__maxMipLevel=Mn.length-1}else a.texImage2D(3553,0,pn,tn.width,tn.height,0,ln,an,tn.data),xt.__maxMipLevel=0;else if(vt.isCompressedTexture){for(let fn=0,vn=Mn.length;fn<vn;fn++)gn=Mn[fn],vt.format!==RGBAFormat&&vt.format!==RGBFormat?ln!==null?a.compressedTexImage2D(3553,fn,pn,gn.width,gn.height,0,gn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):a.texImage2D(3553,fn,pn,gn.width,gn.height,0,ln,an,gn.data);xt.__maxMipLevel=Mn.length-1}else if(vt.isDataTexture2DArray)a.texImage3D(35866,0,pn,tn.width,tn.height,tn.depth,0,ln,an,tn.data),xt.__maxMipLevel=0;else if(vt.isDataTexture3D)a.texImage3D(32879,0,pn,tn.width,tn.height,tn.depth,0,ln,an,tn.data),xt.__maxMipLevel=0;else if(Mn.length>0&&on){for(let fn=0,vn=Mn.length;fn<vn;fn++)gn=Mn[fn],a.texImage2D(3553,fn,pn,ln,an,gn);vt.generateMipmaps=!1,xt.__maxMipLevel=Mn.length-1}else a.texImage2D(3553,0,pn,ln,an,tn),xt.__maxMipLevel=0;st(vt,on)&&lt(Wt,vt,tn.width,tn.height),xt.__version=vt.version,vt.onUpdate&&vt.onUpdate(vt)}function sn(xt,vt,Zt){if(vt.image.length!==6)return;Gt(xt,vt),a.activeTexture(33984+Zt),a.bindTexture(34067,xt.__webglTexture),o.pixelStorei(37440,vt.flipY),o.pixelStorei(37441,vt.premultiplyAlpha),o.pixelStorei(3317,vt.unpackAlignment);const Wt=vt&&(vt.isCompressedTexture||vt.image[0].isCompressedTexture),Ot=vt.image[0]&&vt.image[0].isDataTexture,tn=[];for(let fn=0;fn<6;fn++)!Wt&&!Ot?tn[fn]=it(vt.image[fn],!1,!0,b):tn[fn]=Ot?vt.image[fn].image:vt.image[fn];const on=tn[0],ln=$(on)||h,an=f.convert(vt.format),pn=f.convert(vt.type),gn=ct(vt.internalFormat,an,pn);rn(34067,vt,ln);let Mn;if(Wt){for(let fn=0;fn<6;fn++){Mn=tn[fn].mipmaps;for(let vn=0;vn<Mn.length;vn++){const Tn=Mn[vn];vt.format!==RGBAFormat&&vt.format!==RGBFormat?an!==null?a.compressedTexImage2D(34069+fn,vn,gn,Tn.width,Tn.height,0,Tn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):a.texImage2D(34069+fn,vn,gn,Tn.width,Tn.height,0,an,pn,Tn.data)}}xt.__maxMipLevel=Mn.length-1}else{Mn=vt.mipmaps;for(let fn=0;fn<6;fn++)if(Ot){a.texImage2D(34069+fn,0,gn,tn[fn].width,tn[fn].height,0,an,pn,tn[fn].data);for(let vn=0;vn<Mn.length;vn++){const Wn=Mn[vn].image[fn].image;a.texImage2D(34069+fn,vn+1,gn,Wn.width,Wn.height,0,an,pn,Wn.data)}}else{a.texImage2D(34069+fn,0,gn,an,pn,tn[fn]);for(let vn=0;vn<Mn.length;vn++){const Tn=Mn[vn];a.texImage2D(34069+fn,vn+1,gn,an,pn,Tn.image[fn])}}xt.__maxMipLevel=Mn.length}st(vt,ln)&&lt(34067,vt,on.width,on.height),xt.__version=vt.version,vt.onUpdate&&vt.onUpdate(vt)}function yn(xt,vt,Zt,Wt){const Ot=f.convert(vt.texture.format),tn=f.convert(vt.texture.type),on=ct(vt.texture.internalFormat,Ot,tn);a.texImage2D(Wt,0,on,vt.width,vt.height,0,Ot,tn,null),o.bindFramebuffer(36160,xt),o.framebufferTexture2D(36160,Zt,Wt,s.get(vt.texture).__webglTexture,0),o.bindFramebuffer(36160,null)}function Yt(xt,vt,Zt){if(o.bindRenderbuffer(36161,xt),vt.depthBuffer&&!vt.stencilBuffer){let Wt=33189;if(Zt){const Ot=vt.depthTexture;Ot&&Ot.isDepthTexture&&(Ot.type===FloatType?Wt=36012:Ot.type===UnsignedIntType&&(Wt=33190));const tn=Bt(vt);o.renderbufferStorageMultisample(36161,tn,Wt,vt.width,vt.height)}else o.renderbufferStorage(36161,Wt,vt.width,vt.height);o.framebufferRenderbuffer(36160,36096,36161,xt)}else if(vt.depthBuffer&&vt.stencilBuffer){if(Zt){const Wt=Bt(vt);o.renderbufferStorageMultisample(36161,Wt,35056,vt.width,vt.height)}else o.renderbufferStorage(36161,34041,vt.width,vt.height);o.framebufferRenderbuffer(36160,33306,36161,xt)}else{const Wt=f.convert(vt.texture.format),Ot=f.convert(vt.texture.type),tn=ct(vt.texture.internalFormat,Wt,Ot);if(Zt){const on=Bt(vt);o.renderbufferStorageMultisample(36161,on,tn,vt.width,vt.height)}else o.renderbufferStorage(36161,tn,vt.width,vt.height)}o.bindRenderbuffer(36161,null)}function _t(xt,vt){if(vt&&vt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(o.bindFramebuffer(36160,xt),!(vt.depthTexture&&vt.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!s.get(vt.depthTexture).__webglTexture||vt.depthTexture.image.width!==vt.width||vt.depthTexture.image.height!==vt.height)&&(vt.depthTexture.image.width=vt.width,vt.depthTexture.image.height=vt.height,vt.depthTexture.needsUpdate=!0),Ct(vt.depthTexture,0);const Wt=s.get(vt.depthTexture).__webglTexture;if(vt.depthTexture.format===DepthFormat)o.framebufferTexture2D(36160,36096,3553,Wt,0);else if(vt.depthTexture.format===DepthStencilFormat)o.framebufferTexture2D(36160,33306,3553,Wt,0);else throw new Error("Unknown depthTexture format")}function yt(xt){const vt=s.get(xt),Zt=xt.isWebGLCubeRenderTarget===!0;if(xt.depthTexture){if(Zt)throw new Error("target.depthTexture not supported in Cube render targets");_t(vt.__webglFramebuffer,xt)}else if(Zt){vt.__webglDepthbuffer=[];for(let Wt=0;Wt<6;Wt++)o.bindFramebuffer(36160,vt.__webglFramebuffer[Wt]),vt.__webglDepthbuffer[Wt]=o.createRenderbuffer(),Yt(vt.__webglDepthbuffer[Wt],xt,!1)}else o.bindFramebuffer(36160,vt.__webglFramebuffer),vt.__webglDepthbuffer=o.createRenderbuffer(),Yt(vt.__webglDepthbuffer,xt,!1);o.bindFramebuffer(36160,null)}function At(xt){const vt=s.get(xt),Zt=s.get(xt.texture);xt.addEventListener("dispose",pt),Zt.__webglTexture=o.createTexture(),d.memory.textures++;const Wt=xt.isWebGLCubeRenderTarget===!0,Ot=xt.isWebGLMultisampleRenderTarget===!0,tn=$(xt)||h;if(h&&xt.texture.format===RGBFormat&&(xt.texture.type===FloatType||xt.texture.type===HalfFloatType)&&(xt.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Wt){vt.__webglFramebuffer=[];for(let on=0;on<6;on++)vt.__webglFramebuffer[on]=o.createFramebuffer()}else if(vt.__webglFramebuffer=o.createFramebuffer(),Ot)if(h){vt.__webglMultisampledFramebuffer=o.createFramebuffer(),vt.__webglColorRenderbuffer=o.createRenderbuffer(),o.bindRenderbuffer(36161,vt.__webglColorRenderbuffer);const on=f.convert(xt.texture.format),ln=f.convert(xt.texture.type),an=ct(xt.texture.internalFormat,on,ln),pn=Bt(xt);o.renderbufferStorageMultisample(36161,pn,an,xt.width,xt.height),o.bindFramebuffer(36160,vt.__webglMultisampledFramebuffer),o.framebufferRenderbuffer(36160,36064,36161,vt.__webglColorRenderbuffer),o.bindRenderbuffer(36161,null),xt.depthBuffer&&(vt.__webglDepthRenderbuffer=o.createRenderbuffer(),Yt(vt.__webglDepthRenderbuffer,xt,!0)),o.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Wt){a.bindTexture(34067,Zt.__webglTexture),rn(34067,xt.texture,tn);for(let on=0;on<6;on++)yn(vt.__webglFramebuffer[on],xt,36064,34069+on);st(xt.texture,tn)&&lt(34067,xt.texture,xt.width,xt.height),a.bindTexture(34067,null)}else a.bindTexture(3553,Zt.__webglTexture),rn(3553,xt.texture,tn),yn(vt.__webglFramebuffer,xt,36064,3553),st(xt.texture,tn)&&lt(3553,xt.texture,xt.width,xt.height),a.bindTexture(3553,null);xt.depthBuffer&&yt(xt)}function wt(xt){const vt=xt.texture,Zt=$(xt)||h;if(st(vt,Zt)){const Wt=xt.isWebGLCubeRenderTarget?34067:3553,Ot=s.get(vt).__webglTexture;a.bindTexture(Wt,Ot),lt(Wt,vt,xt.width,xt.height),a.bindTexture(Wt,null)}}function Rt(xt){if(xt.isWebGLMultisampleRenderTarget)if(h){const vt=s.get(xt);o.bindFramebuffer(36008,vt.__webglMultisampledFramebuffer),o.bindFramebuffer(36009,vt.__webglFramebuffer);const Zt=xt.width,Wt=xt.height;let Ot=16384;xt.depthBuffer&&(Ot|=256),xt.stencilBuffer&&(Ot|=1024),o.blitFramebuffer(0,0,Zt,Wt,0,0,Zt,Wt,Ot,9728),o.bindFramebuffer(36160,vt.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Bt(xt){return h&&xt.isWebGLMultisampleRenderTarget?Math.min(j,xt.samples):0}function Lt(xt){const vt=d.render.frame;_e.get(xt)!==vt&&(_e.set(xt,vt),xt.update())}let Et=!1,Dt=!1;function Ht(xt,vt){xt&&xt.isWebGLRenderTarget&&(Et===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Et=!0),xt=xt.texture),Ct(xt,vt)}function Ut(xt,vt){xt&&xt.isWebGLCubeRenderTarget&&(Dt===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Dt=!0),xt=xt.texture),zt(xt,vt)}this.allocateTextureUnit=It,this.resetTextureUnits=Ft,this.setTexture2D=Ct,this.setTexture2DArray=Pt,this.setTexture3D=Nt,this.setTextureCube=zt,this.setupRenderTarget=At,this.updateRenderTargetMipmap=wt,this.updateMultisampleRenderTarget=Rt,this.safeSetTexture2D=Ht,this.safeSetTextureCube=Ut}function WebGLUtils(o,e,a){const s=a.isWebGL2;function c(f){let d;if(f===UnsignedByteType)return 5121;if(f===UnsignedShort4444Type)return 32819;if(f===UnsignedShort5551Type)return 32820;if(f===UnsignedShort565Type)return 33635;if(f===ByteType)return 5120;if(f===ShortType)return 5122;if(f===UnsignedShortType)return 5123;if(f===IntType)return 5124;if(f===UnsignedIntType)return 5125;if(f===FloatType)return 5126;if(f===HalfFloatType)return s?5131:(d=e.get("OES_texture_half_float"),d!==null?d.HALF_FLOAT_OES:null);if(f===AlphaFormat)return 6406;if(f===RGBFormat)return 6407;if(f===RGBAFormat)return 6408;if(f===LuminanceFormat)return 6409;if(f===LuminanceAlphaFormat)return 6410;if(f===DepthFormat)return 6402;if(f===DepthStencilFormat)return 34041;if(f===RedFormat)return 6403;if(f===RedIntegerFormat)return 36244;if(f===RGFormat)return 33319;if(f===RGIntegerFormat)return 33320;if(f===RGBIntegerFormat)return 36248;if(f===RGBAIntegerFormat)return 36249;if(f===RGB_S3TC_DXT1_Format||f===RGBA_S3TC_DXT1_Format||f===RGBA_S3TC_DXT3_Format||f===RGBA_S3TC_DXT5_Format)if(d=e.get("WEBGL_compressed_texture_s3tc"),d!==null){if(f===RGB_S3TC_DXT1_Format)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(f===RGBA_S3TC_DXT1_Format)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(f===RGBA_S3TC_DXT3_Format)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(f===RGBA_S3TC_DXT5_Format)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(f===RGB_PVRTC_4BPPV1_Format||f===RGB_PVRTC_2BPPV1_Format||f===RGBA_PVRTC_4BPPV1_Format||f===RGBA_PVRTC_2BPPV1_Format)if(d=e.get("WEBGL_compressed_texture_pvrtc"),d!==null){if(f===RGB_PVRTC_4BPPV1_Format)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(f===RGB_PVRTC_2BPPV1_Format)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(f===RGBA_PVRTC_4BPPV1_Format)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(f===RGBA_PVRTC_2BPPV1_Format)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(f===RGB_ETC1_Format)return d=e.get("WEBGL_compressed_texture_etc1"),d!==null?d.COMPRESSED_RGB_ETC1_WEBGL:null;if((f===RGB_ETC2_Format||f===RGBA_ETC2_EAC_Format)&&(d=e.get("WEBGL_compressed_texture_etc"),d!==null)){if(f===RGB_ETC2_Format)return d.COMPRESSED_RGB8_ETC2;if(f===RGBA_ETC2_EAC_Format)return d.COMPRESSED_RGBA8_ETC2_EAC}if(f===RGBA_ASTC_4x4_Format||f===RGBA_ASTC_5x4_Format||f===RGBA_ASTC_5x5_Format||f===RGBA_ASTC_6x5_Format||f===RGBA_ASTC_6x6_Format||f===RGBA_ASTC_8x5_Format||f===RGBA_ASTC_8x6_Format||f===RGBA_ASTC_8x8_Format||f===RGBA_ASTC_10x5_Format||f===RGBA_ASTC_10x6_Format||f===RGBA_ASTC_10x8_Format||f===RGBA_ASTC_10x10_Format||f===RGBA_ASTC_12x10_Format||f===RGBA_ASTC_12x12_Format||f===SRGB8_ALPHA8_ASTC_4x4_Format||f===SRGB8_ALPHA8_ASTC_5x4_Format||f===SRGB8_ALPHA8_ASTC_5x5_Format||f===SRGB8_ALPHA8_ASTC_6x5_Format||f===SRGB8_ALPHA8_ASTC_6x6_Format||f===SRGB8_ALPHA8_ASTC_8x5_Format||f===SRGB8_ALPHA8_ASTC_8x6_Format||f===SRGB8_ALPHA8_ASTC_8x8_Format||f===SRGB8_ALPHA8_ASTC_10x5_Format||f===SRGB8_ALPHA8_ASTC_10x6_Format||f===SRGB8_ALPHA8_ASTC_10x8_Format||f===SRGB8_ALPHA8_ASTC_10x10_Format||f===SRGB8_ALPHA8_ASTC_12x10_Format||f===SRGB8_ALPHA8_ASTC_12x12_Format)return d=e.get("WEBGL_compressed_texture_astc"),d!==null?f:null;if(f===RGBA_BPTC_Format)return d=e.get("EXT_texture_compression_bptc"),d!==null?f:null;if(f===UnsignedInt248Type)return s?34042:(d=e.get("WEBGL_depth_texture"),d!==null?d.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:c}}function ArrayCamera(o=[]){PerspectiveCamera.call(this),this.cameras=o}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function Group(){Object3D.call(this),this.type="Group"}Group.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group,isGroup:!0});function WebXRController(){this._targetRay=null,this._grip=null,this._hand=null}Object.assign(WebXRController.prototype,{constructor:WebXRController,getHandSpace:function(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(o){return this._targetRay!==null&&this._targetRay.dispatchEvent(o),this._grip!==null&&this._grip.dispatchEvent(o),this._hand!==null&&this._hand.dispatchEvent(o),this},disconnect:function(o){return this.dispatchEvent({type:"disconnected",data:o}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(o,e,a){let s=null,c=null,f=null;const d=this._targetRay,h=this._grip,g=this._hand;if(o&&e.session.visibilityState!=="visible-blurred")if(g&&o.hand){f=!0;for(const rt of o.hand.values()){const at=e.getJointPose(rt,a);if(g.joints[rt.jointName]===void 0){const $=new Group;$.matrixAutoUpdate=!1,$.visible=!1,g.joints[rt.jointName]=$,g.add($)}const it=g.joints[rt.jointName];at!==null&&(it.matrix.fromArray(at.transform.matrix),it.matrix.decompose(it.position,it.rotation,it.scale),it.jointRadius=at.radius),it.visible=at!==null}const b=g.joints["index-finger-tip"],tt=g.joints["thumb-tip"],j=b.position.distanceTo(tt.position),_e=.02,nt=.005;g.inputState.pinching&&j>_e+nt?(g.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:o.handedness,target:this})):!g.inputState.pinching&&j<=_e-nt&&(g.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:o.handedness,target:this}))}else d!==null&&(s=e.getPose(o.targetRaySpace,a),s!==null&&(d.matrix.fromArray(s.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale))),h!==null&&o.gripSpace&&(c=e.getPose(o.gripSpace,a),c!==null&&(h.matrix.fromArray(c.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale)));return d!==null&&(d.visible=s!==null),h!==null&&(h.visible=c!==null),g!==null&&(g.visible=f!==null),this}});function WebXRManager(o,e){const a=this;let s=null,c=1,f=null,d="local-floor",h=null;const g=[],b=new Map,tt=new PerspectiveCamera;tt.layers.enable(1),tt.viewport=new Vector4;const j=new PerspectiveCamera;j.layers.enable(2),j.viewport=new Vector4;const _e=[tt,j],nt=new ArrayCamera;nt.layers.enable(1),nt.layers.enable(2);let rt=null,at=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(bt){let St=g[bt];return St===void 0&&(St=new WebXRController,g[bt]=St),St.getTargetRaySpace()},this.getControllerGrip=function(bt){let St=g[bt];return St===void 0&&(St=new WebXRController,g[bt]=St),St.getGripSpace()},this.getHand=function(bt){let St=g[bt];return St===void 0&&(St=new WebXRController,g[bt]=St),St.getHandSpace()};function it(bt){const St=b.get(bt.inputSource);St&&St.dispatchEvent({type:bt.type,data:bt.inputSource})}function $(){b.forEach(function(bt,St){bt.disconnect(St)}),b.clear(),rt=null,at=null,o.setFramebuffer(null),o.setRenderTarget(o.getRenderTarget()),mt.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(bt){c=bt,a.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(bt){d=bt,a.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f},this.getSession=function(){return s},this.setSession=async function(bt){if(s=bt,s!==null){s.addEventListener("select",it),s.addEventListener("selectstart",it),s.addEventListener("selectend",it),s.addEventListener("squeeze",it),s.addEventListener("squeezestart",it),s.addEventListener("squeezeend",it),s.addEventListener("end",$),s.addEventListener("inputsourceschange",et);const St=e.getContextAttributes();St.xrCompatible!==!0&&await e.makeXRCompatible();const Ft={antialias:St.antialias,alpha:St.alpha,depth:St.depth,stencil:St.stencil,framebufferScaleFactor:c},It=new XRWebGLLayer(s,e,Ft);s.updateRenderState({baseLayer:It}),f=await s.requestReferenceSpace(d),mt.setContext(s),mt.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"})}};function et(bt){const St=s.inputSources;for(let Ft=0;Ft<g.length;Ft++)b.set(St[Ft],g[Ft]);for(let Ft=0;Ft<bt.removed.length;Ft++){const It=bt.removed[Ft],Ct=b.get(It);Ct&&(Ct.dispatchEvent({type:"disconnected",data:It}),b.delete(It))}for(let Ft=0;Ft<bt.added.length;Ft++){const It=bt.added[Ft],Ct=b.get(It);Ct&&Ct.dispatchEvent({type:"connected",data:It})}}const st=new Vector3,lt=new Vector3;function ct(bt,St,Ft){st.setFromMatrixPosition(St.matrixWorld),lt.setFromMatrixPosition(Ft.matrixWorld);const It=st.distanceTo(lt),Ct=St.projectionMatrix.elements,Pt=Ft.projectionMatrix.elements,Nt=Ct[14]/(Ct[10]-1),zt=Ct[14]/(Ct[10]+1),Xt=(Ct[9]+1)/Ct[5],en=(Ct[9]-1)/Ct[5],rn=(Ct[8]-1)/Ct[0],Gt=(Pt[8]+1)/Pt[0],qt=Nt*rn,sn=Nt*Gt,yn=It/(-rn+Gt),Yt=yn*-rn;St.matrixWorld.decompose(bt.position,bt.quaternion,bt.scale),bt.translateX(Yt),bt.translateZ(yn),bt.matrixWorld.compose(bt.position,bt.quaternion,bt.scale),bt.matrixWorldInverse.copy(bt.matrixWorld).invert();const _t=Nt+yn,yt=zt+yn,At=qt-Yt,wt=sn+(It-Yt),Rt=Xt*zt/yt*_t,Bt=en*zt/yt*_t;bt.projectionMatrix.makePerspective(At,wt,Rt,Bt,_t,yt)}function ut(bt,St){St===null?bt.matrixWorld.copy(bt.matrix):bt.matrixWorld.multiplyMatrices(St.matrixWorld,bt.matrix),bt.matrixWorldInverse.copy(bt.matrixWorld).invert()}this.getCamera=function(bt){nt.near=j.near=tt.near=bt.near,nt.far=j.far=tt.far=bt.far,(rt!==nt.near||at!==nt.far)&&(s.updateRenderState({depthNear:nt.near,depthFar:nt.far}),rt=nt.near,at=nt.far);const St=bt.parent,Ft=nt.cameras;ut(nt,St);for(let Ct=0;Ct<Ft.length;Ct++)ut(Ft[Ct],St);bt.matrixWorld.copy(nt.matrixWorld),bt.matrix.copy(nt.matrix),bt.matrix.decompose(bt.position,bt.quaternion,bt.scale);const It=bt.children;for(let Ct=0,Pt=It.length;Ct<Pt;Ct++)It[Ct].updateMatrixWorld(!0);return Ft.length===2?ct(nt,tt,j):nt.projectionMatrix.copy(tt.projectionMatrix),nt};let ht=null;function pt(bt,St){if(h=St.getViewerPose(f),h!==null){const It=h.views,Ct=s.renderState.baseLayer;o.setFramebuffer(Ct.framebuffer);let Pt=!1;It.length!==nt.cameras.length&&(nt.cameras.length=0,Pt=!0);for(let Nt=0;Nt<It.length;Nt++){const zt=It[Nt],Xt=Ct.getViewport(zt),en=_e[Nt];en.matrix.fromArray(zt.transform.matrix),en.projectionMatrix.fromArray(zt.projectionMatrix),en.viewport.set(Xt.x,Xt.y,Xt.width,Xt.height),Nt===0&&nt.matrix.copy(en.matrix),Pt===!0&&nt.cameras.push(en)}}const Ft=s.inputSources;for(let It=0;It<g.length;It++){const Ct=g[It],Pt=Ft[It];Ct.update(Pt,St,f)}ht&&ht(bt,St)}const mt=new WebGLAnimation;mt.setAnimationLoop(pt),this.setAnimationLoop=function(bt){ht=bt},this.dispose=function(){}}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(o){function e($,et){$.fogColor.value.copy(et.color),et.isFog?($.fogNear.value=et.near,$.fogFar.value=et.far):et.isFogExp2&&($.fogDensity.value=et.density)}function a($,et,st,lt){et.isMeshBasicMaterial?s($,et):et.isMeshLambertMaterial?(s($,et),g($,et)):et.isMeshToonMaterial?(s($,et),tt($,et)):et.isMeshPhongMaterial?(s($,et),b($,et)):et.isMeshStandardMaterial?(s($,et),et.isMeshPhysicalMaterial?_e($,et):j($,et)):et.isMeshMatcapMaterial?(s($,et),nt($,et)):et.isMeshDepthMaterial?(s($,et),rt($,et)):et.isMeshDistanceMaterial?(s($,et),at($,et)):et.isMeshNormalMaterial?(s($,et),it($,et)):et.isLineBasicMaterial?(c($,et),et.isLineDashedMaterial&&f($,et)):et.isPointsMaterial?d($,et,st,lt):et.isSpriteMaterial?h($,et):et.isShadowMaterial?($.color.value.copy(et.color),$.opacity.value=et.opacity):et.isShaderMaterial&&(et.uniformsNeedUpdate=!1)}function s($,et){$.opacity.value=et.opacity,et.color&&$.diffuse.value.copy(et.color),et.emissive&&$.emissive.value.copy(et.emissive).multiplyScalar(et.emissiveIntensity),et.map&&($.map.value=et.map),et.alphaMap&&($.alphaMap.value=et.alphaMap),et.specularMap&&($.specularMap.value=et.specularMap);const st=o.get(et).envMap;if(st){$.envMap.value=st,$.flipEnvMap.value=st.isCubeTexture&&st._needsFlipEnvMap?-1:1,$.reflectivity.value=et.reflectivity,$.refractionRatio.value=et.refractionRatio;const ut=o.get(st).__maxMipLevel;ut!==void 0&&($.maxMipLevel.value=ut)}et.lightMap&&($.lightMap.value=et.lightMap,$.lightMapIntensity.value=et.lightMapIntensity),et.aoMap&&($.aoMap.value=et.aoMap,$.aoMapIntensity.value=et.aoMapIntensity);let lt;et.map?lt=et.map:et.specularMap?lt=et.specularMap:et.displacementMap?lt=et.displacementMap:et.normalMap?lt=et.normalMap:et.bumpMap?lt=et.bumpMap:et.roughnessMap?lt=et.roughnessMap:et.metalnessMap?lt=et.metalnessMap:et.alphaMap?lt=et.alphaMap:et.emissiveMap?lt=et.emissiveMap:et.clearcoatMap?lt=et.clearcoatMap:et.clearcoatNormalMap?lt=et.clearcoatNormalMap:et.clearcoatRoughnessMap&&(lt=et.clearcoatRoughnessMap),lt!==void 0&&(lt.isWebGLRenderTarget&&(lt=lt.texture),lt.matrixAutoUpdate===!0&&lt.updateMatrix(),$.uvTransform.value.copy(lt.matrix));let ct;et.aoMap?ct=et.aoMap:et.lightMap&&(ct=et.lightMap),ct!==void 0&&(ct.isWebGLRenderTarget&&(ct=ct.texture),ct.matrixAutoUpdate===!0&&ct.updateMatrix(),$.uv2Transform.value.copy(ct.matrix))}function c($,et){$.diffuse.value.copy(et.color),$.opacity.value=et.opacity}function f($,et){$.dashSize.value=et.dashSize,$.totalSize.value=et.dashSize+et.gapSize,$.scale.value=et.scale}function d($,et,st,lt){$.diffuse.value.copy(et.color),$.opacity.value=et.opacity,$.size.value=et.size*st,$.scale.value=lt*.5,et.map&&($.map.value=et.map),et.alphaMap&&($.alphaMap.value=et.alphaMap);let ct;et.map?ct=et.map:et.alphaMap&&(ct=et.alphaMap),ct!==void 0&&(ct.matrixAutoUpdate===!0&&ct.updateMatrix(),$.uvTransform.value.copy(ct.matrix))}function h($,et){$.diffuse.value.copy(et.color),$.opacity.value=et.opacity,$.rotation.value=et.rotation,et.map&&($.map.value=et.map),et.alphaMap&&($.alphaMap.value=et.alphaMap);let st;et.map?st=et.map:et.alphaMap&&(st=et.alphaMap),st!==void 0&&(st.matrixAutoUpdate===!0&&st.updateMatrix(),$.uvTransform.value.copy(st.matrix))}function g($,et){et.emissiveMap&&($.emissiveMap.value=et.emissiveMap)}function b($,et){$.specular.value.copy(et.specular),$.shininess.value=Math.max(et.shininess,1e-4),et.emissiveMap&&($.emissiveMap.value=et.emissiveMap),et.bumpMap&&($.bumpMap.value=et.bumpMap,$.bumpScale.value=et.bumpScale,et.side===BackSide&&($.bumpScale.value*=-1)),et.normalMap&&($.normalMap.value=et.normalMap,$.normalScale.value.copy(et.normalScale),et.side===BackSide&&$.normalScale.value.negate()),et.displacementMap&&($.displacementMap.value=et.displacementMap,$.displacementScale.value=et.displacementScale,$.displacementBias.value=et.displacementBias)}function tt($,et){et.gradientMap&&($.gradientMap.value=et.gradientMap),et.emissiveMap&&($.emissiveMap.value=et.emissiveMap),et.bumpMap&&($.bumpMap.value=et.bumpMap,$.bumpScale.value=et.bumpScale,et.side===BackSide&&($.bumpScale.value*=-1)),et.normalMap&&($.normalMap.value=et.normalMap,$.normalScale.value.copy(et.normalScale),et.side===BackSide&&$.normalScale.value.negate()),et.displacementMap&&($.displacementMap.value=et.displacementMap,$.displacementScale.value=et.displacementScale,$.displacementBias.value=et.displacementBias)}function j($,et){$.roughness.value=et.roughness,$.metalness.value=et.metalness,et.roughnessMap&&($.roughnessMap.value=et.roughnessMap),et.metalnessMap&&($.metalnessMap.value=et.metalnessMap),et.emissiveMap&&($.emissiveMap.value=et.emissiveMap),et.bumpMap&&($.bumpMap.value=et.bumpMap,$.bumpScale.value=et.bumpScale,et.side===BackSide&&($.bumpScale.value*=-1)),et.normalMap&&($.normalMap.value=et.normalMap,$.normalScale.value.copy(et.normalScale),et.side===BackSide&&$.normalScale.value.negate()),et.displacementMap&&($.displacementMap.value=et.displacementMap,$.displacementScale.value=et.displacementScale,$.displacementBias.value=et.displacementBias),o.get(et).envMap&&($.envMapIntensity.value=et.envMapIntensity)}function _e($,et){j($,et),$.reflectivity.value=et.reflectivity,$.clearcoat.value=et.clearcoat,$.clearcoatRoughness.value=et.clearcoatRoughness,et.sheen&&$.sheen.value.copy(et.sheen),et.clearcoatMap&&($.clearcoatMap.value=et.clearcoatMap),et.clearcoatRoughnessMap&&($.clearcoatRoughnessMap.value=et.clearcoatRoughnessMap),et.clearcoatNormalMap&&($.clearcoatNormalScale.value.copy(et.clearcoatNormalScale),$.clearcoatNormalMap.value=et.clearcoatNormalMap,et.side===BackSide&&$.clearcoatNormalScale.value.negate()),$.transmission.value=et.transmission,et.transmissionMap&&($.transmissionMap.value=et.transmissionMap)}function nt($,et){et.matcap&&($.matcap.value=et.matcap),et.bumpMap&&($.bumpMap.value=et.bumpMap,$.bumpScale.value=et.bumpScale,et.side===BackSide&&($.bumpScale.value*=-1)),et.normalMap&&($.normalMap.value=et.normalMap,$.normalScale.value.copy(et.normalScale),et.side===BackSide&&$.normalScale.value.negate()),et.displacementMap&&($.displacementMap.value=et.displacementMap,$.displacementScale.value=et.displacementScale,$.displacementBias.value=et.displacementBias)}function rt($,et){et.displacementMap&&($.displacementMap.value=et.displacementMap,$.displacementScale.value=et.displacementScale,$.displacementBias.value=et.displacementBias)}function at($,et){et.displacementMap&&($.displacementMap.value=et.displacementMap,$.displacementScale.value=et.displacementScale,$.displacementBias.value=et.displacementBias),$.referencePosition.value.copy(et.referencePosition),$.nearDistance.value=et.nearDistance,$.farDistance.value=et.farDistance}function it($,et){et.bumpMap&&($.bumpMap.value=et.bumpMap,$.bumpScale.value=et.bumpScale,et.side===BackSide&&($.bumpScale.value*=-1)),et.normalMap&&($.normalMap.value=et.normalMap,$.normalScale.value.copy(et.normalScale),et.side===BackSide&&$.normalScale.value.negate()),et.displacementMap&&($.displacementMap.value=et.displacementMap,$.displacementScale.value=et.displacementScale,$.displacementBias.value=et.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:a}}function createCanvasElement(){const o=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return o.style.display="block",o}function WebGLRenderer(o){o=o||{};const e=o.canvas!==void 0?o.canvas:createCanvasElement(),a=o.context!==void 0?o.context:null,s=o.alpha!==void 0?o.alpha:!1,c=o.depth!==void 0?o.depth:!0,f=o.stencil!==void 0?o.stencil:!0,d=o.antialias!==void 0?o.antialias:!1,h=o.premultipliedAlpha!==void 0?o.premultipliedAlpha:!0,g=o.preserveDrawingBuffer!==void 0?o.preserveDrawingBuffer:!1,b=o.powerPreference!==void 0?o.powerPreference:"default",tt=o.failIfMajorPerformanceCaveat!==void 0?o.failIfMajorPerformanceCaveat:!1;let j=null,_e=null;const nt=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const rt=this;let at=!1,it=null,$=0,et=0,st=null,lt=null,ct=-1,ut=null;const ht=new Vector4,pt=new Vector4;let mt=null,bt=e.width,St=e.height,Ft=1,It=null,Ct=null;const Pt=new Vector4(0,0,bt,St),Nt=new Vector4(0,0,bt,St);let zt=!1;const Xt=new Frustum;let en=!1,rn=!1;const Gt=new Matrix4,qt=new Vector3,sn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function yn(){return st===null?Ft:1}let Yt=a;function _t(Mt,Jt){for(let $t=0;$t<Mt.length;$t++){const nn=Mt[$t],cn=e.getContext(nn,Jt);if(cn!==null)return cn}return null}try{const Mt={alpha:s,depth:c,stencil:f,antialias:d,premultipliedAlpha:h,preserveDrawingBuffer:g,powerPreference:b,failIfMajorPerformanceCaveat:tt};if(e.addEventListener("webglcontextlost",Tn,!1),e.addEventListener("webglcontextrestored",Wn,!1),Yt===null){const Jt=["webgl2","webgl","experimental-webgl"];if(rt.isWebGL1Renderer===!0&&Jt.shift(),Yt=_t(Jt,Mt),Yt===null)throw _t(Jt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Yt.getShaderPrecisionFormat===void 0&&(Yt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Mt){throw console.error("THREE.WebGLRenderer: "+Mt.message),Mt}let yt,At,wt,Rt,Bt,Lt,Et,Dt,Ht,Ut,xt,vt,Zt,Wt,Ot,tn,on,ln,an,pn,gn;function Mn(){yt=new WebGLExtensions(Yt),At=new WebGLCapabilities(Yt,yt,o),yt.init(At),pn=new WebGLUtils(Yt,yt,At),wt=new WebGLState(Yt,yt,At),wt.scissor(pt.copy(Nt).multiplyScalar(Ft).floor()),wt.viewport(ht.copy(Pt).multiplyScalar(Ft).floor()),Rt=new WebGLInfo,Bt=new WebGLProperties,Lt=new WebGLTextures(Yt,yt,wt,Bt,At,pn,Rt),Et=new WebGLCubeMaps(rt),Dt=new WebGLAttributes(Yt,At),gn=new WebGLBindingStates(Yt,yt,Dt,At),Ht=new WebGLGeometries(Yt,Dt,Rt,gn),Ut=new WebGLObjects(Yt,Ht,Dt,Rt),on=new WebGLMorphtargets(Yt),Ot=new WebGLClipping(Bt),xt=new WebGLPrograms(rt,Et,yt,At,gn,Ot),vt=new WebGLMaterials(Bt),Zt=new WebGLRenderLists(Bt),Wt=new WebGLRenderStates(yt,At),tn=new WebGLBackground(rt,Et,wt,Ut,h),ln=new WebGLBufferRenderer(Yt,yt,Rt,At),an=new WebGLIndexedBufferRenderer(Yt,yt,Rt,At),Rt.programs=xt.programs,rt.capabilities=At,rt.extensions=yt,rt.properties=Bt,rt.renderLists=Zt,rt.state=wt,rt.info=Rt}Mn();const fn=new WebXRManager(rt,Yt);this.xr=fn;const vn=new WebGLShadowMap(rt,Ut,At.maxTextureSize);this.shadowMap=vn,this.getContext=function(){return Yt},this.getContextAttributes=function(){return Yt.getContextAttributes()},this.forceContextLoss=function(){const Mt=yt.get("WEBGL_lose_context");Mt&&Mt.loseContext()},this.forceContextRestore=function(){const Mt=yt.get("WEBGL_lose_context");Mt&&Mt.restoreContext()},this.getPixelRatio=function(){return Ft},this.setPixelRatio=function(Mt){Mt!==void 0&&(Ft=Mt,this.setSize(bt,St,!1))},this.getSize=function(Mt){return Mt===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),Mt=new Vector2),Mt.set(bt,St)},this.setSize=function(Mt,Jt,$t){if(fn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}bt=Mt,St=Jt,e.width=Math.floor(Mt*Ft),e.height=Math.floor(Jt*Ft),$t!==!1&&(e.style.width=Mt+"px",e.style.height=Jt+"px"),this.setViewport(0,0,Mt,Jt)},this.getDrawingBufferSize=function(Mt){return Mt===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),Mt=new Vector2),Mt.set(bt*Ft,St*Ft).floor()},this.setDrawingBufferSize=function(Mt,Jt,$t){bt=Mt,St=Jt,Ft=$t,e.width=Math.floor(Mt*$t),e.height=Math.floor(Jt*$t),this.setViewport(0,0,Mt,Jt)},this.getCurrentViewport=function(Mt){return Mt===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),Mt=new Vector4),Mt.copy(ht)},this.getViewport=function(Mt){return Mt.copy(Pt)},this.setViewport=function(Mt,Jt,$t,nn){Mt.isVector4?Pt.set(Mt.x,Mt.y,Mt.z,Mt.w):Pt.set(Mt,Jt,$t,nn),wt.viewport(ht.copy(Pt).multiplyScalar(Ft).floor())},this.getScissor=function(Mt){return Mt.copy(Nt)},this.setScissor=function(Mt,Jt,$t,nn){Mt.isVector4?Nt.set(Mt.x,Mt.y,Mt.z,Mt.w):Nt.set(Mt,Jt,$t,nn),wt.scissor(pt.copy(Nt).multiplyScalar(Ft).floor())},this.getScissorTest=function(){return zt},this.setScissorTest=function(Mt){wt.setScissorTest(zt=Mt)},this.setOpaqueSort=function(Mt){It=Mt},this.setTransparentSort=function(Mt){Ct=Mt},this.getClearColor=function(Mt){return Mt===void 0&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),Mt=new Color),Mt.copy(tn.getClearColor())},this.setClearColor=function(){tn.setClearColor.apply(tn,arguments)},this.getClearAlpha=function(){return tn.getClearAlpha()},this.setClearAlpha=function(){tn.setClearAlpha.apply(tn,arguments)},this.clear=function(Mt,Jt,$t){let nn=0;(Mt===void 0||Mt)&&(nn|=16384),(Jt===void 0||Jt)&&(nn|=256),($t===void 0||$t)&&(nn|=1024),Yt.clear(nn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Tn,!1),e.removeEventListener("webglcontextrestored",Wn,!1),Zt.dispose(),Wt.dispose(),Bt.dispose(),Et.dispose(),Ut.dispose(),gn.dispose(),fn.dispose(),dr.stop()};function Tn(Mt){Mt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),at=!0}function Wn(){console.log("THREE.WebGLRenderer: Context Restored."),at=!1,Mn()}function fr(Mt){const Jt=Mt.target;Jt.removeEventListener("dispose",fr),no(Jt)}function no(Mt){zr(Mt),Bt.remove(Mt)}function zr(Mt){const Jt=Bt.get(Mt).program;Jt!==void 0&&xt.releaseProgram(Jt)}function Hr(Mt,Jt){Mt.render(function($t){rt.renderBufferImmediate($t,Jt)})}this.renderBufferImmediate=function(Mt,Jt){gn.initAttributes();const $t=Bt.get(Mt);Mt.hasPositions&&!$t.position&&($t.position=Yt.createBuffer()),Mt.hasNormals&&!$t.normal&&($t.normal=Yt.createBuffer()),Mt.hasUvs&&!$t.uv&&($t.uv=Yt.createBuffer()),Mt.hasColors&&!$t.color&&($t.color=Yt.createBuffer());const nn=Jt.getAttributes();Mt.hasPositions&&(Yt.bindBuffer(34962,$t.position),Yt.bufferData(34962,Mt.positionArray,35048),gn.enableAttribute(nn.position),Yt.vertexAttribPointer(nn.position,3,5126,!1,0,0)),Mt.hasNormals&&(Yt.bindBuffer(34962,$t.normal),Yt.bufferData(34962,Mt.normalArray,35048),gn.enableAttribute(nn.normal),Yt.vertexAttribPointer(nn.normal,3,5126,!1,0,0)),Mt.hasUvs&&(Yt.bindBuffer(34962,$t.uv),Yt.bufferData(34962,Mt.uvArray,35048),gn.enableAttribute(nn.uv),Yt.vertexAttribPointer(nn.uv,2,5126,!1,0,0)),Mt.hasColors&&(Yt.bindBuffer(34962,$t.color),Yt.bufferData(34962,Mt.colorArray,35048),gn.enableAttribute(nn.color),Yt.vertexAttribPointer(nn.color,3,5126,!1,0,0)),gn.disableUnusedAttributes(),Yt.drawArrays(4,0,Mt.count),Mt.count=0},this.renderBufferDirect=function(Mt,Jt,$t,nn,cn,Rn){Jt===null&&(Jt=sn);const Ln=cn.isMesh&&cn.matrixWorld.determinant()<0,Cn=jr(Mt,Jt,nn,cn);wt.setMaterial(nn,Ln);let An=$t.index;const Gn=$t.attributes.position;if(An===null){if(Gn===void 0||Gn.count===0)return}else if(An.count===0)return;let Nn=1;nn.wireframe===!0&&(An=Ht.getWireframeAttribute($t),Nn=2),(nn.morphTargets||nn.morphNormals)&&on.update(cn,$t,nn,Cn),gn.setup(cn,nn,Cn,$t,An);let En,On=ln;An!==null&&(En=Dt.get(An),On=an,On.setIndex(En));const xr=An!==null?An.count:Gn.count,Dn=$t.drawRange.start*Nn,Er=$t.drawRange.count*Nn,$n=Rn!==null?Rn.start*Nn:0,oo=Rn!==null?Rn.count*Nn:1/0,qn=Math.max(Dn,$n),Or=Math.min(xr,Dn+Er,$n+oo)-1,wr=Math.max(0,Or-qn+1);if(wr!==0){if(cn.isMesh)nn.wireframe===!0?(wt.setLineWidth(nn.wireframeLinewidth*yn()),On.setMode(1)):On.setMode(4);else if(cn.isLine){let Br=nn.linewidth;Br===void 0&&(Br=1),wt.setLineWidth(Br*yn()),cn.isLineSegments?On.setMode(1):cn.isLineLoop?On.setMode(2):On.setMode(3)}else cn.isPoints?On.setMode(0):cn.isSprite&&On.setMode(4);if(cn.isInstancedMesh)On.renderInstances(qn,wr,cn.count);else if($t.isInstancedBufferGeometry){const Br=Math.min($t.instanceCount,$t._maxInstanceCount);On.renderInstances(qn,wr,Br)}else On.render(qn,wr)}},this.compile=function(Mt,Jt){_e=Wt.get(Mt),_e.init(),Mt.traverseVisible(function(nn){nn.isLight&&nn.layers.test(Jt.layers)&&(_e.pushLight(nn),nn.castShadow&&_e.pushShadow(nn))}),_e.setupLights();const $t=new WeakMap;Mt.traverse(function(nn){const cn=nn.material;if(cn)if(Array.isArray(cn))for(let Rn=0;Rn<cn.length;Rn++){const Ln=cn[Rn];$t.has(Ln)===!1&&(Xn(Ln,Mt,nn),$t.set(Ln))}else $t.has(cn)===!1&&(Xn(cn,Mt,nn),$t.set(cn))})};let ro=null;function Ro(Mt){fn.isPresenting||ro&&ro(Mt)}const dr=new WebGLAnimation;dr.setAnimationLoop(Ro),typeof window!="undefined"&&dr.setContext(window),this.setAnimationLoop=function(Mt){ro=Mt,fn.setAnimationLoop(Mt),Mt===null?dr.stop():dr.start()},this.render=function(Mt,Jt){let $t,nn;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),$t=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),nn=arguments[3]),Jt!==void 0&&Jt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(at===!0)return;gn.resetDefaultState(),ct=-1,ut=null,Mt.autoUpdate===!0&&Mt.updateMatrixWorld(),Jt.parent===null&&Jt.updateMatrixWorld(),fn.enabled===!0&&fn.isPresenting===!0&&(Jt=fn.getCamera(Jt)),Mt.isScene===!0&&Mt.onBeforeRender(rt,Mt,Jt,$t||st),_e=Wt.get(Mt,nt.length),_e.init(),nt.push(_e),Gt.multiplyMatrices(Jt.projectionMatrix,Jt.matrixWorldInverse),Xt.setFromProjectionMatrix(Gt),rn=this.localClippingEnabled,en=Ot.init(this.clippingPlanes,rn,Jt),j=Zt.get(Mt,Jt),j.init(),rr(Mt,Jt,0,rt.sortObjects),j.finish(),rt.sortObjects===!0&&j.sort(It,Ct),en===!0&&Ot.beginShadows();const cn=_e.state.shadowsArray;vn.render(cn,Mt,Jt),_e.setupLights(),_e.setupLightsView(Jt),en===!0&&Ot.endShadows(),this.info.autoReset===!0&&this.info.reset(),$t!==void 0&&this.setRenderTarget($t),tn.render(j,Mt,Jt,nn);const Rn=j.opaque,Ln=j.transparent;Rn.length>0&&br(Rn,Mt,Jt),Ln.length>0&&br(Ln,Mt,Jt),Mt.isScene===!0&&Mt.onAfterRender(rt,Mt,Jt),st!==null&&(Lt.updateRenderTargetMipmap(st),Lt.updateMultisampleRenderTarget(st)),wt.buffers.depth.setTest(!0),wt.buffers.depth.setMask(!0),wt.buffers.color.setMask(!0),wt.setPolygonOffset(!1),nt.pop(),nt.length>0?_e=nt[nt.length-1]:_e=null,j=null};function rr(Mt,Jt,$t,nn){if(Mt.visible===!1)return;if(Mt.layers.test(Jt.layers)){if(Mt.isGroup)$t=Mt.renderOrder;else if(Mt.isLOD)Mt.autoUpdate===!0&&Mt.update(Jt);else if(Mt.isLight)_e.pushLight(Mt),Mt.castShadow&&_e.pushShadow(Mt);else if(Mt.isSprite){if(!Mt.frustumCulled||Xt.intersectsSprite(Mt)){nn&&qt.setFromMatrixPosition(Mt.matrixWorld).applyMatrix4(Gt);const Ln=Ut.update(Mt),Cn=Mt.material;Cn.visible&&j.push(Mt,Ln,Cn,$t,qt.z,null)}}else if(Mt.isImmediateRenderObject)nn&&qt.setFromMatrixPosition(Mt.matrixWorld).applyMatrix4(Gt),j.push(Mt,null,Mt.material,$t,qt.z,null);else if((Mt.isMesh||Mt.isLine||Mt.isPoints)&&(Mt.isSkinnedMesh&&Mt.skeleton.frame!==Rt.render.frame&&(Mt.skeleton.update(),Mt.skeleton.frame=Rt.render.frame),!Mt.frustumCulled||Xt.intersectsObject(Mt))){nn&&qt.setFromMatrixPosition(Mt.matrixWorld).applyMatrix4(Gt);const Ln=Ut.update(Mt),Cn=Mt.material;if(Array.isArray(Cn)){const An=Ln.groups;for(let Gn=0,Nn=An.length;Gn<Nn;Gn++){const En=An[Gn],On=Cn[En.materialIndex];On&&On.visible&&j.push(Mt,Ln,On,$t,qt.z,En)}}else Cn.visible&&j.push(Mt,Ln,Cn,$t,qt.z,null)}}const Rn=Mt.children;for(let Ln=0,Cn=Rn.length;Ln<Cn;Ln++)rr(Rn[Ln],Jt,$t,nn)}function br(Mt,Jt,$t){const nn=Jt.isScene===!0?Jt.overrideMaterial:null;for(let cn=0,Rn=Mt.length;cn<Rn;cn++){const Ln=Mt[cn],Cn=Ln.object,An=Ln.geometry,Gn=nn===null?Ln.material:nn,Nn=Ln.group;if($t.isArrayCamera){const En=$t.cameras;for(let On=0,xr=En.length;On<xr;On++){const Dn=En[On];Cn.layers.test(Dn.layers)&&(wt.viewport(ht.copy(Dn.viewport)),_e.setupLightsView(Dn),io(Cn,Jt,Dn,An,Gn,Nn))}}else io(Cn,Jt,$t,An,Gn,Nn)}}function io(Mt,Jt,$t,nn,cn,Rn){if(Mt.onBeforeRender(rt,Jt,$t,nn,cn,Rn),Mt.modelViewMatrix.multiplyMatrices($t.matrixWorldInverse,Mt.matrixWorld),Mt.normalMatrix.getNormalMatrix(Mt.modelViewMatrix),Mt.isImmediateRenderObject){const Ln=jr($t,Jt,cn,Mt);wt.setMaterial(cn),gn.reset(),Hr(Mt,Ln)}else rt.renderBufferDirect($t,Jt,nn,cn,Mt,Rn);Mt.onAfterRender(rt,Jt,$t,nn,cn,Rn)}function Xn(Mt,Jt,$t){Jt.isScene!==!0&&(Jt=sn);const nn=Bt.get(Mt),cn=_e.state.lights,Rn=_e.state.shadowsArray,Ln=cn.state.version,Cn=xt.getParameters(Mt,cn.state,Rn,Jt,$t),An=xt.getProgramCacheKey(Cn);let Gn=nn.program,Nn=!0;if(nn.environment=Mt.isMeshStandardMaterial?Jt.environment:null,nn.fog=Jt.fog,nn.envMap=Et.get(Mt.envMap||nn.environment),Gn===void 0)Mt.addEventListener("dispose",fr);else if(Gn.cacheKey!==An)zr(Mt);else if(nn.lightsStateVersion!==Ln)Nn=!1;else{if(Cn.shaderID!==void 0)return;Nn=!1}Nn&&(Cn.uniforms=xt.getUniforms(Mt),Mt.onBeforeCompile(Cn,rt),Gn=xt.acquireProgram(Cn,An),nn.program=Gn,nn.uniforms=Cn.uniforms,nn.outputEncoding=Cn.outputEncoding);const En=nn.uniforms;(!Mt.isShaderMaterial&&!Mt.isRawShaderMaterial||Mt.clipping===!0)&&(nn.numClippingPlanes=Ot.numPlanes,nn.numIntersection=Ot.numIntersection,En.clippingPlanes=Ot.uniform),nn.needsLights=Co(Mt),nn.lightsStateVersion=Ln,nn.needsLights&&(En.ambientLightColor.value=cn.state.ambient,En.lightProbe.value=cn.state.probe,En.directionalLights.value=cn.state.directional,En.directionalLightShadows.value=cn.state.directionalShadow,En.spotLights.value=cn.state.spot,En.spotLightShadows.value=cn.state.spotShadow,En.rectAreaLights.value=cn.state.rectArea,En.ltc_1.value=cn.state.rectAreaLTC1,En.ltc_2.value=cn.state.rectAreaLTC2,En.pointLights.value=cn.state.point,En.pointLightShadows.value=cn.state.pointShadow,En.hemisphereLights.value=cn.state.hemi,En.directionalShadowMap.value=cn.state.directionalShadowMap,En.directionalShadowMatrix.value=cn.state.directionalShadowMatrix,En.spotShadowMap.value=cn.state.spotShadowMap,En.spotShadowMatrix.value=cn.state.spotShadowMatrix,En.pointShadowMap.value=cn.state.pointShadowMap,En.pointShadowMatrix.value=cn.state.pointShadowMatrix);const On=nn.program.getUniforms(),xr=WebGLUniforms.seqWithValue(On.seq,En);nn.uniformsList=xr}function jr(Mt,Jt,$t,nn){Jt.isScene!==!0&&(Jt=sn),Lt.resetTextureUnits();const cn=Jt.fog,Rn=$t.isMeshStandardMaterial?Jt.environment:null,Ln=st===null?rt.outputEncoding:st.texture.encoding,Cn=Et.get($t.envMap||Rn),An=Bt.get($t),Gn=_e.state.lights;if(en===!0&&(rn===!0||Mt!==ut)){const $n=Mt===ut&&$t.id===ct;Ot.setState($t,Mt,$n)}$t.version===An.__version?($t.fog&&An.fog!==cn||An.environment!==Rn||An.needsLights&&An.lightsStateVersion!==Gn.state.version||An.numClippingPlanes!==void 0&&(An.numClippingPlanes!==Ot.numPlanes||An.numIntersection!==Ot.numIntersection)||An.outputEncoding!==Ln||An.envMap!==Cn)&&Xn($t,Jt,nn):(Xn($t,Jt,nn),An.__version=$t.version);let Nn=!1,En=!1,On=!1;const xr=An.program,Dn=xr.getUniforms(),Er=An.uniforms;if(wt.useProgram(xr.program)&&(Nn=!0,En=!0,On=!0),$t.id!==ct&&(ct=$t.id,En=!0),Nn||ut!==Mt){if(Dn.setValue(Yt,"projectionMatrix",Mt.projectionMatrix),At.logarithmicDepthBuffer&&Dn.setValue(Yt,"logDepthBufFC",2/(Math.log(Mt.far+1)/Math.LN2)),ut!==Mt&&(ut=Mt,En=!0,On=!0),$t.isShaderMaterial||$t.isMeshPhongMaterial||$t.isMeshToonMaterial||$t.isMeshStandardMaterial||$t.envMap){const $n=Dn.map.cameraPosition;$n!==void 0&&$n.setValue(Yt,qt.setFromMatrixPosition(Mt.matrixWorld))}($t.isMeshPhongMaterial||$t.isMeshToonMaterial||$t.isMeshLambertMaterial||$t.isMeshBasicMaterial||$t.isMeshStandardMaterial||$t.isShaderMaterial)&&Dn.setValue(Yt,"isOrthographic",Mt.isOrthographicCamera===!0),($t.isMeshPhongMaterial||$t.isMeshToonMaterial||$t.isMeshLambertMaterial||$t.isMeshBasicMaterial||$t.isMeshStandardMaterial||$t.isShaderMaterial||$t.isShadowMaterial||$t.skinning)&&Dn.setValue(Yt,"viewMatrix",Mt.matrixWorldInverse)}if($t.skinning){Dn.setOptional(Yt,nn,"bindMatrix"),Dn.setOptional(Yt,nn,"bindMatrixInverse");const $n=nn.skeleton;if($n){const oo=$n.bones;if(At.floatVertexTextures){if($n.boneTexture===null){let qn=Math.sqrt(oo.length*4);qn=MathUtils.ceilPowerOfTwo(qn),qn=Math.max(qn,4);const Or=new Float32Array(qn*qn*4);Or.set($n.boneMatrices);const wr=new DataTexture(Or,qn,qn,RGBAFormat,FloatType);$n.boneMatrices=Or,$n.boneTexture=wr,$n.boneTextureSize=qn}Dn.setValue(Yt,"boneTexture",$n.boneTexture,Lt),Dn.setValue(Yt,"boneTextureSize",$n.boneTextureSize)}else Dn.setOptional(Yt,$n,"boneMatrices")}}return(En||An.receiveShadow!==nn.receiveShadow)&&(An.receiveShadow=nn.receiveShadow,Dn.setValue(Yt,"receiveShadow",nn.receiveShadow)),En&&(Dn.setValue(Yt,"toneMappingExposure",rt.toneMappingExposure),An.needsLights&&Pr(Er,On),cn&&$t.fog&&vt.refreshFogUniforms(Er,cn),vt.refreshMaterialUniforms(Er,$t,Ft,St),WebGLUniforms.upload(Yt,An.uniformsList,Er,Lt)),$t.isShaderMaterial&&$t.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Yt,An.uniformsList,Er,Lt),$t.uniformsNeedUpdate=!1),$t.isSpriteMaterial&&Dn.setValue(Yt,"center",nn.center),Dn.setValue(Yt,"modelViewMatrix",nn.modelViewMatrix),Dn.setValue(Yt,"normalMatrix",nn.normalMatrix),Dn.setValue(Yt,"modelMatrix",nn.matrixWorld),xr}function Pr(Mt,Jt){Mt.ambientLightColor.needsUpdate=Jt,Mt.lightProbe.needsUpdate=Jt,Mt.directionalLights.needsUpdate=Jt,Mt.directionalLightShadows.needsUpdate=Jt,Mt.pointLights.needsUpdate=Jt,Mt.pointLightShadows.needsUpdate=Jt,Mt.spotLights.needsUpdate=Jt,Mt.spotLightShadows.needsUpdate=Jt,Mt.rectAreaLights.needsUpdate=Jt,Mt.hemisphereLights.needsUpdate=Jt}function Co(Mt){return Mt.isMeshLambertMaterial||Mt.isMeshToonMaterial||Mt.isMeshPhongMaterial||Mt.isMeshStandardMaterial||Mt.isShadowMaterial||Mt.isShaderMaterial&&Mt.lights===!0}this.setFramebuffer=function(Mt){it!==Mt&&st===null&&Yt.bindFramebuffer(36160,Mt),it=Mt},this.getActiveCubeFace=function(){return $},this.getActiveMipmapLevel=function(){return et},this.getRenderList=function(){return j},this.setRenderList=function(Mt){j=Mt},this.getRenderTarget=function(){return st},this.setRenderTarget=function(Mt,Jt=0,$t=0){st=Mt,$=Jt,et=$t,Mt&&Bt.get(Mt).__webglFramebuffer===void 0&&Lt.setupRenderTarget(Mt);let nn=it,cn=!1;if(Mt){const Rn=Bt.get(Mt).__webglFramebuffer;Mt.isWebGLCubeRenderTarget?(nn=Rn[Jt],cn=!0):Mt.isWebGLMultisampleRenderTarget?nn=Bt.get(Mt).__webglMultisampledFramebuffer:nn=Rn,ht.copy(Mt.viewport),pt.copy(Mt.scissor),mt=Mt.scissorTest}else ht.copy(Pt).multiplyScalar(Ft).floor(),pt.copy(Nt).multiplyScalar(Ft).floor(),mt=zt;if(lt!==nn&&(Yt.bindFramebuffer(36160,nn),lt=nn),wt.viewport(ht),wt.scissor(pt),wt.setScissorTest(mt),cn){const Rn=Bt.get(Mt.texture);Yt.framebufferTexture2D(36160,36064,34069+Jt,Rn.__webglTexture,$t)}},this.readRenderTargetPixels=function(Mt,Jt,$t,nn,cn,Rn,Ln){if(!(Mt&&Mt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Cn=Bt.get(Mt).__webglFramebuffer;if(Mt.isWebGLCubeRenderTarget&&Ln!==void 0&&(Cn=Cn[Ln]),Cn){let An=!1;Cn!==lt&&(Yt.bindFramebuffer(36160,Cn),An=!0);try{const Gn=Mt.texture,Nn=Gn.format,En=Gn.type;if(Nn!==RGBAFormat&&pn.convert(Nn)!==Yt.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const On=En===HalfFloatType&&(yt.has("EXT_color_buffer_half_float")||At.isWebGL2&&yt.has("EXT_color_buffer_float"));if(En!==UnsignedByteType&&pn.convert(En)!==Yt.getParameter(35738)&&!(En===FloatType&&(At.isWebGL2||yt.has("OES_texture_float")||yt.has("WEBGL_color_buffer_float")))&&!On){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Yt.checkFramebufferStatus(36160)===36053?Jt>=0&&Jt<=Mt.width-nn&&$t>=0&&$t<=Mt.height-cn&&Yt.readPixels(Jt,$t,nn,cn,pn.convert(Nn),pn.convert(En),Rn):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{An&&Yt.bindFramebuffer(36160,lt)}}},this.copyFramebufferToTexture=function(Mt,Jt,$t=0){const nn=Math.pow(2,-$t),cn=Math.floor(Jt.image.width*nn),Rn=Math.floor(Jt.image.height*nn),Ln=pn.convert(Jt.format);Lt.setTexture2D(Jt,0),Yt.copyTexImage2D(3553,$t,Ln,Mt.x,Mt.y,cn,Rn,0),wt.unbindTexture()},this.copyTextureToTexture=function(Mt,Jt,$t,nn=0){const cn=Jt.image.width,Rn=Jt.image.height,Ln=pn.convert($t.format),Cn=pn.convert($t.type);Lt.setTexture2D($t,0),Yt.pixelStorei(37440,$t.flipY),Yt.pixelStorei(37441,$t.premultiplyAlpha),Yt.pixelStorei(3317,$t.unpackAlignment),Jt.isDataTexture?Yt.texSubImage2D(3553,nn,Mt.x,Mt.y,cn,Rn,Ln,Cn,Jt.image.data):Jt.isCompressedTexture?Yt.compressedTexSubImage2D(3553,nn,Mt.x,Mt.y,Jt.mipmaps[0].width,Jt.mipmaps[0].height,Ln,Jt.mipmaps[0].data):Yt.texSubImage2D(3553,nn,Mt.x,Mt.y,Ln,Cn,Jt.image),nn===0&&$t.generateMipmaps&&Yt.generateMipmap(3553),wt.unbindTexture()},this.initTexture=function(Mt){Lt.setTexture2D(Mt,0),wt.unbindTexture()},this.resetState=function(){wt.reset(),gn.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function WebGL1Renderer(o){WebGLRenderer.call(this,o)}WebGL1Renderer.prototype=Object.assign(Object.create(WebGLRenderer.prototype),{constructor:WebGL1Renderer,isWebGL1Renderer:!0});class FogExp2{constructor(e,a){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new Color(e),this.density=a!==void 0?a:25e-5}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Fog{constructor(e,a,s){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new Color(e),this.near=a!==void 0?a:1,this.far=s!==void 0?s:1e3}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,a){return super.copy(e,a),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const a=super.toJSON(e);return this.background!==null&&(a.object.background=this.background.toJSON(e)),this.environment!==null&&(a.object.environment=this.environment.toJSON(e)),this.fog!==null&&(a.object.fog=this.fog.toJSON()),a}}function InterleavedBuffer(o,e){this.array=o,this.stride=e,this.count=o!==void 0?o.length/e:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=MathUtils.generateUUID()}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(o){o===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(o){return this.usage=o,this},copy:function(o){return this.array=new o.array.constructor(o.array),this.count=o.count,this.stride=o.stride,this.usage=o.usage,this},copyAt:function(o,e,a){o*=this.stride,a*=e.stride;for(let s=0,c=this.stride;s<c;s++)this.array[o+s]=e.array[a+s];return this},set:function(o,e=0){return this.array.set(o,e),this},clone:function(o){o.arrayBuffers===void 0&&(o.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=MathUtils.generateUUID()),o.arrayBuffers[this.array.buffer._uuid]===void 0&&(o.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(o.arrayBuffers[this.array.buffer._uuid]),a=new InterleavedBuffer(e,this.stride);return a.setUsage(this.usage),a},onUpload:function(o){return this.onUploadCallback=o,this},toJSON:function(o){return o.arrayBuffers===void 0&&(o.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=MathUtils.generateUUID()),o.arrayBuffers[this.array.buffer._uuid]===void 0&&(o.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const _vector$6=new Vector3;function InterleavedBufferAttribute(o,e,a,s){this.name="",this.data=o,this.itemSize=e,this.offset=a,this.normalized=s===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(o){this.data.needsUpdate=o}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(o){for(let e=0,a=this.data.count;e<a;e++)_vector$6.x=this.getX(e),_vector$6.y=this.getY(e),_vector$6.z=this.getZ(e),_vector$6.applyMatrix4(o),this.setXYZ(e,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(o,e){return this.data.array[o*this.data.stride+this.offset]=e,this},setY:function(o,e){return this.data.array[o*this.data.stride+this.offset+1]=e,this},setZ:function(o,e){return this.data.array[o*this.data.stride+this.offset+2]=e,this},setW:function(o,e){return this.data.array[o*this.data.stride+this.offset+3]=e,this},getX:function(o){return this.data.array[o*this.data.stride+this.offset]},getY:function(o){return this.data.array[o*this.data.stride+this.offset+1]},getZ:function(o){return this.data.array[o*this.data.stride+this.offset+2]},getW:function(o){return this.data.array[o*this.data.stride+this.offset+3]},setXY:function(o,e,a){return o=o*this.data.stride+this.offset,this.data.array[o+0]=e,this.data.array[o+1]=a,this},setXYZ:function(o,e,a,s){return o=o*this.data.stride+this.offset,this.data.array[o+0]=e,this.data.array[o+1]=a,this.data.array[o+2]=s,this},setXYZW:function(o,e,a,s,c){return o=o*this.data.stride+this.offset,this.data.array[o+0]=e,this.data.array[o+1]=a,this.data.array[o+2]=s,this.data.array[o+3]=c,this},clone:function(o){if(o===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let a=0;a<this.count;a++){const s=a*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)e.push(this.data.array[s+c])}return new BufferAttribute(new this.array.constructor(e),this.itemSize,this.normalized)}else return o.interleavedBuffers===void 0&&(o.interleavedBuffers={}),o.interleavedBuffers[this.data.uuid]===void 0&&(o.interleavedBuffers[this.data.uuid]=this.data.clone(o)),new InterleavedBufferAttribute(o.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(o){if(o===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let a=0;a<this.count;a++){const s=a*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)e.push(this.data.array[s+c])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return o.interleavedBuffers===void 0&&(o.interleavedBuffers={}),o.interleavedBuffers[this.data.uuid]===void 0&&(o.interleavedBuffers[this.data.uuid]=this.data.toJSON(o)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function SpriteMaterial(o){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(o)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(o){return Material.prototype.copy.call(this,o),this.color.copy(o.color),this.map=o.map,this.alphaMap=o.alphaMap,this.rotation=o.rotation,this.sizeAttenuation=o.sizeAttenuation,this};let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(o){if(Object3D.call(this),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new InterleavedBuffer(e,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(a,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(a,2,3,!1))}this.geometry=_geometry,this.material=o!==void 0?o:new SpriteMaterial,this.center=new Vector2(.5,.5)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(o,e){o.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(o.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(o.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),o.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const a=this.material.rotation;let s,c;a!==0&&(c=Math.cos(a),s=Math.sin(a));const f=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,f,_worldScale,s,c),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,f,_worldScale,s,c),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,f,_worldScale,s,c),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);let d=o.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(d===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,f,_worldScale,s,c),_uvB$1.set(0,1),d=o.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),d===null))return;const h=o.ray.origin.distanceTo(_intersectPoint);h<o.near||h>o.far||e.push({distance:h,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})},copy:function(o){return Object3D.prototype.copy.call(this,o),o.center!==void 0&&this.center.copy(o.center),this.material=o.material,this}});function transformVertex(o,e,a,s,c,f){_alignedPosition.subVectors(o,a).addScalar(.5).multiply(s),c!==void 0?(_rotatedPosition.x=f*_alignedPosition.x-c*_alignedPosition.y,_rotatedPosition.y=c*_alignedPosition.x+f*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),o.copy(e),o.x+=_rotatedPosition.x,o.y+=_rotatedPosition.y,o.applyMatrix4(_viewWorldMatrix)}const _v1$4=new Vector3,_v2$2=new Vector3;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(o){Object3D.prototype.copy.call(this,o,!1);const e=o.levels;for(let a=0,s=e.length;a<s;a++){const c=e[a];this.addLevel(c.object.clone(),c.distance)}return this.autoUpdate=o.autoUpdate,this},addLevel:function(o,e=0){e=Math.abs(e);const a=this.levels;let s;for(s=0;s<a.length&&!(e<a[s].distance);s++);return a.splice(s,0,{distance:e,object:o}),this.add(o),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(o){const e=this.levels;if(e.length>0){let a,s;for(a=1,s=e.length;a<s&&!(o<e[a].distance);a++);return e[a-1].object}return null},raycast:function(o,e){if(this.levels.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);const s=o.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(s).raycast(o,e)}},update:function(o){const e=this.levels;if(e.length>1){_v1$4.setFromMatrixPosition(o.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);const a=_v1$4.distanceTo(_v2$2)/o.zoom;e[0].object.visible=!0;let s,c;for(s=1,c=e.length;s<c&&a>=e[s].distance;s++)e[s-1].object.visible=!1,e[s].object.visible=!0;for(this._currentLevel=s-1;s<c;s++)e[s].object.visible=!1}},toJSON:function(o){const e=Object3D.prototype.toJSON.call(this,o);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const a=this.levels;for(let s=0,c=a.length;s<c;s++){const f=a[s];e.object.levels.push({object:f.object.uuid,distance:f.distance})}return e}});const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector$7=new Vector3,_matrix$1=new Matrix4;function SkinnedMesh(o,e){o&&o.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,o,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,copy:function(o){return Mesh.prototype.copy.call(this,o),this.bindMode=o.bindMode,this.bindMatrix.copy(o.bindMatrix),this.bindMatrixInverse.copy(o.bindMatrixInverse),this.skeleton=o.skeleton,this},bind:function(o,e){this.skeleton=o,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const o=new Vector4,e=this.geometry.attributes.skinWeight;for(let a=0,s=e.count;a<s;a++){o.x=e.getX(a),o.y=e.getY(a),o.z=e.getZ(a),o.w=e.getW(a);const c=1/o.manhattanLength();c!==1/0?o.multiplyScalar(c):o.set(1,0,0,0),e.setXYZW(a,o.x,o.y,o.z,o.w)}},updateMatrixWorld:function(o){Mesh.prototype.updateMatrixWorld.call(this,o),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(o,e){const a=this.skeleton,s=this.geometry;_skinIndex.fromBufferAttribute(s.attributes.skinIndex,o),_skinWeight.fromBufferAttribute(s.attributes.skinWeight,o),_basePosition.fromBufferAttribute(s.attributes.position,o).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let c=0;c<4;c++){const f=_skinWeight.getComponent(c);if(f!==0){const d=_skinIndex.getComponent(c);_matrix$1.multiplyMatrices(a.bones[d].matrixWorld,a.boneInverses[d]),e.addScaledVector(_vector$7.copy(_basePosition).applyMatrix4(_matrix$1),f)}}return e.applyMatrix4(this.bindMatrixInverse)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});const _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(o=[],e=[]){this.uuid=MathUtils.generateUUID(),this.bones=o.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(Skeleton.prototype,{init:function(){const o=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(o.length*16),e.length===0)this.calculateInverses();else if(o.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let a=0,s=this.bones.length;a<s;a++)this.boneInverses.push(new Matrix4)}},calculateInverses:function(){this.boneInverses.length=0;for(let o=0,e=this.bones.length;o<e;o++){const a=new Matrix4;this.bones[o]&&a.copy(this.bones[o].matrixWorld).invert(),this.boneInverses.push(a)}},pose:function(){for(let o=0,e=this.bones.length;o<e;o++){const a=this.bones[o];a&&a.matrixWorld.copy(this.boneInverses[o]).invert()}for(let o=0,e=this.bones.length;o<e;o++){const a=this.bones[o];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}},update:function(){const o=this.bones,e=this.boneInverses,a=this.boneMatrices,s=this.boneTexture;for(let c=0,f=o.length;c<f;c++){const d=o[c]?o[c].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(d,e[c]),_offsetMatrix.toArray(a,c*16)}s!==null&&(s.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(o){for(let e=0,a=this.bones.length;e<a;e++){const s=this.bones[e];if(s.name===o)return s}},dispose:function(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(o,e){this.uuid=o.uuid;for(let a=0,s=o.bones.length;a<s;a++){const c=o.bones[a];let f=e[c];f===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",c),f=new Bone),this.bones.push(f),this.boneInverses.push(new Matrix4().fromArray(o.boneInverses[a]))}return this.init(),this},toJSON:function(){const o={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};o.uuid=this.uuid;const e=this.bones,a=this.boneInverses;for(let s=0,c=e.length;s<c;s++){const f=e[s];o.bones.push(f.uuid);const d=a[s];o.boneInverses.push(d.toArray())}return o}});const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(o,e,a){Mesh.call(this,o,e),this.instanceMatrix=new BufferAttribute(new Float32Array(a*16),16),this.instanceColor=null,this.count=a,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,copy:function(o){return Mesh.prototype.copy.call(this,o),this.instanceMatrix.copy(o.instanceMatrix),o.instanceColor!==null&&(this.instanceColor=o.instanceColor.clone()),this.count=o.count,this},getColorAt:function(o,e){e.fromArray(this.instanceColor.array,o*3)},getMatrixAt:function(o,e){e.fromArray(this.instanceMatrix.array,o*16)},raycast:function(o,e){const a=this.matrixWorld,s=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(let c=0;c<s;c++){this.getMatrixAt(c,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(a,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(o,_instanceIntersects);for(let f=0,d=_instanceIntersects.length;f<d;f++){const h=_instanceIntersects[f];h.instanceId=c,h.object=this,e.push(h)}_instanceIntersects.length=0}},setColorAt:function(o,e){this.instanceColor===null&&(this.instanceColor=new BufferAttribute(new Float32Array(this.count*3),3)),e.toArray(this.instanceColor.array,o*3)},setMatrixAt:function(o,e){e.toArray(this.instanceMatrix.array,o*16)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});function LineBasicMaterial(o){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(o)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(o){return Material.prototype.copy.call(this,o),this.color.copy(o.color),this.linewidth=o.linewidth,this.linecap=o.linecap,this.linejoin=o.linejoin,this.morphTargets=o.morphTargets,this};const _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line(o=new BufferGeometry,e=new LineBasicMaterial){Object3D.call(this),this.type="Line",this.geometry=o,this.material=e,this.updateMorphTargets()}Line.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line,isLine:!0,copy:function(o){return Object3D.prototype.copy.call(this,o),this.material=o.material,this.geometry=o.geometry,this},computeLineDistances:function(){const o=this.geometry;if(o.isBufferGeometry)if(o.index===null){const e=o.attributes.position,a=[0];for(let s=1,c=e.count;s<c;s++)_start.fromBufferAttribute(e,s-1),_end.fromBufferAttribute(e,s),a[s]=a[s-1],a[s]+=_start.distanceTo(_end);o.setAttribute("lineDistance",new Float32BufferAttribute(a,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else o.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(o,e){const a=this.geometry,s=this.matrixWorld,c=o.params.Line.threshold;if(a.boundingSphere===null&&a.computeBoundingSphere(),_sphere$2.copy(a.boundingSphere),_sphere$2.applyMatrix4(s),_sphere$2.radius+=c,o.ray.intersectsSphere(_sphere$2)===!1)return;_inverseMatrix$1.copy(s).invert(),_ray$1.copy(o.ray).applyMatrix4(_inverseMatrix$1);const f=c/((this.scale.x+this.scale.y+this.scale.z)/3),d=f*f,h=new Vector3,g=new Vector3,b=new Vector3,tt=new Vector3,j=this.isLineSegments?2:1;if(a.isBufferGeometry){const _e=a.index,rt=a.attributes.position;if(_e!==null){const at=_e.array;for(let it=0,$=at.length-1;it<$;it+=j){const et=at[it],st=at[it+1];if(h.fromBufferAttribute(rt,et),g.fromBufferAttribute(rt,st),_ray$1.distanceSqToSegment(h,g,tt,b)>d)continue;tt.applyMatrix4(this.matrixWorld);const ct=o.ray.origin.distanceTo(tt);ct<o.near||ct>o.far||e.push({distance:ct,point:b.clone().applyMatrix4(this.matrixWorld),index:it,face:null,faceIndex:null,object:this})}}else for(let at=0,it=rt.count-1;at<it;at+=j){if(h.fromBufferAttribute(rt,at),g.fromBufferAttribute(rt,at+1),_ray$1.distanceSqToSegment(h,g,tt,b)>d)continue;tt.applyMatrix4(this.matrixWorld);const et=o.ray.origin.distanceTo(tt);et<o.near||et>o.far||e.push({distance:et,point:b.clone().applyMatrix4(this.matrixWorld),index:at,face:null,faceIndex:null,object:this})}}else a.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const o=this.geometry;if(o.isBufferGeometry){const e=o.morphAttributes,a=Object.keys(e);if(a.length>0){const s=e[a[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,f=s.length;c<f;c++){const d=s[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=c}}}}else{const e=o.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const _start$1=new Vector3,_end$1=new Vector3;function LineSegments(o,e){Line.call(this,o,e),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){const o=this.geometry;if(o.isBufferGeometry)if(o.index===null){const e=o.attributes.position,a=[];for(let s=0,c=e.count;s<c;s+=2)_start$1.fromBufferAttribute(e,s),_end$1.fromBufferAttribute(e,s+1),a[s]=s===0?0:a[s-1],a[s+1]=a[s]+_start$1.distanceTo(_end$1);o.setAttribute("lineDistance",new Float32BufferAttribute(a,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else o.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}});function LineLoop(o,e){Line.call(this,o,e),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(o){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(o)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(o){return Material.prototype.copy.call(this,o),this.color.copy(o.color),this.map=o.map,this.alphaMap=o.alphaMap,this.size=o.size,this.sizeAttenuation=o.sizeAttenuation,this.morphTargets=o.morphTargets,this};const _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(o=new BufferGeometry,e=new PointsMaterial){Object3D.call(this),this.type="Points",this.geometry=o,this.material=e,this.updateMorphTargets()}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,copy:function(o){return Object3D.prototype.copy.call(this,o),this.material=o.material,this.geometry=o.geometry,this},raycast:function(o,e){const a=this.geometry,s=this.matrixWorld,c=o.params.Points.threshold;if(a.boundingSphere===null&&a.computeBoundingSphere(),_sphere$3.copy(a.boundingSphere),_sphere$3.applyMatrix4(s),_sphere$3.radius+=c,o.ray.intersectsSphere(_sphere$3)===!1)return;_inverseMatrix$2.copy(s).invert(),_ray$2.copy(o.ray).applyMatrix4(_inverseMatrix$2);const f=c/((this.scale.x+this.scale.y+this.scale.z)/3),d=f*f;if(a.isBufferGeometry){const h=a.index,b=a.attributes.position;if(h!==null){const tt=h.array;for(let j=0,_e=tt.length;j<_e;j++){const nt=tt[j];_position$1.fromBufferAttribute(b,nt),testPoint(_position$1,nt,d,s,o,e,this)}}else for(let tt=0,j=b.count;tt<j;tt++)_position$1.fromBufferAttribute(b,tt),testPoint(_position$1,tt,d,s,o,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const o=this.geometry;if(o.isBufferGeometry){const e=o.morphAttributes,a=Object.keys(e);if(a.length>0){const s=e[a[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,f=s.length;c<f;c++){const d=s[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=c}}}}else{const e=o.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function testPoint(o,e,a,s,c,f,d){const h=_ray$2.distanceSqToPoint(o);if(h<a){const g=new Vector3;_ray$2.closestPointToPoint(o,g),g.applyMatrix4(s);const b=c.ray.origin.distanceTo(g);if(b<c.near||b>c.far)return;f.push({distance:b,distanceToRay:Math.sqrt(h),point:g,index:e,face:null,object:d})}}function VideoTexture(o,e,a,s,c,f,d,h,g){Texture.call(this,o,e,a,s,c,f,d,h,g),this.format=d!==void 0?d:RGBFormat,this.minFilter=f!==void 0?f:LinearFilter,this.magFilter=c!==void 0?c:LinearFilter,this.generateMipmaps=!1;const b=this;function tt(){b.needsUpdate=!0,o.requestVideoFrameCallback(tt)}"requestVideoFrameCallback"in o&&o.requestVideoFrameCallback(tt)}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const o=this.image;"requestVideoFrameCallback"in o===!1&&o.readyState>=o.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function CompressedTexture(o,e,a,s,c,f,d,h,g,b,tt,j){Texture.call(this,null,f,d,h,g,b,s,c,tt,j),this.image={width:e,height:a},this.mipmaps=o,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(o,e,a,s,c,f,d,h,g){Texture.call(this,o,e,a,s,c,f,d,h,g),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=!0;function DepthTexture(o,e,a,s,c,f,d,h,g,b){if(b=b!==void 0?b:DepthFormat,b!==DepthFormat&&b!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");a===void 0&&b===DepthFormat&&(a=UnsignedShortType),a===void 0&&b===DepthStencilFormat&&(a=UnsignedInt248Type),Texture.call(this,null,s,c,f,d,h,b,a,g),this.image={width:o,height:e},this.magFilter=d!==void 0?d:NearestFilter,this.minFilter=h!==void 0?h:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;class CircleGeometry extends BufferGeometry{constructor(e=1,a=8,s=0,c=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:a,thetaStart:s,thetaLength:c},a=Math.max(3,a);const f=[],d=[],h=[],g=[],b=new Vector3,tt=new Vector2;d.push(0,0,0),h.push(0,0,1),g.push(.5,.5);for(let j=0,_e=3;j<=a;j++,_e+=3){const nt=s+j/a*c;b.x=e*Math.cos(nt),b.y=e*Math.sin(nt),d.push(b.x,b.y,b.z),h.push(0,0,1),tt.x=(d[_e]/e+1)/2,tt.y=(d[_e+1]/e+1)/2,g.push(tt.x,tt.y)}for(let j=1;j<=a;j++)f.push(j,j+1,0);this.setIndex(f),this.setAttribute("position",new Float32BufferAttribute(d,3)),this.setAttribute("normal",new Float32BufferAttribute(h,3)),this.setAttribute("uv",new Float32BufferAttribute(g,2))}}class CylinderGeometry extends BufferGeometry{constructor(e=1,a=1,s=1,c=8,f=1,d=!1,h=0,g=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:a,height:s,radialSegments:c,heightSegments:f,openEnded:d,thetaStart:h,thetaLength:g};const b=this;c=Math.floor(c),f=Math.floor(f);const tt=[],j=[],_e=[],nt=[];let rt=0;const at=[],it=s/2;let $=0;et(),d===!1&&(e>0&&st(!0),a>0&&st(!1)),this.setIndex(tt),this.setAttribute("position",new Float32BufferAttribute(j,3)),this.setAttribute("normal",new Float32BufferAttribute(_e,3)),this.setAttribute("uv",new Float32BufferAttribute(nt,2));function et(){const lt=new Vector3,ct=new Vector3;let ut=0;const ht=(a-e)/s;for(let pt=0;pt<=f;pt++){const mt=[],bt=pt/f,St=bt*(a-e)+e;for(let Ft=0;Ft<=c;Ft++){const It=Ft/c,Ct=It*g+h,Pt=Math.sin(Ct),Nt=Math.cos(Ct);ct.x=St*Pt,ct.y=-bt*s+it,ct.z=St*Nt,j.push(ct.x,ct.y,ct.z),lt.set(Pt,ht,Nt).normalize(),_e.push(lt.x,lt.y,lt.z),nt.push(It,1-bt),mt.push(rt++)}at.push(mt)}for(let pt=0;pt<c;pt++)for(let mt=0;mt<f;mt++){const bt=at[mt][pt],St=at[mt+1][pt],Ft=at[mt+1][pt+1],It=at[mt][pt+1];tt.push(bt,St,It),tt.push(St,Ft,It),ut+=6}b.addGroup($,ut,0),$+=ut}function st(lt){const ct=rt,ut=new Vector2,ht=new Vector3;let pt=0;const mt=lt===!0?e:a,bt=lt===!0?1:-1;for(let Ft=1;Ft<=c;Ft++)j.push(0,it*bt,0),_e.push(0,bt,0),nt.push(.5,.5),rt++;const St=rt;for(let Ft=0;Ft<=c;Ft++){const Ct=Ft/c*g+h,Pt=Math.cos(Ct),Nt=Math.sin(Ct);ht.x=mt*Nt,ht.y=it*bt,ht.z=mt*Pt,j.push(ht.x,ht.y,ht.z),_e.push(0,bt,0),ut.x=Pt*.5+.5,ut.y=Nt*.5*bt+.5,nt.push(ut.x,ut.y),rt++}for(let Ft=0;Ft<c;Ft++){const It=ct+Ft,Ct=St+Ft;lt===!0?tt.push(Ct,Ct+1,It):tt.push(Ct+1,Ct,It),pt+=3}b.addGroup($,pt,lt===!0?1:2),$+=pt}}}class ConeGeometry extends CylinderGeometry{constructor(e=1,a=1,s=8,c=1,f=!1,d=0,h=Math.PI*2){super(0,e,a,s,c,f,d,h),this.type="ConeGeometry",this.parameters={radius:e,height:a,radialSegments:s,heightSegments:c,openEnded:f,thetaStart:d,thetaLength:h}}}class PolyhedronGeometry extends BufferGeometry{constructor(e,a,s=1,c=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:a,radius:s,detail:c};const f=[],d=[];h(c),b(s),tt(),this.setAttribute("position",new Float32BufferAttribute(f,3)),this.setAttribute("normal",new Float32BufferAttribute(f.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(d,2)),c===0?this.computeVertexNormals():this.normalizeNormals();function h(et){const st=new Vector3,lt=new Vector3,ct=new Vector3;for(let ut=0;ut<a.length;ut+=3)nt(a[ut+0],st),nt(a[ut+1],lt),nt(a[ut+2],ct),g(st,lt,ct,et)}function g(et,st,lt,ct){const ut=ct+1,ht=[];for(let pt=0;pt<=ut;pt++){ht[pt]=[];const mt=et.clone().lerp(lt,pt/ut),bt=st.clone().lerp(lt,pt/ut),St=ut-pt;for(let Ft=0;Ft<=St;Ft++)Ft===0&&pt===ut?ht[pt][Ft]=mt:ht[pt][Ft]=mt.clone().lerp(bt,Ft/St)}for(let pt=0;pt<ut;pt++)for(let mt=0;mt<2*(ut-pt)-1;mt++){const bt=Math.floor(mt/2);mt%2===0?(_e(ht[pt][bt+1]),_e(ht[pt+1][bt]),_e(ht[pt][bt])):(_e(ht[pt][bt+1]),_e(ht[pt+1][bt+1]),_e(ht[pt+1][bt]))}}function b(et){const st=new Vector3;for(let lt=0;lt<f.length;lt+=3)st.x=f[lt+0],st.y=f[lt+1],st.z=f[lt+2],st.normalize().multiplyScalar(et),f[lt+0]=st.x,f[lt+1]=st.y,f[lt+2]=st.z}function tt(){const et=new Vector3;for(let st=0;st<f.length;st+=3){et.x=f[st+0],et.y=f[st+1],et.z=f[st+2];const lt=it(et)/2/Math.PI+.5,ct=$(et)/Math.PI+.5;d.push(lt,1-ct)}rt(),j()}function j(){for(let et=0;et<d.length;et+=6){const st=d[et+0],lt=d[et+2],ct=d[et+4],ut=Math.max(st,lt,ct),ht=Math.min(st,lt,ct);ut>.9&&ht<.1&&(st<.2&&(d[et+0]+=1),lt<.2&&(d[et+2]+=1),ct<.2&&(d[et+4]+=1))}}function _e(et){f.push(et.x,et.y,et.z)}function nt(et,st){const lt=et*3;st.x=e[lt+0],st.y=e[lt+1],st.z=e[lt+2]}function rt(){const et=new Vector3,st=new Vector3,lt=new Vector3,ct=new Vector3,ut=new Vector2,ht=new Vector2,pt=new Vector2;for(let mt=0,bt=0;mt<f.length;mt+=9,bt+=6){et.set(f[mt+0],f[mt+1],f[mt+2]),st.set(f[mt+3],f[mt+4],f[mt+5]),lt.set(f[mt+6],f[mt+7],f[mt+8]),ut.set(d[bt+0],d[bt+1]),ht.set(d[bt+2],d[bt+3]),pt.set(d[bt+4],d[bt+5]),ct.copy(et).add(st).add(lt).divideScalar(3);const St=it(ct);at(ut,bt+0,et,St),at(ht,bt+2,st,St),at(pt,bt+4,lt,St)}}function at(et,st,lt,ct){ct<0&&et.x===1&&(d[st]=et.x-1),lt.x===0&&lt.z===0&&(d[st]=ct/2/Math.PI+.5)}function it(et){return Math.atan2(et.z,-et.x)}function $(et){return Math.atan2(-et.y,Math.sqrt(et.x*et.x+et.z*et.z))}}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(e=1,a=0){const s=(1+Math.sqrt(5))/2,c=1/s,f=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-c,-s,0,-c,s,0,c,-s,0,c,s,-c,-s,0,-c,s,0,c,-s,0,c,s,0,-s,0,-c,s,0,-c,-s,0,c,s,0,c],d=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(f,d,e,a),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:a}}}const _v0$2=new Vector3,_v1$5=new Vector3,_normal$1=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(e,a){if(super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:a},a=a!==void 0?a:1,e.isGeometry===!0){console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return}const c=Math.pow(10,4),f=Math.cos(MathUtils.DEG2RAD*a),d=e.getIndex(),h=e.getAttribute("position"),g=d?d.count:h.count,b=[0,0,0],tt=["a","b","c"],j=new Array(3),_e={},nt=[];for(let rt=0;rt<g;rt+=3){d?(b[0]=d.getX(rt),b[1]=d.getX(rt+1),b[2]=d.getX(rt+2)):(b[0]=rt,b[1]=rt+1,b[2]=rt+2);const{a:at,b:it,c:$}=_triangle;if(at.fromBufferAttribute(h,b[0]),it.fromBufferAttribute(h,b[1]),$.fromBufferAttribute(h,b[2]),_triangle.getNormal(_normal$1),j[0]=`${Math.round(at.x*c)},${Math.round(at.y*c)},${Math.round(at.z*c)}`,j[1]=`${Math.round(it.x*c)},${Math.round(it.y*c)},${Math.round(it.z*c)}`,j[2]=`${Math.round($.x*c)},${Math.round($.y*c)},${Math.round($.z*c)}`,!(j[0]===j[1]||j[1]===j[2]||j[2]===j[0]))for(let et=0;et<3;et++){const st=(et+1)%3,lt=j[et],ct=j[st],ut=_triangle[tt[et]],ht=_triangle[tt[st]],pt=`${lt}_${ct}`,mt=`${ct}_${lt}`;mt in _e&&_e[mt]?(_normal$1.dot(_e[mt].normal)<=f&&(nt.push(ut.x,ut.y,ut.z),nt.push(ht.x,ht.y,ht.z)),_e[mt]=null):pt in _e||(_e[pt]={index0:b[et],index1:b[st],normal:_normal$1.clone()})}}for(const rt in _e)if(_e[rt]){const{index0:at,index1:it}=_e[rt];_v0$2.fromBufferAttribute(h,at),_v1$5.fromBufferAttribute(h,it),nt.push(_v0$2.x,_v0$2.y,_v0$2.z),nt.push(_v1$5.x,_v1$5.y,_v1$5.z)}this.setAttribute("position",new Float32BufferAttribute(nt,3))}}const Earcut={triangulate:function(o,e,a){a=a||2;const s=e&&e.length,c=s?e[0]*a:o.length;let f=linkedList(o,0,c,a,!0);const d=[];if(!f||f.next===f.prev)return d;let h,g,b,tt,j,_e,nt;if(s&&(f=eliminateHoles(o,e,f,a)),o.length>80*a){h=b=o[0],g=tt=o[1];for(let rt=a;rt<c;rt+=a)j=o[rt],_e=o[rt+1],j<h&&(h=j),_e<g&&(g=_e),j>b&&(b=j),_e>tt&&(tt=_e);nt=Math.max(b-h,tt-g),nt=nt!==0?1/nt:0}return earcutLinked(f,d,a,h,g,nt),d}};function linkedList(o,e,a,s,c){let f,d;if(c===signedArea(o,e,a,s)>0)for(f=e;f<a;f+=s)d=insertNode(f,o[f],o[f+1],d);else for(f=a-s;f>=e;f-=s)d=insertNode(f,o[f],o[f+1],d);return d&&equals(d,d.next)&&(removeNode(d),d=d.next),d}function filterPoints(o,e){if(!o)return o;e||(e=o);let a=o,s;do if(s=!1,!a.steiner&&(equals(a,a.next)||area(a.prev,a,a.next)===0)){if(removeNode(a),a=e=a.prev,a===a.next)break;s=!0}else a=a.next;while(s||a!==e);return e}function earcutLinked(o,e,a,s,c,f,d){if(!o)return;!d&&f&&indexCurve(o,s,c,f);let h=o,g,b;for(;o.prev!==o.next;){if(g=o.prev,b=o.next,f?isEarHashed(o,s,c,f):isEar(o)){e.push(g.i/a),e.push(o.i/a),e.push(b.i/a),removeNode(o),o=b.next,h=b.next;continue}if(o=b,o===h){d?d===1?(o=cureLocalIntersections(filterPoints(o),e,a),earcutLinked(o,e,a,s,c,f,2)):d===2&&splitEarcut(o,e,a,s,c,f):earcutLinked(filterPoints(o),e,a,s,c,f,1);break}}}function isEar(o){const e=o.prev,a=o,s=o.next;if(area(e,a,s)>=0)return!1;let c=o.next.next;for(;c!==o.prev;){if(pointInTriangle(e.x,e.y,a.x,a.y,s.x,s.y,c.x,c.y)&&area(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function isEarHashed(o,e,a,s){const c=o.prev,f=o,d=o.next;if(area(c,f,d)>=0)return!1;const h=c.x<f.x?c.x<d.x?c.x:d.x:f.x<d.x?f.x:d.x,g=c.y<f.y?c.y<d.y?c.y:d.y:f.y<d.y?f.y:d.y,b=c.x>f.x?c.x>d.x?c.x:d.x:f.x>d.x?f.x:d.x,tt=c.y>f.y?c.y>d.y?c.y:d.y:f.y>d.y?f.y:d.y,j=zOrder(h,g,e,a,s),_e=zOrder(b,tt,e,a,s);let nt=o.prevZ,rt=o.nextZ;for(;nt&&nt.z>=j&&rt&&rt.z<=_e;){if(nt!==o.prev&&nt!==o.next&&pointInTriangle(c.x,c.y,f.x,f.y,d.x,d.y,nt.x,nt.y)&&area(nt.prev,nt,nt.next)>=0||(nt=nt.prevZ,rt!==o.prev&&rt!==o.next&&pointInTriangle(c.x,c.y,f.x,f.y,d.x,d.y,rt.x,rt.y)&&area(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;nt&&nt.z>=j;){if(nt!==o.prev&&nt!==o.next&&pointInTriangle(c.x,c.y,f.x,f.y,d.x,d.y,nt.x,nt.y)&&area(nt.prev,nt,nt.next)>=0)return!1;nt=nt.prevZ}for(;rt&&rt.z<=_e;){if(rt!==o.prev&&rt!==o.next&&pointInTriangle(c.x,c.y,f.x,f.y,d.x,d.y,rt.x,rt.y)&&area(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function cureLocalIntersections(o,e,a){let s=o;do{const c=s.prev,f=s.next.next;!equals(c,f)&&intersects(c,s,s.next,f)&&locallyInside(c,f)&&locallyInside(f,c)&&(e.push(c.i/a),e.push(s.i/a),e.push(f.i/a),removeNode(s),removeNode(s.next),s=o=f),s=s.next}while(s!==o);return filterPoints(s)}function splitEarcut(o,e,a,s,c,f){let d=o;do{let h=d.next.next;for(;h!==d.prev;){if(d.i!==h.i&&isValidDiagonal(d,h)){let g=splitPolygon(d,h);d=filterPoints(d,d.next),g=filterPoints(g,g.next),earcutLinked(d,e,a,s,c,f),earcutLinked(g,e,a,s,c,f);return}h=h.next}d=d.next}while(d!==o)}function eliminateHoles(o,e,a,s){const c=[];let f,d,h,g,b;for(f=0,d=e.length;f<d;f++)h=e[f]*s,g=f<d-1?e[f+1]*s:o.length,b=linkedList(o,h,g,s,!1),b===b.next&&(b.steiner=!0),c.push(getLeftmost(b));for(c.sort(compareX),f=0;f<c.length;f++)eliminateHole(c[f],a),a=filterPoints(a,a.next);return a}function compareX(o,e){return o.x-e.x}function eliminateHole(o,e){if(e=findHoleBridge(o,e),e){const a=splitPolygon(e,o);filterPoints(e,e.next),filterPoints(a,a.next)}}function findHoleBridge(o,e){let a=e;const s=o.x,c=o.y;let f=-1/0,d;do{if(c<=a.y&&c>=a.next.y&&a.next.y!==a.y){const _e=a.x+(c-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(_e<=s&&_e>f){if(f=_e,_e===s){if(c===a.y)return a;if(c===a.next.y)return a.next}d=a.x<a.next.x?a:a.next}}a=a.next}while(a!==e);if(!d)return null;if(s===f)return d;const h=d,g=d.x,b=d.y;let tt=1/0,j;a=d;do s>=a.x&&a.x>=g&&s!==a.x&&pointInTriangle(c<b?s:f,c,g,b,c<b?f:s,c,a.x,a.y)&&(j=Math.abs(c-a.y)/(s-a.x),locallyInside(a,o)&&(j<tt||j===tt&&(a.x>d.x||a.x===d.x&&sectorContainsSector(d,a)))&&(d=a,tt=j)),a=a.next;while(a!==h);return d}function sectorContainsSector(o,e){return area(o.prev,o,e.prev)<0&&area(e.next,o,o.next)<0}function indexCurve(o,e,a,s){let c=o;do c.z===null&&(c.z=zOrder(c.x,c.y,e,a,s)),c.prevZ=c.prev,c.nextZ=c.next,c=c.next;while(c!==o);c.prevZ.nextZ=null,c.prevZ=null,sortLinked(c)}function sortLinked(o){let e,a,s,c,f,d,h,g,b=1;do{for(a=o,o=null,f=null,d=0;a;){for(d++,s=a,h=0,e=0;e<b&&(h++,s=s.nextZ,!!s);e++);for(g=b;h>0||g>0&&s;)h!==0&&(g===0||!s||a.z<=s.z)?(c=a,a=a.nextZ,h--):(c=s,s=s.nextZ,g--),f?f.nextZ=c:o=c,c.prevZ=f,f=c;a=s}f.nextZ=null,b*=2}while(d>1);return o}function zOrder(o,e,a,s,c){return o=32767*(o-a)*c,e=32767*(e-s)*c,o=(o|o<<8)&16711935,o=(o|o<<4)&252645135,o=(o|o<<2)&858993459,o=(o|o<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,o|e<<1}function getLeftmost(o){let e=o,a=o;do(e.x<a.x||e.x===a.x&&e.y<a.y)&&(a=e),e=e.next;while(e!==o);return a}function pointInTriangle(o,e,a,s,c,f,d,h){return(c-d)*(e-h)-(o-d)*(f-h)>=0&&(o-d)*(s-h)-(a-d)*(e-h)>=0&&(a-d)*(f-h)-(c-d)*(s-h)>=0}function isValidDiagonal(o,e){return o.next.i!==e.i&&o.prev.i!==e.i&&!intersectsPolygon(o,e)&&(locallyInside(o,e)&&locallyInside(e,o)&&middleInside(o,e)&&(area(o.prev,o,e.prev)||area(o,e.prev,e))||equals(o,e)&&area(o.prev,o,o.next)>0&&area(e.prev,e,e.next)>0)}function area(o,e,a){return(e.y-o.y)*(a.x-e.x)-(e.x-o.x)*(a.y-e.y)}function equals(o,e){return o.x===e.x&&o.y===e.y}function intersects(o,e,a,s){const c=sign(area(o,e,a)),f=sign(area(o,e,s)),d=sign(area(a,s,o)),h=sign(area(a,s,e));return!!(c!==f&&d!==h||c===0&&onSegment(o,a,e)||f===0&&onSegment(o,s,e)||d===0&&onSegment(a,o,s)||h===0&&onSegment(a,e,s))}function onSegment(o,e,a){return e.x<=Math.max(o.x,a.x)&&e.x>=Math.min(o.x,a.x)&&e.y<=Math.max(o.y,a.y)&&e.y>=Math.min(o.y,a.y)}function sign(o){return o>0?1:o<0?-1:0}function intersectsPolygon(o,e){let a=o;do{if(a.i!==o.i&&a.next.i!==o.i&&a.i!==e.i&&a.next.i!==e.i&&intersects(a,a.next,o,e))return!0;a=a.next}while(a!==o);return!1}function locallyInside(o,e){return area(o.prev,o,o.next)<0?area(o,e,o.next)>=0&&area(o,o.prev,e)>=0:area(o,e,o.prev)<0||area(o,o.next,e)<0}function middleInside(o,e){let a=o,s=!1;const c=(o.x+e.x)/2,f=(o.y+e.y)/2;do a.y>f!=a.next.y>f&&a.next.y!==a.y&&c<(a.next.x-a.x)*(f-a.y)/(a.next.y-a.y)+a.x&&(s=!s),a=a.next;while(a!==o);return s}function splitPolygon(o,e){const a=new Node(o.i,o.x,o.y),s=new Node(e.i,e.x,e.y),c=o.next,f=e.prev;return o.next=e,e.prev=o,a.next=c,c.prev=a,s.next=a,a.prev=s,f.next=s,s.prev=f,s}function insertNode(o,e,a,s){const c=new Node(o,e,a);return s?(c.next=s.next,c.prev=s,s.next.prev=c,s.next=c):(c.prev=c,c.next=c),c}function removeNode(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Node(o,e,a){this.i=o,this.x=e,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(o,e,a,s){let c=0;for(let f=e,d=a-s;f<a;f+=s)c+=(o[d]-o[f])*(o[f+1]+o[d+1]),d=f;return c}const ShapeUtils={area:function(o){const e=o.length;let a=0;for(let s=e-1,c=0;c<e;s=c++)a+=o[s].x*o[c].y-o[c].x*o[s].y;return a*.5},isClockWise:function(o){return ShapeUtils.area(o)<0},triangulateShape:function(o,e){const a=[],s=[],c=[];removeDupEndPts(o),addContour(a,o);let f=o.length;e.forEach(removeDupEndPts);for(let h=0;h<e.length;h++)s.push(f),f+=e[h].length,addContour(a,e[h]);const d=Earcut.triangulate(a,s);for(let h=0;h<d.length;h+=3)c.push(d.slice(h,h+3));return c}};function removeDupEndPts(o){const e=o.length;e>2&&o[e-1].equals(o[0])&&o.pop()}function addContour(o,e){for(let a=0;a<e.length;a++)o.push(e[a].x),o.push(e[a].y)}class ExtrudeGeometry extends BufferGeometry{constructor(e,a){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:a},e=Array.isArray(e)?e:[e];const s=this,c=[],f=[];for(let h=0,g=e.length;h<g;h++){const b=e[h];d(b)}this.setAttribute("position",new Float32BufferAttribute(c,3)),this.setAttribute("uv",new Float32BufferAttribute(f,2)),this.computeVertexNormals();function d(h){const g=[],b=a.curveSegments!==void 0?a.curveSegments:12,tt=a.steps!==void 0?a.steps:1;let j=a.depth!==void 0?a.depth:100,_e=a.bevelEnabled!==void 0?a.bevelEnabled:!0,nt=a.bevelThickness!==void 0?a.bevelThickness:6,rt=a.bevelSize!==void 0?a.bevelSize:nt-2,at=a.bevelOffset!==void 0?a.bevelOffset:0,it=a.bevelSegments!==void 0?a.bevelSegments:3;const $=a.extrudePath,et=a.UVGenerator!==void 0?a.UVGenerator:WorldUVGenerator;a.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),j=a.amount);let st,lt=!1,ct,ut,ht,pt;$&&(st=$.getSpacedPoints(tt),lt=!0,_e=!1,ct=$.computeFrenetFrames(tt,!1),ut=new Vector3,ht=new Vector3,pt=new Vector3),_e||(it=0,nt=0,rt=0,at=0);const mt=h.extractPoints(b);let bt=mt.shape;const St=mt.holes;if(!ShapeUtils.isClockWise(bt)){bt=bt.reverse();for(let Lt=0,Et=St.length;Lt<Et;Lt++){const Dt=St[Lt];ShapeUtils.isClockWise(Dt)&&(St[Lt]=Dt.reverse())}}const It=ShapeUtils.triangulateShape(bt,St),Ct=bt;for(let Lt=0,Et=St.length;Lt<Et;Lt++){const Dt=St[Lt];bt=bt.concat(Dt)}function Pt(Lt,Et,Dt){return Et||console.error("THREE.ExtrudeGeometry: vec does not exist"),Et.clone().multiplyScalar(Dt).add(Lt)}const Nt=bt.length,zt=It.length;function Xt(Lt,Et,Dt){let Ht,Ut,xt;const vt=Lt.x-Et.x,Zt=Lt.y-Et.y,Wt=Dt.x-Lt.x,Ot=Dt.y-Lt.y,tn=vt*vt+Zt*Zt,on=vt*Ot-Zt*Wt;if(Math.abs(on)>Number.EPSILON){const ln=Math.sqrt(tn),an=Math.sqrt(Wt*Wt+Ot*Ot),pn=Et.x-Zt/ln,gn=Et.y+vt/ln,Mn=Dt.x-Ot/an,fn=Dt.y+Wt/an,vn=((Mn-pn)*Ot-(fn-gn)*Wt)/(vt*Ot-Zt*Wt);Ht=pn+vt*vn-Lt.x,Ut=gn+Zt*vn-Lt.y;const Tn=Ht*Ht+Ut*Ut;if(Tn<=2)return new Vector2(Ht,Ut);xt=Math.sqrt(Tn/2)}else{let ln=!1;vt>Number.EPSILON?Wt>Number.EPSILON&&(ln=!0):vt<-Number.EPSILON?Wt<-Number.EPSILON&&(ln=!0):Math.sign(Zt)===Math.sign(Ot)&&(ln=!0),ln?(Ht=-Zt,Ut=vt,xt=Math.sqrt(tn)):(Ht=vt,Ut=Zt,xt=Math.sqrt(tn/2))}return new Vector2(Ht/xt,Ut/xt)}const en=[];for(let Lt=0,Et=Ct.length,Dt=Et-1,Ht=Lt+1;Lt<Et;Lt++,Dt++,Ht++)Dt===Et&&(Dt=0),Ht===Et&&(Ht=0),en[Lt]=Xt(Ct[Lt],Ct[Dt],Ct[Ht]);const rn=[];let Gt,qt=en.concat();for(let Lt=0,Et=St.length;Lt<Et;Lt++){const Dt=St[Lt];Gt=[];for(let Ht=0,Ut=Dt.length,xt=Ut-1,vt=Ht+1;Ht<Ut;Ht++,xt++,vt++)xt===Ut&&(xt=0),vt===Ut&&(vt=0),Gt[Ht]=Xt(Dt[Ht],Dt[xt],Dt[vt]);rn.push(Gt),qt=qt.concat(Gt)}for(let Lt=0;Lt<it;Lt++){const Et=Lt/it,Dt=nt*Math.cos(Et*Math.PI/2),Ht=rt*Math.sin(Et*Math.PI/2)+at;for(let Ut=0,xt=Ct.length;Ut<xt;Ut++){const vt=Pt(Ct[Ut],en[Ut],Ht);yt(vt.x,vt.y,-Dt)}for(let Ut=0,xt=St.length;Ut<xt;Ut++){const vt=St[Ut];Gt=rn[Ut];for(let Zt=0,Wt=vt.length;Zt<Wt;Zt++){const Ot=Pt(vt[Zt],Gt[Zt],Ht);yt(Ot.x,Ot.y,-Dt)}}}const sn=rt+at;for(let Lt=0;Lt<Nt;Lt++){const Et=_e?Pt(bt[Lt],qt[Lt],sn):bt[Lt];lt?(ht.copy(ct.normals[0]).multiplyScalar(Et.x),ut.copy(ct.binormals[0]).multiplyScalar(Et.y),pt.copy(st[0]).add(ht).add(ut),yt(pt.x,pt.y,pt.z)):yt(Et.x,Et.y,0)}for(let Lt=1;Lt<=tt;Lt++)for(let Et=0;Et<Nt;Et++){const Dt=_e?Pt(bt[Et],qt[Et],sn):bt[Et];lt?(ht.copy(ct.normals[Lt]).multiplyScalar(Dt.x),ut.copy(ct.binormals[Lt]).multiplyScalar(Dt.y),pt.copy(st[Lt]).add(ht).add(ut),yt(pt.x,pt.y,pt.z)):yt(Dt.x,Dt.y,j/tt*Lt)}for(let Lt=it-1;Lt>=0;Lt--){const Et=Lt/it,Dt=nt*Math.cos(Et*Math.PI/2),Ht=rt*Math.sin(Et*Math.PI/2)+at;for(let Ut=0,xt=Ct.length;Ut<xt;Ut++){const vt=Pt(Ct[Ut],en[Ut],Ht);yt(vt.x,vt.y,j+Dt)}for(let Ut=0,xt=St.length;Ut<xt;Ut++){const vt=St[Ut];Gt=rn[Ut];for(let Zt=0,Wt=vt.length;Zt<Wt;Zt++){const Ot=Pt(vt[Zt],Gt[Zt],Ht);lt?yt(Ot.x,Ot.y+st[tt-1].y,st[tt-1].x+Dt):yt(Ot.x,Ot.y,j+Dt)}}}yn(),Yt();function yn(){const Lt=c.length/3;if(_e){let Et=0,Dt=Nt*Et;for(let Ht=0;Ht<zt;Ht++){const Ut=It[Ht];At(Ut[2]+Dt,Ut[1]+Dt,Ut[0]+Dt)}Et=tt+it*2,Dt=Nt*Et;for(let Ht=0;Ht<zt;Ht++){const Ut=It[Ht];At(Ut[0]+Dt,Ut[1]+Dt,Ut[2]+Dt)}}else{for(let Et=0;Et<zt;Et++){const Dt=It[Et];At(Dt[2],Dt[1],Dt[0])}for(let Et=0;Et<zt;Et++){const Dt=It[Et];At(Dt[0]+Nt*tt,Dt[1]+Nt*tt,Dt[2]+Nt*tt)}}s.addGroup(Lt,c.length/3-Lt,0)}function Yt(){const Lt=c.length/3;let Et=0;_t(Ct,Et),Et+=Ct.length;for(let Dt=0,Ht=St.length;Dt<Ht;Dt++){const Ut=St[Dt];_t(Ut,Et),Et+=Ut.length}s.addGroup(Lt,c.length/3-Lt,1)}function _t(Lt,Et){let Dt=Lt.length;for(;--Dt>=0;){const Ht=Dt;let Ut=Dt-1;Ut<0&&(Ut=Lt.length-1);for(let xt=0,vt=tt+it*2;xt<vt;xt++){const Zt=Nt*xt,Wt=Nt*(xt+1),Ot=Et+Ht+Zt,tn=Et+Ut+Zt,on=Et+Ut+Wt,ln=Et+Ht+Wt;wt(Ot,tn,on,ln)}}}function yt(Lt,Et,Dt){g.push(Lt),g.push(Et),g.push(Dt)}function At(Lt,Et,Dt){Rt(Lt),Rt(Et),Rt(Dt);const Ht=c.length/3,Ut=et.generateTopUV(s,c,Ht-3,Ht-2,Ht-1);Bt(Ut[0]),Bt(Ut[1]),Bt(Ut[2])}function wt(Lt,Et,Dt,Ht){Rt(Lt),Rt(Et),Rt(Ht),Rt(Et),Rt(Dt),Rt(Ht);const Ut=c.length/3,xt=et.generateSideWallUV(s,c,Ut-6,Ut-3,Ut-2,Ut-1);Bt(xt[0]),Bt(xt[1]),Bt(xt[3]),Bt(xt[1]),Bt(xt[2]),Bt(xt[3])}function Rt(Lt){c.push(g[Lt*3+0]),c.push(g[Lt*3+1]),c.push(g[Lt*3+2])}function Bt(Lt){f.push(Lt.x),f.push(Lt.y)}}}toJSON(){const e=BufferGeometry.prototype.toJSON.call(this),a=this.parameters.shapes,s=this.parameters.options;return toJSON(a,s,e)}}const WorldUVGenerator={generateTopUV:function(o,e,a,s,c){const f=e[a*3],d=e[a*3+1],h=e[s*3],g=e[s*3+1],b=e[c*3],tt=e[c*3+1];return[new Vector2(f,d),new Vector2(h,g),new Vector2(b,tt)]},generateSideWallUV:function(o,e,a,s,c,f){const d=e[a*3],h=e[a*3+1],g=e[a*3+2],b=e[s*3],tt=e[s*3+1],j=e[s*3+2],_e=e[c*3],nt=e[c*3+1],rt=e[c*3+2],at=e[f*3],it=e[f*3+1],$=e[f*3+2];return Math.abs(h-tt)<.01?[new Vector2(d,1-g),new Vector2(b,1-j),new Vector2(_e,1-rt),new Vector2(at,1-$)]:[new Vector2(h,1-g),new Vector2(tt,1-j),new Vector2(nt,1-rt),new Vector2(it,1-$)]}};function toJSON(o,e,a){if(a.shapes=[],Array.isArray(o))for(let s=0,c=o.length;s<c;s++){const f=o[s];a.shapes.push(f.uuid)}else a.shapes.push(o.uuid);return e.extrudePath!==void 0&&(a.options.extrudePath=e.extrudePath.toJSON()),a}class IcosahedronGeometry extends PolyhedronGeometry{constructor(e=1,a=0){const s=(1+Math.sqrt(5))/2,c=[-1,s,0,1,s,0,-1,-s,0,1,-s,0,0,-1,s,0,1,s,0,-1,-s,0,1,-s,s,0,-1,s,0,1,-s,0,-1,-s,0,1],f=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(c,f,e,a),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:a}}}class LatheGeometry extends BufferGeometry{constructor(e,a=12,s=0,c=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:a,phiStart:s,phiLength:c},a=Math.floor(a),c=MathUtils.clamp(c,0,Math.PI*2);const f=[],d=[],h=[],g=1/a,b=new Vector3,tt=new Vector2;for(let j=0;j<=a;j++){const _e=s+j*g*c,nt=Math.sin(_e),rt=Math.cos(_e);for(let at=0;at<=e.length-1;at++)b.x=e[at].x*nt,b.y=e[at].y,b.z=e[at].x*rt,d.push(b.x,b.y,b.z),tt.x=j/a,tt.y=at/(e.length-1),h.push(tt.x,tt.y)}for(let j=0;j<a;j++)for(let _e=0;_e<e.length-1;_e++){const nt=_e+j*e.length,rt=nt,at=nt+e.length,it=nt+e.length+1,$=nt+1;f.push(rt,at,$),f.push(at,it,$)}if(this.setIndex(f),this.setAttribute("position",new Float32BufferAttribute(d,3)),this.setAttribute("uv",new Float32BufferAttribute(h,2)),this.computeVertexNormals(),c===Math.PI*2){const j=this.attributes.normal.array,_e=new Vector3,nt=new Vector3,rt=new Vector3,at=a*e.length*3;for(let it=0,$=0;it<e.length;it++,$+=3)_e.x=j[$+0],_e.y=j[$+1],_e.z=j[$+2],nt.x=j[at+$+0],nt.y=j[at+$+1],nt.z=j[at+$+2],rt.addVectors(_e,nt).normalize(),j[$+0]=j[at+$+0]=rt.x,j[$+1]=j[at+$+1]=rt.y,j[$+2]=j[at+$+2]=rt.z}}}class OctahedronGeometry extends PolyhedronGeometry{constructor(e=1,a=0){const s=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],c=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(s,c,e,a),this.type="OctahedronGeometry",this.parameters={radius:e,detail:a}}}function ParametricGeometry(o,e,a){BufferGeometry.call(this),this.type="ParametricGeometry",this.parameters={func:o,slices:e,stacks:a};const s=[],c=[],f=[],d=[],h=1e-5,g=new Vector3,b=new Vector3,tt=new Vector3,j=new Vector3,_e=new Vector3;o.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const nt=e+1;for(let rt=0;rt<=a;rt++){const at=rt/a;for(let it=0;it<=e;it++){const $=it/e;o($,at,b),c.push(b.x,b.y,b.z),$-h>=0?(o($-h,at,tt),j.subVectors(b,tt)):(o($+h,at,tt),j.subVectors(tt,b)),at-h>=0?(o($,at-h,tt),_e.subVectors(b,tt)):(o($,at+h,tt),_e.subVectors(tt,b)),g.crossVectors(j,_e).normalize(),f.push(g.x,g.y,g.z),d.push($,at)}}for(let rt=0;rt<a;rt++)for(let at=0;at<e;at++){const it=rt*nt+at,$=rt*nt+at+1,et=(rt+1)*nt+at+1,st=(rt+1)*nt+at;s.push(it,$,st),s.push($,et,st)}this.setIndex(s),this.setAttribute("position",new Float32BufferAttribute(c,3)),this.setAttribute("normal",new Float32BufferAttribute(f,3)),this.setAttribute("uv",new Float32BufferAttribute(d,2))}ParametricGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;class RingGeometry extends BufferGeometry{constructor(e=.5,a=1,s=8,c=1,f=0,d=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:a,thetaSegments:s,phiSegments:c,thetaStart:f,thetaLength:d},s=Math.max(3,s),c=Math.max(1,c);const h=[],g=[],b=[],tt=[];let j=e;const _e=(a-e)/c,nt=new Vector3,rt=new Vector2;for(let at=0;at<=c;at++){for(let it=0;it<=s;it++){const $=f+it/s*d;nt.x=j*Math.cos($),nt.y=j*Math.sin($),g.push(nt.x,nt.y,nt.z),b.push(0,0,1),rt.x=(nt.x/a+1)/2,rt.y=(nt.y/a+1)/2,tt.push(rt.x,rt.y)}j+=_e}for(let at=0;at<c;at++){const it=at*(s+1);for(let $=0;$<s;$++){const et=$+it,st=et,lt=et+s+1,ct=et+s+2,ut=et+1;h.push(st,lt,ut),h.push(lt,ct,ut)}}this.setIndex(h),this.setAttribute("position",new Float32BufferAttribute(g,3)),this.setAttribute("normal",new Float32BufferAttribute(b,3)),this.setAttribute("uv",new Float32BufferAttribute(tt,2))}}class ShapeGeometry extends BufferGeometry{constructor(e,a=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:a};const s=[],c=[],f=[],d=[];let h=0,g=0;if(Array.isArray(e)===!1)b(e);else for(let tt=0;tt<e.length;tt++)b(e[tt]),this.addGroup(h,g,tt),h+=g,g=0;this.setIndex(s),this.setAttribute("position",new Float32BufferAttribute(c,3)),this.setAttribute("normal",new Float32BufferAttribute(f,3)),this.setAttribute("uv",new Float32BufferAttribute(d,2));function b(tt){const j=c.length/3,_e=tt.extractPoints(a);let nt=_e.shape;const rt=_e.holes;ShapeUtils.isClockWise(nt)===!1&&(nt=nt.reverse());for(let it=0,$=rt.length;it<$;it++){const et=rt[it];ShapeUtils.isClockWise(et)===!0&&(rt[it]=et.reverse())}const at=ShapeUtils.triangulateShape(nt,rt);for(let it=0,$=rt.length;it<$;it++){const et=rt[it];nt=nt.concat(et)}for(let it=0,$=nt.length;it<$;it++){const et=nt[it];c.push(et.x,et.y,0),f.push(0,0,1),d.push(et.x,et.y)}for(let it=0,$=at.length;it<$;it++){const et=at[it],st=et[0]+j,lt=et[1]+j,ct=et[2]+j;s.push(st,lt,ct),g+=3}}}toJSON(){const e=BufferGeometry.prototype.toJSON.call(this),a=this.parameters.shapes;return toJSON$1(a,e)}}function toJSON$1(o,e){if(e.shapes=[],Array.isArray(o))for(let a=0,s=o.length;a<s;a++){const c=o[a];e.shapes.push(c.uuid)}else e.shapes.push(o.uuid);return e}class SphereGeometry extends BufferGeometry{constructor(e=1,a=8,s=6,c=0,f=Math.PI*2,d=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:a,heightSegments:s,phiStart:c,phiLength:f,thetaStart:d,thetaLength:h},a=Math.max(3,Math.floor(a)),s=Math.max(2,Math.floor(s));const g=Math.min(d+h,Math.PI);let b=0;const tt=[],j=new Vector3,_e=new Vector3,nt=[],rt=[],at=[],it=[];for(let $=0;$<=s;$++){const et=[],st=$/s;let lt=0;$==0&&d==0?lt=.5/a:$==s&&g==Math.PI&&(lt=-.5/a);for(let ct=0;ct<=a;ct++){const ut=ct/a;j.x=-e*Math.cos(c+ut*f)*Math.sin(d+st*h),j.y=e*Math.cos(d+st*h),j.z=e*Math.sin(c+ut*f)*Math.sin(d+st*h),rt.push(j.x,j.y,j.z),_e.copy(j).normalize(),at.push(_e.x,_e.y,_e.z),it.push(ut+lt,1-st),et.push(b++)}tt.push(et)}for(let $=0;$<s;$++)for(let et=0;et<a;et++){const st=tt[$][et+1],lt=tt[$][et],ct=tt[$+1][et],ut=tt[$+1][et+1];($!==0||d>0)&&nt.push(st,lt,ut),($!==s-1||g<Math.PI)&&nt.push(lt,ct,ut)}this.setIndex(nt),this.setAttribute("position",new Float32BufferAttribute(rt,3)),this.setAttribute("normal",new Float32BufferAttribute(at,3)),this.setAttribute("uv",new Float32BufferAttribute(it,2))}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(e=1,a=0){const s=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],c=[2,1,0,0,3,2,1,3,0,2,3,1];super(s,c,e,a),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:a}}}class TextGeometry extends ExtrudeGeometry{constructor(e,a={}){const s=a.font;if(!(s&&s.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new BufferGeometry;const c=s.generateShapes(e,a.size);a.depth=a.height!==void 0?a.height:50,a.bevelThickness===void 0&&(a.bevelThickness=10),a.bevelSize===void 0&&(a.bevelSize=8),a.bevelEnabled===void 0&&(a.bevelEnabled=!1),super(c,a),this.type="TextGeometry"}}class TorusGeometry extends BufferGeometry{constructor(e=1,a=.4,s=8,c=6,f=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:a,radialSegments:s,tubularSegments:c,arc:f},s=Math.floor(s),c=Math.floor(c);const d=[],h=[],g=[],b=[],tt=new Vector3,j=new Vector3,_e=new Vector3;for(let nt=0;nt<=s;nt++)for(let rt=0;rt<=c;rt++){const at=rt/c*f,it=nt/s*Math.PI*2;j.x=(e+a*Math.cos(it))*Math.cos(at),j.y=(e+a*Math.cos(it))*Math.sin(at),j.z=a*Math.sin(it),h.push(j.x,j.y,j.z),tt.x=e*Math.cos(at),tt.y=e*Math.sin(at),_e.subVectors(j,tt).normalize(),g.push(_e.x,_e.y,_e.z),b.push(rt/c),b.push(nt/s)}for(let nt=1;nt<=s;nt++)for(let rt=1;rt<=c;rt++){const at=(c+1)*nt+rt-1,it=(c+1)*(nt-1)+rt-1,$=(c+1)*(nt-1)+rt,et=(c+1)*nt+rt;d.push(at,it,et),d.push(it,$,et)}this.setIndex(d),this.setAttribute("position",new Float32BufferAttribute(h,3)),this.setAttribute("normal",new Float32BufferAttribute(g,3)),this.setAttribute("uv",new Float32BufferAttribute(b,2))}}class TorusKnotGeometry extends BufferGeometry{constructor(e=1,a=.4,s=64,c=8,f=2,d=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:a,tubularSegments:s,radialSegments:c,p:f,q:d},s=Math.floor(s),c=Math.floor(c);const h=[],g=[],b=[],tt=[],j=new Vector3,_e=new Vector3,nt=new Vector3,rt=new Vector3,at=new Vector3,it=new Vector3,$=new Vector3;for(let st=0;st<=s;++st){const lt=st/s*f*Math.PI*2;et(lt,f,d,e,nt),et(lt+.01,f,d,e,rt),it.subVectors(rt,nt),$.addVectors(rt,nt),at.crossVectors(it,$),$.crossVectors(at,it),at.normalize(),$.normalize();for(let ct=0;ct<=c;++ct){const ut=ct/c*Math.PI*2,ht=-a*Math.cos(ut),pt=a*Math.sin(ut);j.x=nt.x+(ht*$.x+pt*at.x),j.y=nt.y+(ht*$.y+pt*at.y),j.z=nt.z+(ht*$.z+pt*at.z),g.push(j.x,j.y,j.z),_e.subVectors(j,nt).normalize(),b.push(_e.x,_e.y,_e.z),tt.push(st/s),tt.push(ct/c)}}for(let st=1;st<=s;st++)for(let lt=1;lt<=c;lt++){const ct=(c+1)*(st-1)+(lt-1),ut=(c+1)*st+(lt-1),ht=(c+1)*st+lt,pt=(c+1)*(st-1)+lt;h.push(ct,ut,pt),h.push(ut,ht,pt)}this.setIndex(h),this.setAttribute("position",new Float32BufferAttribute(g,3)),this.setAttribute("normal",new Float32BufferAttribute(b,3)),this.setAttribute("uv",new Float32BufferAttribute(tt,2));function et(st,lt,ct,ut,ht){const pt=Math.cos(st),mt=Math.sin(st),bt=ct/lt*st,St=Math.cos(bt);ht.x=ut*(2+St)*.5*pt,ht.y=ut*(2+St)*mt*.5,ht.z=ut*Math.sin(bt)*.5}}}class TubeGeometry extends BufferGeometry{constructor(e,a=64,s=1,c=8,f=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:a,radius:s,radialSegments:c,closed:f};const d=e.computeFrenetFrames(a,f);this.tangents=d.tangents,this.normals=d.normals,this.binormals=d.binormals;const h=new Vector3,g=new Vector3,b=new Vector2;let tt=new Vector3;const j=[],_e=[],nt=[],rt=[];at(),this.setIndex(rt),this.setAttribute("position",new Float32BufferAttribute(j,3)),this.setAttribute("normal",new Float32BufferAttribute(_e,3)),this.setAttribute("uv",new Float32BufferAttribute(nt,2));function at(){for(let st=0;st<a;st++)it(st);it(f===!1?a:0),et(),$()}function it(st){tt=e.getPointAt(st/a,tt);const lt=d.normals[st],ct=d.binormals[st];for(let ut=0;ut<=c;ut++){const ht=ut/c*Math.PI*2,pt=Math.sin(ht),mt=-Math.cos(ht);g.x=mt*lt.x+pt*ct.x,g.y=mt*lt.y+pt*ct.y,g.z=mt*lt.z+pt*ct.z,g.normalize(),_e.push(g.x,g.y,g.z),h.x=tt.x+s*g.x,h.y=tt.y+s*g.y,h.z=tt.z+s*g.z,j.push(h.x,h.y,h.z)}}function $(){for(let st=1;st<=a;st++)for(let lt=1;lt<=c;lt++){const ct=(c+1)*(st-1)+(lt-1),ut=(c+1)*st+(lt-1),ht=(c+1)*st+lt,pt=(c+1)*(st-1)+lt;rt.push(ct,ut,pt),rt.push(ut,ht,pt)}}function et(){for(let st=0;st<=a;st++)for(let lt=0;lt<=c;lt++)b.x=st/a,b.y=lt/c,nt.push(b.x,b.y)}}toJSON(){const e=BufferGeometry.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e}}class WireframeGeometry extends BufferGeometry{constructor(e){if(super(),this.type="WireframeGeometry",e.isGeometry===!0){console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return}const a=[],s=[0,0],c={},f=new Vector3;if(e.index!==null){const d=e.attributes.position,h=e.index;let g=e.groups;g.length===0&&(g=[{start:0,count:h.count,materialIndex:0}]);for(let b=0,tt=g.length;b<tt;++b){const j=g[b],_e=j.start,nt=j.count;for(let rt=_e,at=_e+nt;rt<at;rt+=3)for(let it=0;it<3;it++){const $=h.getX(rt+it),et=h.getX(rt+(it+1)%3);s[0]=Math.min($,et),s[1]=Math.max($,et);const st=s[0]+","+s[1];c[st]===void 0&&(c[st]={index1:s[0],index2:s[1]})}}for(const b in c){const tt=c[b];f.fromBufferAttribute(d,tt.index1),a.push(f.x,f.y,f.z),f.fromBufferAttribute(d,tt.index2),a.push(f.x,f.y,f.z)}}else{const d=e.attributes.position;for(let h=0,g=d.count/3;h<g;h++)for(let b=0;b<3;b++){const tt=3*h+b;f.fromBufferAttribute(d,tt),a.push(f.x,f.y,f.z);const j=3*h+(b+1)%3;f.fromBufferAttribute(d,j),a.push(f.x,f.y,f.z)}}this.setAttribute("position",new Float32BufferAttribute(a,3))}}var Geometries=Object.freeze({__proto__:null,BoxGeometry,BoxBufferGeometry:BoxGeometry,CircleGeometry,CircleBufferGeometry:CircleGeometry,ConeGeometry,ConeBufferGeometry:ConeGeometry,CylinderGeometry,CylinderBufferGeometry:CylinderGeometry,DodecahedronGeometry,DodecahedronBufferGeometry:DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,ExtrudeBufferGeometry:ExtrudeGeometry,IcosahedronGeometry,IcosahedronBufferGeometry:IcosahedronGeometry,LatheGeometry,LatheBufferGeometry:LatheGeometry,OctahedronGeometry,OctahedronBufferGeometry:OctahedronGeometry,ParametricGeometry,ParametricBufferGeometry:ParametricGeometry,PlaneGeometry,PlaneBufferGeometry:PlaneGeometry,PolyhedronGeometry,PolyhedronBufferGeometry:PolyhedronGeometry,RingGeometry,RingBufferGeometry:RingGeometry,ShapeGeometry,ShapeBufferGeometry:ShapeGeometry,SphereGeometry,SphereBufferGeometry:SphereGeometry,TetrahedronGeometry,TetrahedronBufferGeometry:TetrahedronGeometry,TextGeometry,TextBufferGeometry:TextGeometry,TorusGeometry,TorusBufferGeometry:TorusGeometry,TorusKnotGeometry,TorusKnotBufferGeometry:TorusKnotGeometry,TubeGeometry,TubeBufferGeometry:TubeGeometry,WireframeGeometry});function ShadowMaterial(o){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(o)}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;ShadowMaterial.prototype.copy=function(o){return Material.prototype.copy.call(this,o),this.color.copy(o.color),this};function RawShaderMaterial(o){ShaderMaterial.call(this,o),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(o){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(o)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(o){return Material.prototype.copy.call(this,o),this.defines={STANDARD:""},this.color.copy(o.color),this.roughness=o.roughness,this.metalness=o.metalness,this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.roughnessMap=o.roughnessMap,this.metalnessMap=o.metalnessMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.envMapIntensity=o.envMapIntensity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.morphNormals=o.morphNormals,this.vertexTangents=o.vertexTangents,this};function MeshPhysicalMaterial(o){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=MathUtils.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(o)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(o){return MeshStandardMaterial.prototype.copy.call(this,o),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=o.clearcoat,this.clearcoatMap=o.clearcoatMap,this.clearcoatRoughness=o.clearcoatRoughness,this.clearcoatRoughnessMap=o.clearcoatRoughnessMap,this.clearcoatNormalMap=o.clearcoatNormalMap,this.clearcoatNormalScale.copy(o.clearcoatNormalScale),this.reflectivity=o.reflectivity,o.sheen?this.sheen=(this.sheen||new Color).copy(o.sheen):this.sheen=null,this.transmission=o.transmission,this.transmissionMap=o.transmissionMap,this};function MeshPhongMaterial(o){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(o)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(o){return Material.prototype.copy.call(this,o),this.color.copy(o.color),this.specular.copy(o.specular),this.shininess=o.shininess,this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.morphNormals=o.morphNormals,this};function MeshToonMaterial(o){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(o)}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(o){return Material.prototype.copy.call(this,o),this.color.copy(o.color),this.map=o.map,this.gradientMap=o.gradientMap,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.alphaMap=o.alphaMap,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.morphNormals=o.morphNormals,this};function MeshNormalMaterial(o){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(o)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(o){return Material.prototype.copy.call(this,o),this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.morphNormals=o.morphNormals,this};function MeshLambertMaterial(o){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(o)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(o){return Material.prototype.copy.call(this,o),this.color.copy(o.color),this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.morphNormals=o.morphNormals,this};function MeshMatcapMaterial(o){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(o)}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;MeshMatcapMaterial.prototype.copy=function(o){return Material.prototype.copy.call(this,o),this.defines={MATCAP:""},this.color.copy(o.color),this.matcap=o.matcap,this.map=o.map,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.alphaMap=o.alphaMap,this.skinning=o.skinning,this.morphTargets=o.morphTargets,this.morphNormals=o.morphNormals,this};function LineDashedMaterial(o){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(o)}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(o){return LineBasicMaterial.prototype.copy.call(this,o),this.scale=o.scale,this.dashSize=o.dashSize,this.gapSize=o.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material});const AnimationUtils={arraySlice:function(o,e,a){return AnimationUtils.isTypedArray(o)?new o.constructor(o.subarray(e,a!==void 0?a:o.length)):o.slice(e,a)},convertArray:function(o,e,a){return!o||!a&&o.constructor===e?o:typeof e.BYTES_PER_ELEMENT=="number"?new e(o):Array.prototype.slice.call(o)},isTypedArray:function(o){return ArrayBuffer.isView(o)&&!(o instanceof DataView)},getKeyframeOrder:function(o){function e(c,f){return o[c]-o[f]}const a=o.length,s=new Array(a);for(let c=0;c!==a;++c)s[c]=c;return s.sort(e),s},sortedArray:function(o,e,a){const s=o.length,c=new o.constructor(s);for(let f=0,d=0;d!==s;++f){const h=a[f]*e;for(let g=0;g!==e;++g)c[d++]=o[h+g]}return c},flattenJSON:function(o,e,a,s){let c=1,f=o[0];for(;f!==void 0&&f[s]===void 0;)f=o[c++];if(f===void 0)return;let d=f[s];if(d!==void 0)if(Array.isArray(d))do d=f[s],d!==void 0&&(e.push(f.time),a.push.apply(a,d)),f=o[c++];while(f!==void 0);else if(d.toArray!==void 0)do d=f[s],d!==void 0&&(e.push(f.time),d.toArray(a,a.length)),f=o[c++];while(f!==void 0);else do d=f[s],d!==void 0&&(e.push(f.time),a.push(d)),f=o[c++];while(f!==void 0)},subclip:function(o,e,a,s,c=30){const f=o.clone();f.name=e;const d=[];for(let g=0;g<f.tracks.length;++g){const b=f.tracks[g],tt=b.getValueSize(),j=[],_e=[];for(let nt=0;nt<b.times.length;++nt){const rt=b.times[nt]*c;if(!(rt<a||rt>=s)){j.push(b.times[nt]);for(let at=0;at<tt;++at)_e.push(b.values[nt*tt+at])}}j.length!==0&&(b.times=AnimationUtils.convertArray(j,b.times.constructor),b.values=AnimationUtils.convertArray(_e,b.values.constructor),d.push(b))}f.tracks=d;let h=1/0;for(let g=0;g<f.tracks.length;++g)h>f.tracks[g].times[0]&&(h=f.tracks[g].times[0]);for(let g=0;g<f.tracks.length;++g)f.tracks[g].shift(-1*h);return f.resetDuration(),f},makeClipAdditive:function(o,e=0,a=o,s=30){s<=0&&(s=30);const c=a.tracks.length,f=e/s;for(let d=0;d<c;++d){const h=a.tracks[d],g=h.ValueTypeName;if(g==="bool"||g==="string")continue;const b=o.tracks.find(function($){return $.name===h.name&&$.ValueTypeName===g});if(b===void 0)continue;let tt=0;const j=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(tt=j/3);let _e=0;const nt=b.getValueSize();b.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_e=nt/3);const rt=h.times.length-1;let at;if(f<=h.times[0]){const $=tt,et=j-tt;at=AnimationUtils.arraySlice(h.values,$,et)}else if(f>=h.times[rt]){const $=rt*j+tt,et=$+j-tt;at=AnimationUtils.arraySlice(h.values,$,et)}else{const $=h.createInterpolant(),et=tt,st=j-tt;$.evaluate(f),at=AnimationUtils.arraySlice($.resultBuffer,et,st)}g==="quaternion"&&new Quaternion().fromArray(at).normalize().conjugate().toArray(at);const it=b.times.length;for(let $=0;$<it;++$){const et=$*nt+_e;if(g==="quaternion")Quaternion.multiplyQuaternionsFlat(b.values,et,at,0,b.values,et);else{const st=nt-_e*2;for(let lt=0;lt<st;++lt)b.values[et+lt]-=at[lt]}}}return o.blendMode=AdditiveAnimationBlendMode,o}};function Interpolant(o,e,a,s){this.parameterPositions=o,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new e.constructor(a),this.sampleValues=e,this.valueSize=a}Object.assign(Interpolant.prototype,{evaluate:function(o){const e=this.parameterPositions;let a=this._cachedIndex,s=e[a],c=e[a-1];e:{t:{let f;n:{r:if(!(o<s)){for(let d=a+2;;){if(s===void 0){if(o<c)break r;return a=e.length,this._cachedIndex=a,this.afterEnd_(a-1,o,c)}if(a===d)break;if(c=s,s=e[++a],o<s)break t}f=e.length;break n}if(!(o>=c)){const d=e[1];o<d&&(a=2,c=d);for(let h=a-2;;){if(c===void 0)return this._cachedIndex=0,this.beforeStart_(0,o,s);if(a===h)break;if(s=c,c=e[--a-1],o>=c)break t}f=a,a=0;break n}break e}for(;a<f;){const d=a+f>>>1;o<e[d]?f=d:a=d+1}if(s=e[a],c=e[a-1],c===void 0)return this._cachedIndex=0,this.beforeStart_(0,o,s);if(s===void 0)return a=e.length,this._cachedIndex=a,this.afterEnd_(a-1,c,o)}this._cachedIndex=a,this.intervalChanged_(a,c,s)}return this.interpolate_(a,c,o,s)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(o){const e=this.resultBuffer,a=this.sampleValues,s=this.valueSize,c=o*s;for(let f=0;f!==s;++f)e[f]=a[c+f];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(o,e,a,s){Interpolant.call(this,o,e,a,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(o,e,a){const s=this.parameterPositions;let c=o-2,f=o+1,d=s[c],h=s[f];if(d===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:c=o,d=2*e-a;break;case WrapAroundEnding:c=s.length-2,d=e+s[c]-s[c+1];break;default:c=o,d=a}if(h===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:f=o,h=2*a-e;break;case WrapAroundEnding:f=1,h=a+s[1]-s[0];break;default:f=o-1,h=e}const g=(a-e)*.5,b=this.valueSize;this._weightPrev=g/(e-d),this._weightNext=g/(h-a),this._offsetPrev=c*b,this._offsetNext=f*b},interpolate_:function(o,e,a,s){const c=this.resultBuffer,f=this.sampleValues,d=this.valueSize,h=o*d,g=h-d,b=this._offsetPrev,tt=this._offsetNext,j=this._weightPrev,_e=this._weightNext,nt=(a-e)/(s-e),rt=nt*nt,at=rt*nt,it=-j*at+2*j*rt-j*nt,$=(1+j)*at+(-1.5-2*j)*rt+(-.5+j)*nt+1,et=(-1-_e)*at+(1.5+_e)*rt+.5*nt,st=_e*at-_e*rt;for(let lt=0;lt!==d;++lt)c[lt]=it*f[b+lt]+$*f[g+lt]+et*f[h+lt]+st*f[tt+lt];return c}});function LinearInterpolant(o,e,a,s){Interpolant.call(this,o,e,a,s)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(o,e,a,s){const c=this.resultBuffer,f=this.sampleValues,d=this.valueSize,h=o*d,g=h-d,b=(a-e)/(s-e),tt=1-b;for(let j=0;j!==d;++j)c[j]=f[g+j]*tt+f[h+j]*b;return c}});function DiscreteInterpolant(o,e,a,s){Interpolant.call(this,o,e,a,s)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(o){return this.copySampleValue_(o-1)}});function KeyframeTrack(o,e,a,s){if(o===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+o);this.name=o,this.times=AnimationUtils.convertArray(e,this.TimeBufferType),this.values=AnimationUtils.convertArray(a,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(o){const e=o.constructor;let a;if(e.toJSON!==void 0)a=e.toJSON(o);else{a={name:o.name,times:AnimationUtils.convertArray(o.times,Array),values:AnimationUtils.convertArray(o.values,Array)};const s=o.getInterpolation();s!==o.DefaultInterpolation&&(a.interpolation=s)}return a.type=o.ValueTypeName,a}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(o){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),o)},InterpolantFactoryMethodLinear:function(o){return new LinearInterpolant(this.times,this.values,this.getValueSize(),o)},InterpolantFactoryMethodSmooth:function(o){return new CubicInterpolant(this.times,this.values,this.getValueSize(),o)},setInterpolation:function(o){let e;switch(o){case InterpolateDiscrete:e=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:e=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const a="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(o!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(a);return console.warn("THREE.KeyframeTrack:",a),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(o){if(o!==0){const e=this.times;for(let a=0,s=e.length;a!==s;++a)e[a]+=o}return this},scale:function(o){if(o!==1){const e=this.times;for(let a=0,s=e.length;a!==s;++a)e[a]*=o}return this},trim:function(o,e){const a=this.times,s=a.length;let c=0,f=s-1;for(;c!==s&&a[c]<o;)++c;for(;f!==-1&&a[f]>e;)--f;if(++f,c!==0||f!==s){c>=f&&(f=Math.max(f,1),c=f-1);const d=this.getValueSize();this.times=AnimationUtils.arraySlice(a,c,f),this.values=AnimationUtils.arraySlice(this.values,c*d,f*d)}return this},validate:function(){let o=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),o=!1);const a=this.times,s=this.values,c=a.length;c===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),o=!1);let f=null;for(let d=0;d!==c;d++){const h=a[d];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,d,h),o=!1;break}if(f!==null&&f>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,d,h,f),o=!1;break}f=h}if(s!==void 0&&AnimationUtils.isTypedArray(s))for(let d=0,h=s.length;d!==h;++d){const g=s[d];if(isNaN(g)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,d,g),o=!1;break}}return o},optimize:function(){const o=AnimationUtils.arraySlice(this.times),e=AnimationUtils.arraySlice(this.values),a=this.getValueSize(),s=this.getInterpolation()===InterpolateSmooth,c=o.length-1;let f=1;for(let d=1;d<c;++d){let h=!1;const g=o[d],b=o[d+1];if(g!==b&&(d!==1||g!==o[0]))if(s)h=!0;else{const tt=d*a,j=tt-a,_e=tt+a;for(let nt=0;nt!==a;++nt){const rt=e[tt+nt];if(rt!==e[j+nt]||rt!==e[_e+nt]){h=!0;break}}}if(h){if(d!==f){o[f]=o[d];const tt=d*a,j=f*a;for(let _e=0;_e!==a;++_e)e[j+_e]=e[tt+_e]}++f}}if(c>0){o[f]=o[c];for(let d=c*a,h=f*a,g=0;g!==a;++g)e[h+g]=e[d+g];++f}return f!==o.length?(this.times=AnimationUtils.arraySlice(o,0,f),this.values=AnimationUtils.arraySlice(e,0,f*a)):(this.times=o,this.values=e),this},clone:function(){const o=AnimationUtils.arraySlice(this.times,0),e=AnimationUtils.arraySlice(this.values,0),a=this.constructor,s=new a(this.name,o,e);return s.createInterpolant=this.createInterpolant,s}});function BooleanKeyframeTrack(o,e,a){KeyframeTrack.call(this,o,e,a)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(o,e,a,s){KeyframeTrack.call(this,o,e,a,s)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(o,e,a,s){KeyframeTrack.call(this,o,e,a,s)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(o,e,a,s){Interpolant.call(this,o,e,a,s)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(o,e,a,s){const c=this.resultBuffer,f=this.sampleValues,d=this.valueSize,h=(a-e)/(s-e);let g=o*d;for(let b=g+d;g!==b;g+=4)Quaternion.slerpFlat(c,0,f,g-d,f,g,h);return c}});function QuaternionKeyframeTrack(o,e,a,s){KeyframeTrack.call(this,o,e,a,s)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(o){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),o)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(o,e,a,s){KeyframeTrack.call(this,o,e,a,s)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(o,e,a,s){KeyframeTrack.call(this,o,e,a,s)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(o,e=-1,a,s=NormalAnimationBlendMode){this.name=o,this.tracks=a,this.duration=e,this.blendMode=s,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(o){switch(o.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+o)}function parseKeyframeTrack(o){if(o.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=getTrackTypeForValueTypeName(o.type);if(o.times===void 0){const a=[],s=[];AnimationUtils.flattenJSON(o.keys,a,s,"value"),o.times=a,o.values=s}return e.parse!==void 0?e.parse(o):new e(o.name,o.times,o.values,o.interpolation)}Object.assign(AnimationClip,{parse:function(o){const e=[],a=o.tracks,s=1/(o.fps||1);for(let f=0,d=a.length;f!==d;++f)e.push(parseKeyframeTrack(a[f]).scale(s));const c=new AnimationClip(o.name,o.duration,e,o.blendMode);return c.uuid=o.uuid,c},toJSON:function(o){const e=[],a=o.tracks,s={name:o.name,duration:o.duration,tracks:e,uuid:o.uuid,blendMode:o.blendMode};for(let c=0,f=a.length;c!==f;++c)e.push(KeyframeTrack.toJSON(a[c]));return s},CreateFromMorphTargetSequence:function(o,e,a,s){const c=e.length,f=[];for(let d=0;d<c;d++){let h=[],g=[];h.push((d+c-1)%c,d,(d+1)%c),g.push(0,1,0);const b=AnimationUtils.getKeyframeOrder(h);h=AnimationUtils.sortedArray(h,1,b),g=AnimationUtils.sortedArray(g,1,b),!s&&h[0]===0&&(h.push(c),g.push(g[0])),f.push(new NumberKeyframeTrack(".morphTargetInfluences["+e[d].name+"]",h,g).scale(1/a))}return new AnimationClip(o,-1,f)},findByName:function(o,e){let a=o;if(!Array.isArray(o)){const s=o;a=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<a.length;s++)if(a[s].name===e)return a[s];return null},CreateClipsFromMorphTargetSequences:function(o,e,a){const s={},c=/^([\w-]*?)([\d]+)$/;for(let d=0,h=o.length;d<h;d++){const g=o[d],b=g.name.match(c);if(b&&b.length>1){const tt=b[1];let j=s[tt];j||(s[tt]=j=[]),j.push(g)}}const f=[];for(const d in s)f.push(AnimationClip.CreateFromMorphTargetSequence(d,s[d],e,a));return f},parseAnimation:function(o,e){if(!o)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const a=function(tt,j,_e,nt,rt){if(_e.length!==0){const at=[],it=[];AnimationUtils.flattenJSON(_e,at,it,nt),at.length!==0&&rt.push(new tt(j,at,it))}},s=[],c=o.name||"default",f=o.fps||30,d=o.blendMode;let h=o.length||-1;const g=o.hierarchy||[];for(let tt=0;tt<g.length;tt++){const j=g[tt].keys;if(!(!j||j.length===0))if(j[0].morphTargets){const _e={};let nt;for(nt=0;nt<j.length;nt++)if(j[nt].morphTargets)for(let rt=0;rt<j[nt].morphTargets.length;rt++)_e[j[nt].morphTargets[rt]]=-1;for(const rt in _e){const at=[],it=[];for(let $=0;$!==j[nt].morphTargets.length;++$){const et=j[nt];at.push(et.time),it.push(et.morphTarget===rt?1:0)}s.push(new NumberKeyframeTrack(".morphTargetInfluence["+rt+"]",at,it))}h=_e.length*(f||1)}else{const _e=".bones["+e[tt].name+"]";a(VectorKeyframeTrack,_e+".position",j,"pos",s),a(QuaternionKeyframeTrack,_e+".quaternion",j,"rot",s),a(VectorKeyframeTrack,_e+".scale",j,"scl",s)}}return s.length===0?null:new AnimationClip(c,h,s,d)}});Object.assign(AnimationClip.prototype,{resetDuration:function(){const o=this.tracks;let e=0;for(let a=0,s=o.length;a!==s;++a){const c=this.tracks[a];e=Math.max(e,c.times[c.times.length-1])}return this.duration=e,this},trim:function(){for(let o=0;o<this.tracks.length;o++)this.tracks[o].trim(0,this.duration);return this},validate:function(){let o=!0;for(let e=0;e<this.tracks.length;e++)o=o&&this.tracks[e].validate();return o},optimize:function(){for(let o=0;o<this.tracks.length;o++)this.tracks[o].optimize();return this},clone:function(){const o=[];for(let e=0;e<this.tracks.length;e++)o.push(this.tracks[e].clone());return new AnimationClip(this.name,this.duration,o,this.blendMode)},toJSON:function(){return AnimationClip.toJSON(this)}});const Cache={enabled:!1,files:{},add:function(o,e){this.enabled!==!1&&(this.files[o]=e)},get:function(o){if(this.enabled!==!1)return this.files[o]},remove:function(o){delete this.files[o]},clear:function(){this.files={}}};function LoadingManager(o,e,a){const s=this;let c=!1,f=0,d=0,h;const g=[];this.onStart=void 0,this.onLoad=o,this.onProgress=e,this.onError=a,this.itemStart=function(b){d++,c===!1&&s.onStart!==void 0&&s.onStart(b,f,d),c=!0},this.itemEnd=function(b){f++,s.onProgress!==void 0&&s.onProgress(b,f,d),f===d&&(c=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(b){s.onError!==void 0&&s.onError(b)},this.resolveURL=function(b){return h?h(b):b},this.setURLModifier=function(b){return h=b,this},this.addHandler=function(b,tt){return g.push(b,tt),this},this.removeHandler=function(b){const tt=g.indexOf(b);return tt!==-1&&g.splice(tt,2),this},this.getHandler=function(b){for(let tt=0,j=g.length;tt<j;tt+=2){const _e=g[tt],nt=g[tt+1];if(_e.global&&(_e.lastIndex=0),_e.test(b))return nt}return null}}const DefaultLoadingManager=new LoadingManager;function Loader(o){this.manager=o!==void 0?o:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(o,e){const a=this;return new Promise(function(s,c){a.load(o,s,e,c)})},parse:function(){},setCrossOrigin:function(o){return this.crossOrigin=o,this},setWithCredentials:function(o){return this.withCredentials=o,this},setPath:function(o){return this.path=o,this},setResourcePath:function(o){return this.resourcePath=o,this},setRequestHeader:function(o){return this.requestHeader=o,this}});const loading={};function FileLoader(o){Loader.call(this,o)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(o,e,a,s){o===void 0&&(o=""),this.path!==void 0&&(o=this.path+o),o=this.manager.resolveURL(o);const c=this,f=Cache.get(o);if(f!==void 0)return c.manager.itemStart(o),setTimeout(function(){e&&e(f),c.manager.itemEnd(o)},0),f;if(loading[o]!==void 0){loading[o].push({onLoad:e,onProgress:a,onError:s});return}const d=/^data:(.*?)(;base64)?,(.*)$/,h=o.match(d);let g;if(h){const b=h[1],tt=!!h[2];let j=h[3];j=decodeURIComponent(j),tt&&(j=atob(j));try{let _e;const nt=(this.responseType||"").toLowerCase();switch(nt){case"arraybuffer":case"blob":const rt=new Uint8Array(j.length);for(let it=0;it<j.length;it++)rt[it]=j.charCodeAt(it);nt==="blob"?_e=new Blob([rt.buffer],{type:b}):_e=rt.buffer;break;case"document":_e=new DOMParser().parseFromString(j,b);break;case"json":_e=JSON.parse(j);break;default:_e=j;break}setTimeout(function(){e&&e(_e),c.manager.itemEnd(o)},0)}catch(_e){setTimeout(function(){s&&s(_e),c.manager.itemError(o),c.manager.itemEnd(o)},0)}}else{loading[o]=[],loading[o].push({onLoad:e,onProgress:a,onError:s}),g=new XMLHttpRequest,g.open("GET",o,!0),g.addEventListener("load",function(b){const tt=this.response,j=loading[o];if(delete loading[o],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(o,tt);for(let _e=0,nt=j.length;_e<nt;_e++){const rt=j[_e];rt.onLoad&&rt.onLoad(tt)}c.manager.itemEnd(o)}else{for(let _e=0,nt=j.length;_e<nt;_e++){const rt=j[_e];rt.onError&&rt.onError(b)}c.manager.itemError(o),c.manager.itemEnd(o)}},!1),g.addEventListener("progress",function(b){const tt=loading[o];for(let j=0,_e=tt.length;j<_e;j++){const nt=tt[j];nt.onProgress&&nt.onProgress(b)}},!1),g.addEventListener("error",function(b){const tt=loading[o];delete loading[o];for(let j=0,_e=tt.length;j<_e;j++){const nt=tt[j];nt.onError&&nt.onError(b)}c.manager.itemError(o),c.manager.itemEnd(o)},!1),g.addEventListener("abort",function(b){const tt=loading[o];delete loading[o];for(let j=0,_e=tt.length;j<_e;j++){const nt=tt[j];nt.onError&&nt.onError(b)}c.manager.itemError(o),c.manager.itemEnd(o)},!1),this.responseType!==void 0&&(g.responseType=this.responseType),this.withCredentials!==void 0&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const b in this.requestHeader)g.setRequestHeader(b,this.requestHeader[b]);g.send(null)}return c.manager.itemStart(o),g},setResponseType:function(o){return this.responseType=o,this},setMimeType:function(o){return this.mimeType=o,this}});function AnimationLoader(o){Loader.call(this,o)}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(o,e,a,s){const c=this,f=new FileLoader(c.manager);f.setPath(c.path),f.setRequestHeader(c.requestHeader),f.setWithCredentials(c.withCredentials),f.load(o,function(d){try{e(c.parse(JSON.parse(d)))}catch(h){s?s(h):console.error(h),c.manager.itemError(o)}},a,s)},parse:function(o){const e=[];for(let a=0;a<o.length;a++){const s=AnimationClip.parse(o[a]);e.push(s)}return e}});function CompressedTextureLoader(o){Loader.call(this,o)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(o,e,a,s){const c=this,f=[],d=new CompressedTexture,h=new FileLoader(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(c.withCredentials);let g=0;function b(tt){h.load(o[tt],function(j){const _e=c.parse(j,!0);f[tt]={width:_e.width,height:_e.height,format:_e.format,mipmaps:_e.mipmaps},g+=1,g===6&&(_e.mipmapCount===1&&(d.minFilter=LinearFilter),d.image=f,d.format=_e.format,d.needsUpdate=!0,e&&e(d))},a,s)}if(Array.isArray(o))for(let tt=0,j=o.length;tt<j;++tt)b(tt);else h.load(o,function(tt){const j=c.parse(tt,!0);if(j.isCubemap){const _e=j.mipmaps.length/j.mipmapCount;for(let nt=0;nt<_e;nt++){f[nt]={mipmaps:[]};for(let rt=0;rt<j.mipmapCount;rt++)f[nt].mipmaps.push(j.mipmaps[nt*j.mipmapCount+rt]),f[nt].format=j.format,f[nt].width=j.width,f[nt].height=j.height}d.image=f}else d.image.width=j.width,d.image.height=j.height,d.mipmaps=j.mipmaps;j.mipmapCount===1&&(d.minFilter=LinearFilter),d.format=j.format,d.needsUpdate=!0,e&&e(d)},a,s);return d}});function ImageLoader(o){Loader.call(this,o)}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(o,e,a,s){this.path!==void 0&&(o=this.path+o),o=this.manager.resolveURL(o);const c=this,f=Cache.get(o);if(f!==void 0)return c.manager.itemStart(o),setTimeout(function(){e&&e(f),c.manager.itemEnd(o)},0),f;const d=document.createElementNS("http://www.w3.org/1999/xhtml","img");function h(){d.removeEventListener("load",h,!1),d.removeEventListener("error",g,!1),Cache.add(o,this),e&&e(this),c.manager.itemEnd(o)}function g(b){d.removeEventListener("load",h,!1),d.removeEventListener("error",g,!1),s&&s(b),c.manager.itemError(o),c.manager.itemEnd(o)}return d.addEventListener("load",h,!1),d.addEventListener("error",g,!1),o.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(d.crossOrigin=this.crossOrigin),c.manager.itemStart(o),d.src=o,d}});function CubeTextureLoader(o){Loader.call(this,o)}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(o,e,a,s){const c=new CubeTexture,f=new ImageLoader(this.manager);f.setCrossOrigin(this.crossOrigin),f.setPath(this.path);let d=0;function h(g){f.load(o[g],function(b){c.images[g]=b,d++,d===6&&(c.needsUpdate=!0,e&&e(c))},void 0,s)}for(let g=0;g<o.length;++g)h(g);return c}});function DataTextureLoader(o){Loader.call(this,o)}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(o,e,a,s){const c=this,f=new DataTexture,d=new FileLoader(this.manager);return d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setPath(this.path),d.setWithCredentials(c.withCredentials),d.load(o,function(h){const g=c.parse(h);!g||(g.image!==void 0?f.image=g.image:g.data!==void 0&&(f.image.width=g.width,f.image.height=g.height,f.image.data=g.data),f.wrapS=g.wrapS!==void 0?g.wrapS:ClampToEdgeWrapping,f.wrapT=g.wrapT!==void 0?g.wrapT:ClampToEdgeWrapping,f.magFilter=g.magFilter!==void 0?g.magFilter:LinearFilter,f.minFilter=g.minFilter!==void 0?g.minFilter:LinearFilter,f.anisotropy=g.anisotropy!==void 0?g.anisotropy:1,g.encoding!==void 0&&(f.encoding=g.encoding),g.flipY!==void 0&&(f.flipY=g.flipY),g.format!==void 0&&(f.format=g.format),g.type!==void 0&&(f.type=g.type),g.mipmaps!==void 0&&(f.mipmaps=g.mipmaps,f.minFilter=LinearMipmapLinearFilter),g.mipmapCount===1&&(f.minFilter=LinearFilter),f.needsUpdate=!0,e&&e(f,g))},a,s),f}});function TextureLoader(o){Loader.call(this,o)}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(o,e,a,s){const c=new Texture,f=new ImageLoader(this.manager);return f.setCrossOrigin(this.crossOrigin),f.setPath(this.path),f.load(o,function(d){c.image=d;const h=o.search(/\.jpe?g($|\?)/i)>0||o.search(/^data\:image\/jpeg/)===0;c.format=h?RGBFormat:RGBAFormat,c.needsUpdate=!0,e!==void 0&&e(c)},a,s),c}});function Curve(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(o,e){const a=this.getUtoTmapping(o);return this.getPoint(a,e)},getPoints:function(o=5){const e=[];for(let a=0;a<=o;a++)e.push(this.getPoint(a/o));return e},getSpacedPoints:function(o=5){const e=[];for(let a=0;a<=o;a++)e.push(this.getPointAt(a/o));return e},getLength:function(){const o=this.getLengths();return o[o.length-1]},getLengths:function(o){if(o===void 0&&(o=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===o+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let a,s=this.getPoint(0),c=0;e.push(0);for(let f=1;f<=o;f++)a=this.getPoint(f/o),c+=a.distanceTo(s),e.push(c),s=a;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(o,e){const a=this.getLengths();let s=0;const c=a.length;let f;e?f=e:f=o*a[c-1];let d=0,h=c-1,g;for(;d<=h;)if(s=Math.floor(d+(h-d)/2),g=a[s]-f,g<0)d=s+1;else if(g>0)h=s-1;else{h=s;break}if(s=h,a[s]===f)return s/(c-1);const b=a[s],j=a[s+1]-b,_e=(f-b)/j;return(s+_e)/(c-1)},getTangent:function(o,e){let s=o-1e-4,c=o+1e-4;s<0&&(s=0),c>1&&(c=1);const f=this.getPoint(s),d=this.getPoint(c),h=e||(f.isVector2?new Vector2:new Vector3);return h.copy(d).sub(f).normalize(),h},getTangentAt:function(o,e){const a=this.getUtoTmapping(o);return this.getTangent(a,e)},computeFrenetFrames:function(o,e){const a=new Vector3,s=[],c=[],f=[],d=new Vector3,h=new Matrix4;for(let _e=0;_e<=o;_e++){const nt=_e/o;s[_e]=this.getTangentAt(nt,new Vector3),s[_e].normalize()}c[0]=new Vector3,f[0]=new Vector3;let g=Number.MAX_VALUE;const b=Math.abs(s[0].x),tt=Math.abs(s[0].y),j=Math.abs(s[0].z);b<=g&&(g=b,a.set(1,0,0)),tt<=g&&(g=tt,a.set(0,1,0)),j<=g&&a.set(0,0,1),d.crossVectors(s[0],a).normalize(),c[0].crossVectors(s[0],d),f[0].crossVectors(s[0],c[0]);for(let _e=1;_e<=o;_e++){if(c[_e]=c[_e-1].clone(),f[_e]=f[_e-1].clone(),d.crossVectors(s[_e-1],s[_e]),d.length()>Number.EPSILON){d.normalize();const nt=Math.acos(MathUtils.clamp(s[_e-1].dot(s[_e]),-1,1));c[_e].applyMatrix4(h.makeRotationAxis(d,nt))}f[_e].crossVectors(s[_e],c[_e])}if(e===!0){let _e=Math.acos(MathUtils.clamp(c[0].dot(c[o]),-1,1));_e/=o,s[0].dot(d.crossVectors(c[0],c[o]))>0&&(_e=-_e);for(let nt=1;nt<=o;nt++)c[nt].applyMatrix4(h.makeRotationAxis(s[nt],_e*nt)),f[nt].crossVectors(s[nt],c[nt])}return{tangents:s,normals:c,binormals:f}},clone:function(){return new this.constructor().copy(this)},copy:function(o){return this.arcLengthDivisions=o.arcLengthDivisions,this},toJSON:function(){const o={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return o.arcLengthDivisions=this.arcLengthDivisions,o.type=this.type,o},fromJSON:function(o){return this.arcLengthDivisions=o.arcLengthDivisions,this}});function EllipseCurve(o,e,a,s,c,f,d,h){Curve.call(this),this.type="EllipseCurve",this.aX=o||0,this.aY=e||0,this.xRadius=a||1,this.yRadius=s||1,this.aStartAngle=c||0,this.aEndAngle=f||2*Math.PI,this.aClockwise=d||!1,this.aRotation=h||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(o,e){const a=e||new Vector2,s=Math.PI*2;let c=this.aEndAngle-this.aStartAngle;const f=Math.abs(c)<Number.EPSILON;for(;c<0;)c+=s;for(;c>s;)c-=s;c<Number.EPSILON&&(f?c=0:c=s),this.aClockwise===!0&&!f&&(c===s?c=-s:c=c-s);const d=this.aStartAngle+o*c;let h=this.aX+this.xRadius*Math.cos(d),g=this.aY+this.yRadius*Math.sin(d);if(this.aRotation!==0){const b=Math.cos(this.aRotation),tt=Math.sin(this.aRotation),j=h-this.aX,_e=g-this.aY;h=j*b-_e*tt+this.aX,g=j*tt+_e*b+this.aY}return a.set(h,g)};EllipseCurve.prototype.copy=function(o){return Curve.prototype.copy.call(this,o),this.aX=o.aX,this.aY=o.aY,this.xRadius=o.xRadius,this.yRadius=o.yRadius,this.aStartAngle=o.aStartAngle,this.aEndAngle=o.aEndAngle,this.aClockwise=o.aClockwise,this.aRotation=o.aRotation,this};EllipseCurve.prototype.toJSON=function(){const o=Curve.prototype.toJSON.call(this);return o.aX=this.aX,o.aY=this.aY,o.xRadius=this.xRadius,o.yRadius=this.yRadius,o.aStartAngle=this.aStartAngle,o.aEndAngle=this.aEndAngle,o.aClockwise=this.aClockwise,o.aRotation=this.aRotation,o};EllipseCurve.prototype.fromJSON=function(o){return Curve.prototype.fromJSON.call(this,o),this.aX=o.aX,this.aY=o.aY,this.xRadius=o.xRadius,this.yRadius=o.yRadius,this.aStartAngle=o.aStartAngle,this.aEndAngle=o.aEndAngle,this.aClockwise=o.aClockwise,this.aRotation=o.aRotation,this};function ArcCurve(o,e,a,s,c,f){EllipseCurve.call(this,o,e,a,a,s,c,f),this.type="ArcCurve"}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){let o=0,e=0,a=0,s=0;function c(f,d,h,g){o=f,e=h,a=-3*f+3*d-2*h-g,s=2*f-2*d+h+g}return{initCatmullRom:function(f,d,h,g,b){c(d,h,b*(h-f),b*(g-d))},initNonuniformCatmullRom:function(f,d,h,g,b,tt,j){let _e=(d-f)/b-(h-f)/(b+tt)+(h-d)/tt,nt=(h-d)/tt-(g-d)/(tt+j)+(g-h)/j;_e*=tt,nt*=tt,c(d,h,_e,nt)},calc:function(f){const d=f*f,h=d*f;return o+e*f+a*d+s*h}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(o=[],e=!1,a="centripetal",s=.5){Curve.call(this),this.type="CatmullRomCurve3",this.points=o,this.closed=e,this.curveType=a,this.tension=s}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;CatmullRomCurve3.prototype.getPoint=function(o,e=new Vector3){const a=e,s=this.points,c=s.length,f=(c-(this.closed?0:1))*o;let d=Math.floor(f),h=f-d;this.closed?d+=d>0?0:(Math.floor(Math.abs(d)/c)+1)*c:h===0&&d===c-1&&(d=c-2,h=1);let g,b;this.closed||d>0?g=s[(d-1)%c]:(tmp.subVectors(s[0],s[1]).add(s[0]),g=tmp);const tt=s[d%c],j=s[(d+1)%c];if(this.closed||d+2<c?b=s[(d+2)%c]:(tmp.subVectors(s[c-1],s[c-2]).add(s[c-1]),b=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const _e=this.curveType==="chordal"?.5:.25;let nt=Math.pow(g.distanceToSquared(tt),_e),rt=Math.pow(tt.distanceToSquared(j),_e),at=Math.pow(j.distanceToSquared(b),_e);rt<1e-4&&(rt=1),nt<1e-4&&(nt=rt),at<1e-4&&(at=rt),px.initNonuniformCatmullRom(g.x,tt.x,j.x,b.x,nt,rt,at),py.initNonuniformCatmullRom(g.y,tt.y,j.y,b.y,nt,rt,at),pz.initNonuniformCatmullRom(g.z,tt.z,j.z,b.z,nt,rt,at)}else this.curveType==="catmullrom"&&(px.initCatmullRom(g.x,tt.x,j.x,b.x,this.tension),py.initCatmullRom(g.y,tt.y,j.y,b.y,this.tension),pz.initCatmullRom(g.z,tt.z,j.z,b.z,this.tension));return a.set(px.calc(h),py.calc(h),pz.calc(h)),a};CatmullRomCurve3.prototype.copy=function(o){Curve.prototype.copy.call(this,o),this.points=[];for(let e=0,a=o.points.length;e<a;e++){const s=o.points[e];this.points.push(s.clone())}return this.closed=o.closed,this.curveType=o.curveType,this.tension=o.tension,this};CatmullRomCurve3.prototype.toJSON=function(){const o=Curve.prototype.toJSON.call(this);o.points=[];for(let e=0,a=this.points.length;e<a;e++){const s=this.points[e];o.points.push(s.toArray())}return o.closed=this.closed,o.curveType=this.curveType,o.tension=this.tension,o};CatmullRomCurve3.prototype.fromJSON=function(o){Curve.prototype.fromJSON.call(this,o),this.points=[];for(let e=0,a=o.points.length;e<a;e++){const s=o.points[e];this.points.push(new Vector3().fromArray(s))}return this.closed=o.closed,this.curveType=o.curveType,this.tension=o.tension,this};function CatmullRom(o,e,a,s,c){const f=(s-e)*.5,d=(c-a)*.5,h=o*o,g=o*h;return(2*a-2*s+f+d)*g+(-3*a+3*s-2*f-d)*h+f*o+a}function QuadraticBezierP0(o,e){const a=1-o;return a*a*e}function QuadraticBezierP1(o,e){return 2*(1-o)*o*e}function QuadraticBezierP2(o,e){return o*o*e}function QuadraticBezier(o,e,a,s){return QuadraticBezierP0(o,e)+QuadraticBezierP1(o,a)+QuadraticBezierP2(o,s)}function CubicBezierP0(o,e){const a=1-o;return a*a*a*e}function CubicBezierP1(o,e){const a=1-o;return 3*a*a*o*e}function CubicBezierP2(o,e){return 3*(1-o)*o*o*e}function CubicBezierP3(o,e){return o*o*o*e}function CubicBezier(o,e,a,s,c){return CubicBezierP0(o,e)+CubicBezierP1(o,a)+CubicBezierP2(o,s)+CubicBezierP3(o,c)}function CubicBezierCurve(o=new Vector2,e=new Vector2,a=new Vector2,s=new Vector2){Curve.call(this),this.type="CubicBezierCurve",this.v0=o,this.v1=e,this.v2=a,this.v3=s}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=!0;CubicBezierCurve.prototype.getPoint=function(o,e=new Vector2){const a=e,s=this.v0,c=this.v1,f=this.v2,d=this.v3;return a.set(CubicBezier(o,s.x,c.x,f.x,d.x),CubicBezier(o,s.y,c.y,f.y,d.y)),a};CubicBezierCurve.prototype.copy=function(o){return Curve.prototype.copy.call(this,o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this.v3.copy(o.v3),this};CubicBezierCurve.prototype.toJSON=function(){const o=Curve.prototype.toJSON.call(this);return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o.v3=this.v3.toArray(),o};CubicBezierCurve.prototype.fromJSON=function(o){return Curve.prototype.fromJSON.call(this,o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this.v3.fromArray(o.v3),this};function CubicBezierCurve3(o=new Vector3,e=new Vector3,a=new Vector3,s=new Vector3){Curve.call(this),this.type="CubicBezierCurve3",this.v0=o,this.v1=e,this.v2=a,this.v3=s}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;CubicBezierCurve3.prototype.getPoint=function(o,e=new Vector3){const a=e,s=this.v0,c=this.v1,f=this.v2,d=this.v3;return a.set(CubicBezier(o,s.x,c.x,f.x,d.x),CubicBezier(o,s.y,c.y,f.y,d.y),CubicBezier(o,s.z,c.z,f.z,d.z)),a};CubicBezierCurve3.prototype.copy=function(o){return Curve.prototype.copy.call(this,o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this.v3.copy(o.v3),this};CubicBezierCurve3.prototype.toJSON=function(){const o=Curve.prototype.toJSON.call(this);return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o.v3=this.v3.toArray(),o};CubicBezierCurve3.prototype.fromJSON=function(o){return Curve.prototype.fromJSON.call(this,o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this.v3.fromArray(o.v3),this};function LineCurve(o=new Vector2,e=new Vector2){Curve.call(this),this.type="LineCurve",this.v1=o,this.v2=e}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(o,e=new Vector2){const a=e;return o===1?a.copy(this.v2):(a.copy(this.v2).sub(this.v1),a.multiplyScalar(o).add(this.v1)),a};LineCurve.prototype.getPointAt=function(o,e){return this.getPoint(o,e)};LineCurve.prototype.getTangent=function(o,e){const a=e||new Vector2;return a.copy(this.v2).sub(this.v1).normalize(),a};LineCurve.prototype.copy=function(o){return Curve.prototype.copy.call(this,o),this.v1.copy(o.v1),this.v2.copy(o.v2),this};LineCurve.prototype.toJSON=function(){const o=Curve.prototype.toJSON.call(this);return o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o};LineCurve.prototype.fromJSON=function(o){return Curve.prototype.fromJSON.call(this,o),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this};function LineCurve3(o=new Vector3,e=new Vector3){Curve.call(this),this.type="LineCurve3",this.v1=o,this.v2=e}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=!0;LineCurve3.prototype.getPoint=function(o,e=new Vector3){const a=e;return o===1?a.copy(this.v2):(a.copy(this.v2).sub(this.v1),a.multiplyScalar(o).add(this.v1)),a};LineCurve3.prototype.getPointAt=function(o,e){return this.getPoint(o,e)};LineCurve3.prototype.copy=function(o){return Curve.prototype.copy.call(this,o),this.v1.copy(o.v1),this.v2.copy(o.v2),this};LineCurve3.prototype.toJSON=function(){const o=Curve.prototype.toJSON.call(this);return o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o};LineCurve3.prototype.fromJSON=function(o){return Curve.prototype.fromJSON.call(this,o),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this};function QuadraticBezierCurve(o=new Vector2,e=new Vector2,a=new Vector2){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=o,this.v1=e,this.v2=a}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;QuadraticBezierCurve.prototype.getPoint=function(o,e=new Vector2){const a=e,s=this.v0,c=this.v1,f=this.v2;return a.set(QuadraticBezier(o,s.x,c.x,f.x),QuadraticBezier(o,s.y,c.y,f.y)),a};QuadraticBezierCurve.prototype.copy=function(o){return Curve.prototype.copy.call(this,o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this};QuadraticBezierCurve.prototype.toJSON=function(){const o=Curve.prototype.toJSON.call(this);return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o};QuadraticBezierCurve.prototype.fromJSON=function(o){return Curve.prototype.fromJSON.call(this,o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this};function QuadraticBezierCurve3(o=new Vector3,e=new Vector3,a=new Vector3){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=o,this.v1=e,this.v2=a}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;QuadraticBezierCurve3.prototype.getPoint=function(o,e=new Vector3){const a=e,s=this.v0,c=this.v1,f=this.v2;return a.set(QuadraticBezier(o,s.x,c.x,f.x),QuadraticBezier(o,s.y,c.y,f.y),QuadraticBezier(o,s.z,c.z,f.z)),a};QuadraticBezierCurve3.prototype.copy=function(o){return Curve.prototype.copy.call(this,o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this};QuadraticBezierCurve3.prototype.toJSON=function(){const o=Curve.prototype.toJSON.call(this);return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o};QuadraticBezierCurve3.prototype.fromJSON=function(o){return Curve.prototype.fromJSON.call(this,o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this};function SplineCurve(o=[]){Curve.call(this),this.type="SplineCurve",this.points=o}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(o,e=new Vector2){const a=e,s=this.points,c=(s.length-1)*o,f=Math.floor(c),d=c-f,h=s[f===0?f:f-1],g=s[f],b=s[f>s.length-2?s.length-1:f+1],tt=s[f>s.length-3?s.length-1:f+2];return a.set(CatmullRom(d,h.x,g.x,b.x,tt.x),CatmullRom(d,h.y,g.y,b.y,tt.y)),a};SplineCurve.prototype.copy=function(o){Curve.prototype.copy.call(this,o),this.points=[];for(let e=0,a=o.points.length;e<a;e++){const s=o.points[e];this.points.push(s.clone())}return this};SplineCurve.prototype.toJSON=function(){const o=Curve.prototype.toJSON.call(this);o.points=[];for(let e=0,a=this.points.length;e<a;e++){const s=this.points[e];o.points.push(s.toArray())}return o};SplineCurve.prototype.fromJSON=function(o){Curve.prototype.fromJSON.call(this,o),this.points=[];for(let e=0,a=o.points.length;e<a;e++){const s=o.points[e];this.points.push(new Vector2().fromArray(s))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(o){this.curves.push(o)},closePath:function(){const o=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);o.equals(e)||this.curves.push(new LineCurve(e,o))},getPoint:function(o){const e=o*this.getLength(),a=this.getCurveLengths();let s=0;for(;s<a.length;){if(a[s]>=e){const c=a[s]-e,f=this.curves[s],d=f.getLength(),h=d===0?0:1-c/d;return f.getPointAt(h)}s++}return null},getLength:function(){const o=this.getCurveLengths();return o[o.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const o=[];let e=0;for(let a=0,s=this.curves.length;a<s;a++)e+=this.curves[a].getLength(),o.push(e);return this.cacheLengths=o,o},getSpacedPoints:function(o=40){const e=[];for(let a=0;a<=o;a++)e.push(this.getPoint(a/o));return this.autoClose&&e.push(e[0]),e},getPoints:function(o=12){const e=[];let a;for(let s=0,c=this.curves;s<c.length;s++){const f=c[s],d=f&&f.isEllipseCurve?o*2:f&&(f.isLineCurve||f.isLineCurve3)?1:f&&f.isSplineCurve?o*f.points.length:o,h=f.getPoints(d);for(let g=0;g<h.length;g++){const b=h[g];a&&a.equals(b)||(e.push(b),a=b)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(o){Curve.prototype.copy.call(this,o),this.curves=[];for(let e=0,a=o.curves.length;e<a;e++){const s=o.curves[e];this.curves.push(s.clone())}return this.autoClose=o.autoClose,this},toJSON:function(){const o=Curve.prototype.toJSON.call(this);o.autoClose=this.autoClose,o.curves=[];for(let e=0,a=this.curves.length;e<a;e++){const s=this.curves[e];o.curves.push(s.toJSON())}return o},fromJSON:function(o){Curve.prototype.fromJSON.call(this,o),this.autoClose=o.autoClose,this.curves=[];for(let e=0,a=o.curves.length;e<a;e++){const s=o.curves[e];this.curves.push(new Curves[s.type]().fromJSON(s))}return this}});function Path(o){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,o&&this.setFromPoints(o)}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(o){this.moveTo(o[0].x,o[0].y);for(let e=1,a=o.length;e<a;e++)this.lineTo(o[e].x,o[e].y);return this},moveTo:function(o,e){return this.currentPoint.set(o,e),this},lineTo:function(o,e){const a=new LineCurve(this.currentPoint.clone(),new Vector2(o,e));return this.curves.push(a),this.currentPoint.set(o,e),this},quadraticCurveTo:function(o,e,a,s){const c=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(o,e),new Vector2(a,s));return this.curves.push(c),this.currentPoint.set(a,s),this},bezierCurveTo:function(o,e,a,s,c,f){const d=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(o,e),new Vector2(a,s),new Vector2(c,f));return this.curves.push(d),this.currentPoint.set(c,f),this},splineThru:function(o){const e=[this.currentPoint.clone()].concat(o),a=new SplineCurve(e);return this.curves.push(a),this.currentPoint.copy(o[o.length-1]),this},arc:function(o,e,a,s,c,f){const d=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(o+d,e+h,a,s,c,f),this},absarc:function(o,e,a,s,c,f){return this.absellipse(o,e,a,a,s,c,f),this},ellipse:function(o,e,a,s,c,f,d,h){const g=this.currentPoint.x,b=this.currentPoint.y;return this.absellipse(o+g,e+b,a,s,c,f,d,h),this},absellipse:function(o,e,a,s,c,f,d,h){const g=new EllipseCurve(o,e,a,s,c,f,d,h);if(this.curves.length>0){const tt=g.getPoint(0);tt.equals(this.currentPoint)||this.lineTo(tt.x,tt.y)}this.curves.push(g);const b=g.getPoint(1);return this.currentPoint.copy(b),this},copy:function(o){return CurvePath.prototype.copy.call(this,o),this.currentPoint.copy(o.currentPoint),this},toJSON:function(){const o=CurvePath.prototype.toJSON.call(this);return o.currentPoint=this.currentPoint.toArray(),o},fromJSON:function(o){return CurvePath.prototype.fromJSON.call(this,o),this.currentPoint.fromArray(o.currentPoint),this}});function Shape(o){Path.call(this,o),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(o){const e=[];for(let a=0,s=this.holes.length;a<s;a++)e[a]=this.holes[a].getPoints(o);return e},extractPoints:function(o){return{shape:this.getPoints(o),holes:this.getPointsHoles(o)}},copy:function(o){Path.prototype.copy.call(this,o),this.holes=[];for(let e=0,a=o.holes.length;e<a;e++){const s=o.holes[e];this.holes.push(s.clone())}return this},toJSON:function(){const o=Path.prototype.toJSON.call(this);o.uuid=this.uuid,o.holes=[];for(let e=0,a=this.holes.length;e<a;e++){const s=this.holes[e];o.holes.push(s.toJSON())}return o},fromJSON:function(o){Path.prototype.fromJSON.call(this,o),this.uuid=o.uuid,this.holes=[];for(let e=0,a=o.holes.length;e<a;e++){const s=o.holes[e];this.holes.push(new Path().fromJSON(s))}return this}});function Light(o,e=1){Object3D.call(this),this.type="Light",this.color=new Color(o),this.intensity=e}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(o){return Object3D.prototype.copy.call(this,o),this.color.copy(o.color),this.intensity=o.intensity,this},toJSON:function(o){const e=Object3D.prototype.toJSON.call(this,o);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}});function HemisphereLight(o,e,a){Light.call(this,o,a),this.type="HemisphereLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(e)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(o){return Light.prototype.copy.call(this,o),this.groundColor.copy(o.groundColor),this}});function LightShadow(o){this.camera=o,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(o){const e=this.camera,a=this.matrix,s=this._projScreenMatrix,c=this._lookTarget,f=this._lightPositionWorld;f.setFromMatrixPosition(o.matrixWorld),e.position.copy(f),c.setFromMatrixPosition(o.target.matrixWorld),e.lookAt(c),e.updateMatrixWorld(),s.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s),a.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),a.multiply(e.projectionMatrix),a.multiply(e.matrixWorldInverse)},getViewport:function(o){return this._viewports[o]},getFrameExtents:function(){return this._frameExtents},copy:function(o){return this.camera=o.camera.clone(),this.bias=o.bias,this.radius=o.radius,this.mapSize.copy(o.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const o={};return this.bias!==0&&(o.bias=this.bias),this.normalBias!==0&&(o.normalBias=this.normalBias),this.radius!==1&&(o.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(o.mapSize=this.mapSize.toArray()),o.camera=this.camera.toJSON(!1).object,delete o.camera.matrix,o}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500)),this.focus=1}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(o){const e=this.camera,a=MathUtils.RAD2DEG*2*o.angle*this.focus,s=this.mapSize.width/this.mapSize.height,c=o.distance||e.far;(a!==e.fov||s!==e.aspect||c!==e.far)&&(e.fov=a,e.aspect=s,e.far=c,e.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,o)}});function SpotLight(o,e,a,s,c,f){Light.call(this,o,e),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(d){this.intensity=d/Math.PI}}),this.distance=a!==void 0?a:0,this.angle=s!==void 0?s:Math.PI/3,this.penumbra=c!==void 0?c:0,this.decay=f!==void 0?f:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(o){return Light.prototype.copy.call(this,o),this.distance=o.distance,this.angle=o.angle,this.penumbra=o.penumbra,this.decay=o.decay,this.target=o.target.clone(),this.shadow=o.shadow.clone(),this}});function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(o,e=0){const a=this.camera,s=this.matrix,c=this._lightPositionWorld,f=this._lookTarget,d=this._projScreenMatrix;c.setFromMatrixPosition(o.matrixWorld),a.position.copy(c),f.copy(a.position),f.add(this._cubeDirections[e]),a.up.copy(this._cubeUps[e]),a.lookAt(f),a.updateMatrixWorld(),s.makeTranslation(-c.x,-c.y,-c.z),d.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),this._frustum.setFromProjectionMatrix(d)}});function PointLight(o,e,a,s){Light.call(this,o,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(c){this.intensity=c/(4*Math.PI)}}),this.distance=a!==void 0?a:0,this.decay=s!==void 0?s:1,this.shadow=new PointLightShadow}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(o){return Light.prototype.copy.call(this,o),this.distance=o.distance,this.decay=o.decay,this.shadow=o.shadow.clone(),this}});function OrthographicCamera(o=-1,e=1,a=1,s=-1,c=.1,f=2e3){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=o,this.right=e,this.top=a,this.bottom=s,this.near=c,this.far=f,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(o,e){return Camera.prototype.copy.call(this,o,e),this.left=o.left,this.right=o.right,this.top=o.top,this.bottom=o.bottom,this.near=o.near,this.far=o.far,this.zoom=o.zoom,this.view=o.view===null?null:Object.assign({},o.view),this},setViewOffset:function(o,e,a,s,c,f){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=e,this.view.offsetX=a,this.view.offsetY=s,this.view.width=c,this.view.height=f,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const o=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),a=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let c=a-o,f=a+o,d=s+e,h=s-e;if(this.view!==null&&this.view.enabled){const g=(this.right-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/this.zoom;c+=g*this.view.offsetX,f=c+g*this.view.width,d-=b*this.view.offsetY,h=d-b*this.view.height}this.projectionMatrix.makeOrthographic(c,f,d,h,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(o){const e=Object3D.prototype.toJSON.call(this,o);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(o){LightShadow.prototype.updateMatrices.call(this,o)}});function DirectionalLight(o,e){Light.call(this,o,e),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(o){return Light.prototype.copy.call(this,o),this.target=o.target.clone(),this.shadow=o.shadow.clone(),this}});function AmbientLight(o,e){Light.call(this,o,e),this.type="AmbientLight"}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(o,e,a,s){Light.call(this,o,e),this.type="RectAreaLight",this.width=a!==void 0?a:10,this.height=s!==void 0?s:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(o){return Light.prototype.copy.call(this,o),this.width=o.width,this.height=o.height,this},toJSON:function(o){const e=Light.prototype.toJSON.call(this,o);return e.object.width=this.width,e.object.height=this.height,e}});class SphericalHarmonics3{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Vector3)}set(e){for(let a=0;a<9;a++)this.coefficients[a].copy(e[a]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,a){const s=e.x,c=e.y,f=e.z,d=this.coefficients;return a.copy(d[0]).multiplyScalar(.282095),a.addScaledVector(d[1],.488603*c),a.addScaledVector(d[2],.488603*f),a.addScaledVector(d[3],.488603*s),a.addScaledVector(d[4],1.092548*(s*c)),a.addScaledVector(d[5],1.092548*(c*f)),a.addScaledVector(d[6],.315392*(3*f*f-1)),a.addScaledVector(d[7],1.092548*(s*f)),a.addScaledVector(d[8],.546274*(s*s-c*c)),a}getIrradianceAt(e,a){const s=e.x,c=e.y,f=e.z,d=this.coefficients;return a.copy(d[0]).multiplyScalar(.886227),a.addScaledVector(d[1],2*.511664*c),a.addScaledVector(d[2],2*.511664*f),a.addScaledVector(d[3],2*.511664*s),a.addScaledVector(d[4],2*.429043*s*c),a.addScaledVector(d[5],2*.429043*c*f),a.addScaledVector(d[6],.743125*f*f-.247708),a.addScaledVector(d[7],2*.429043*s*f),a.addScaledVector(d[8],.429043*(s*s-c*c)),a}add(e){for(let a=0;a<9;a++)this.coefficients[a].add(e.coefficients[a]);return this}addScaledSH(e,a){for(let s=0;s<9;s++)this.coefficients[s].addScaledVector(e.coefficients[s],a);return this}scale(e){for(let a=0;a<9;a++)this.coefficients[a].multiplyScalar(e);return this}lerp(e,a){for(let s=0;s<9;s++)this.coefficients[s].lerp(e.coefficients[s],a);return this}equals(e){for(let a=0;a<9;a++)if(!this.coefficients[a].equals(e.coefficients[a]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,a=0){const s=this.coefficients;for(let c=0;c<9;c++)s[c].fromArray(e,a+c*3);return this}toArray(e=[],a=0){const s=this.coefficients;for(let c=0;c<9;c++)s[c].toArray(e,a+c*3);return e}static getBasisAt(e,a){const s=e.x,c=e.y,f=e.z;a[0]=.282095,a[1]=.488603*c,a[2]=.488603*f,a[3]=.488603*s,a[4]=1.092548*s*c,a[5]=1.092548*c*f,a[6]=.315392*(3*f*f-1),a[7]=1.092548*s*f,a[8]=.546274*(s*s-c*c)}}function LightProbe(o,e){Light.call(this,void 0,e),this.type="LightProbe",this.sh=o!==void 0?o:new SphericalHarmonics3}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(o){return Light.prototype.copy.call(this,o),this.sh.copy(o.sh),this},fromJSON:function(o){return this.intensity=o.intensity,this.sh.fromArray(o.sh),this},toJSON:function(o){const e=Light.prototype.toJSON.call(this,o);return e.object.sh=this.sh.toArray(),e}});function MaterialLoader(o){Loader.call(this,o),this.textures={}}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(o,e,a,s){const c=this,f=new FileLoader(c.manager);f.setPath(c.path),f.setRequestHeader(c.requestHeader),f.setWithCredentials(c.withCredentials),f.load(o,function(d){try{e(c.parse(JSON.parse(d)))}catch(h){s?s(h):console.error(h),c.manager.itemError(o)}},a,s)},parse:function(o){const e=this.textures;function a(c){return e[c]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",c),e[c]}const s=new Materials[o.type];if(o.uuid!==void 0&&(s.uuid=o.uuid),o.name!==void 0&&(s.name=o.name),o.color!==void 0&&s.color!==void 0&&s.color.setHex(o.color),o.roughness!==void 0&&(s.roughness=o.roughness),o.metalness!==void 0&&(s.metalness=o.metalness),o.sheen!==void 0&&(s.sheen=new Color().setHex(o.sheen)),o.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(o.emissive),o.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(o.specular),o.shininess!==void 0&&(s.shininess=o.shininess),o.clearcoat!==void 0&&(s.clearcoat=o.clearcoat),o.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=o.clearcoatRoughness),o.fog!==void 0&&(s.fog=o.fog),o.flatShading!==void 0&&(s.flatShading=o.flatShading),o.blending!==void 0&&(s.blending=o.blending),o.combine!==void 0&&(s.combine=o.combine),o.side!==void 0&&(s.side=o.side),o.opacity!==void 0&&(s.opacity=o.opacity),o.transparent!==void 0&&(s.transparent=o.transparent),o.alphaTest!==void 0&&(s.alphaTest=o.alphaTest),o.depthTest!==void 0&&(s.depthTest=o.depthTest),o.depthWrite!==void 0&&(s.depthWrite=o.depthWrite),o.colorWrite!==void 0&&(s.colorWrite=o.colorWrite),o.stencilWrite!==void 0&&(s.stencilWrite=o.stencilWrite),o.stencilWriteMask!==void 0&&(s.stencilWriteMask=o.stencilWriteMask),o.stencilFunc!==void 0&&(s.stencilFunc=o.stencilFunc),o.stencilRef!==void 0&&(s.stencilRef=o.stencilRef),o.stencilFuncMask!==void 0&&(s.stencilFuncMask=o.stencilFuncMask),o.stencilFail!==void 0&&(s.stencilFail=o.stencilFail),o.stencilZFail!==void 0&&(s.stencilZFail=o.stencilZFail),o.stencilZPass!==void 0&&(s.stencilZPass=o.stencilZPass),o.wireframe!==void 0&&(s.wireframe=o.wireframe),o.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=o.wireframeLinewidth),o.wireframeLinecap!==void 0&&(s.wireframeLinecap=o.wireframeLinecap),o.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=o.wireframeLinejoin),o.rotation!==void 0&&(s.rotation=o.rotation),o.linewidth!==1&&(s.linewidth=o.linewidth),o.dashSize!==void 0&&(s.dashSize=o.dashSize),o.gapSize!==void 0&&(s.gapSize=o.gapSize),o.scale!==void 0&&(s.scale=o.scale),o.polygonOffset!==void 0&&(s.polygonOffset=o.polygonOffset),o.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=o.polygonOffsetFactor),o.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=o.polygonOffsetUnits),o.skinning!==void 0&&(s.skinning=o.skinning),o.morphTargets!==void 0&&(s.morphTargets=o.morphTargets),o.morphNormals!==void 0&&(s.morphNormals=o.morphNormals),o.dithering!==void 0&&(s.dithering=o.dithering),o.vertexTangents!==void 0&&(s.vertexTangents=o.vertexTangents),o.visible!==void 0&&(s.visible=o.visible),o.toneMapped!==void 0&&(s.toneMapped=o.toneMapped),o.userData!==void 0&&(s.userData=o.userData),o.vertexColors!==void 0&&(typeof o.vertexColors=="number"?s.vertexColors=o.vertexColors>0:s.vertexColors=o.vertexColors),o.uniforms!==void 0)for(const c in o.uniforms){const f=o.uniforms[c];switch(s.uniforms[c]={},f.type){case"t":s.uniforms[c].value=a(f.value);break;case"c":s.uniforms[c].value=new Color().setHex(f.value);break;case"v2":s.uniforms[c].value=new Vector2().fromArray(f.value);break;case"v3":s.uniforms[c].value=new Vector3().fromArray(f.value);break;case"v4":s.uniforms[c].value=new Vector4().fromArray(f.value);break;case"m3":s.uniforms[c].value=new Matrix3().fromArray(f.value);break;case"m4":s.uniforms[c].value=new Matrix4().fromArray(f.value);break;default:s.uniforms[c].value=f.value}}if(o.defines!==void 0&&(s.defines=o.defines),o.vertexShader!==void 0&&(s.vertexShader=o.vertexShader),o.fragmentShader!==void 0&&(s.fragmentShader=o.fragmentShader),o.extensions!==void 0)for(const c in o.extensions)s.extensions[c]=o.extensions[c];if(o.shading!==void 0&&(s.flatShading=o.shading===1),o.size!==void 0&&(s.size=o.size),o.sizeAttenuation!==void 0&&(s.sizeAttenuation=o.sizeAttenuation),o.map!==void 0&&(s.map=a(o.map)),o.matcap!==void 0&&(s.matcap=a(o.matcap)),o.alphaMap!==void 0&&(s.alphaMap=a(o.alphaMap)),o.bumpMap!==void 0&&(s.bumpMap=a(o.bumpMap)),o.bumpScale!==void 0&&(s.bumpScale=o.bumpScale),o.normalMap!==void 0&&(s.normalMap=a(o.normalMap)),o.normalMapType!==void 0&&(s.normalMapType=o.normalMapType),o.normalScale!==void 0){let c=o.normalScale;Array.isArray(c)===!1&&(c=[c,c]),s.normalScale=new Vector2().fromArray(c)}return o.displacementMap!==void 0&&(s.displacementMap=a(o.displacementMap)),o.displacementScale!==void 0&&(s.displacementScale=o.displacementScale),o.displacementBias!==void 0&&(s.displacementBias=o.displacementBias),o.roughnessMap!==void 0&&(s.roughnessMap=a(o.roughnessMap)),o.metalnessMap!==void 0&&(s.metalnessMap=a(o.metalnessMap)),o.emissiveMap!==void 0&&(s.emissiveMap=a(o.emissiveMap)),o.emissiveIntensity!==void 0&&(s.emissiveIntensity=o.emissiveIntensity),o.specularMap!==void 0&&(s.specularMap=a(o.specularMap)),o.envMap!==void 0&&(s.envMap=a(o.envMap)),o.envMapIntensity!==void 0&&(s.envMapIntensity=o.envMapIntensity),o.reflectivity!==void 0&&(s.reflectivity=o.reflectivity),o.refractionRatio!==void 0&&(s.refractionRatio=o.refractionRatio),o.lightMap!==void 0&&(s.lightMap=a(o.lightMap)),o.lightMapIntensity!==void 0&&(s.lightMapIntensity=o.lightMapIntensity),o.aoMap!==void 0&&(s.aoMap=a(o.aoMap)),o.aoMapIntensity!==void 0&&(s.aoMapIntensity=o.aoMapIntensity),o.gradientMap!==void 0&&(s.gradientMap=a(o.gradientMap)),o.clearcoatMap!==void 0&&(s.clearcoatMap=a(o.clearcoatMap)),o.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=a(o.clearcoatRoughnessMap)),o.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=a(o.clearcoatNormalMap)),o.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Vector2().fromArray(o.clearcoatNormalScale)),o.transmission!==void 0&&(s.transmission=o.transmission),o.transmissionMap!==void 0&&(s.transmissionMap=a(o.transmissionMap)),s},setTextures:function(o){return this.textures=o,this}});const LoaderUtils={decodeText:function(o){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(o);let e="";for(let a=0,s=o.length;a<s;a++)e+=String.fromCharCode(o[a]);try{return decodeURIComponent(escape(e))}catch{return e}},extractUrlBase:function(o){const e=o.lastIndexOf("/");return e===-1?"./":o.substr(0,e+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(o){return BufferGeometry.prototype.copy.call(this,o),this.instanceCount=o.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const o=BufferGeometry.prototype.toJSON.call(this);return o.instanceCount=this.instanceCount,o.isInstancedBufferGeometry=!0,o}});function InstancedBufferAttribute(o,e,a,s){typeof a=="number"&&(s=a,a=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,o,e,a),this.meshPerAttribute=s||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(o){return BufferAttribute.prototype.copy.call(this,o),this.meshPerAttribute=o.meshPerAttribute,this},toJSON:function(){const o=BufferAttribute.prototype.toJSON.call(this);return o.meshPerAttribute=this.meshPerAttribute,o.isInstancedBufferAttribute=!0,o}});function BufferGeometryLoader(o){Loader.call(this,o)}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(o,e,a,s){const c=this,f=new FileLoader(c.manager);f.setPath(c.path),f.setRequestHeader(c.requestHeader),f.setWithCredentials(c.withCredentials),f.load(o,function(d){try{e(c.parse(JSON.parse(d)))}catch(h){s?s(h):console.error(h),c.manager.itemError(o)}},a,s)},parse:function(o){const e={},a={};function s(_e,nt){if(e[nt]!==void 0)return e[nt];const at=_e.interleavedBuffers[nt],it=c(_e,at.buffer),$=getTypedArray(at.type,it),et=new InterleavedBuffer($,at.stride);return et.uuid=at.uuid,e[nt]=et,et}function c(_e,nt){if(a[nt]!==void 0)return a[nt];const at=_e.arrayBuffers[nt],it=new Uint32Array(at).buffer;return a[nt]=it,it}const f=o.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,d=o.data.index;if(d!==void 0){const _e=getTypedArray(d.type,d.array);f.setIndex(new BufferAttribute(_e,1))}const h=o.data.attributes;for(const _e in h){const nt=h[_e];let rt;if(nt.isInterleavedBufferAttribute){const at=s(o.data,nt.data);rt=new InterleavedBufferAttribute(at,nt.itemSize,nt.offset,nt.normalized)}else{const at=getTypedArray(nt.type,nt.array),it=nt.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;rt=new it(at,nt.itemSize,nt.normalized)}nt.name!==void 0&&(rt.name=nt.name),f.setAttribute(_e,rt)}const g=o.data.morphAttributes;if(g)for(const _e in g){const nt=g[_e],rt=[];for(let at=0,it=nt.length;at<it;at++){const $=nt[at];let et;if($.isInterleavedBufferAttribute){const st=s(o.data,$.data);et=new InterleavedBufferAttribute(st,$.itemSize,$.offset,$.normalized)}else{const st=getTypedArray($.type,$.array);et=new BufferAttribute(st,$.itemSize,$.normalized)}$.name!==void 0&&(et.name=$.name),rt.push(et)}f.morphAttributes[_e]=rt}o.data.morphTargetsRelative&&(f.morphTargetsRelative=!0);const tt=o.data.groups||o.data.drawcalls||o.data.offsets;if(tt!==void 0)for(let _e=0,nt=tt.length;_e!==nt;++_e){const rt=tt[_e];f.addGroup(rt.start,rt.count,rt.materialIndex)}const j=o.data.boundingSphere;if(j!==void 0){const _e=new Vector3;j.center!==void 0&&_e.fromArray(j.center),f.boundingSphere=new Sphere(_e,j.radius)}return o.name&&(f.name=o.name),o.userData&&(f.userData=o.userData),f}});class ObjectLoader extends Loader{constructor(e){super(e)}load(e,a,s,c){const f=this,d=this.path===""?LoaderUtils.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||d;const h=new FileLoader(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(g){let b=null;try{b=JSON.parse(g)}catch(j){c!==void 0&&c(j),console.error("THREE:ObjectLoader: Can't parse "+e+".",j.message);return}const tt=b.metadata;if(tt===void 0||tt.type===void 0||tt.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}f.parse(b,a)},s,c)}parse(e,a){const s=this.parseAnimations(e.animations),c=this.parseShapes(e.shapes),f=this.parseGeometries(e.geometries,c),d=this.parseImages(e.images,function(){a!==void 0&&a(b)}),h=this.parseTextures(e.textures,d),g=this.parseMaterials(e.materials,h),b=this.parseObject(e.object,f,g,s),tt=this.parseSkeletons(e.skeletons,b);if(this.bindSkeletons(b,tt),a!==void 0){let j=!1;for(const _e in d)if(d[_e]instanceof HTMLImageElement){j=!0;break}j===!1&&a(b)}return b}parseShapes(e){const a={};if(e!==void 0)for(let s=0,c=e.length;s<c;s++){const f=new Shape().fromJSON(e[s]);a[f.uuid]=f}return a}parseSkeletons(e,a){const s={},c={};if(a.traverse(function(f){f.isBone&&(c[f.uuid]=f)}),e!==void 0)for(let f=0,d=e.length;f<d;f++){const h=new Skeleton().fromJSON(e[f],c);s[h.uuid]=h}return s}parseGeometries(e,a){const s={};let c;if(e!==void 0){const f=new BufferGeometryLoader;for(let d=0,h=e.length;d<h;d++){let g;const b=e[d];switch(b.type){case"PlaneGeometry":case"PlaneBufferGeometry":g=new Geometries[b.type](b.width,b.height,b.widthSegments,b.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":g=new Geometries[b.type](b.width,b.height,b.depth,b.widthSegments,b.heightSegments,b.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":g=new Geometries[b.type](b.radius,b.segments,b.thetaStart,b.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":g=new Geometries[b.type](b.radiusTop,b.radiusBottom,b.height,b.radialSegments,b.heightSegments,b.openEnded,b.thetaStart,b.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":g=new Geometries[b.type](b.radius,b.height,b.radialSegments,b.heightSegments,b.openEnded,b.thetaStart,b.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":g=new Geometries[b.type](b.radius,b.widthSegments,b.heightSegments,b.phiStart,b.phiLength,b.thetaStart,b.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":g=new Geometries[b.type](b.radius,b.detail);break;case"RingGeometry":case"RingBufferGeometry":g=new Geometries[b.type](b.innerRadius,b.outerRadius,b.thetaSegments,b.phiSegments,b.thetaStart,b.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":g=new Geometries[b.type](b.radius,b.tube,b.radialSegments,b.tubularSegments,b.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":g=new Geometries[b.type](b.radius,b.tube,b.tubularSegments,b.radialSegments,b.p,b.q);break;case"TubeGeometry":case"TubeBufferGeometry":g=new Geometries[b.type](new Curves[b.path.type]().fromJSON(b.path),b.tubularSegments,b.radius,b.radialSegments,b.closed);break;case"LatheGeometry":case"LatheBufferGeometry":g=new Geometries[b.type](b.points,b.segments,b.phiStart,b.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":g=new Geometries[b.type](b.vertices,b.indices,b.radius,b.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":c=[];for(let j=0,_e=b.shapes.length;j<_e;j++){const nt=a[b.shapes[j]];c.push(nt)}g=new Geometries[b.type](c,b.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":c=[];for(let j=0,_e=b.shapes.length;j<_e;j++){const nt=a[b.shapes[j]];c.push(nt)}const tt=b.options.extrudePath;tt!==void 0&&(b.options.extrudePath=new Curves[tt.type]().fromJSON(tt)),g=new Geometries[b.type](c,b.options);break;case"BufferGeometry":case"InstancedBufferGeometry":g=f.parse(b);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+b.type+'"');continue}g.uuid=b.uuid,b.name!==void 0&&(g.name=b.name),g.isBufferGeometry===!0&&b.userData!==void 0&&(g.userData=b.userData),s[b.uuid]=g}}return s}parseMaterials(e,a){const s={},c={};if(e!==void 0){const f=new MaterialLoader;f.setTextures(a);for(let d=0,h=e.length;d<h;d++){const g=e[d];if(g.type==="MultiMaterial"){const b=[];for(let tt=0;tt<g.materials.length;tt++){const j=g.materials[tt];s[j.uuid]===void 0&&(s[j.uuid]=f.parse(j)),b.push(s[j.uuid])}c[g.uuid]=b}else s[g.uuid]===void 0&&(s[g.uuid]=f.parse(g)),c[g.uuid]=s[g.uuid]}}return c}parseAnimations(e){const a={};if(e!==void 0)for(let s=0;s<e.length;s++){const c=e[s],f=AnimationClip.parse(c);a[f.uuid]=f}return a}parseImages(e,a){const s=this,c={};let f;function d(g){return s.manager.itemStart(g),f.load(g,function(){s.manager.itemEnd(g)},void 0,function(){s.manager.itemError(g),s.manager.itemEnd(g)})}function h(g){if(typeof g=="string"){const b=g,tt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(b)?b:s.resourcePath+b;return d(tt)}else return g.data?{data:getTypedArray(g.type,g.data),width:g.width,height:g.height}:null}if(e!==void 0&&e.length>0){const g=new LoadingManager(a);f=new ImageLoader(g),f.setCrossOrigin(this.crossOrigin);for(let b=0,tt=e.length;b<tt;b++){const j=e[b],_e=j.url;if(Array.isArray(_e)){c[j.uuid]=[];for(let nt=0,rt=_e.length;nt<rt;nt++){const at=_e[nt],it=h(at);it!==null&&(it instanceof HTMLImageElement?c[j.uuid].push(it):c[j.uuid].push(new DataTexture(it.data,it.width,it.height)))}}else{const nt=h(j.url);nt!==null&&(c[j.uuid]=nt)}}}return c}parseTextures(e,a){function s(f,d){return typeof f=="number"?f:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",f),d[f])}const c={};if(e!==void 0)for(let f=0,d=e.length;f<d;f++){const h=e[f];h.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid),a[h.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",h.image);let g;const b=a[h.image];Array.isArray(b)?(g=new CubeTexture(b),b.length===6&&(g.needsUpdate=!0)):(b&&b.data?g=new DataTexture(b.data,b.width,b.height):g=new Texture(b),b&&(g.needsUpdate=!0)),g.uuid=h.uuid,h.name!==void 0&&(g.name=h.name),h.mapping!==void 0&&(g.mapping=s(h.mapping,TEXTURE_MAPPING)),h.offset!==void 0&&g.offset.fromArray(h.offset),h.repeat!==void 0&&g.repeat.fromArray(h.repeat),h.center!==void 0&&g.center.fromArray(h.center),h.rotation!==void 0&&(g.rotation=h.rotation),h.wrap!==void 0&&(g.wrapS=s(h.wrap[0],TEXTURE_WRAPPING),g.wrapT=s(h.wrap[1],TEXTURE_WRAPPING)),h.format!==void 0&&(g.format=h.format),h.type!==void 0&&(g.type=h.type),h.encoding!==void 0&&(g.encoding=h.encoding),h.minFilter!==void 0&&(g.minFilter=s(h.minFilter,TEXTURE_FILTER)),h.magFilter!==void 0&&(g.magFilter=s(h.magFilter,TEXTURE_FILTER)),h.anisotropy!==void 0&&(g.anisotropy=h.anisotropy),h.flipY!==void 0&&(g.flipY=h.flipY),h.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=h.premultiplyAlpha),h.unpackAlignment!==void 0&&(g.unpackAlignment=h.unpackAlignment),c[h.uuid]=g}return c}parseObject(e,a,s,c){let f;function d(tt){return a[tt]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",tt),a[tt]}function h(tt){if(tt!==void 0){if(Array.isArray(tt)){const j=[];for(let _e=0,nt=tt.length;_e<nt;_e++){const rt=tt[_e];s[rt]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",rt),j.push(s[rt])}return j}return s[tt]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",tt),s[tt]}}let g,b;switch(e.type){case"Scene":f=new Scene,e.background!==void 0&&Number.isInteger(e.background)&&(f.background=new Color(e.background)),e.fog!==void 0&&(e.fog.type==="Fog"?f.fog=new Fog(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(f.fog=new FogExp2(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":f=new PerspectiveCamera(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(f.focus=e.focus),e.zoom!==void 0&&(f.zoom=e.zoom),e.filmGauge!==void 0&&(f.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(f.filmOffset=e.filmOffset),e.view!==void 0&&(f.view=Object.assign({},e.view));break;case"OrthographicCamera":f=new OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(f.zoom=e.zoom),e.view!==void 0&&(f.view=Object.assign({},e.view));break;case"AmbientLight":f=new AmbientLight(e.color,e.intensity);break;case"DirectionalLight":f=new DirectionalLight(e.color,e.intensity);break;case"PointLight":f=new PointLight(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":f=new RectAreaLight(e.color,e.intensity,e.width,e.height);break;case"SpotLight":f=new SpotLight(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":f=new HemisphereLight(e.color,e.groundColor,e.intensity);break;case"LightProbe":f=new LightProbe().fromJSON(e);break;case"SkinnedMesh":g=d(e.geometry),b=h(e.material),f=new SkinnedMesh(g,b),e.bindMode!==void 0&&(f.bindMode=e.bindMode),e.bindMatrix!==void 0&&f.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(f.skeleton=e.skeleton);break;case"Mesh":g=d(e.geometry),b=h(e.material),f=new Mesh(g,b);break;case"InstancedMesh":g=d(e.geometry),b=h(e.material);const tt=e.count,j=e.instanceMatrix;f=new InstancedMesh(g,b,tt),f.instanceMatrix=new BufferAttribute(new Float32Array(j.array),16);break;case"LOD":f=new LOD;break;case"Line":f=new Line(d(e.geometry),h(e.material));break;case"LineLoop":f=new LineLoop(d(e.geometry),h(e.material));break;case"LineSegments":f=new LineSegments(d(e.geometry),h(e.material));break;case"PointCloud":case"Points":f=new Points(d(e.geometry),h(e.material));break;case"Sprite":f=new Sprite(h(e.material));break;case"Group":f=new Group;break;case"Bone":f=new Bone;break;default:f=new Object3D}if(f.uuid=e.uuid,e.name!==void 0&&(f.name=e.name),e.matrix!==void 0?(f.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(f.matrixAutoUpdate=e.matrixAutoUpdate),f.matrixAutoUpdate&&f.matrix.decompose(f.position,f.quaternion,f.scale)):(e.position!==void 0&&f.position.fromArray(e.position),e.rotation!==void 0&&f.rotation.fromArray(e.rotation),e.quaternion!==void 0&&f.quaternion.fromArray(e.quaternion),e.scale!==void 0&&f.scale.fromArray(e.scale)),e.castShadow!==void 0&&(f.castShadow=e.castShadow),e.receiveShadow!==void 0&&(f.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(f.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(f.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(f.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&f.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(f.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(f.visible=e.visible),e.frustumCulled!==void 0&&(f.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(f.renderOrder=e.renderOrder),e.userData!==void 0&&(f.userData=e.userData),e.layers!==void 0&&(f.layers.mask=e.layers),e.children!==void 0){const tt=e.children;for(let j=0;j<tt.length;j++)f.add(this.parseObject(tt[j],a,s,c))}if(e.animations!==void 0){const tt=e.animations;for(let j=0;j<tt.length;j++){const _e=tt[j];f.animations.push(c[_e])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(f.autoUpdate=e.autoUpdate);const tt=e.levels;for(let j=0;j<tt.length;j++){const _e=tt[j],nt=f.getObjectByProperty("uuid",_e.object);nt!==void 0&&f.addLevel(nt,_e.distance)}}return f}bindSkeletons(e,a){Object.keys(a).length!==0&&e.traverse(function(s){if(s.isSkinnedMesh===!0&&s.skeleton!==void 0){const c=a[s.skeleton];c===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",s.skeleton):s.bind(c,s.bindMatrix)}})}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};function ImageBitmapLoader(o){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,o),this.options={premultiplyAlpha:"none"}}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(o,e,a,s){o===void 0&&(o=""),this.path!==void 0&&(o=this.path+o),o=this.manager.resolveURL(o);const c=this,f=Cache.get(o);if(f!==void 0)return c.manager.itemStart(o),setTimeout(function(){e&&e(f),c.manager.itemEnd(o)},0),f;const d={};d.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",fetch(o,d).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,c.options)}).then(function(h){Cache.add(o,h),e&&e(h),c.manager.itemEnd(o)}).catch(function(h){s&&s(h),c.manager.itemError(o),c.manager.itemEnd(o)}),c.manager.itemStart(o)}});function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(o,e){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(o,e),this},lineTo:function(o,e){return this.currentPath.lineTo(o,e),this},quadraticCurveTo:function(o,e,a,s){return this.currentPath.quadraticCurveTo(o,e,a,s),this},bezierCurveTo:function(o,e,a,s,c,f){return this.currentPath.bezierCurveTo(o,e,a,s,c,f),this},splineThru:function(o){return this.currentPath.splineThru(o),this},toShapes:function(o,e){function a($){const et=[];for(let st=0,lt=$.length;st<lt;st++){const ct=$[st],ut=new Shape;ut.curves=ct.curves,et.push(ut)}return et}function s($,et){const st=et.length;let lt=!1;for(let ct=st-1,ut=0;ut<st;ct=ut++){let ht=et[ct],pt=et[ut],mt=pt.x-ht.x,bt=pt.y-ht.y;if(Math.abs(bt)>Number.EPSILON){if(bt<0&&(ht=et[ut],mt=-mt,pt=et[ct],bt=-bt),$.y<ht.y||$.y>pt.y)continue;if($.y===ht.y){if($.x===ht.x)return!0}else{const St=bt*($.x-ht.x)-mt*($.y-ht.y);if(St===0)return!0;if(St<0)continue;lt=!lt}}else{if($.y!==ht.y)continue;if(pt.x<=$.x&&$.x<=ht.x||ht.x<=$.x&&$.x<=pt.x)return!0}}return lt}const c=ShapeUtils.isClockWise,f=this.subPaths;if(f.length===0)return[];if(e===!0)return a(f);let d,h,g;const b=[];if(f.length===1)return h=f[0],g=new Shape,g.curves=h.curves,b.push(g),b;let tt=!c(f[0].getPoints());tt=o?!tt:tt;const j=[],_e=[];let nt=[],rt=0,at;_e[rt]=void 0,nt[rt]=[];for(let $=0,et=f.length;$<et;$++)h=f[$],at=h.getPoints(),d=c(at),d=o?!d:d,d?(!tt&&_e[rt]&&rt++,_e[rt]={s:new Shape,p:at},_e[rt].s.curves=h.curves,tt&&rt++,nt[rt]=[]):nt[rt].push({h,p:at[0]});if(!_e[0])return a(f);if(_e.length>1){let $=!1;const et=[];for(let st=0,lt=_e.length;st<lt;st++)j[st]=[];for(let st=0,lt=_e.length;st<lt;st++){const ct=nt[st];for(let ut=0;ut<ct.length;ut++){const ht=ct[ut];let pt=!0;for(let mt=0;mt<_e.length;mt++)s(ht.p,_e[mt].p)&&(st!==mt&&et.push({froms:st,tos:mt,hole:ut}),pt?(pt=!1,j[mt].push(ht)):$=!0);pt&&j[st].push(ht)}}et.length>0&&($||(nt=j))}let it;for(let $=0,et=_e.length;$<et;$++){g=_e[$].s,b.push(g),it=nt[$];for(let st=0,lt=it.length;st<lt;st++)g.holes.push(it[st].h)}return b}});class Font{constructor(e){Object.defineProperty(this,"isFont",{value:!0}),this.type="Font",this.data=e}generateShapes(e,a=100){const s=[],c=createPaths(e,a,this.data);for(let f=0,d=c.length;f<d;f++)Array.prototype.push.apply(s,c[f].toShapes());return s}}function createPaths(o,e,a){const s=Array.from?Array.from(o):String(o).split(""),c=e/a.resolution,f=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*c,d=[];let h=0,g=0;for(let b=0;b<s.length;b++){const tt=s[b];if(tt===`
`)h=0,g-=f;else{const j=createPath(tt,c,h,g,a);h+=j.offsetX,d.push(j.path)}}return d}function createPath(o,e,a,s,c){const f=c.glyphs[o]||c.glyphs["?"];if(!f){console.error('THREE.Font: character "'+o+'" does not exists in font family '+c.familyName+".");return}const d=new ShapePath;let h,g,b,tt,j,_e,nt,rt;if(f.o){const at=f._cachedOutline||(f._cachedOutline=f.o.split(" "));for(let it=0,$=at.length;it<$;)switch(at[it++]){case"m":h=at[it++]*e+a,g=at[it++]*e+s,d.moveTo(h,g);break;case"l":h=at[it++]*e+a,g=at[it++]*e+s,d.lineTo(h,g);break;case"q":b=at[it++]*e+a,tt=at[it++]*e+s,j=at[it++]*e+a,_e=at[it++]*e+s,d.quadraticCurveTo(j,_e,b,tt);break;case"b":b=at[it++]*e+a,tt=at[it++]*e+s,j=at[it++]*e+a,_e=at[it++]*e+s,nt=at[it++]*e+a,rt=at[it++]*e+s,d.bezierCurveTo(j,_e,nt,rt,b,tt);break}}return{offsetX:f.ha*e,path:d}}function FontLoader(o){Loader.call(this,o)}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(o,e,a,s){const c=this,f=new FileLoader(this.manager);f.setPath(this.path),f.setRequestHeader(this.requestHeader),f.setWithCredentials(c.withCredentials),f.load(o,function(d){let h;try{h=JSON.parse(d)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),h=JSON.parse(d.substring(65,d.length-2))}const g=c.parse(h);e&&e(g)},a,s)},parse:function(o){return new Font(o)}});let _context;const AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(o){_context=o}};function AudioLoader(o){Loader.call(this,o)}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(o,e,a,s){const c=this,f=new FileLoader(c.manager);f.setResponseType("arraybuffer"),f.setPath(c.path),f.setRequestHeader(c.requestHeader),f.setWithCredentials(c.withCredentials),f.load(o,function(d){try{const h=d.slice(0);AudioContext.getContext().decodeAudioData(h,function(b){e(b)})}catch(h){s?s(h):console.error(h),c.manager.itemError(o)}},a,s)}});function HemisphereLightProbe(o,e,a){LightProbe.call(this,void 0,a);const s=new Color().set(o),c=new Color().set(e),f=new Vector3(s.r,s.g,s.b),d=new Vector3(c.r,c.g,c.b),h=Math.sqrt(Math.PI),g=h*Math.sqrt(.75);this.sh.coefficients[0].copy(f).add(d).multiplyScalar(h),this.sh.coefficients[1].copy(f).sub(d).multiplyScalar(g)}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(o){return LightProbe.prototype.copy.call(this,o),this},toJSON:function(o){return LightProbe.prototype.toJSON.call(this,o)}});function AmbientLightProbe(o,e){LightProbe.call(this,void 0,e);const a=new Color().set(o);this.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI))}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(o){return LightProbe.prototype.copy.call(this,o),this},toJSON:function(o){return LightProbe.prototype.toJSON.call(this,o)}});const _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(StereoCamera.prototype,{update:function(o){const e=this._cache;if(e.focus!==o.focus||e.fov!==o.fov||e.aspect!==o.aspect*this.aspect||e.near!==o.near||e.far!==o.far||e.zoom!==o.zoom||e.eyeSep!==this.eyeSep){e.focus=o.focus,e.fov=o.fov,e.aspect=o.aspect*this.aspect,e.near=o.near,e.far=o.far,e.zoom=o.zoom,e.eyeSep=this.eyeSep;const s=o.projectionMatrix.clone(),c=e.eyeSep/2,f=c*e.near/e.focus,d=e.near*Math.tan(MathUtils.DEG2RAD*e.fov*.5)/e.zoom;let h,g;_eyeLeft.elements[12]=-c,_eyeRight.elements[12]=c,h=-d*e.aspect+f,g=d*e.aspect+f,s.elements[0]=2*e.near/(g-h),s.elements[8]=(g+h)/(g-h),this.cameraL.projectionMatrix.copy(s),h=-d*e.aspect-f,g=d*e.aspect-f,s.elements[0]=2*e.near/(g-h),s.elements[8]=(g+h)/(g-h),this.cameraR.projectionMatrix.copy(s)}this.cameraL.matrixWorld.copy(o.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(o.matrixWorld).multiply(_eyeRight)}});class Clock{constructor(e){this.autoStart=e!==void 0?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const a=now();e=(a-this.oldTime)/1e3,this.oldTime=a,this.elapsedTime+=e}return e}}function now(){return(typeof performance=="undefined"?Date:performance).now()}const _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const a=this.context.listener,s=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),a.positionX){const c=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(_position$2.x,c),a.positionY.linearRampToValueAtTime(_position$2.y,c),a.positionZ.linearRampToValueAtTime(_position$2.z,c),a.forwardX.linearRampToValueAtTime(_orientation.x,c),a.forwardY.linearRampToValueAtTime(_orientation.y,c),a.forwardZ.linearRampToValueAtTime(_orientation.z,c),a.upX.linearRampToValueAtTime(s.x,c),a.upY.linearRampToValueAtTime(s.y,c),a.upZ.linearRampToValueAtTime(s.z,c)}else a.setPosition(_position$2.x,_position$2.y,_position$2.z),a.setOrientation(_orientation.x,_orientation.y,_orientation.z,s.x,s.y,s.z)}}class Audio extends Object3D{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const a=this.context.createBufferSource();return a.buffer=this.buffer,a.loop=this.loop,a.loopStart=this.loopStart,a.loopEnd=this.loopEnd,a.onended=this.onEnded.bind(this),a.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=a,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,a=this.filters.length;e<a;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,a=this.filters.length;e<a;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;class PositionalAudio extends Audio{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,a,s){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=a,this.panner.coneOuterGain=s,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);const a=this.panner;if(a.positionX){const s=this.context.currentTime+this.listener.timeDelta;a.positionX.linearRampToValueAtTime(_position$3.x,s),a.positionY.linearRampToValueAtTime(_position$3.y,s),a.positionZ.linearRampToValueAtTime(_position$3.z,s),a.orientationX.linearRampToValueAtTime(_orientation$1.x,s),a.orientationY.linearRampToValueAtTime(_orientation$1.y,s),a.orientationZ.linearRampToValueAtTime(_orientation$1.z,s)}else a.setPosition(_position$3.x,_position$3.y,_position$3.z),a.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}class AudioAnalyser{constructor(e,a=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=a,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const a=this.getFrequencyData();for(let s=0;s<a.length;s++)e+=a[s];return e/a.length}}function PropertyMixer(o,e,a){this.binding=o,this.valueSize=a;let s,c,f;switch(e){case"quaternion":s=this._slerp,c=this._slerpAdditive,f=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(a*6),this._workIndex=5;break;case"string":case"bool":s=this._select,c=this._select,f=this._setAdditiveIdentityOther,this.buffer=new Array(a*5);break;default:s=this._lerp,c=this._lerpAdditive,f=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(a*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=c,this._setIdentity=f,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(o,e){const a=this.buffer,s=this.valueSize,c=o*s+s;let f=this.cumulativeWeight;if(f===0){for(let d=0;d!==s;++d)a[c+d]=a[d];f=e}else{f+=e;const d=e/f;this._mixBufferRegion(a,c,0,d,s)}this.cumulativeWeight=f},accumulateAdditive:function(o){const e=this.buffer,a=this.valueSize,s=a*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,s,0,o,a),this.cumulativeWeightAdditive+=o},apply:function(o){const e=this.valueSize,a=this.buffer,s=o*e+e,c=this.cumulativeWeight,f=this.cumulativeWeightAdditive,d=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,c<1){const h=e*this._origIndex;this._mixBufferRegion(a,s,h,1-c,e)}f>0&&this._mixBufferRegionAdditive(a,s,this._addIndex*e,1,e);for(let h=e,g=e+e;h!==g;++h)if(a[h]!==a[h+e]){d.setValue(a,s);break}},saveOriginalState:function(){const o=this.binding,e=this.buffer,a=this.valueSize,s=a*this._origIndex;o.getValue(e,s);for(let c=a,f=s;c!==f;++c)e[c]=e[s+c%a];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const o=this.valueSize*3;this.binding.setValue(this.buffer,o)},_setAdditiveIdentityNumeric:function(){const o=this._addIndex*this.valueSize,e=o+this.valueSize;for(let a=o;a<e;a++)this.buffer[a]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const o=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let a=0;a<this.valueSize;a++)this.buffer[e+a]=this.buffer[o+a]},_select:function(o,e,a,s,c){if(s>=.5)for(let f=0;f!==c;++f)o[e+f]=o[a+f]},_slerp:function(o,e,a,s){Quaternion.slerpFlat(o,e,o,e,o,a,s)},_slerpAdditive:function(o,e,a,s,c){const f=this._workIndex*c;Quaternion.multiplyQuaternionsFlat(o,f,o,e,o,a),Quaternion.slerpFlat(o,e,o,e,o,f,s)},_lerp:function(o,e,a,s,c){const f=1-s;for(let d=0;d!==c;++d){const h=e+d;o[h]=o[h]*f+o[a+d]*s}},_lerpAdditive:function(o,e,a,s,c){for(let f=0;f!==c;++f){const d=e+f;o[d]=o[d]+o[a+f]*s}}});const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(o,e,a){const s=a||PropertyBinding.parseTrackName(e);this._targetGroup=o,this._bindings=o.subscribe_(e,s)}Object.assign(Composite.prototype,{getValue:function(o,e){this.bind();const a=this._targetGroup.nCachedObjects_,s=this._bindings[a];s!==void 0&&s.getValue(o,e)},setValue:function(o,e){const a=this._bindings;for(let s=this._targetGroup.nCachedObjects_,c=a.length;s!==c;++s)a[s].setValue(o,e)},bind:function(){const o=this._bindings;for(let e=this._targetGroup.nCachedObjects_,a=o.length;e!==a;++e)o[e].bind()},unbind:function(){const o=this._bindings;for(let e=this._targetGroup.nCachedObjects_,a=o.length;e!==a;++e)o[e].unbind()}});function PropertyBinding(o,e,a){this.path=e,this.parsedPath=a||PropertyBinding.parseTrackName(e),this.node=PropertyBinding.findNode(o,this.parsedPath.nodeName)||o,this.rootNode=o}Object.assign(PropertyBinding,{Composite,create:function(o,e,a){return o&&o.isAnimationObjectGroup?new PropertyBinding.Composite(o,e,a):new PropertyBinding(o,e,a)},sanitizeNodeName:function(o){return o.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(o){const e=_trackRe.exec(o);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+o);const a={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},s=a.nodeName&&a.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const c=a.nodeName.substring(s+1);_supportedObjectNames.indexOf(c)!==-1&&(a.nodeName=a.nodeName.substring(0,s),a.objectName=c)}if(a.propertyName===null||a.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+o);return a},findNode:function(o,e){if(!e||e===""||e==="."||e===-1||e===o.name||e===o.uuid)return o;if(o.skeleton){const a=o.skeleton.getBoneByName(e);if(a!==void 0)return a}if(o.children){const a=function(c){for(let f=0;f<c.length;f++){const d=c[f];if(d.name===e||d.uuid===e)return d;const h=a(d.children);if(h)return h}return null},s=a(o.children);if(s)return s}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,a){e[a]=this.node[this.propertyName]},function(e,a){const s=this.resolvedProperty;for(let c=0,f=s.length;c!==f;++c)e[a++]=s[c]},function(e,a){e[a]=this.resolvedProperty[this.propertyIndex]},function(e,a){this.resolvedProperty.toArray(e,a)}],SetterByBindingTypeAndVersioning:[[function(e,a){this.targetObject[this.propertyName]=e[a]},function(e,a){this.targetObject[this.propertyName]=e[a],this.targetObject.needsUpdate=!0},function(e,a){this.targetObject[this.propertyName]=e[a],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,a){const s=this.resolvedProperty;for(let c=0,f=s.length;c!==f;++c)s[c]=e[a++]},function(e,a){const s=this.resolvedProperty;for(let c=0,f=s.length;c!==f;++c)s[c]=e[a++];this.targetObject.needsUpdate=!0},function(e,a){const s=this.resolvedProperty;for(let c=0,f=s.length;c!==f;++c)s[c]=e[a++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,a){this.resolvedProperty[this.propertyIndex]=e[a]},function(e,a){this.resolvedProperty[this.propertyIndex]=e[a],this.targetObject.needsUpdate=!0},function(e,a){this.resolvedProperty[this.propertyIndex]=e[a],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,a){this.resolvedProperty.fromArray(e,a)},function(e,a){this.resolvedProperty.fromArray(e,a),this.targetObject.needsUpdate=!0},function(e,a){this.resolvedProperty.fromArray(e,a),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,a){this.bind(),this.getValue(e,a)},setValue:function(e,a){this.bind(),this.setValue(e,a)},bind:function(){let o=this.node;const e=this.parsedPath,a=e.objectName,s=e.propertyName;let c=e.propertyIndex;if(o||(o=PropertyBinding.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=o),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!o){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(a){let g=e.objectIndex;switch(a){case"materials":if(!o.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!o.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}o=o.material.materials;break;case"bones":if(!o.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}o=o.skeleton.bones;for(let b=0;b<o.length;b++)if(o[b].name===g){g=b;break}break;default:if(o[a]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}o=o[a]}if(g!==void 0){if(o[g]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,o);return}o=o[g]}}const f=o[s];if(f===void 0){const g=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+g+"."+s+" but it wasn't found.",o);return}let d=this.Versioning.None;this.targetObject=o,o.needsUpdate!==void 0?d=this.Versioning.NeedsUpdate:o.matrixWorldNeedsUpdate!==void 0&&(d=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(c!==void 0){if(s==="morphTargetInfluences"){if(!o.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(o.geometry.isBufferGeometry){if(!o.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}o.morphTargetDictionary[c]!==void 0&&(c=o.morphTargetDictionary[c])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}h=this.BindingType.ArrayElement,this.resolvedProperty=f,this.propertyIndex=c}else f.fromArray!==void 0&&f.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(h=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][d]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const o={};this._indicesByUUID=o;for(let a=0,s=arguments.length;a!==s;++a)o[arguments[a].uuid]=a;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){const o=this._objects,e=this._indicesByUUID,a=this._paths,s=this._parsedPaths,c=this._bindings,f=c.length;let d,h=o.length,g=this.nCachedObjects_;for(let b=0,tt=arguments.length;b!==tt;++b){const j=arguments[b],_e=j.uuid;let nt=e[_e];if(nt===void 0){nt=h++,e[_e]=nt,o.push(j);for(let rt=0,at=f;rt!==at;++rt)c[rt].push(new PropertyBinding(j,a[rt],s[rt]))}else if(nt<g){d=o[nt];const rt=--g,at=o[rt];e[at.uuid]=nt,o[nt]=at,e[_e]=rt,o[rt]=j;for(let it=0,$=f;it!==$;++it){const et=c[it],st=et[rt];let lt=et[nt];et[nt]=st,lt===void 0&&(lt=new PropertyBinding(j,a[it],s[it])),et[rt]=lt}}else o[nt]!==d&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=g},remove:function(){const o=this._objects,e=this._indicesByUUID,a=this._bindings,s=a.length;let c=this.nCachedObjects_;for(let f=0,d=arguments.length;f!==d;++f){const h=arguments[f],g=h.uuid,b=e[g];if(b!==void 0&&b>=c){const tt=c++,j=o[tt];e[j.uuid]=b,o[b]=j,e[g]=tt,o[tt]=h;for(let _e=0,nt=s;_e!==nt;++_e){const rt=a[_e],at=rt[tt],it=rt[b];rt[b]=at,rt[tt]=it}}}this.nCachedObjects_=c},uncache:function(){const o=this._objects,e=this._indicesByUUID,a=this._bindings,s=a.length;let c=this.nCachedObjects_,f=o.length;for(let d=0,h=arguments.length;d!==h;++d){const g=arguments[d],b=g.uuid,tt=e[b];if(tt!==void 0)if(delete e[b],tt<c){const j=--c,_e=o[j],nt=--f,rt=o[nt];e[_e.uuid]=tt,o[tt]=_e,e[rt.uuid]=j,o[j]=rt,o.pop();for(let at=0,it=s;at!==it;++at){const $=a[at],et=$[j],st=$[nt];$[tt]=et,$[j]=st,$.pop()}}else{const j=--f,_e=o[j];j>0&&(e[_e.uuid]=tt),o[tt]=_e,o.pop();for(let nt=0,rt=s;nt!==rt;++nt){const at=a[nt];at[tt]=at[j],at.pop()}}}this.nCachedObjects_=c},subscribe_:function(o,e){const a=this._bindingsIndicesByPath;let s=a[o];const c=this._bindings;if(s!==void 0)return c[s];const f=this._paths,d=this._parsedPaths,h=this._objects,g=h.length,b=this.nCachedObjects_,tt=new Array(g);s=c.length,a[o]=s,f.push(o),d.push(e),c.push(tt);for(let j=b,_e=h.length;j!==_e;++j){const nt=h[j];tt[j]=new PropertyBinding(nt,o,e)}return tt},unsubscribe_:function(o){const e=this._bindingsIndicesByPath,a=e[o];if(a!==void 0){const s=this._paths,c=this._parsedPaths,f=this._bindings,d=f.length-1,h=f[d],g=o[d];e[g]=a,f[a]=h,f.pop(),c[a]=c[d],c.pop(),s[a]=s[d],s.pop()}}});class AnimationAction{constructor(e,a,s=null,c=a.blendMode){this._mixer=e,this._clip=a,this._localRoot=s,this.blendMode=c;const f=a.tracks,d=f.length,h=new Array(d),g={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let b=0;b!==d;++b){const tt=f[b].createInterpolant(null);h[b]=tt,tt.settings=g}this._interpolantSettings=g,this._interpolants=h,this._propertyBindings=new Array(d),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,a){return this.loop=e,this.repetitions=a,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,a,s){if(e.fadeOut(a),this.fadeIn(a),s){const c=this._clip.duration,f=e._clip.duration,d=f/c,h=c/f;e.warp(1,d,a),this.warp(h,1,a)}return this}crossFadeTo(e,a,s){return e.crossFadeFrom(this,a,s)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,a,s){const c=this._mixer,f=c.time,d=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=c._lendControlInterpolant(),this._timeScaleInterpolant=h);const g=h.parameterPositions,b=h.sampleValues;return g[0]=f,g[1]=f+s,b[0]=e/d,b[1]=a/d,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,a,s,c){if(!this.enabled){this._updateWeight(e);return}const f=this._startTime;if(f!==null){const g=(e-f)*s;if(g<0||s===0)return;this._startTime=null,a=s*g}a*=this._updateTimeScale(e);const d=this._updateTime(a),h=this._updateWeight(e);if(h>0){const g=this._interpolants,b=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let tt=0,j=g.length;tt!==j;++tt)g[tt].evaluate(d),b[tt].accumulateAdditive(h);break;case NormalAnimationBlendMode:default:for(let tt=0,j=g.length;tt!==j;++tt)g[tt].evaluate(d),b[tt].accumulate(c,h)}}}_updateWeight(e){let a=0;if(this.enabled){a=this.weight;const s=this._weightInterpolant;if(s!==null){const c=s.evaluate(e)[0];a*=c,e>s.parameterPositions[1]&&(this.stopFading(),c===0&&(this.enabled=!1))}}return this._effectiveWeight=a,a}_updateTimeScale(e){let a=0;if(!this.paused){a=this.timeScale;const s=this._timeScaleInterpolant;s!==null&&(a*=s.evaluate(e)[0],e>s.parameterPositions[1]&&(this.stopWarping(),a===0?this.paused=!0:this.timeScale=a))}return this._effectiveTimeScale=a,a}_updateTime(e){const a=this._clip.duration,s=this.loop;let c=this.time+e,f=this._loopCount;const d=s===LoopPingPong;if(e===0)return f===-1?c:d&&(f&1)===1?a-c:c;if(s===LoopOnce){f===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(c>=a)c=a;else if(c<0)c=0;else{this.time=c;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=c,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(f===-1&&(e>=0?(f=0,this._setEndings(!0,this.repetitions===0,d)):this._setEndings(this.repetitions===0,!0,d)),c>=a||c<0){const h=Math.floor(c/a);c-=a*h,f+=Math.abs(h);const g=this.repetitions-f;if(g<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,c=e>0?a:0,this.time=c,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(g===1){const b=e<0;this._setEndings(b,!b,d)}else this._setEndings(!1,!1,d);this._loopCount=f,this.time=c,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=c;if(d&&(f&1)===1)return a-c}return c}_setEndings(e,a,s){const c=this._interpolantSettings;s?(c.endingStart=ZeroSlopeEnding,c.endingEnd=ZeroSlopeEnding):(e?c.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:c.endingStart=WrapAroundEnding,a?c.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:c.endingEnd=WrapAroundEnding)}_scheduleFading(e,a,s){const c=this._mixer,f=c.time;let d=this._weightInterpolant;d===null&&(d=c._lendControlInterpolant(),this._weightInterpolant=d);const h=d.parameterPositions,g=d.sampleValues;return h[0]=f,g[0]=a,h[1]=f+e,g[1]=s,this}}function AnimationMixer(o){this._root=o,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(o,e){const a=o._localRoot||this._root,s=o._clip.tracks,c=s.length,f=o._propertyBindings,d=o._interpolants,h=a.uuid,g=this._bindingsByRootAndName;let b=g[h];b===void 0&&(b={},g[h]=b);for(let tt=0;tt!==c;++tt){const j=s[tt],_e=j.name;let nt=b[_e];if(nt!==void 0)f[tt]=nt;else{if(nt=f[tt],nt!==void 0){nt._cacheIndex===null&&(++nt.referenceCount,this._addInactiveBinding(nt,h,_e));continue}const rt=e&&e._propertyBindings[tt].binding.parsedPath;nt=new PropertyMixer(PropertyBinding.create(a,_e,rt),j.ValueTypeName,j.getValueSize()),++nt.referenceCount,this._addInactiveBinding(nt,h,_e),f[tt]=nt}d[tt].resultBuffer=nt.buffer}},_activateAction:function(o){if(!this._isActiveAction(o)){if(o._cacheIndex===null){const a=(o._localRoot||this._root).uuid,s=o._clip.uuid,c=this._actionsByClip[s];this._bindAction(o,c&&c.knownActions[0]),this._addInactiveAction(o,s,a)}const e=o._propertyBindings;for(let a=0,s=e.length;a!==s;++a){const c=e[a];c.useCount++===0&&(this._lendBinding(c),c.saveOriginalState())}this._lendAction(o)}},_deactivateAction:function(o){if(this._isActiveAction(o)){const e=o._propertyBindings;for(let a=0,s=e.length;a!==s;++a){const c=e[a];--c.useCount===0&&(c.restoreOriginalState(),this._takeBackBinding(c))}this._takeBackAction(o)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const o=this;this.stats={actions:{get total(){return o._actions.length},get inUse(){return o._nActiveActions}},bindings:{get total(){return o._bindings.length},get inUse(){return o._nActiveBindings}},controlInterpolants:{get total(){return o._controlInterpolants.length},get inUse(){return o._nActiveControlInterpolants}}}},_isActiveAction:function(o){const e=o._cacheIndex;return e!==null&&e<this._nActiveActions},_addInactiveAction:function(o,e,a){const s=this._actions,c=this._actionsByClip;let f=c[e];if(f===void 0)f={knownActions:[o],actionByRoot:{}},o._byClipCacheIndex=0,c[e]=f;else{const d=f.knownActions;o._byClipCacheIndex=d.length,d.push(o)}o._cacheIndex=s.length,s.push(o),f.actionByRoot[a]=o},_removeInactiveAction:function(o){const e=this._actions,a=e[e.length-1],s=o._cacheIndex;a._cacheIndex=s,e[s]=a,e.pop(),o._cacheIndex=null;const c=o._clip.uuid,f=this._actionsByClip,d=f[c],h=d.knownActions,g=h[h.length-1],b=o._byClipCacheIndex;g._byClipCacheIndex=b,h[b]=g,h.pop(),o._byClipCacheIndex=null;const tt=d.actionByRoot,j=(o._localRoot||this._root).uuid;delete tt[j],h.length===0&&delete f[c],this._removeInactiveBindingsForAction(o)},_removeInactiveBindingsForAction:function(o){const e=o._propertyBindings;for(let a=0,s=e.length;a!==s;++a){const c=e[a];--c.referenceCount===0&&this._removeInactiveBinding(c)}},_lendAction:function(o){const e=this._actions,a=o._cacheIndex,s=this._nActiveActions++,c=e[s];o._cacheIndex=s,e[s]=o,c._cacheIndex=a,e[a]=c},_takeBackAction:function(o){const e=this._actions,a=o._cacheIndex,s=--this._nActiveActions,c=e[s];o._cacheIndex=s,e[s]=o,c._cacheIndex=a,e[a]=c},_addInactiveBinding:function(o,e,a){const s=this._bindingsByRootAndName,c=this._bindings;let f=s[e];f===void 0&&(f={},s[e]=f),f[a]=o,o._cacheIndex=c.length,c.push(o)},_removeInactiveBinding:function(o){const e=this._bindings,a=o.binding,s=a.rootNode.uuid,c=a.path,f=this._bindingsByRootAndName,d=f[s],h=e[e.length-1],g=o._cacheIndex;h._cacheIndex=g,e[g]=h,e.pop(),delete d[c],Object.keys(d).length===0&&delete f[s]},_lendBinding:function(o){const e=this._bindings,a=o._cacheIndex,s=this._nActiveBindings++,c=e[s];o._cacheIndex=s,e[s]=o,c._cacheIndex=a,e[a]=c},_takeBackBinding:function(o){const e=this._bindings,a=o._cacheIndex,s=--this._nActiveBindings,c=e[s];o._cacheIndex=s,e[s]=o,c._cacheIndex=a,e[a]=c},_lendControlInterpolant:function(){const o=this._controlInterpolants,e=this._nActiveControlInterpolants++;let a=o[e];return a===void 0&&(a=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),a.__cacheIndex=e,o[e]=a),a},_takeBackControlInterpolant:function(o){const e=this._controlInterpolants,a=o.__cacheIndex,s=--this._nActiveControlInterpolants,c=e[s];o.__cacheIndex=s,e[s]=o,c.__cacheIndex=a,e[a]=c},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(o,e,a){const s=e||this._root,c=s.uuid;let f=typeof o=="string"?AnimationClip.findByName(s,o):o;const d=f!==null?f.uuid:o,h=this._actionsByClip[d];let g=null;if(a===void 0&&(f!==null?a=f.blendMode:a=NormalAnimationBlendMode),h!==void 0){const tt=h.actionByRoot[c];if(tt!==void 0&&tt.blendMode===a)return tt;g=h.knownActions[0],f===null&&(f=g._clip)}if(f===null)return null;const b=new AnimationAction(this,f,e,a);return this._bindAction(b,g),this._addInactiveAction(b,d,c),b},existingAction:function(o,e){const a=e||this._root,s=a.uuid,c=typeof o=="string"?AnimationClip.findByName(a,o):o,f=c?c.uuid:o,d=this._actionsByClip[f];return d!==void 0&&d.actionByRoot[s]||null},stopAllAction:function(){const o=this._actions,e=this._nActiveActions;for(let a=e-1;a>=0;--a)o[a].stop();return this},update:function(o){o*=this.timeScale;const e=this._actions,a=this._nActiveActions,s=this.time+=o,c=Math.sign(o),f=this._accuIndex^=1;for(let g=0;g!==a;++g)e[g]._update(s,o,c,f);const d=this._bindings,h=this._nActiveBindings;for(let g=0;g!==h;++g)d[g].apply(f);return this},setTime:function(o){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(o)},getRoot:function(){return this._root},uncacheClip:function(o){const e=this._actions,a=o.uuid,s=this._actionsByClip,c=s[a];if(c!==void 0){const f=c.knownActions;for(let d=0,h=f.length;d!==h;++d){const g=f[d];this._deactivateAction(g);const b=g._cacheIndex,tt=e[e.length-1];g._cacheIndex=null,g._byClipCacheIndex=null,tt._cacheIndex=b,e[b]=tt,e.pop(),this._removeInactiveBindingsForAction(g)}delete s[a]}},uncacheRoot:function(o){const e=o.uuid,a=this._actionsByClip;for(const f in a){const d=a[f].actionByRoot,h=d[e];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const s=this._bindingsByRootAndName,c=s[e];if(c!==void 0)for(const f in c){const d=c[f];d.restoreOriginalState(),this._removeInactiveBinding(d)}},uncacheAction:function(o,e){const a=this.existingAction(o,e);a!==null&&(this._deactivateAction(a),this._removeInactiveAction(a))}});class Uniform{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}function InstancedInterleavedBuffer(o,e,a){InterleavedBuffer.call(this,o,e),this.meshPerAttribute=a||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(o){return InterleavedBuffer.prototype.copy.call(this,o),this.meshPerAttribute=o.meshPerAttribute,this},clone:function(o){const e=InterleavedBuffer.prototype.clone.call(this,o);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(o){const e=InterleavedBuffer.prototype.toJSON.call(this,o);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}});function GLBufferAttribute(o,e,a,s,c){this.buffer=o,this.type=e,this.itemSize=a,this.elementSize=s,this.count=c,this.version=0}Object.defineProperty(GLBufferAttribute.prototype,"needsUpdate",{set:function(o){o===!0&&this.version++}});Object.assign(GLBufferAttribute.prototype,{isGLBufferAttribute:!0,setBuffer:function(o){return this.buffer=o,this},setType:function(o,e){return this.type=o,this.elementSize=e,this},setItemSize:function(o){return this.itemSize=o,this},setCount:function(o){return this.count=o,this}});function Raycaster(o,e,a,s){this.ray=new Ray(o,e),this.near=a||0,this.far=s||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(o,e){return o.distance-e.distance}function intersectObject(o,e,a,s){if(o.layers.test(e.layers)&&o.raycast(e,a),s===!0){const c=o.children;for(let f=0,d=c.length;f<d;f++)intersectObject(c[f],e,a,!0)}}Object.assign(Raycaster.prototype,{set:function(o,e){this.ray.set(o,e)},setFromCamera:function(o,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(o.x,o.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(o.x,o.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)},intersectObject:function(o,e,a){const s=a||[];return intersectObject(o,this,s,e),s.sort(ascSort),s},intersectObjects:function(o,e,a){const s=a||[];if(Array.isArray(o)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),s;for(let c=0,f=o.length;c<f;c++)intersectObject(o[c],this,s,e);return s.sort(ascSort),s}});class Spherical{constructor(e=1,a=0,s=0){return this.radius=e,this.phi=a,this.theta=s,this}set(e,a,s){return this.radius=e,this.phi=a,this.theta=s,this}clone(){return new this.constructor().copy(this)}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,a,s){return this.radius=Math.sqrt(e*e+a*a+s*s),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,s),this.phi=Math.acos(MathUtils.clamp(a/this.radius,-1,1))),this}}class Cylindrical{constructor(e,a,s){return this.radius=e!==void 0?e:1,this.theta=a!==void 0?a:0,this.y=s!==void 0?s:0,this}set(e,a,s){return this.radius=e,this.theta=a,this.y=s,this}clone(){return new this.constructor().copy(this)}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,a,s){return this.radius=Math.sqrt(e*e+s*s),this.theta=Math.atan2(e,s),this.y=a,this}}const _vector$8=new Vector2;class Box2{constructor(e,a){Object.defineProperty(this,"isBox2",{value:!0}),this.min=e!==void 0?e:new Vector2(1/0,1/0),this.max=a!==void 0?a:new Vector2(-1/0,-1/0)}set(e,a){return this.min.copy(e),this.max.copy(a),this}setFromPoints(e){this.makeEmpty();for(let a=0,s=e.length;a<s;a++)this.expandByPoint(e[a]);return this}setFromCenterAndSize(e,a){const s=_vector$8.copy(a).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Vector2),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Vector2),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,a){return a===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),a=new Vector2),a.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,a){return a===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),a=new Vector2),a.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return _vector$8.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(e,a){this.start=e!==void 0?e:new Vector3,this.end=a!==void 0?a:new Vector3}set(e,a){return this.start.copy(e),this.end.copy(a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Vector3),e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Vector3),e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,a){return a===void 0&&(console.warn("THREE.Line3: .at() target is now required"),a=new Vector3),this.delta(a).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,a){_startP.subVectors(e,this.start),_startEnd.subVectors(this.end,this.start);const s=_startEnd.dot(_startEnd);let f=_startEnd.dot(_startP)/s;return a&&(f=MathUtils.clamp(f,0,1)),f}closestPointToPoint(e,a,s){const c=this.closestPointToPointParameter(e,a);return s===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),s=new Vector3),this.delta(s).multiplyScalar(c).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}function ImmediateRenderObject(o){Object3D.call(this),this.material=o,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;const _vector$9=new Vector3;class SpotLightHelper extends Object3D{constructor(e,a){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=a;const s=new BufferGeometry,c=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let d=0,h=1,g=32;d<g;d++,h++){const b=d/g*Math.PI*2,tt=h/g*Math.PI*2;c.push(Math.cos(b),Math.sin(b),1,Math.cos(tt),Math.sin(tt),1)}s.setAttribute("position",new Float32BufferAttribute(c,3));const f=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(s,f),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,a=e*Math.tan(this.light.angle);this.cone.scale.set(a,a,e),_vector$9.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$9),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$a=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(e){const a=getBoneList(e),s=new BufferGeometry,c=[],f=[],d=new Color(0,0,1),h=new Color(0,1,0);for(let b=0;b<a.length;b++){const tt=a[b];tt.parent&&tt.parent.isBone&&(c.push(0,0,0),c.push(0,0,0),f.push(d.r,d.g,d.b),f.push(h.r,h.g,h.b))}s.setAttribute("position",new Float32BufferAttribute(c,3)),s.setAttribute("color",new Float32BufferAttribute(f,3));const g=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(s,g),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=a,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const a=this.bones,s=this.geometry,c=s.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let f=0,d=0;f<a.length;f++){const h=a[f];h.parent&&h.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,h.matrixWorld),_vector$a.setFromMatrixPosition(_boneMatrix),c.setXYZ(d,_vector$a.x,_vector$a.y,_vector$a.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,h.parent.matrixWorld),_vector$a.setFromMatrixPosition(_boneMatrix),c.setXYZ(d+1,_vector$a.x,_vector$a.y,_vector$a.z),d+=2)}s.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function getBoneList(o){const e=[];o&&o.isBone&&e.push(o);for(let a=0;a<o.children.length;a++)e.push.apply(e,getBoneList(o.children[a]));return e}class PointLightHelper extends Mesh{constructor(e,a,s){const c=new SphereGeometry(a,4,2),f=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(c,f),this.light=e,this.light.updateMatrixWorld(),this.color=s,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$b=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(e,a,s){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=s;const c=new OctahedronGeometry(a);c.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const f=c.getAttribute("position"),d=new Float32Array(f.count*3);c.setAttribute("color",new BufferAttribute(d,3)),this.add(new Mesh(c,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const a=e.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let s=0,c=a.count;s<c;s++){const f=s<c/2?_color1:_color2;a.setXYZ(s,f.r,f.g,f.b)}a.needsUpdate=!0}e.lookAt(_vector$b.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(e=10,a=10,s=4473924,c=8947848){s=new Color(s),c=new Color(c);const f=a/2,d=e/a,h=e/2,g=[],b=[];for(let _e=0,nt=0,rt=-h;_e<=a;_e++,rt+=d){g.push(-h,0,rt,h,0,rt),g.push(rt,0,-h,rt,0,h);const at=_e===f?s:c;at.toArray(b,nt),nt+=3,at.toArray(b,nt),nt+=3,at.toArray(b,nt),nt+=3,at.toArray(b,nt),nt+=3}const tt=new BufferGeometry;tt.setAttribute("position",new Float32BufferAttribute(g,3)),tt.setAttribute("color",new Float32BufferAttribute(b,3));const j=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(tt,j),this.type="GridHelper"}}class PolarGridHelper extends LineSegments{constructor(e=10,a=16,s=8,c=64,f=4473924,d=8947848){f=new Color(f),d=new Color(d);const h=[],g=[];for(let j=0;j<=a;j++){const _e=j/a*(Math.PI*2),nt=Math.sin(_e)*e,rt=Math.cos(_e)*e;h.push(0,0,0),h.push(nt,0,rt);const at=j&1?f:d;g.push(at.r,at.g,at.b),g.push(at.r,at.g,at.b)}for(let j=0;j<=s;j++){const _e=j&1?f:d,nt=e-e/s*j;for(let rt=0;rt<c;rt++){let at=rt/c*(Math.PI*2),it=Math.sin(at)*nt,$=Math.cos(at)*nt;h.push(it,0,$),g.push(_e.r,_e.g,_e.b),at=(rt+1)/c*(Math.PI*2),it=Math.sin(at)*nt,$=Math.cos(at)*nt,h.push(it,0,$),g.push(_e.r,_e.g,_e.b)}}const b=new BufferGeometry;b.setAttribute("position",new Float32BufferAttribute(h,3)),b.setAttribute("color",new Float32BufferAttribute(g,3));const tt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(b,tt),this.type="PolarGridHelper"}}const _v1$6=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;class DirectionalLightHelper extends Object3D{constructor(e,a,s){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=s,a===void 0&&(a=1);let c=new BufferGeometry;c.setAttribute("position",new Float32BufferAttribute([-a,a,0,a,a,0,a,-a,0,-a,-a,0,-a,a,0],3));const f=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(c,f),this.add(this.lightPlane),c=new BufferGeometry,c.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(c,f),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){_v1$6.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$6),this.lightPlane.lookAt(_v2$3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()}}const _vector$c=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(e){const a=new BufferGeometry,s=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),c=[],f=[],d={},h=new Color(16755200),g=new Color(16711680),b=new Color(43775),tt=new Color(16777215),j=new Color(3355443);_e("n1","n2",h),_e("n2","n4",h),_e("n4","n3",h),_e("n3","n1",h),_e("f1","f2",h),_e("f2","f4",h),_e("f4","f3",h),_e("f3","f1",h),_e("n1","f1",h),_e("n2","f2",h),_e("n3","f3",h),_e("n4","f4",h),_e("p","n1",g),_e("p","n2",g),_e("p","n3",g),_e("p","n4",g),_e("u1","u2",b),_e("u2","u3",b),_e("u3","u1",b),_e("c","t",tt),_e("p","c",j),_e("cn1","cn2",j),_e("cn3","cn4",j),_e("cf1","cf2",j),_e("cf3","cf4",j);function _e(rt,at,it){nt(rt,it),nt(at,it)}function nt(rt,at){c.push(0,0,0),f.push(at.r,at.g,at.b),d[rt]===void 0&&(d[rt]=[]),d[rt].push(c.length/3-1)}a.setAttribute("position",new Float32BufferAttribute(c,3)),a.setAttribute("color",new Float32BufferAttribute(f,3)),super(a,s),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=d,this.update()}update(){const e=this.geometry,a=this.pointMap,s=1,c=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",a,e,_camera,0,0,-1),setPoint("t",a,e,_camera,0,0,1),setPoint("n1",a,e,_camera,-s,-c,-1),setPoint("n2",a,e,_camera,s,-c,-1),setPoint("n3",a,e,_camera,-s,c,-1),setPoint("n4",a,e,_camera,s,c,-1),setPoint("f1",a,e,_camera,-s,-c,1),setPoint("f2",a,e,_camera,s,-c,1),setPoint("f3",a,e,_camera,-s,c,1),setPoint("f4",a,e,_camera,s,c,1),setPoint("u1",a,e,_camera,s*.7,c*1.1,-1),setPoint("u2",a,e,_camera,-s*.7,c*1.1,-1),setPoint("u3",a,e,_camera,0,c*2,-1),setPoint("cf1",a,e,_camera,-s,0,1),setPoint("cf2",a,e,_camera,s,0,1),setPoint("cf3",a,e,_camera,0,-c,1),setPoint("cf4",a,e,_camera,0,c,1),setPoint("cn1",a,e,_camera,-s,0,-1),setPoint("cn2",a,e,_camera,s,0,-1),setPoint("cn3",a,e,_camera,0,-c,-1),setPoint("cn4",a,e,_camera,0,c,-1),e.getAttribute("position").needsUpdate=!0}}function setPoint(o,e,a,s,c,f,d){_vector$c.set(c,f,d).unproject(s);const h=e[o];if(h!==void 0){const g=a.getAttribute("position");for(let b=0,tt=h.length;b<tt;b++)g.setXYZ(h[b],_vector$c.x,_vector$c.y,_vector$c.z)}}const _box$3=new Box3;class BoxHelper extends LineSegments{constructor(e,a=16776960){const s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),c=new Float32Array(8*3),f=new BufferGeometry;f.setIndex(new BufferAttribute(s,1)),f.setAttribute("position",new BufferAttribute(c,3)),super(f,new LineBasicMaterial({color:a,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$3.setFromObject(this.object),_box$3.isEmpty())return;const a=_box$3.min,s=_box$3.max,c=this.geometry.attributes.position,f=c.array;f[0]=s.x,f[1]=s.y,f[2]=s.z,f[3]=a.x,f[4]=s.y,f[5]=s.z,f[6]=a.x,f[7]=a.y,f[8]=s.z,f[9]=s.x,f[10]=a.y,f[11]=s.z,f[12]=s.x,f[13]=s.y,f[14]=a.z,f[15]=a.x,f[16]=s.y,f[17]=a.z,f[18]=a.x,f[19]=a.y,f[20]=a.z,f[21]=s.x,f[22]=a.y,f[23]=a.z,c.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return LineSegments.prototype.copy.call(this,e),this.object=e.object,this}}class Box3Helper extends LineSegments{constructor(e,a=16776960){const s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),c=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],f=new BufferGeometry;f.setIndex(new BufferAttribute(s,1)),f.setAttribute("position",new Float32BufferAttribute(c,3)),super(f,new LineBasicMaterial({color:a,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const a=this.box;a.isEmpty()||(a.getCenter(this.position),a.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class PlaneHelper extends Line{constructor(e,a=1,s=16776960){const c=s,f=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],d=new BufferGeometry;d.setAttribute("position",new Float32BufferAttribute(f,3)),d.computeBoundingSphere(),super(d,new LineBasicMaterial({color:c,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=a;const h=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],g=new BufferGeometry;g.setAttribute("position",new Float32BufferAttribute(h,3)),g.computeBoundingSphere(),this.add(new Mesh(g,new MeshBasicMaterial({color:c,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let a=-this.plane.constant;Math.abs(a)<1e-8&&(a=1e-8),this.scale.set(.5*this.size,.5*this.size,a),this.children[0].material.side=a<0?BackSide:FrontSide,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(e,a,s,c,f,d){super(),this.type="ArrowHelper",e===void 0&&(e=new Vector3(0,0,1)),a===void 0&&(a=new Vector3(0,0,0)),s===void 0&&(s=1),c===void 0&&(c=16776960),f===void 0&&(f=.2*s),d===void 0&&(d=.2*f),_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(a),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:c,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:c,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(s,f,d)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(e.z,0,-e.x).normalize();const a=Math.acos(e.y);this.quaternion.setFromAxisAngle(_axis,a)}}setLength(e,a,s){a===void 0&&(a=.2*e),s===void 0&&(s=.2*a),this.line.scale.set(1,Math.max(1e-4,e-a),1),this.line.updateMatrix(),this.cone.scale.set(s,a,s),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class AxesHelper extends LineSegments{constructor(e=1){const a=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],s=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],c=new BufferGeometry;c.setAttribute("position",new Float32BufferAttribute(a,3)),c.setAttribute("color",new Float32BufferAttribute(s,3));const f=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(c,f),this.type="AxesHelper"}}const _floatView=new Float32Array(1),_int32View=new Int32Array(_floatView.buffer),DataUtils={toHalfFloat:function(o){_floatView[0]=o;const e=_int32View[0];let a=e>>16&32768,s=e>>12&2047;const c=e>>23&255;return c<103?a:c>142?(a|=31744,a|=(c==255?0:1)&&e&8388607,a):c<113?(s|=2048,a|=(s>>114-c)+(s>>113-c&1),a):(a|=c-112<<10|s>>1,a+=s&1,a)}},LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},backgroundMaterial=new MeshBasicMaterial({side:BackSide,depthWrite:!1,depthTest:!1}),backgroundBox=new Mesh(new BoxGeometry,backgroundMaterial),_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_clearColor=new Color;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function convertLinearToRGBE(o){const e=Math.max(o.r,o.g,o.b),a=Math.min(Math.max(Math.ceil(Math.log2(e)),-128),127);return o.multiplyScalar(Math.pow(2,-a)),(a+128)/255}class PMREMGenerator{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,a=0,s=.1,c=100){_oldTarget=this._renderer.getRenderTarget();const f=this._allocateTargets();return this._sceneToCubeUV(e,s,c,f),a>0&&this._blur(f,0,0,a),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<_lodPlanes.length;e++)_lodPlanes[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),e.scissorTest=!1,_setViewport(e,0,0,e.width,e.height)}_fromTexture(e){_oldTarget=this._renderer.getRenderTarget();const a=this._allocateTargets(e);return this._textureToCubeUV(e,a),this._applyPMREM(a),this._cleanup(a),a}_allocateTargets(e){const a={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(e)?e.encoding:RGBEEncoding,depthBuffer:!1},s=_createRenderTarget(a);return s.depthBuffer=!e,this._pingPongRenderTarget=_createRenderTarget(a),s}_compileMaterial(e){const a=new Mesh(_lodPlanes[0],e);this._renderer.compile(a,_flatCamera)}_sceneToCubeUV(e,a,s,c){const h=new PerspectiveCamera(90,1,a,s),g=[1,-1,1,1,1,1],b=[1,1,1,-1,-1,-1],tt=this._renderer,j=tt.autoClear,_e=tt.outputEncoding,nt=tt.toneMapping;tt.getClearColor(_clearColor),tt.toneMapping=NoToneMapping,tt.outputEncoding=LinearEncoding,tt.autoClear=!1;let rt=!1;const at=e.background;if(at){if(at.isColor){backgroundMaterial.color.copy(at).convertSRGBToLinear(),e.background=null;const it=convertLinearToRGBE(backgroundMaterial.color);backgroundMaterial.opacity=it,rt=!0}}else{backgroundMaterial.color.copy(_clearColor).convertSRGBToLinear();const it=convertLinearToRGBE(backgroundMaterial.color);backgroundMaterial.opacity=it,rt=!0}for(let it=0;it<6;it++){const $=it%3;$==0?(h.up.set(0,g[it],0),h.lookAt(b[it],0,0)):$==1?(h.up.set(0,0,g[it]),h.lookAt(0,b[it],0)):(h.up.set(0,g[it],0),h.lookAt(0,0,b[it])),_setViewport(c,$*SIZE_MAX,it>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),tt.setRenderTarget(c),rt&&tt.render(backgroundBox,h),tt.render(e,h)}tt.toneMapping=nt,tt.outputEncoding=_e,tt.autoClear=j}_textureToCubeUV(e,a){const s=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());const c=e.isCubeTexture?this._cubemapShader:this._equirectShader,f=new Mesh(_lodPlanes[0],c),d=c.uniforms;d.envMap.value=e,e.isCubeTexture||d.texelSize.value.set(1/e.image.width,1/e.image.height),d.inputEncoding.value=ENCODINGS[e.encoding],d.outputEncoding.value=ENCODINGS[a.texture.encoding],_setViewport(a,0,0,3*SIZE_MAX,2*SIZE_MAX),s.setRenderTarget(a),s.render(f,_flatCamera)}_applyPMREM(e){const a=this._renderer,s=a.autoClear;a.autoClear=!1;for(let c=1;c<TOTAL_LODS;c++){const f=Math.sqrt(_sigmas[c]*_sigmas[c]-_sigmas[c-1]*_sigmas[c-1]),d=_axisDirections[(c-1)%_axisDirections.length];this._blur(e,c-1,c,f,d)}a.autoClear=s}_blur(e,a,s,c,f){const d=this._pingPongRenderTarget;this._halfBlur(e,d,a,s,c,"latitudinal",f),this._halfBlur(d,e,s,s,c,"longitudinal",f)}_halfBlur(e,a,s,c,f,d,h){const g=this._renderer,b=this._blurMaterial;d!=="latitudinal"&&d!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const tt=3,j=new Mesh(_lodPlanes[c],b),_e=b.uniforms,nt=_sizeLods[s]-1,rt=isFinite(f)?Math.PI/(2*nt):2*Math.PI/(2*MAX_SAMPLES-1),at=f/rt,it=isFinite(f)?1+Math.floor(tt*at):MAX_SAMPLES;it>MAX_SAMPLES&&console.warn(`sigmaRadians, ${f}, is too large and will clip, as it requested ${it} samples when the maximum is set to ${MAX_SAMPLES}`);const $=[];let et=0;for(let ut=0;ut<MAX_SAMPLES;++ut){const ht=ut/at,pt=Math.exp(-ht*ht/2);$.push(pt),ut==0?et+=pt:ut<it&&(et+=2*pt)}for(let ut=0;ut<$.length;ut++)$[ut]=$[ut]/et;_e.envMap.value=e.texture,_e.samples.value=it,_e.weights.value=$,_e.latitudinal.value=d==="latitudinal",h&&(_e.poleAxis.value=h),_e.dTheta.value=rt,_e.mipInt.value=LOD_MAX-s,_e.inputEncoding.value=ENCODINGS[e.texture.encoding],_e.outputEncoding.value=ENCODINGS[e.texture.encoding];const st=_sizeLods[c],lt=3*Math.max(0,SIZE_MAX-2*st),ct=(c===0?0:2*SIZE_MAX)+2*st*(c>LOD_MAX-LOD_MIN?c-LOD_MAX+LOD_MIN:0);_setViewport(a,lt,ct,3*st,2*st),g.setRenderTarget(a),g.render(j,_flatCamera)}}function _isLDR(o){return o===void 0||o.type!==UnsignedByteType?!1:o.encoding===LinearEncoding||o.encoding===sRGBEncoding||o.encoding===GammaEncoding}function _createPlanes(){const o=[],e=[],a=[];let s=LOD_MAX;for(let c=0;c<TOTAL_LODS;c++){const f=Math.pow(2,s);e.push(f);let d=1/f;c>LOD_MAX-LOD_MIN?d=EXTRA_LOD_SIGMA[c-LOD_MAX+LOD_MIN-1]:c==0&&(d=0),a.push(d);const h=1/(f-1),g=-h/2,b=1+h/2,tt=[g,g,b,g,b,b,g,g,b,b,g,b],j=6,_e=6,nt=3,rt=2,at=1,it=new Float32Array(nt*_e*j),$=new Float32Array(rt*_e*j),et=new Float32Array(at*_e*j);for(let lt=0;lt<j;lt++){const ct=lt%3*2/3-1,ut=lt>2?0:-1,ht=[ct,ut,0,ct+2/3,ut,0,ct+2/3,ut+1,0,ct,ut,0,ct+2/3,ut+1,0,ct,ut+1,0];it.set(ht,nt*_e*lt),$.set(tt,rt*_e*lt);const pt=[lt,lt,lt,lt,lt,lt];et.set(pt,at*_e*lt)}const st=new BufferGeometry;st.setAttribute("position",new BufferAttribute(it,nt)),st.setAttribute("uv",new BufferAttribute($,rt)),st.setAttribute("faceIndex",new BufferAttribute(et,at)),o.push(st),s>LOD_MIN&&s--}return{_lodPlanes:o,_sizeLods:e,_sigmas:a}}function _createRenderTarget(o){const e=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,o);return e.texture.mapping=CubeUVReflectionMapping,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function _setViewport(o,e,a,s,c){o.viewport.set(e,a,s,c),o.scissor.set(e,a,s,c)}function _getBlurShader(o){const e=new Float32Array(o),a=new Vector3(0,1,0);return new RawShaderMaterial({name:"SphericalGaussianBlur",defines:{n:o},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${_getEncodings()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectShader(){const o=new Vector2(1,1);return new RawShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:o},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${_getEncodings()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapShader(){return new RawShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${_getEncodings()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function _getEncodings(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function Face4(o,e,a,s,c,f,d){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(o,e,a,c,f,d)}const LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(o){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),o}function MultiMaterial(o=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),o.isMultiMaterial=!0,o.materials=o,o.clone=function(){return o.slice()},o}function PointCloud(o,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(o,e)}function Particle(o){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(o)}function ParticleSystem(o,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(o,e)}function PointCloudMaterial(o){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(o)}function ParticleBasicMaterial(o){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(o)}function ParticleSystemMaterial(o){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(o)}function Vertex(o,e,a){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(o,e,a)}function DynamicBufferAttribute(o,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(o,e).setUsage(DynamicDrawUsage)}function Int8Attribute(o,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(o,e)}function Uint8Attribute(o,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(o,e)}function Uint8ClampedAttribute(o,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(o,e)}function Int16Attribute(o,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(o,e)}function Uint16Attribute(o,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(o,e)}function Int32Attribute(o,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(o,e)}function Uint32Attribute(o,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(o,e)}function Float32Attribute(o,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(o,e)}function Float64Attribute(o,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(o,e)}Curve.create=function(o,e){return console.log("THREE.Curve.create() has been deprecated"),o.prototype=Object.create(Curve.prototype),o.prototype.constructor=o,o.prototype.getPoint=e,o};Object.assign(Path.prototype,{fromPoints:function(o){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(o)}});function ClosedSplineCurve3(o){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,o),this.type="catmullrom",this.closed=!0}ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function SplineCurve3(o){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,o),this.type="catmullrom"}SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function Spline(o){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,o),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function AxisHelper(o){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(o)}function BoundingBoxHelper(o,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(o,e)}function EdgesHelper(o,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(o.geometry),new LineBasicMaterial({color:e!==void 0?e:16777215}))}GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function WireframeHelper(o,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(o.geometry),new LineBasicMaterial({color:e!==void 0?e:16777215}))}Object.assign(Loader.prototype,{extractUrlBase:function(o){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(o)}});Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function XHRLoader(o){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(o)}function BinaryTextureLoader(o){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(o)}Object.assign(Box2.prototype,{center:function(o){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(o)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(o){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(o)},size:function(o){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(o)}});Object.assign(Box3.prototype,{center:function(o){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(o)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(o){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(o)},isIntersectionSphere:function(o){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(o)},size:function(o){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(o)}});Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Frustum.prototype.setFromMatrix=function(o){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(o)};Line3.prototype.center=function(o){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(o)};Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(o){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(o)},nextPowerOfTwo:function(o){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(o)}});Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(o,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(o,e)},multiplyVector3:function(o){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),o.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(o){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),o.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(o){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(o).invert()}});Object.assign(Matrix4.prototype,{extractPosition:function(o){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(o)},flattenToArrayOffset:function(o,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(o,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(o){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(o)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(o){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),o.applyMatrix4(this)},multiplyVector4:function(o){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),o.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(o){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),o.transformDirection(this)},crossVector:function(o){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),o.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(o){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),o.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(o,e,a,s,c,f){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(o,e,s,a,c,f)},getInverse:function(o){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(o).invert()}});Plane.prototype.isIntersectionLine=function(o){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(o)};Object.assign(Quaternion.prototype,{multiplyVector3:function(o){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),o.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}});Object.assign(Ray.prototype,{isIntersectionBox:function(o){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(o)},isIntersectionPlane:function(o){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(o)},isIntersectionSphere:function(o){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(o)}});Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(o,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(o,e)},midpoint:function(o){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(o)},normal:function(o){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(o)},plane:function(o){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(o)}});Object.assign(Triangle,{barycoordFromPoint:function(o,e,a,s,c){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(o,e,a,s,c)},normal:function(o,e,a,s){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(o,e,a,s)}});Object.assign(Shape.prototype,{extractAllPoints:function(o){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(o)},extrude:function(o){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,o)},makeGeometry:function(o){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,o)}});Object.assign(Vector2.prototype,{fromAttribute:function(o,e,a){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(o,e,a)},distanceToManhattan:function(o){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(o)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(o){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(o)},getScaleFromMatrix:function(o){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(o)},getColumnFromMatrix:function(o,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,o)},applyProjection:function(o){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(o)},fromAttribute:function(o,e,a){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(o,e,a)},distanceToManhattan:function(o){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(o)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector4.prototype,{fromAttribute:function(o,e,a){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(o,e,a)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Object3D.prototype,{getChildByName:function(o){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(o)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(o,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,o)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(o){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(o)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(o){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=o}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(o){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=o}});PerspectiveCamera.prototype.setLens=function(o,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(o)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(o){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=o}},shadowCameraLeft:{set:function(o){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=o}},shadowCameraRight:{set:function(o){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=o}},shadowCameraTop:{set:function(o){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=o}},shadowCameraBottom:{set:function(o){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=o}},shadowCameraNear:{set:function(o){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=o}},shadowCameraFar:{set:function(o){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=o}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(o){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=o}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(o){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=o}},shadowMapHeight:{set:function(o){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=o}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});Object.assign(BufferAttribute.prototype,{setDynamic:function(o){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(o===!0?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(BufferGeometry.prototype,{addIndex:function(o){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(o)},addAttribute:function(o,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(o,new BufferAttribute(arguments[1],arguments[2]))):o==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(o,e)},addDrawCall:function(o,e,a){a!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(o,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(o){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(o)},applyMatrix:function(o){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(o)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(o){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=o}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(o){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=o}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(o){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(o)}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function(o){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(o===!0?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ExtrudeGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")}});Object.assign(Scene.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(o){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=o===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(o){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=o}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(MeshPhysicalMaterial.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(o){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=o}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(o){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=o}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function(o,e,a,s){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(o),this.clear(e,a,s)},animate:function(o){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(o)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(o){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(o)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(o){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=o}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(o){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=o}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(o){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=o===!0?sRGBEncoding:LinearEncoding}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function WebGLRenderTargetCube(o,e,a){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(o,a)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(o){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=o}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(o){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=o}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(o){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=o}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(o){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=o}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(o){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=o}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(o){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=o}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(o){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=o}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(o){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=o}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(o){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=o}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(o){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=o}}});Object.defineProperties(Audio.prototype,{load:{value:function(o){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new AudioLoader().load(o,function(s){e.setBuffer(s)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(o,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(o,e)};CubeCamera.prototype.clear=function(o,e,a,s){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(o,e,a,s)};const GeometryUtils={merge:function(o,e,a){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");let s;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),s=e.matrix,e=e.geometry),o.merge(e,s,a)},center:function(o){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),o.center()}};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(o,e,a,s){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const c=new TextureLoader;c.setCrossOrigin(this.crossOrigin);const f=c.load(o,a,void 0,s);return e&&(f.mapping=e),f};ImageUtils.loadTextureCube=function(o,e,a,s){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const c=new CubeTextureLoader;c.setCrossOrigin(this.crossOrigin);const f=c.load(o,a,void 0,s);return e&&(f.mapping=e),f};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}const SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);var three_module=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,AxisHelper,BackSide,BasicDepthPacking,BasicShadowMap,BinaryTextureLoader,Bone,BooleanKeyframeTrack,BoundingBoxHelper,Box2,Box3,Box3Helper,BoxBufferGeometry:BoxGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasRenderer,CanvasTexture,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry:CircleGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,ClosedSplineCurve3,Color,ColorKeyframeTrack,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry:ConeGeometry,ConeGeometry,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubeUVRefractionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderBufferGeometry:CylinderGeometry,CylinderGeometry,Cylindrical,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DodecahedronBufferGeometry:DodecahedronGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicBufferAttribute,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EdgesHelper,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry:ExtrudeGeometry,ExtrudeGeometry,Face3,Face4,FaceColors,FileLoader,FlatShading,Float16BufferAttribute,Float32Attribute,Float32BufferAttribute,Float64Attribute,Float64BufferAttribute,FloatType,Fog,FogExp2,Font,FontLoader,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GammaEncoding,GeometryUtils,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry:IcosahedronGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16Attribute,Int16BufferAttribute,Int32Attribute,Int32BufferAttribute,Int8Attribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,JSONLoader,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry:LatheGeometry,LatheGeometry,Layers,LensFlare,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LinePieces,LineSegments,LineStrip,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LogLuvEncoding,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,Math:MathUtils,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshFaceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiMaterial,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColors,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry:OctahedronGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,ParametricBufferGeometry:ParametricGeometry,ParametricGeometry,Particle,ParticleBasicMaterial,ParticleSystem,ParticleSystemMaterial,Path,PerspectiveCamera,Plane,PlaneBufferGeometry:PlaneGeometry,PlaneGeometry,PlaneHelper,PointCloud,PointCloudMaterial,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry:PolyhedronGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDEncoding,RGBEEncoding,RGBEFormat,RGBFormat,RGBIntegerFormat,RGBM16Encoding,RGBM7Encoding,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry:RingGeometry,RingGeometry,SRGB8_ALPHA8_ASTC_10x10_Format,SRGB8_ALPHA8_ASTC_10x5_Format,SRGB8_ALPHA8_ASTC_10x6_Format,SRGB8_ALPHA8_ASTC_10x8_Format,SRGB8_ALPHA8_ASTC_12x10_Format,SRGB8_ALPHA8_ASTC_12x12_Format,SRGB8_ALPHA8_ASTC_4x4_Format,SRGB8_ALPHA8_ASTC_5x4_Format,SRGB8_ALPHA8_ASTC_5x5_Format,SRGB8_ALPHA8_ASTC_6x5_Format,SRGB8_ALPHA8_ASTC_6x6_Format,SRGB8_ALPHA8_ASTC_8x5_Format,SRGB8_ALPHA8_ASTC_8x6_Format,SRGB8_ALPHA8_ASTC_8x8_Format,Scene,SceneUtils,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry:ShapeGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,SmoothShading,Sphere,SphereBufferGeometry:SphereGeometry,SphereGeometry,Spherical,SphericalHarmonics3,Spline,SplineCurve,SplineCurve3,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry:TetrahedronGeometry,TetrahedronGeometry,TextBufferGeometry:TextGeometry,TextGeometry,Texture,TextureLoader,TorusBufferGeometry:TorusGeometry,TorusGeometry,TorusKnotBufferGeometry:TorusKnotGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry:TubeGeometry,TubeGeometry,UVMapping,Uint16Attribute,Uint16BufferAttribute,Uint32Attribute,Uint32BufferAttribute,Uint8Attribute,Uint8BufferAttribute,Uint8ClampedAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShort565Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,Vertex,VertexColors,VideoTexture,WebGL1Renderer,WebGLCubeRenderTarget,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderTargetCube,WebGLRenderer,WebGLUtils,WireframeGeometry,WireframeHelper,WrapAroundEnding,XHRLoader,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,sRGBEncoding},Symbol.toStringTag,{value:"Module"}));function create$1$1(o){let e;const a=new Set,s=(b,tt)=>{const j=typeof b=="function"?b(e):b;if(j!==e){const _e=e;e=tt?j:Object.assign({},e,j),a.forEach(nt=>nt(e,_e))}},c=()=>e,f=(b,tt=c,j=Object.is)=>{let _e=tt(e);function nt(){const rt=tt(e);if(!j(_e,rt)){const at=_e;b(_e=rt,at)}}return a.add(nt),()=>a.delete(nt)},g={setState:s,getState:c,subscribe:(b,tt,j)=>tt||j?f(b,tt,j):(a.add(b),()=>a.delete(b)),destroy:()=>a.clear()};return e=o(s,c,g),g}const isSSR=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$1=isSSR?react.exports.useEffect:react.exports.useLayoutEffect;function create$2(o){const e=typeof o=="function"?create$1$1(o):o,a=(s=e.getState,c=Object.is)=>{const[,f]=react.exports.useReducer(at=>at+1,0),d=e.getState(),h=react.exports.useRef(d),g=react.exports.useRef(s),b=react.exports.useRef(c),tt=react.exports.useRef(!1),j=react.exports.useRef();j.current===void 0&&(j.current=s(d));let _e,nt=!1;(h.current!==d||g.current!==s||b.current!==c||tt.current)&&(_e=s(d),nt=!c(j.current,_e)),useIsomorphicLayoutEffect$1(()=>{nt&&(j.current=_e),h.current=d,g.current=s,b.current=c,tt.current=!1});const rt=react.exports.useRef(d);return useIsomorphicLayoutEffect$1(()=>{const at=()=>{try{const $=e.getState(),et=g.current($);b.current(j.current,et)||(h.current=$,j.current=et,f())}catch{tt.current=!0,f()}},it=e.subscribe(at);return e.getState()!==rt.current&&at(),it},[]),nt?_e:j.current};return Object.assign(a,e),a[Symbol.iterator]=function*(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4"),yield a,yield e},a}function shallow(o,e){if(Object.is(o,e))return!0;if(typeof o!="object"||o===null||typeof e!="object"||e===null)return!1;const a=Object.keys(o);if(a.length!==Object.keys(e).length)return!1;for(let s=0;s<a.length;s++)if(!Object.prototype.hasOwnProperty.call(e,a[s])||!Object.is(o[a[s]],e[a[s]]))return!1;return!0}var reactReconciler={exports:{}},reactReconciler_production_min={exports:{}};/** @license React v0.26.2
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){o.exports=function(a){var s={},c=objectAssign,f=react.exports,d=scheduler.exports;function h(_){for(var k="https://reactjs.org/docs/error-decoder.html?invariant="+_,ot=1;ot<arguments.length;ot++)k+="&args[]="+encodeURIComponent(arguments[ot]);return"Minified React error #"+_+"; visit "+k+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=60103,tt=60106,j=60107,_e=60108,nt=60114,rt=60109,at=60110,it=60112,$=60113,et=60120,st=60115,lt=60116,ct=60121,ut=60129,ht=60130,pt=60131;if(typeof Symbol=="function"&&Symbol.for){var mt=Symbol.for;b=mt("react.element"),tt=mt("react.portal"),j=mt("react.fragment"),_e=mt("react.strict_mode"),nt=mt("react.profiler"),rt=mt("react.provider"),at=mt("react.context"),it=mt("react.forward_ref"),$=mt("react.suspense"),et=mt("react.suspense_list"),st=mt("react.memo"),lt=mt("react.lazy"),ct=mt("react.block"),mt("react.scope"),ut=mt("react.debug_trace_mode"),ht=mt("react.offscreen"),pt=mt("react.legacy_hidden")}var bt=typeof Symbol=="function"&&Symbol.iterator;function St(_){return _===null||typeof _!="object"?null:(_=bt&&_[bt]||_["@@iterator"],typeof _=="function"?_:null)}function Ft(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case j:return"Fragment";case tt:return"Portal";case nt:return"Profiler";case _e:return"StrictMode";case $:return"Suspense";case et:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case at:return(_.displayName||"Context")+".Consumer";case rt:return(_._context.displayName||"Context")+".Provider";case it:var k=_.render;return k=k.displayName||k.name||"",_.displayName||(k!==""?"ForwardRef("+k+")":"ForwardRef");case st:return Ft(_.type);case ct:return Ft(_._render);case lt:k=_._payload,_=_._init;try{return Ft(_(k))}catch{}}return null}function It(_){var k=_,ot=_;if(_.alternate)for(;k.return;)k=k.return;else{_=k;do k=_,(k.flags&1026)!==0&&(ot=k.return),_=k.return;while(_)}return k.tag===3?ot:null}function Ct(_){if(It(_)!==_)throw Error(h(188))}function Pt(_){var k=_.alternate;if(!k){if(k=It(_),k===null)throw Error(h(188));return k!==_?null:_}for(var ot=_,ft=k;;){var dt=ot.return;if(dt===null)break;var gt=dt.alternate;if(gt===null){if(ft=dt.return,ft!==null){ot=ft;continue}break}if(dt.child===gt.child){for(gt=dt.child;gt;){if(gt===ot)return Ct(dt),_;if(gt===ft)return Ct(dt),k;gt=gt.sibling}throw Error(h(188))}if(ot.return!==ft.return)ot=dt,ft=gt;else{for(var Tt=!1,kt=dt.child;kt;){if(kt===ot){Tt=!0,ot=dt,ft=gt;break}if(kt===ft){Tt=!0,ft=dt,ot=gt;break}kt=kt.sibling}if(!Tt){for(kt=gt.child;kt;){if(kt===ot){Tt=!0,ot=gt,ft=dt;break}if(kt===ft){Tt=!0,ft=gt,ot=dt;break}kt=kt.sibling}if(!Tt)throw Error(h(189))}}if(ot.alternate!==ft)throw Error(h(190))}if(ot.tag!==3)throw Error(h(188));return ot.stateNode.current===ot?_:k}function Nt(_){if(_=Pt(_),!_)return null;for(var k=_;;){if(k.tag===5||k.tag===6)return k;if(k.child)k.child.return=k,k=k.child;else{if(k===_)break;for(;!k.sibling;){if(!k.return||k.return===_)return null;k=k.return}k.sibling.return=k.return,k=k.sibling}}return null}function zt(_){if(_=Pt(_),!_)return null;for(var k=_;;){if(k.tag===5||k.tag===6)return k;if(k.child&&k.tag!==4)k.child.return=k,k=k.child;else{if(k===_)break;for(;!k.sibling;){if(!k.return||k.return===_)return null;k=k.return}k.sibling.return=k.return,k=k.sibling}}return null}function Xt(_,k){for(var ot=_.alternate;k!==null;){if(k===_||k===ot)return!0;k=k.return}return!1}var en=a.getPublicInstance,rn=a.getRootHostContext,Gt=a.getChildHostContext,qt=a.prepareForCommit,sn=a.resetAfterCommit,yn=a.createInstance,Yt=a.appendInitialChild,_t=a.finalizeInitialChildren,yt=a.prepareUpdate,At=a.shouldSetTextContent,wt=a.createTextInstance,Rt=a.scheduleTimeout,Bt=a.cancelTimeout,Lt=a.noTimeout,Et=a.isPrimaryRenderer,Dt=a.supportsMutation,Ht=a.supportsPersistence,Ut=a.supportsHydration,xt=a.getInstanceFromNode,vt=a.makeOpaqueHydratingObject,Zt=a.makeClientId,Wt=a.beforeActiveInstanceBlur,Ot=a.afterActiveInstanceBlur,tn=a.preparePortalMount,on=a.supportsTestSelectors,ln=a.findFiberRoot,an=a.getBoundingRect,pn=a.getTextContent,gn=a.isHiddenSubtree,Mn=a.matchAccessibilityRole,fn=a.setFocusIfFocusable,vn=a.setupIntersectionObserver,Tn=a.appendChild,Wn=a.appendChildToContainer,fr=a.commitTextUpdate,no=a.commitMount,zr=a.commitUpdate,Hr=a.insertBefore,ro=a.insertInContainerBefore,Ro=a.removeChild,dr=a.removeChildFromContainer,rr=a.resetTextContent,br=a.hideInstance,io=a.hideTextInstance,Xn=a.unhideInstance,jr=a.unhideTextInstance,Pr=a.clearContainer,Co=a.cloneInstance,Mt=a.createContainerChildSet,Jt=a.appendChildToContainerChildSet,$t=a.finalizeContainerChildren,nn=a.replaceContainerChildren,cn=a.cloneHiddenInstance,Rn=a.cloneHiddenTextInstance,Ln=a.canHydrateInstance,Cn=a.canHydrateTextInstance,An=a.isSuspenseInstancePending,Gn=a.isSuspenseInstanceFallback,Nn=a.getNextHydratableSibling,En=a.getFirstHydratableChild,On=a.hydrateInstance,xr=a.hydrateTextInstance,Dn=a.getNextHydratableInstanceAfterSuspenseInstance,Er=a.commitHydratedContainer,$n=a.commitHydratedSuspenseInstance,oo;function qn(_){if(oo===void 0)try{throw Error()}catch(ot){var k=ot.stack.trim().match(/\n( *(at )?)/);oo=k&&k[1]||""}return`
`+oo+_}var Or=!1;function wr(_,k){if(!_||Or)return"";Or=!0;var ot=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(k)if(k=function(){throw Error()},Object.defineProperty(k.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(k,[])}catch(Qt){var ft=Qt}Reflect.construct(_,[],k)}else{try{k.call()}catch(Qt){ft=Qt}_.call(k.prototype)}else{try{throw Error()}catch(Qt){ft=Qt}_()}}catch(Qt){if(Qt&&ft&&typeof Qt.stack=="string"){for(var dt=Qt.stack.split(`
`),gt=ft.stack.split(`
`),Tt=dt.length-1,kt=gt.length-1;1<=Tt&&0<=kt&&dt[Tt]!==gt[kt];)kt--;for(;1<=Tt&&0<=kt;Tt--,kt--)if(dt[Tt]!==gt[kt]){if(Tt!==1||kt!==1)do if(Tt--,kt--,0>kt||dt[Tt]!==gt[kt])return`
`+dt[Tt].replace(" at new "," at ");while(1<=Tt&&0<=kt);break}}}finally{Or=!1,Error.prepareStackTrace=ot}return(_=_?_.displayName||_.name:"")?qn(_):""}var Br=[],mo=-1;function Wr(_){return{current:_}}function Vn(_){0>mo||(_.current=Br[mo],Br[mo]=null,mo--)}function zn(_,k){mo++,Br[mo]=_.current,_.current=k}var Xr={},er=Wr(Xr),or=Wr(!1),ao=Xr;function go(_,k){var ot=_.type.contextTypes;if(!ot)return Xr;var ft=_.stateNode;if(ft&&ft.__reactInternalMemoizedUnmaskedChildContext===k)return ft.__reactInternalMemoizedMaskedChildContext;var dt={},gt;for(gt in ot)dt[gt]=k[gt];return ft&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=k,_.__reactInternalMemoizedMaskedChildContext=dt),dt}function ar(_){return _=_.childContextTypes,_!=null}function ga(){Vn(or),Vn(er)}function zl(_,k,ot){if(er.current!==Xr)throw Error(h(168));zn(er,k),zn(or,ot)}function Hl(_,k,ot){var ft=_.stateNode;if(_=k.childContextTypes,typeof ft.getChildContext!="function")return ot;ft=ft.getChildContext();for(var dt in ft)if(!(dt in _))throw Error(h(108,Ft(k)||"Unknown",dt));return c({},ot,ft)}function va(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||Xr,ao=er.current,zn(er,_),zn(or,or.current),!0}function jl(_,k,ot){var ft=_.stateNode;if(!ft)throw Error(h(169));ot?(_=Hl(_,k,ao),ft.__reactInternalMemoizedMergedChildContext=_,Vn(or),Vn(er),zn(er,_)):Vn(or),zn(or,ot)}var zs=null,so=null,lp=d.unstable_now;lp();var _a=0,Fn=8;function lo(_){if((1&_)!==0)return Fn=15,1;if((2&_)!==0)return Fn=14,2;if((4&_)!==0)return Fn=13,4;var k=24&_;return k!==0?(Fn=12,k):(_&32)!==0?(Fn=11,32):(k=192&_,k!==0?(Fn=10,k):(_&256)!==0?(Fn=9,256):(k=3584&_,k!==0?(Fn=8,k):(_&4096)!==0?(Fn=7,4096):(k=4186112&_,k!==0?(Fn=6,k):(k=62914560&_,k!==0?(Fn=5,k):_&67108864?(Fn=4,67108864):(_&134217728)!==0?(Fn=3,134217728):(k=805306368&_,k!==0?(Fn=2,k):(1073741824&_)!==0?(Fn=1,1073741824):(Fn=8,_))))))}function up(_){switch(_){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function cp(_){switch(_){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(h(358,_))}}function Po(_,k){var ot=_.pendingLanes;if(ot===0)return Fn=0;var ft=0,dt=0,gt=_.expiredLanes,Tt=_.suspendedLanes,kt=_.pingedLanes;if(gt!==0)ft=gt,dt=Fn=15;else if(gt=ot&134217727,gt!==0){var Qt=gt&~Tt;Qt!==0?(ft=lo(Qt),dt=Fn):(kt&=gt,kt!==0&&(ft=lo(kt),dt=Fn))}else gt=ot&~Tt,gt!==0?(ft=lo(gt),dt=Fn):kt!==0&&(ft=lo(kt),dt=Fn);if(ft===0)return 0;if(ft=31-$r(ft),ft=ot&((0>ft?0:1<<ft)<<1)-1,k!==0&&k!==ft&&(k&Tt)===0){if(lo(k),dt<=Fn)return k;Fn=dt}if(k=_.entangledLanes,k!==0)for(_=_.entanglements,k&=ft;0<k;)ot=31-$r(k),dt=1<<ot,ft|=_[ot],k&=~dt;return ft}function Wl(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function es(_,k){switch(_){case 15:return 1;case 14:return 2;case 12:return _=yo(24&~k),_===0?es(10,k):_;case 10:return _=yo(192&~k),_===0?es(8,k):_;case 8:return _=yo(3584&~k),_===0&&(_=yo(4186112&~k),_===0&&(_=512)),_;case 2:return k=yo(805306368&~k),k===0&&(k=268435456),k}throw Error(h(358,_))}function yo(_){return _&-_}function Hs(_){for(var k=[],ot=0;31>ot;ot++)k.push(_);return k}function ts(_,k,ot){_.pendingLanes|=k;var ft=k-1;_.suspendedLanes&=ft,_.pingedLanes&=ft,_=_.eventTimes,k=31-$r(k),_[k]=ot}var $r=Math.clz32?Math.clz32:hp,fp=Math.log,dp=Math.LN2;function hp(_){return _===0?32:31-(fp(_)/dp|0)|0}var pp=d.unstable_runWithPriority,js=d.unstable_scheduleCallback,Ws=d.unstable_cancelCallback,mp=d.unstable_shouldYield,Xl=d.unstable_requestPaint,Xs=d.unstable_now,gp=d.unstable_getCurrentPriorityLevel,ns=d.unstable_ImmediatePriority,$l=d.unstable_UserBlockingPriority,ql=d.unstable_NormalPriority,Yl=d.unstable_LowPriority,Zl=d.unstable_IdlePriority,$s={},yp=Xl!==void 0?Xl:function(){},Ir=null,rs=null,qs=!1,Ql=Xs(),Qn=1e4>Ql?Xs:function(){return Xs()-Ql};function vo(){switch(gp()){case ns:return 99;case $l:return 98;case ql:return 97;case Yl:return 96;case Zl:return 95;default:throw Error(h(332))}}function Kl(_){switch(_){case 99:return ns;case 98:return $l;case 97:return ql;case 96:return Yl;case 95:return Zl;default:throw Error(h(332))}}function Dr(_,k){return _=Kl(_),pp(_,k)}function Oo(_,k,ot){return _=Kl(_),js(_,k,ot)}function hr(){if(rs!==null){var _=rs;rs=null,Ws(_)}Jl()}function Jl(){if(!qs&&Ir!==null){qs=!0;var _=0;try{var k=Ir;Dr(99,function(){for(;_<k.length;_++){var ot=k[_];do ot=ot(!0);while(ot!==null)}}),Ir=null}catch(ot){throw Ir!==null&&(Ir=Ir.slice(_+1)),js(ns,hr),ot}finally{qs=!1}}}var vp=g.ReactCurrentBatchConfig;function _p(_,k){return _===k&&(_!==0||1/_===1/k)||_!==_&&k!==k}var pr=typeof Object.is=="function"?Object.is:_p,xp=Object.prototype.hasOwnProperty;function os(_,k){if(pr(_,k))return!0;if(typeof _!="object"||_===null||typeof k!="object"||k===null)return!1;var ot=Object.keys(_),ft=Object.keys(k);if(ot.length!==ft.length)return!1;for(ft=0;ft<ot.length;ft++)if(!xp.call(k,ot[ft])||!pr(_[ot[ft]],k[ot[ft]]))return!1;return!0}function wp(_){switch(_.tag){case 5:return qn(_.type);case 16:return qn("Lazy");case 13:return qn("Suspense");case 19:return qn("SuspenseList");case 0:case 2:case 15:return _=wr(_.type,!1),_;case 11:return _=wr(_.type.render,!1),_;case 22:return _=wr(_.type._render,!1),_;case 1:return _=wr(_.type,!0),_;default:return""}}function Mr(_,k){if(_&&_.defaultProps){k=c({},k),_=_.defaultProps;for(var ot in _)k[ot]===void 0&&(k[ot]=_[ot]);return k}return k}var as=Wr(null),ss=null,_o=null,ls=null;function Ys(){ls=_o=ss=null}function eu(_,k){_=_.type._context,Et?(zn(as,_._currentValue),_._currentValue=k):(zn(as,_._currentValue2),_._currentValue2=k)}function Zs(_){var k=as.current;Vn(as),_=_.type._context,Et?_._currentValue=k:_._currentValue2=k}function tu(_,k){for(;_!==null;){var ot=_.alternate;if((_.childLanes&k)===k){if(ot===null||(ot.childLanes&k)===k)break;ot.childLanes|=k}else _.childLanes|=k,ot!==null&&(ot.childLanes|=k);_=_.return}}function xo(_,k){ss=_,ls=_o=null,_=_.dependencies,_!==null&&_.firstContext!==null&&((_.lanes&k)!==0&&(Sr=!0),_.firstContext=null)}function mr(_,k){if(ls!==_&&k!==!1&&k!==0)if((typeof k!="number"||k===1073741823)&&(ls=_,k=1073741823),k={context:_,observedBits:k,next:null},_o===null){if(ss===null)throw Error(h(308));_o=k,ss.dependencies={lanes:0,firstContext:k,responders:null}}else _o=_o.next=k;return Et?_._currentValue:_._currentValue2}var qr=!1;function Qs(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function nu(_,k){_=_.updateQueue,k.updateQueue===_&&(k.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function Yr(_,k){return{eventTime:_,lane:k,tag:0,payload:null,callback:null,next:null}}function Zr(_,k){if(_=_.updateQueue,_!==null){_=_.shared;var ot=_.pending;ot===null?k.next=k:(k.next=ot.next,ot.next=k),_.pending=k}}function ru(_,k){var ot=_.updateQueue,ft=_.alternate;if(ft!==null&&(ft=ft.updateQueue,ot===ft)){var dt=null,gt=null;if(ot=ot.firstBaseUpdate,ot!==null){do{var Tt={eventTime:ot.eventTime,lane:ot.lane,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null};gt===null?dt=gt=Tt:gt=gt.next=Tt,ot=ot.next}while(ot!==null);gt===null?dt=gt=k:gt=gt.next=k}else dt=gt=k;ot={baseState:ft.baseState,firstBaseUpdate:dt,lastBaseUpdate:gt,shared:ft.shared,effects:ft.effects},_.updateQueue=ot;return}_=ot.lastBaseUpdate,_===null?ot.firstBaseUpdate=k:_.next=k,ot.lastBaseUpdate=k}function Bo(_,k,ot,ft){var dt=_.updateQueue;qr=!1;var gt=dt.firstBaseUpdate,Tt=dt.lastBaseUpdate,kt=dt.shared.pending;if(kt!==null){dt.shared.pending=null;var Qt=kt,un=Qt.next;Qt.next=null,Tt===null?gt=un:Tt.next=un,Tt=Qt;var _n=_.alternate;if(_n!==null){_n=_n.updateQueue;var Sn=_n.lastBaseUpdate;Sn!==Tt&&(Sn===null?_n.firstBaseUpdate=un:Sn.next=un,_n.lastBaseUpdate=Qt)}}if(gt!==null){Sn=dt.baseState,Tt=0,_n=un=Qt=null;do{kt=gt.lane;var hn=gt.eventTime;if((ft&kt)===kt){_n!==null&&(_n=_n.next={eventTime:hn,lane:0,tag:gt.tag,payload:gt.payload,callback:gt.callback,next:null});e:{var In=_,Un=gt;switch(kt=k,hn=ot,Un.tag){case 1:if(In=Un.payload,typeof In=="function"){Sn=In.call(hn,Sn,kt);break e}Sn=In;break e;case 3:In.flags=In.flags&-4097|64;case 0:if(In=Un.payload,kt=typeof In=="function"?In.call(hn,Sn,kt):In,kt==null)break e;Sn=c({},Sn,kt);break e;case 2:qr=!0}}gt.callback!==null&&(_.flags|=32,kt=dt.effects,kt===null?dt.effects=[gt]:kt.push(gt))}else hn={eventTime:hn,lane:kt,tag:gt.tag,payload:gt.payload,callback:gt.callback,next:null},_n===null?(un=_n=hn,Qt=Sn):_n=_n.next=hn,Tt|=kt;if(gt=gt.next,gt===null){if(kt=dt.shared.pending,kt===null)break;gt=kt.next,kt.next=null,dt.lastBaseUpdate=kt,dt.shared.pending=null}}while(1);_n===null&&(Qt=Sn),dt.baseState=Qt,dt.firstBaseUpdate=un,dt.lastBaseUpdate=_n,$o|=Tt,_.lanes=Tt,_.memoizedState=Sn}}function iu(_,k,ot){if(_=k.effects,k.effects=null,_!==null)for(k=0;k<_.length;k++){var ft=_[k],dt=ft.callback;if(dt!==null){if(ft.callback=null,ft=ot,typeof dt!="function")throw Error(h(191,dt));dt.call(ft)}}}var ou=new f.Component().refs;function us(_,k,ot,ft){k=_.memoizedState,ot=ot(ft,k),ot=ot==null?k:c({},k,ot),_.memoizedState=ot,_.lanes===0&&(_.updateQueue.baseState=ot)}var cs={isMounted:function(_){return(_=_._reactInternals)?It(_)===_:!1},enqueueSetState:function(_,k,ot){_=_._reactInternals;var ft=ur(),dt=Jr(_),gt=Yr(ft,dt);gt.payload=k,ot!=null&&(gt.callback=ot),Zr(_,gt),Ur(_,dt,ft)},enqueueReplaceState:function(_,k,ot){_=_._reactInternals;var ft=ur(),dt=Jr(_),gt=Yr(ft,dt);gt.tag=1,gt.payload=k,ot!=null&&(gt.callback=ot),Zr(_,gt),Ur(_,dt,ft)},enqueueForceUpdate:function(_,k){_=_._reactInternals;var ot=ur(),ft=Jr(_),dt=Yr(ot,ft);dt.tag=2,k!=null&&(dt.callback=k),Zr(_,dt),Ur(_,ft,ot)}};function au(_,k,ot,ft,dt,gt,Tt){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(ft,gt,Tt):k.prototype&&k.prototype.isPureReactComponent?!os(ot,ft)||!os(dt,gt):!0}function su(_,k,ot){var ft=!1,dt=Xr,gt=k.contextType;return typeof gt=="object"&&gt!==null?gt=mr(gt):(dt=ar(k)?ao:er.current,ft=k.contextTypes,gt=(ft=ft!=null)?go(_,dt):Xr),k=new k(ot,gt),_.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=cs,_.stateNode=k,k._reactInternals=_,ft&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=dt,_.__reactInternalMemoizedMaskedChildContext=gt),k}function lu(_,k,ot,ft){_=k.state,typeof k.componentWillReceiveProps=="function"&&k.componentWillReceiveProps(ot,ft),typeof k.UNSAFE_componentWillReceiveProps=="function"&&k.UNSAFE_componentWillReceiveProps(ot,ft),k.state!==_&&cs.enqueueReplaceState(k,k.state,null)}function Ks(_,k,ot,ft){var dt=_.stateNode;dt.props=ot,dt.state=_.memoizedState,dt.refs=ou,Qs(_);var gt=k.contextType;typeof gt=="object"&&gt!==null?dt.context=mr(gt):(gt=ar(k)?ao:er.current,dt.context=go(_,gt)),Bo(_,ot,dt,ft),dt.state=_.memoizedState,gt=k.getDerivedStateFromProps,typeof gt=="function"&&(us(_,k,gt,ot),dt.state=_.memoizedState),typeof k.getDerivedStateFromProps=="function"||typeof dt.getSnapshotBeforeUpdate=="function"||typeof dt.UNSAFE_componentWillMount!="function"&&typeof dt.componentWillMount!="function"||(k=dt.state,typeof dt.componentWillMount=="function"&&dt.componentWillMount(),typeof dt.UNSAFE_componentWillMount=="function"&&dt.UNSAFE_componentWillMount(),k!==dt.state&&cs.enqueueReplaceState(dt,dt.state,null),Bo(_,ot,dt,ft),dt.state=_.memoizedState),typeof dt.componentDidMount=="function"&&(_.flags|=4)}var fs=Array.isArray;function Io(_,k,ot){if(_=ot.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(ot._owner){if(ot=ot._owner,ot){if(ot.tag!==1)throw Error(h(309));var ft=ot.stateNode}if(!ft)throw Error(h(147,_));var dt=""+_;return k!==null&&k.ref!==null&&typeof k.ref=="function"&&k.ref._stringRef===dt?k.ref:(k=function(gt){var Tt=ft.refs;Tt===ou&&(Tt=ft.refs={}),gt===null?delete Tt[dt]:Tt[dt]=gt},k._stringRef=dt,k)}if(typeof _!="string")throw Error(h(284));if(!ot._owner)throw Error(h(290,_))}return _}function ds(_,k){if(_.type!=="textarea")throw Error(h(31,Object.prototype.toString.call(k)==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":k))}function uu(_){function k(jt,Vt){if(_){var Kt=jt.lastEffect;Kt!==null?(Kt.nextEffect=Vt,jt.lastEffect=Vt):jt.firstEffect=jt.lastEffect=Vt,Vt.nextEffect=null,Vt.flags=8}}function ot(jt,Vt){if(!_)return null;for(;Vt!==null;)k(jt,Vt),Vt=Vt.sibling;return null}function ft(jt,Vt){for(jt=new Map;Vt!==null;)Vt.key!==null?jt.set(Vt.key,Vt):jt.set(Vt.index,Vt),Vt=Vt.sibling;return jt}function dt(jt,Vt){return jt=eo(jt,Vt),jt.index=0,jt.sibling=null,jt}function gt(jt,Vt,Kt){return jt.index=Kt,_?(Kt=jt.alternate,Kt!==null?(Kt=Kt.index,Kt<Vt?(jt.flags=2,Vt):Kt):(jt.flags=2,Vt)):Vt}function Tt(jt){return _&&jt.alternate===null&&(jt.flags=2),jt}function kt(jt,Vt,Kt,dn){return Vt===null||Vt.tag!==6?(Vt=Ul(Kt,jt.mode,dn),Vt.return=jt,Vt):(Vt=dt(Vt,Kt),Vt.return=jt,Vt)}function Qt(jt,Vt,Kt,dn){return Vt!==null&&Vt.elementType===Kt.type?(dn=dt(Vt,Kt.props),dn.ref=Io(jt,Vt,Kt),dn.return=jt,dn):(dn=Us(Kt.type,Kt.key,Kt.props,null,jt.mode,dn),dn.ref=Io(jt,Vt,Kt),dn.return=jt,dn)}function un(jt,Vt,Kt,dn){return Vt===null||Vt.tag!==4||Vt.stateNode.containerInfo!==Kt.containerInfo||Vt.stateNode.implementation!==Kt.implementation?(Vt=Gl(Kt,jt.mode,dn),Vt.return=jt,Vt):(Vt=dt(Vt,Kt.children||[]),Vt.return=jt,Vt)}function _n(jt,Vt,Kt,dn,xn){return Vt===null||Vt.tag!==7?(Vt=Ao(Kt,jt.mode,dn,xn),Vt.return=jt,Vt):(Vt=dt(Vt,Kt),Vt.return=jt,Vt)}function Sn(jt,Vt,Kt){if(typeof Vt=="string"||typeof Vt=="number")return Vt=Ul(""+Vt,jt.mode,Kt),Vt.return=jt,Vt;if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case b:return Kt=Us(Vt.type,Vt.key,Vt.props,null,jt.mode,Kt),Kt.ref=Io(jt,null,Vt),Kt.return=jt,Kt;case tt:return Vt=Gl(Vt,jt.mode,Kt),Vt.return=jt,Vt}if(fs(Vt)||St(Vt))return Vt=Ao(Vt,jt.mode,Kt,null),Vt.return=jt,Vt;ds(jt,Vt)}return null}function hn(jt,Vt,Kt,dn){var xn=Vt!==null?Vt.key:null;if(typeof Kt=="string"||typeof Kt=="number")return xn!==null?null:kt(jt,Vt,""+Kt,dn);if(typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case b:return Kt.key===xn?Kt.type===j?_n(jt,Vt,Kt.props.children,dn,xn):Qt(jt,Vt,Kt,dn):null;case tt:return Kt.key===xn?un(jt,Vt,Kt,dn):null}if(fs(Kt)||St(Kt))return xn!==null?null:_n(jt,Vt,Kt,dn,null);ds(jt,Kt)}return null}function In(jt,Vt,Kt,dn,xn){if(typeof dn=="string"||typeof dn=="number")return jt=jt.get(Kt)||null,kt(Vt,jt,""+dn,xn);if(typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case b:return jt=jt.get(dn.key===null?Kt:dn.key)||null,dn.type===j?_n(Vt,jt,dn.props.children,xn,dn.key):Qt(Vt,jt,dn,xn);case tt:return jt=jt.get(dn.key===null?Kt:dn.key)||null,un(Vt,jt,dn,xn)}if(fs(dn)||St(dn))return jt=jt.get(Kt)||null,_n(Vt,jt,dn,xn,null);ds(Vt,dn)}return null}function Un(jt,Vt,Kt,dn){for(var xn=null,kn=null,bn=Vt,Bn=Vt=0,Yn=null;bn!==null&&Bn<Kt.length;Bn++){bn.index>Bn?(Yn=bn,bn=null):Yn=bn.sibling;var Pn=hn(jt,bn,Kt[Bn],dn);if(Pn===null){bn===null&&(bn=Yn);break}_&&bn&&Pn.alternate===null&&k(jt,bn),Vt=gt(Pn,Vt,Bn),kn===null?xn=Pn:kn.sibling=Pn,kn=Pn,bn=Yn}if(Bn===Kt.length)return ot(jt,bn),xn;if(bn===null){for(;Bn<Kt.length;Bn++)bn=Sn(jt,Kt[Bn],dn),bn!==null&&(Vt=gt(bn,Vt,Bn),kn===null?xn=bn:kn.sibling=bn,kn=bn);return xn}for(bn=ft(jt,bn);Bn<Kt.length;Bn++)Yn=In(bn,jt,Bn,Kt[Bn],dn),Yn!==null&&(_&&Yn.alternate!==null&&bn.delete(Yn.key===null?Bn:Yn.key),Vt=gt(Yn,Vt,Bn),kn===null?xn=Yn:kn.sibling=Yn,kn=Yn);return _&&bn.forEach(function(to){return k(jt,to)}),xn}function _r(jt,Vt,Kt,dn){var xn=St(Kt);if(typeof xn!="function")throw Error(h(150));if(Kt=xn.call(Kt),Kt==null)throw Error(h(151));for(var kn=xn=null,bn=Vt,Bn=Vt=0,Yn=null,Pn=Kt.next();bn!==null&&!Pn.done;Bn++,Pn=Kt.next()){bn.index>Bn?(Yn=bn,bn=null):Yn=bn.sibling;var to=hn(jt,bn,Pn.value,dn);if(to===null){bn===null&&(bn=Yn);break}_&&bn&&to.alternate===null&&k(jt,bn),Vt=gt(to,Vt,Bn),kn===null?xn=to:kn.sibling=to,kn=to,bn=Yn}if(Pn.done)return ot(jt,bn),xn;if(bn===null){for(;!Pn.done;Bn++,Pn=Kt.next())Pn=Sn(jt,Pn.value,dn),Pn!==null&&(Vt=gt(Pn,Vt,Bn),kn===null?xn=Pn:kn.sibling=Pn,kn=Pn);return xn}for(bn=ft(jt,bn);!Pn.done;Bn++,Pn=Kt.next())Pn=In(bn,jt,Bn,Pn.value,dn),Pn!==null&&(_&&Pn.alternate!==null&&bn.delete(Pn.key===null?Bn:Pn.key),Vt=gt(Pn,Vt,Bn),kn===null?xn=Pn:kn.sibling=Pn,kn=Pn);return _&&bn.forEach(function(Qp){return k(jt,Qp)}),xn}return function(jt,Vt,Kt,dn){var xn=typeof Kt=="object"&&Kt!==null&&Kt.type===j&&Kt.key===null;xn&&(Kt=Kt.props.children);var kn=typeof Kt=="object"&&Kt!==null;if(kn)switch(Kt.$$typeof){case b:e:{for(kn=Kt.key,xn=Vt;xn!==null;){if(xn.key===kn){switch(xn.tag){case 7:if(Kt.type===j){ot(jt,xn.sibling),Vt=dt(xn,Kt.props.children),Vt.return=jt,jt=Vt;break e}break;default:if(xn.elementType===Kt.type){ot(jt,xn.sibling),Vt=dt(xn,Kt.props),Vt.ref=Io(jt,xn,Kt),Vt.return=jt,jt=Vt;break e}}ot(jt,xn);break}else k(jt,xn);xn=xn.sibling}Kt.type===j?(Vt=Ao(Kt.props.children,jt.mode,dn,Kt.key),Vt.return=jt,jt=Vt):(dn=Us(Kt.type,Kt.key,Kt.props,null,jt.mode,dn),dn.ref=Io(jt,Vt,Kt),dn.return=jt,jt=dn)}return Tt(jt);case tt:e:{for(xn=Kt.key;Vt!==null;){if(Vt.key===xn)if(Vt.tag===4&&Vt.stateNode.containerInfo===Kt.containerInfo&&Vt.stateNode.implementation===Kt.implementation){ot(jt,Vt.sibling),Vt=dt(Vt,Kt.children||[]),Vt.return=jt,jt=Vt;break e}else{ot(jt,Vt);break}else k(jt,Vt);Vt=Vt.sibling}Vt=Gl(Kt,jt.mode,dn),Vt.return=jt,jt=Vt}return Tt(jt)}if(typeof Kt=="string"||typeof Kt=="number")return Kt=""+Kt,Vt!==null&&Vt.tag===6?(ot(jt,Vt.sibling),Vt=dt(Vt,Kt),Vt.return=jt,jt=Vt):(ot(jt,Vt),Vt=Ul(Kt,jt.mode,dn),Vt.return=jt,jt=Vt),Tt(jt);if(fs(Kt))return Un(jt,Vt,Kt,dn);if(St(Kt))return _r(jt,Vt,Kt,dn);if(kn&&ds(jt,Kt),typeof Kt=="undefined"&&!xn)switch(jt.tag){case 1:case 22:case 0:case 11:case 15:throw Error(h(152,Ft(jt.type)||"Component"))}return ot(jt,Vt)}}var hs=uu(!0),cu=uu(!1),Do={},gr=Wr(Do),Fo=Wr(Do),wo=Wr(Do);function Tr(_){if(_===Do)throw Error(h(174));return _}function Js(_,k){zn(wo,k),zn(Fo,_),zn(gr,Do),_=rn(k),Vn(gr),zn(gr,_)}function Mo(){Vn(gr),Vn(Fo),Vn(wo)}function fu(_){var k=Tr(wo.current),ot=Tr(gr.current);k=Gt(ot,_.type,k),ot!==k&&(zn(Fo,_),zn(gr,k))}function el(_){Fo.current===_&&(Vn(gr),Vn(Fo))}var Hn=Wr(0);function ps(_){for(var k=_;k!==null;){if(k.tag===13){var ot=k.memoizedState;if(ot!==null&&(ot=ot.dehydrated,ot===null||An(ot)||Gn(ot)))return k}else if(k.tag===19&&k.memoizedProps.revealOrder!==void 0){if((k.flags&64)!==0)return k}else if(k.child!==null){k.child.return=k,k=k.child;continue}if(k===_)break;for(;k.sibling===null;){if(k.return===null||k.return===_)return null;k=k.return}k.sibling.return=k.return,k=k.sibling}return null}var Fr=null,uo=null,Lr=!1;function du(_,k){var ot=vr(5,null,null,0);ot.elementType="DELETED",ot.type="DELETED",ot.stateNode=k,ot.return=_,ot.flags=8,_.lastEffect!==null?(_.lastEffect.nextEffect=ot,_.lastEffect=ot):_.firstEffect=_.lastEffect=ot}function hu(_,k){switch(_.tag){case 5:return k=Ln(k,_.type,_.pendingProps),k!==null?(_.stateNode=k,!0):!1;case 6:return k=Cn(k,_.pendingProps),k!==null?(_.stateNode=k,!0):!1;case 13:return!1;default:return!1}}function tl(_){if(Lr){var k=uo;if(k){var ot=k;if(!hu(_,k)){if(k=Nn(ot),!k||!hu(_,k)){_.flags=_.flags&-1025|2,Lr=!1,Fr=_;return}du(Fr,ot)}Fr=_,uo=En(k)}else _.flags=_.flags&-1025|2,Lr=!1,Fr=_}}function pu(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;Fr=_}function ms(_){if(!Ut||_!==Fr)return!1;if(!Lr)return pu(_),Lr=!0,!1;var k=_.type;if(_.tag!==5||k!=="head"&&k!=="body"&&!At(k,_.memoizedProps))for(k=uo;k;)du(_,k),k=Nn(k);if(pu(_),_.tag===13){if(!Ut)throw Error(h(316));if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(h(317));uo=Dn(_)}else uo=Fr?Nn(_.stateNode):null;return!0}function nl(){Ut&&(uo=Fr=null,Lr=!1)}var So=[];function rl(){for(var _=0;_<So.length;_++){var k=So[_];Et?k._workInProgressVersionPrimary=null:k._workInProgressVersionSecondary=null}So.length=0}var ko=g.ReactCurrentDispatcher,yr=g.ReactCurrentBatchConfig,No=0,jn=null,tr=null,Kn=null,gs=!1,Vo=!1;function sr(){throw Error(h(321))}function il(_,k){if(k===null)return!1;for(var ot=0;ot<k.length&&ot<_.length;ot++)if(!pr(_[ot],k[ot]))return!1;return!0}function ol(_,k,ot,ft,dt,gt){if(No=gt,jn=k,k.memoizedState=null,k.updateQueue=null,k.lanes=0,ko.current=_===null||_.memoizedState===null?Sp:bp,_=ot(ft,dt),Vo){gt=0;do{if(Vo=!1,!(25>gt))throw Error(h(301));gt+=1,Kn=tr=null,k.updateQueue=null,ko.current=Ep,_=ot(ft,dt)}while(Vo)}if(ko.current=xs,k=tr!==null&&tr.next!==null,No=0,Kn=tr=jn=null,gs=!1,k)throw Error(h(300));return _}function co(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?jn.memoizedState=Kn=_:Kn=Kn.next=_,Kn}function fo(){if(tr===null){var _=jn.alternate;_=_!==null?_.memoizedState:null}else _=tr.next;var k=Kn===null?jn.memoizedState:Kn.next;if(k!==null)Kn=k,tr=_;else{if(_===null)throw Error(h(310));tr=_,_={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},Kn===null?jn.memoizedState=Kn=_:Kn=Kn.next=_}return Kn}function Ar(_,k){return typeof k=="function"?k(_):k}function Uo(_){var k=fo(),ot=k.queue;if(ot===null)throw Error(h(311));ot.lastRenderedReducer=_;var ft=tr,dt=ft.baseQueue,gt=ot.pending;if(gt!==null){if(dt!==null){var Tt=dt.next;dt.next=gt.next,gt.next=Tt}ft.baseQueue=dt=gt,ot.pending=null}if(dt!==null){dt=dt.next,ft=ft.baseState;var kt=Tt=gt=null,Qt=dt;do{var un=Qt.lane;if((No&un)===un)kt!==null&&(kt=kt.next={lane:0,action:Qt.action,eagerReducer:Qt.eagerReducer,eagerState:Qt.eagerState,next:null}),ft=Qt.eagerReducer===_?Qt.eagerState:_(ft,Qt.action);else{var _n={lane:un,action:Qt.action,eagerReducer:Qt.eagerReducer,eagerState:Qt.eagerState,next:null};kt===null?(Tt=kt=_n,gt=ft):kt=kt.next=_n,jn.lanes|=un,$o|=un}Qt=Qt.next}while(Qt!==null&&Qt!==dt);kt===null?gt=ft:kt.next=Tt,pr(ft,k.memoizedState)||(Sr=!0),k.memoizedState=ft,k.baseState=gt,k.baseQueue=kt,ot.lastRenderedState=ft}return[k.memoizedState,ot.dispatch]}function Go(_){var k=fo(),ot=k.queue;if(ot===null)throw Error(h(311));ot.lastRenderedReducer=_;var ft=ot.dispatch,dt=ot.pending,gt=k.memoizedState;if(dt!==null){ot.pending=null;var Tt=dt=dt.next;do gt=_(gt,Tt.action),Tt=Tt.next;while(Tt!==dt);pr(gt,k.memoizedState)||(Sr=!0),k.memoizedState=gt,k.baseQueue===null&&(k.baseState=gt),ot.lastRenderedState=gt}return[gt,ft]}function mu(_,k,ot){var ft=k._getVersion;ft=ft(k._source);var dt=Et?k._workInProgressVersionPrimary:k._workInProgressVersionSecondary;if(dt!==null?_=dt===ft:(_=_.mutableReadLanes,(_=(No&_)===_)&&(Et?k._workInProgressVersionPrimary=ft:k._workInProgressVersionSecondary=ft,So.push(k))),_)return ot(k._source);throw So.push(k),Error(h(350))}function gu(_,k,ot,ft){var dt=ir;if(dt===null)throw Error(h(349));var gt=k._getVersion,Tt=gt(k._source),kt=ko.current,Qt=kt.useState(function(){return mu(dt,k,ot)}),un=Qt[1],_n=Qt[0];Qt=Kn;var Sn=_.memoizedState,hn=Sn.refs,In=hn.getSnapshot,Un=Sn.source;Sn=Sn.subscribe;var _r=jn;return _.memoizedState={refs:hn,source:k,subscribe:ft},kt.useEffect(function(){hn.getSnapshot=ot,hn.setSnapshot=un;var jt=gt(k._source);if(!pr(Tt,jt)){jt=ot(k._source),pr(_n,jt)||(un(jt),jt=Jr(_r),dt.mutableReadLanes|=jt&dt.pendingLanes),jt=dt.mutableReadLanes,dt.entangledLanes|=jt;for(var Vt=dt.entanglements,Kt=jt;0<Kt;){var dn=31-$r(Kt),xn=1<<dn;Vt[dn]|=jt,Kt&=~xn}}},[ot,k,ft]),kt.useEffect(function(){return ft(k._source,function(){var jt=hn.getSnapshot,Vt=hn.setSnapshot;try{Vt(jt(k._source));var Kt=Jr(_r);dt.mutableReadLanes|=Kt&dt.pendingLanes}catch(dn){Vt(function(){throw dn})}})},[k,ft]),pr(In,ot)&&pr(Un,k)&&pr(Sn,ft)||(_={pending:null,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:_n},_.dispatch=un=ul.bind(null,jn,_),Qt.queue=_,Qt.baseQueue=null,_n=mu(dt,k,ot),Qt.memoizedState=Qt.baseState=_n),_n}function yu(_,k,ot){var ft=fo();return gu(ft,_,k,ot)}function zo(_){var k=co();return typeof _=="function"&&(_=_()),k.memoizedState=k.baseState=_,_=k.queue={pending:null,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:_},_=_.dispatch=ul.bind(null,jn,_),[k.memoizedState,_]}function ys(_,k,ot,ft){return _={tag:_,create:k,destroy:ot,deps:ft,next:null},k=jn.updateQueue,k===null?(k={lastEffect:null},jn.updateQueue=k,k.lastEffect=_.next=_):(ot=k.lastEffect,ot===null?k.lastEffect=_.next=_:(ft=ot.next,ot.next=_,_.next=ft,k.lastEffect=_)),_}function vu(_){var k=co();return _={current:_},k.memoizedState=_}function vs(){return fo().memoizedState}function al(_,k,ot,ft){var dt=co();jn.flags|=_,dt.memoizedState=ys(1|k,ot,void 0,ft===void 0?null:ft)}function sl(_,k,ot,ft){var dt=fo();ft=ft===void 0?null:ft;var gt=void 0;if(tr!==null){var Tt=tr.memoizedState;if(gt=Tt.destroy,ft!==null&&il(ft,Tt.deps)){ys(k,ot,gt,ft);return}}jn.flags|=_,dt.memoizedState=ys(1|k,ot,gt,ft)}function _u(_,k){return al(516,4,_,k)}function _s(_,k){return sl(516,4,_,k)}function xu(_,k){return sl(4,2,_,k)}function wu(_,k){if(typeof k=="function")return _=_(),k(_),function(){k(null)};if(k!=null)return _=_(),k.current=_,function(){k.current=null}}function Mu(_,k,ot){return ot=ot!=null?ot.concat([_]):null,sl(4,2,wu.bind(null,k,_),ot)}function ll(){}function Su(_,k){var ot=fo();k=k===void 0?null:k;var ft=ot.memoizedState;return ft!==null&&k!==null&&il(k,ft[1])?ft[0]:(ot.memoizedState=[_,k],_)}function bu(_,k){var ot=fo();k=k===void 0?null:k;var ft=ot.memoizedState;return ft!==null&&k!==null&&il(k,ft[1])?ft[0]:(_=_(),ot.memoizedState=[_,k],_)}function Mp(_,k){var ot=vo();Dr(98>ot?98:ot,function(){_(!0)}),Dr(97<ot?97:ot,function(){var ft=yr.transition;yr.transition=1;try{_(!1),k()}finally{yr.transition=ft}})}function ul(_,k,ot){var ft=ur(),dt=Jr(_),gt={lane:dt,action:ot,eagerReducer:null,eagerState:null,next:null},Tt=k.pending;if(Tt===null?gt.next=gt:(gt.next=Tt.next,Tt.next=gt),k.pending=gt,Tt=_.alternate,_===jn||Tt!==null&&Tt===jn)Vo=gs=!0;else{if(_.lanes===0&&(Tt===null||Tt.lanes===0)&&(Tt=k.lastRenderedReducer,Tt!==null))try{var kt=k.lastRenderedState,Qt=Tt(kt,ot);if(gt.eagerReducer=Tt,gt.eagerState=Qt,pr(Qt,kt))return}catch{}finally{}Ur(_,dt,ft)}}var xs={readContext:mr,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useMutableSource:sr,useOpaqueIdentifier:sr,unstable_isNewReconciler:!1},Sp={readContext:mr,useCallback:function(_,k){return co().memoizedState=[_,k===void 0?null:k],_},useContext:mr,useEffect:_u,useImperativeHandle:function(_,k,ot){return ot=ot!=null?ot.concat([_]):null,al(4,2,wu.bind(null,k,_),ot)},useLayoutEffect:function(_,k){return al(4,2,_,k)},useMemo:function(_,k){var ot=co();return k=k===void 0?null:k,_=_(),ot.memoizedState=[_,k],_},useReducer:function(_,k,ot){var ft=co();return k=ot!==void 0?ot(k):k,ft.memoizedState=ft.baseState=k,_=ft.queue={pending:null,dispatch:null,lastRenderedReducer:_,lastRenderedState:k},_=_.dispatch=ul.bind(null,jn,_),[ft.memoizedState,_]},useRef:vu,useState:zo,useDebugValue:ll,useDeferredValue:function(_){var k=zo(_),ot=k[0],ft=k[1];return _u(function(){var dt=yr.transition;yr.transition=1;try{ft(_)}finally{yr.transition=dt}},[_]),ot},useTransition:function(){var _=zo(!1),k=_[0];return _=Mp.bind(null,_[1]),vu(_),[_,k]},useMutableSource:function(_,k,ot){var ft=co();return ft.memoizedState={refs:{getSnapshot:k,setSnapshot:null},source:_,subscribe:ot},gu(ft,_,k,ot)},useOpaqueIdentifier:function(){if(Lr){var _=!1,k=vt(function(){throw _||(_=!0,ot(Zt())),Error(h(355))}),ot=zo(k)[1];return(jn.mode&2)===0&&(jn.flags|=516,ys(5,function(){ot(Zt())},void 0,null)),k}return k=Zt(),zo(k),k},unstable_isNewReconciler:!1},bp={readContext:mr,useCallback:Su,useContext:mr,useEffect:_s,useImperativeHandle:Mu,useLayoutEffect:xu,useMemo:bu,useReducer:Uo,useRef:vs,useState:function(){return Uo(Ar)},useDebugValue:ll,useDeferredValue:function(_){var k=Uo(Ar),ot=k[0],ft=k[1];return _s(function(){var dt=yr.transition;yr.transition=1;try{ft(_)}finally{yr.transition=dt}},[_]),ot},useTransition:function(){var _=Uo(Ar)[0];return[vs().current,_]},useMutableSource:yu,useOpaqueIdentifier:function(){return Uo(Ar)[0]},unstable_isNewReconciler:!1},Ep={readContext:mr,useCallback:Su,useContext:mr,useEffect:_s,useImperativeHandle:Mu,useLayoutEffect:xu,useMemo:bu,useReducer:Go,useRef:vs,useState:function(){return Go(Ar)},useDebugValue:ll,useDeferredValue:function(_){var k=Go(Ar),ot=k[0],ft=k[1];return _s(function(){var dt=yr.transition;yr.transition=1;try{ft(_)}finally{yr.transition=dt}},[_]),ot},useTransition:function(){var _=Go(Ar)[0];return[vs().current,_]},useMutableSource:yu,useOpaqueIdentifier:function(){return Go(Ar)[0]},unstable_isNewReconciler:!1},Tp=g.ReactCurrentOwner,Sr=!1;function lr(_,k,ot,ft){k.child=_===null?cu(k,null,ot,ft):hs(k,_.child,ot,ft)}function Eu(_,k,ot,ft,dt){ot=ot.render;var gt=k.ref;return xo(k,dt),ft=ol(_,k,ot,ft,gt,dt),_!==null&&!Sr?(k.updateQueue=_.updateQueue,k.flags&=-517,_.lanes&=~dt,kr(_,k,dt)):(k.flags|=1,lr(_,k,ft,dt),k.child)}function Tu(_,k,ot,ft,dt,gt){if(_===null){var Tt=ot.type;return typeof Tt=="function"&&!Nl(Tt)&&Tt.defaultProps===void 0&&ot.compare===null&&ot.defaultProps===void 0?(k.tag=15,k.type=Tt,Lu(_,k,Tt,ft,dt,gt)):(_=Us(ot.type,null,ft,k,k.mode,gt),_.ref=k.ref,_.return=k,k.child=_)}return Tt=_.child,(dt&gt)===0&&(dt=Tt.memoizedProps,ot=ot.compare,ot=ot!==null?ot:os,ot(dt,ft)&&_.ref===k.ref)?kr(_,k,gt):(k.flags|=1,_=eo(Tt,ft),_.ref=k.ref,_.return=k,k.child=_)}function Lu(_,k,ot,ft,dt,gt){if(_!==null&&os(_.memoizedProps,ft)&&_.ref===k.ref)if(Sr=!1,(gt&dt)!==0)(_.flags&16384)!==0&&(Sr=!0);else return k.lanes=_.lanes,kr(_,k,gt);return fl(_,k,ot,ft,gt)}function cl(_,k,ot){var ft=k.pendingProps,dt=ft.children,gt=_!==null?_.memoizedState:null;if(ft.mode==="hidden"||ft.mode==="unstable-defer-without-hiding")if((k.mode&4)===0)k.memoizedState={baseLanes:0},ks(k,ot);else if((ot&1073741824)!==0)k.memoizedState={baseLanes:0},ks(k,gt!==null?gt.baseLanes:ot);else return _=gt!==null?gt.baseLanes|ot:ot,k.lanes=k.childLanes=1073741824,k.memoizedState={baseLanes:_},ks(k,_),null;else gt!==null?(ft=gt.baseLanes|ot,k.memoizedState=null):ft=ot,ks(k,ft);return lr(_,k,dt,ot),k.child}function Au(_,k){var ot=k.ref;(_===null&&ot!==null||_!==null&&_.ref!==ot)&&(k.flags|=128)}function fl(_,k,ot,ft,dt){var gt=ar(ot)?ao:er.current;return gt=go(k,gt),xo(k,dt),ot=ol(_,k,ot,ft,gt,dt),_!==null&&!Sr?(k.updateQueue=_.updateQueue,k.flags&=-517,_.lanes&=~dt,kr(_,k,dt)):(k.flags|=1,lr(_,k,ot,dt),k.child)}function Ru(_,k,ot,ft,dt){if(ar(ot)){var gt=!0;va(k)}else gt=!1;if(xo(k,dt),k.stateNode===null)_!==null&&(_.alternate=null,k.alternate=null,k.flags|=2),su(k,ot,ft),Ks(k,ot,ft,dt),ft=!0;else if(_===null){var Tt=k.stateNode,kt=k.memoizedProps;Tt.props=kt;var Qt=Tt.context,un=ot.contextType;typeof un=="object"&&un!==null?un=mr(un):(un=ar(ot)?ao:er.current,un=go(k,un));var _n=ot.getDerivedStateFromProps,Sn=typeof _n=="function"||typeof Tt.getSnapshotBeforeUpdate=="function";Sn||typeof Tt.UNSAFE_componentWillReceiveProps!="function"&&typeof Tt.componentWillReceiveProps!="function"||(kt!==ft||Qt!==un)&&lu(k,Tt,ft,un),qr=!1;var hn=k.memoizedState;Tt.state=hn,Bo(k,ft,Tt,dt),Qt=k.memoizedState,kt!==ft||hn!==Qt||or.current||qr?(typeof _n=="function"&&(us(k,ot,_n,ft),Qt=k.memoizedState),(kt=qr||au(k,ot,kt,ft,hn,Qt,un))?(Sn||typeof Tt.UNSAFE_componentWillMount!="function"&&typeof Tt.componentWillMount!="function"||(typeof Tt.componentWillMount=="function"&&Tt.componentWillMount(),typeof Tt.UNSAFE_componentWillMount=="function"&&Tt.UNSAFE_componentWillMount()),typeof Tt.componentDidMount=="function"&&(k.flags|=4)):(typeof Tt.componentDidMount=="function"&&(k.flags|=4),k.memoizedProps=ft,k.memoizedState=Qt),Tt.props=ft,Tt.state=Qt,Tt.context=un,ft=kt):(typeof Tt.componentDidMount=="function"&&(k.flags|=4),ft=!1)}else{Tt=k.stateNode,nu(_,k),kt=k.memoizedProps,un=k.type===k.elementType?kt:Mr(k.type,kt),Tt.props=un,Sn=k.pendingProps,hn=Tt.context,Qt=ot.contextType,typeof Qt=="object"&&Qt!==null?Qt=mr(Qt):(Qt=ar(ot)?ao:er.current,Qt=go(k,Qt));var In=ot.getDerivedStateFromProps;(_n=typeof In=="function"||typeof Tt.getSnapshotBeforeUpdate=="function")||typeof Tt.UNSAFE_componentWillReceiveProps!="function"&&typeof Tt.componentWillReceiveProps!="function"||(kt!==Sn||hn!==Qt)&&lu(k,Tt,ft,Qt),qr=!1,hn=k.memoizedState,Tt.state=hn,Bo(k,ft,Tt,dt);var Un=k.memoizedState;kt!==Sn||hn!==Un||or.current||qr?(typeof In=="function"&&(us(k,ot,In,ft),Un=k.memoizedState),(un=qr||au(k,ot,un,ft,hn,Un,Qt))?(_n||typeof Tt.UNSAFE_componentWillUpdate!="function"&&typeof Tt.componentWillUpdate!="function"||(typeof Tt.componentWillUpdate=="function"&&Tt.componentWillUpdate(ft,Un,Qt),typeof Tt.UNSAFE_componentWillUpdate=="function"&&Tt.UNSAFE_componentWillUpdate(ft,Un,Qt)),typeof Tt.componentDidUpdate=="function"&&(k.flags|=4),typeof Tt.getSnapshotBeforeUpdate=="function"&&(k.flags|=256)):(typeof Tt.componentDidUpdate!="function"||kt===_.memoizedProps&&hn===_.memoizedState||(k.flags|=4),typeof Tt.getSnapshotBeforeUpdate!="function"||kt===_.memoizedProps&&hn===_.memoizedState||(k.flags|=256),k.memoizedProps=ft,k.memoizedState=Un),Tt.props=ft,Tt.state=Un,Tt.context=Qt,ft=un):(typeof Tt.componentDidUpdate!="function"||kt===_.memoizedProps&&hn===_.memoizedState||(k.flags|=4),typeof Tt.getSnapshotBeforeUpdate!="function"||kt===_.memoizedProps&&hn===_.memoizedState||(k.flags|=256),ft=!1)}return dl(_,k,ot,ft,gt,dt)}function dl(_,k,ot,ft,dt,gt){Au(_,k);var Tt=(k.flags&64)!==0;if(!ft&&!Tt)return dt&&jl(k,ot,!1),kr(_,k,gt);ft=k.stateNode,Tp.current=k;var kt=Tt&&typeof ot.getDerivedStateFromError!="function"?null:ft.render();return k.flags|=1,_!==null&&Tt?(k.child=hs(k,_.child,null,gt),k.child=hs(k,null,kt,gt)):lr(_,k,kt,gt),k.memoizedState=ft.state,dt&&jl(k,ot,!0),k.child}function Cu(_){var k=_.stateNode;k.pendingContext?zl(_,k.pendingContext,k.pendingContext!==k.context):k.context&&zl(_,k.context,!1),Js(_,k.containerInfo)}var ws={dehydrated:null,retryLane:0};function Pu(_,k,ot){var ft=k.pendingProps,dt=Hn.current,gt=!1,Tt;return(Tt=(k.flags&64)!==0)||(Tt=_!==null&&_.memoizedState===null?!1:(dt&2)!==0),Tt?(gt=!0,k.flags&=-65):_!==null&&_.memoizedState===null||ft.fallback===void 0||ft.unstable_avoidThisFallback===!0||(dt|=1),zn(Hn,dt&1),_===null?(ft.fallback!==void 0&&tl(k),_=ft.children,dt=ft.fallback,gt?(_=Ou(k,_,dt,ot),k.child.memoizedState={baseLanes:ot},k.memoizedState=ws,_):typeof ft.unstable_expectedLoadTime=="number"?(_=Ou(k,_,dt,ot),k.child.memoizedState={baseLanes:ot},k.memoizedState=ws,k.lanes=33554432,_):(ot=Vl({mode:"visible",children:_},k.mode,ot,null),ot.return=k,k.child=ot)):_.memoizedState!==null?gt?(ft=Iu(_,k,ft.children,ft.fallback,ot),gt=k.child,dt=_.child.memoizedState,gt.memoizedState=dt===null?{baseLanes:ot}:{baseLanes:dt.baseLanes|ot},gt.childLanes=_.childLanes&~ot,k.memoizedState=ws,ft):(ot=Bu(_,k,ft.children,ot),k.memoizedState=null,ot):gt?(ft=Iu(_,k,ft.children,ft.fallback,ot),gt=k.child,dt=_.child.memoizedState,gt.memoizedState=dt===null?{baseLanes:ot}:{baseLanes:dt.baseLanes|ot},gt.childLanes=_.childLanes&~ot,k.memoizedState=ws,ft):(ot=Bu(_,k,ft.children,ot),k.memoizedState=null,ot)}function Ou(_,k,ot,ft){var dt=_.mode,gt=_.child;return k={mode:"hidden",children:k},(dt&2)===0&&gt!==null?(gt.childLanes=0,gt.pendingProps=k):gt=Vl(k,dt,0,null),ot=Ao(ot,dt,ft,null),gt.return=_,ot.return=_,gt.sibling=ot,_.child=gt,ot}function Bu(_,k,ot,ft){var dt=_.child;return _=dt.sibling,ot=eo(dt,{mode:"visible",children:ot}),(k.mode&2)===0&&(ot.lanes=ft),ot.return=k,ot.sibling=null,_!==null&&(_.nextEffect=null,_.flags=8,k.firstEffect=k.lastEffect=_),k.child=ot}function Iu(_,k,ot,ft,dt){var gt=k.mode,Tt=_.child;_=Tt.sibling;var kt={mode:"hidden",children:ot};return(gt&2)===0&&k.child!==Tt?(ot=k.child,ot.childLanes=0,ot.pendingProps=kt,Tt=ot.lastEffect,Tt!==null?(k.firstEffect=ot.firstEffect,k.lastEffect=Tt,Tt.nextEffect=null):k.firstEffect=k.lastEffect=null):ot=eo(Tt,kt),_!==null?ft=eo(_,ft):(ft=Ao(ft,gt,dt,null),ft.flags|=2),ft.return=k,ot.return=k,ot.sibling=ft,k.child=ot,ft}function Du(_,k){_.lanes|=k;var ot=_.alternate;ot!==null&&(ot.lanes|=k),tu(_.return,k)}function hl(_,k,ot,ft,dt,gt){var Tt=_.memoizedState;Tt===null?_.memoizedState={isBackwards:k,rendering:null,renderingStartTime:0,last:ft,tail:ot,tailMode:dt,lastEffect:gt}:(Tt.isBackwards=k,Tt.rendering=null,Tt.renderingStartTime=0,Tt.last=ft,Tt.tail=ot,Tt.tailMode=dt,Tt.lastEffect=gt)}function Fu(_,k,ot){var ft=k.pendingProps,dt=ft.revealOrder,gt=ft.tail;if(lr(_,k,ft.children,ot),ft=Hn.current,(ft&2)!==0)ft=ft&1|2,k.flags|=64;else{if(_!==null&&(_.flags&64)!==0)e:for(_=k.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&Du(_,ot);else if(_.tag===19)Du(_,ot);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===k)break e;for(;_.sibling===null;){if(_.return===null||_.return===k)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}ft&=1}if(zn(Hn,ft),(k.mode&2)===0)k.memoizedState=null;else switch(dt){case"forwards":for(ot=k.child,dt=null;ot!==null;)_=ot.alternate,_!==null&&ps(_)===null&&(dt=ot),ot=ot.sibling;ot=dt,ot===null?(dt=k.child,k.child=null):(dt=ot.sibling,ot.sibling=null),hl(k,!1,dt,ot,gt,k.lastEffect);break;case"backwards":for(ot=null,dt=k.child,k.child=null;dt!==null;){if(_=dt.alternate,_!==null&&ps(_)===null){k.child=dt;break}_=dt.sibling,dt.sibling=ot,ot=dt,dt=_}hl(k,!0,ot,null,gt,k.lastEffect);break;case"together":hl(k,!1,null,null,void 0,k.lastEffect);break;default:k.memoizedState=null}return k.child}function kr(_,k,ot){if(_!==null&&(k.dependencies=_.dependencies),$o|=k.lanes,(ot&k.childLanes)!==0){if(_!==null&&k.child!==_.child)throw Error(h(153));if(k.child!==null){for(_=k.child,ot=eo(_,_.pendingProps),k.child=ot,ot.return=k;_.sibling!==null;)_=_.sibling,ot=ot.sibling=eo(_,_.pendingProps),ot.return=k;ot.sibling=null}return k.child}return null}function Rr(_){_.flags|=4}var Ho,jo,Ms,Ss;if(Dt)Ho=function(_,k){for(var ot=k.child;ot!==null;){if(ot.tag===5||ot.tag===6)Yt(_,ot.stateNode);else if(ot.tag!==4&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===k)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===k)return;ot=ot.return}ot.sibling.return=ot.return,ot=ot.sibling}},jo=function(){},Ms=function(_,k,ot,ft,dt){if(_=_.memoizedProps,_!==ft){var gt=k.stateNode,Tt=Tr(gr.current);ot=yt(gt,ot,_,ft,dt,Tt),(k.updateQueue=ot)&&Rr(k)}},Ss=function(_,k,ot,ft){ot!==ft&&Rr(k)};else if(Ht){Ho=function(_,k,ot,ft){for(var dt=k.child;dt!==null;){if(dt.tag===5){var gt=dt.stateNode;ot&&ft&&(gt=cn(gt,dt.type,dt.memoizedProps,dt)),Yt(_,gt)}else if(dt.tag===6)gt=dt.stateNode,ot&&ft&&(gt=Rn(gt,dt.memoizedProps,dt)),Yt(_,gt);else if(dt.tag!==4){if(dt.tag===13&&(dt.flags&4)!==0&&(gt=dt.memoizedState!==null)){var Tt=dt.child;if(Tt!==null&&(Tt.child!==null&&(Tt.child.return=Tt,Ho(_,Tt,!0,gt)),gt=Tt.sibling,gt!==null)){gt.return=dt,dt=gt;continue}}if(dt.child!==null){dt.child.return=dt,dt=dt.child;continue}}if(dt===k)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===k)return;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}};var ku=function(_,k,ot,ft){for(var dt=k.child;dt!==null;){if(dt.tag===5){var gt=dt.stateNode;ot&&ft&&(gt=cn(gt,dt.type,dt.memoizedProps,dt)),Jt(_,gt)}else if(dt.tag===6)gt=dt.stateNode,ot&&ft&&(gt=Rn(gt,dt.memoizedProps,dt)),Jt(_,gt);else if(dt.tag!==4){if(dt.tag===13&&(dt.flags&4)!==0&&(gt=dt.memoizedState!==null)){var Tt=dt.child;if(Tt!==null&&(Tt.child!==null&&(Tt.child.return=Tt,ku(_,Tt,!0,gt)),gt=Tt.sibling,gt!==null)){gt.return=dt,dt=gt;continue}}if(dt.child!==null){dt.child.return=dt,dt=dt.child;continue}}if(dt===k)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===k)return;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}};jo=function(_){var k=_.stateNode;if(_.firstEffect!==null){var ot=k.containerInfo,ft=Mt(ot);ku(ft,_,!1,!1),k.pendingChildren=ft,Rr(_),$t(ot,ft)}},Ms=function(_,k,ot,ft,dt){var gt=_.stateNode,Tt=_.memoizedProps;if((_=k.firstEffect===null)&&Tt===ft)k.stateNode=gt;else{var kt=k.stateNode,Qt=Tr(gr.current),un=null;Tt!==ft&&(un=yt(kt,ot,Tt,ft,dt,Qt)),_&&un===null?k.stateNode=gt:(gt=Co(gt,un,ot,Tt,ft,k,_,kt),_t(gt,ot,ft,dt,Qt)&&Rr(k),k.stateNode=gt,_?Rr(k):Ho(gt,k,!1,!1))}},Ss=function(_,k,ot,ft){ot!==ft?(_=Tr(wo.current),ot=Tr(gr.current),k.stateNode=wt(ft,_,ot,k),Rr(k)):k.stateNode=_.stateNode}}else jo=function(){},Ms=function(){},Ss=function(){};function Wo(_,k){if(!Lr)switch(_.tailMode){case"hidden":k=_.tail;for(var ot=null;k!==null;)k.alternate!==null&&(ot=k),k=k.sibling;ot===null?_.tail=null:ot.sibling=null;break;case"collapsed":ot=_.tail;for(var ft=null;ot!==null;)ot.alternate!==null&&(ft=ot),ot=ot.sibling;ft===null?k||_.tail===null?_.tail=null:_.tail.sibling=null:ft.sibling=null}}function Lp(_,k,ot){var ft=k.pendingProps;switch(k.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ar(k.type)&&ga(),null;case 3:return Mo(),Vn(or),Vn(er),rl(),ft=k.stateNode,ft.pendingContext&&(ft.context=ft.pendingContext,ft.pendingContext=null),(_===null||_.child===null)&&(ms(k)?Rr(k):ft.hydrate||(k.flags|=256)),jo(k),null;case 5:el(k);var dt=Tr(wo.current);if(ot=k.type,_!==null&&k.stateNode!=null)Ms(_,k,ot,ft,dt),_.ref!==k.ref&&(k.flags|=128);else{if(!ft){if(k.stateNode===null)throw Error(h(166));return null}if(_=Tr(gr.current),ms(k)){if(!Ut)throw Error(h(175));_=On(k.stateNode,k.type,k.memoizedProps,dt,_,k),k.updateQueue=_,_!==null&&Rr(k)}else{var gt=yn(ot,ft,dt,_,k);Ho(gt,k,!1,!1),k.stateNode=gt,_t(gt,ot,ft,dt,_)&&Rr(k)}k.ref!==null&&(k.flags|=128)}return null;case 6:if(_&&k.stateNode!=null)Ss(_,k,_.memoizedProps,ft);else{if(typeof ft!="string"&&k.stateNode===null)throw Error(h(166));if(_=Tr(wo.current),dt=Tr(gr.current),ms(k)){if(!Ut)throw Error(h(176));xr(k.stateNode,k.memoizedProps,k)&&Rr(k)}else k.stateNode=wt(ft,_,dt,k)}return null;case 13:return Vn(Hn),ft=k.memoizedState,(k.flags&64)!==0?(k.lanes=ot,k):(ft=ft!==null,dt=!1,_===null?k.memoizedProps.fallback!==void 0&&ms(k):dt=_.memoizedState!==null,ft&&!dt&&(k.mode&2)!==0&&(_===null&&k.memoizedProps.unstable_avoidThisFallback!==!0||(Hn.current&1)!==0?Jn===0&&(Jn=3):((Jn===0||Jn===3)&&(Jn=4),ir===null||($o&134217727)===0&&(Eo&134217727)===0||To(ir,nr))),Ht&&ft&&(k.flags|=4),Dt&&(ft||dt)&&(k.flags|=4),null);case 4:return Mo(),jo(k),_===null&&tn(k.stateNode.containerInfo),null;case 10:return Zs(k),null;case 17:return ar(k.type)&&ga(),null;case 19:if(Vn(Hn),ft=k.memoizedState,ft===null)return null;if(dt=(k.flags&64)!==0,gt=ft.rendering,gt===null)if(dt)Wo(ft,!1);else{if(Jn!==0||_!==null&&(_.flags&64)!==0)for(_=k.child;_!==null;){if(gt=ps(_),gt!==null){for(k.flags|=64,Wo(ft,!1),_=gt.updateQueue,_!==null&&(k.updateQueue=_,k.flags|=4),ft.lastEffect===null&&(k.firstEffect=null),k.lastEffect=ft.lastEffect,_=ot,ft=k.child;ft!==null;)dt=ft,ot=_,dt.flags&=2,dt.nextEffect=null,dt.firstEffect=null,dt.lastEffect=null,gt=dt.alternate,gt===null?(dt.childLanes=0,dt.lanes=ot,dt.child=null,dt.memoizedProps=null,dt.memoizedState=null,dt.updateQueue=null,dt.dependencies=null,dt.stateNode=null):(dt.childLanes=gt.childLanes,dt.lanes=gt.lanes,dt.child=gt.child,dt.memoizedProps=gt.memoizedProps,dt.memoizedState=gt.memoizedState,dt.updateQueue=gt.updateQueue,dt.type=gt.type,ot=gt.dependencies,dt.dependencies=ot===null?null:{lanes:ot.lanes,firstContext:ot.firstContext}),ft=ft.sibling;return zn(Hn,Hn.current&1|2),k.child}_=_.sibling}ft.tail!==null&&Qn()>Rl&&(k.flags|=64,dt=!0,Wo(ft,!1),k.lanes=33554432)}else{if(!dt)if(_=ps(gt),_!==null){if(k.flags|=64,dt=!0,_=_.updateQueue,_!==null&&(k.updateQueue=_,k.flags|=4),Wo(ft,!0),ft.tail===null&&ft.tailMode==="hidden"&&!gt.alternate&&!Lr)return k=k.lastEffect=ft.lastEffect,k!==null&&(k.nextEffect=null),null}else 2*Qn()-ft.renderingStartTime>Rl&&ot!==1073741824&&(k.flags|=64,dt=!0,Wo(ft,!1),k.lanes=33554432);ft.isBackwards?(gt.sibling=k.child,k.child=gt):(_=ft.last,_!==null?_.sibling=gt:k.child=gt,ft.last=gt)}return ft.tail!==null?(_=ft.tail,ft.rendering=_,ft.tail=_.sibling,ft.lastEffect=k.lastEffect,ft.renderingStartTime=Qn(),_.sibling=null,k=Hn.current,zn(Hn,dt?k&1|2:k&1),_):null;case 23:case 24:return Dl(),_!==null&&_.memoizedState!==null!=(k.memoizedState!==null)&&ft.mode!=="unstable-defer-without-hiding"&&(k.flags|=4),null}throw Error(h(156,k.tag))}function Ap(_){switch(_.tag){case 1:ar(_.type)&&ga();var k=_.flags;return k&4096?(_.flags=k&-4097|64,_):null;case 3:if(Mo(),Vn(or),Vn(er),rl(),k=_.flags,(k&64)!==0)throw Error(h(285));return _.flags=k&-4097|64,_;case 5:return el(_),null;case 13:return Vn(Hn),k=_.flags,k&4096?(_.flags=k&-4097|64,_):null;case 19:return Vn(Hn),null;case 4:return Mo(),null;case 10:return Zs(_),null;case 23:case 24:return Dl(),null;default:return null}}function pl(_,k){try{var ot="",ft=k;do ot+=wp(ft),ft=ft.return;while(ft);var dt=ot}catch(gt){dt=`
Error generating stack: `+gt.message+`
`+gt.stack}return{value:_,source:k,stack:dt}}function ml(_,k){try{console.error(k.value)}catch(ot){setTimeout(function(){throw ot})}}var Rp=typeof WeakMap=="function"?WeakMap:Map;function Nu(_,k,ot){ot=Yr(-1,ot),ot.tag=3,ot.payload={element:null};var ft=k.value;return ot.callback=function(){Bs||(Bs=!0,Cl=ft),ml(_,k)},ot}function Vu(_,k,ot){ot=Yr(-1,ot),ot.tag=3;var ft=_.type.getDerivedStateFromError;if(typeof ft=="function"){var dt=k.value;ot.payload=function(){return ml(_,k),ft(dt)}}var gt=_.stateNode;return gt!==null&&typeof gt.componentDidCatch=="function"&&(ot.callback=function(){typeof ft!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this),ml(_,k));var Tt=k.stack;this.componentDidCatch(k.value,{componentStack:Tt!==null?Tt:""})}),ot}var Cp=typeof WeakSet=="function"?WeakSet:Set;function Uu(_){var k=_.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(ot){_i(_,ot)}else k.current=null}function Pp(_,k){switch(k.tag){case 0:case 11:case 15:case 22:return;case 1:if(k.flags&256&&_!==null){var ot=_.memoizedProps,ft=_.memoizedState;_=k.stateNode,k=_.getSnapshotBeforeUpdate(k.elementType===k.type?ot:Mr(k.type,ot),ft),_.__reactInternalSnapshotBeforeUpdate=k}return;case 3:Dt&&k.flags&256&&Pr(k.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(h(163))}function Gu(_,k){if(k=k.updateQueue,k=k!==null?k.lastEffect:null,k!==null){var ot=k=k.next;do{if((ot.tag&_)===_){var ft=ot.destroy;ot.destroy=void 0,ft!==void 0&&ft()}ot=ot.next}while(ot!==k)}}function Bp(_,k,ot){switch(ot.tag){case 0:case 11:case 15:case 22:if(k=ot.updateQueue,k=k!==null?k.lastEffect:null,k!==null){_=k=k.next;do{if((_.tag&3)===3){var ft=_.create;_.destroy=ft()}_=_.next}while(_!==k)}if(k=ot.updateQueue,k=k!==null?k.lastEffect:null,k!==null){_=k=k.next;do{var dt=_;ft=dt.next,dt=dt.tag,(dt&4)!==0&&(dt&1)!==0&&(ep(ot,_),zp(ot,_)),_=ft}while(_!==k)}return;case 1:_=ot.stateNode,ot.flags&4&&(k===null?_.componentDidMount():(ft=ot.elementType===ot.type?k.memoizedProps:Mr(ot.type,k.memoizedProps),_.componentDidUpdate(ft,k.memoizedState,_.__reactInternalSnapshotBeforeUpdate))),k=ot.updateQueue,k!==null&&iu(ot,k,_);return;case 3:if(k=ot.updateQueue,k!==null){if(_=null,ot.child!==null)switch(ot.child.tag){case 5:_=en(ot.child.stateNode);break;case 1:_=ot.child.stateNode}iu(ot,k,_)}return;case 5:_=ot.stateNode,k===null&&ot.flags&4&&no(_,ot.type,ot.memoizedProps,ot);return;case 6:return;case 4:return;case 12:return;case 13:Ut&&ot.memoizedState===null&&(ot=ot.alternate,ot!==null&&(ot=ot.memoizedState,ot!==null&&(ot=ot.dehydrated,ot!==null&&$n(ot))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(h(163))}function zu(_,k){if(Dt)for(var ot=_;;){if(ot.tag===5){var ft=ot.stateNode;k?br(ft):Xn(ot.stateNode,ot.memoizedProps)}else if(ot.tag===6)ft=ot.stateNode,k?io(ft):jr(ft,ot.memoizedProps);else if((ot.tag!==23&&ot.tag!==24||ot.memoizedState===null||ot===_)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===_)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===_)return;ot=ot.return}ot.sibling.return=ot.return,ot=ot.sibling}}function Hu(_,k){if(so&&typeof so.onCommitFiberUnmount=="function")try{so.onCommitFiberUnmount(zs,k)}catch{}switch(k.tag){case 0:case 11:case 14:case 15:case 22:if(_=k.updateQueue,_!==null&&(_=_.lastEffect,_!==null)){var ot=_=_.next;do{var ft=ot,dt=ft.destroy;if(ft=ft.tag,dt!==void 0)if((ft&4)!==0)ep(k,ot);else{ft=k;try{dt()}catch(gt){_i(ft,gt)}}ot=ot.next}while(ot!==_)}break;case 1:if(Uu(k),_=k.stateNode,typeof _.componentWillUnmount=="function")try{_.props=k.memoizedProps,_.state=k.memoizedState,_.componentWillUnmount()}catch(gt){_i(k,gt)}break;case 5:Uu(k);break;case 4:Dt?qu(_,k):Ht&&Ht&&(k=k.stateNode.containerInfo,_=Mt(k),nn(k,_))}}function ju(_,k){for(var ot=k;;)if(Hu(_,ot),ot.child===null||Dt&&ot.tag===4){if(ot===k)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===k)return;ot=ot.return}ot.sibling.return=ot.return,ot=ot.sibling}else ot.child.return=ot,ot=ot.child}function Wu(_){_.alternate=null,_.child=null,_.dependencies=null,_.firstEffect=null,_.lastEffect=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.return=null,_.updateQueue=null}function Xu(_){return _.tag===5||_.tag===3||_.tag===4}function $u(_){if(Dt){e:{for(var k=_.return;k!==null;){if(Xu(k))break e;k=k.return}throw Error(h(160))}var ot=k;switch(k=ot.stateNode,ot.tag){case 5:var ft=!1;break;case 3:k=k.containerInfo,ft=!0;break;case 4:k=k.containerInfo,ft=!0;break;default:throw Error(h(161))}ot.flags&16&&(rr(k),ot.flags&=-17);e:t:for(ot=_;;){for(;ot.sibling===null;){if(ot.return===null||Xu(ot.return)){ot=null;break e}ot=ot.return}for(ot.sibling.return=ot.return,ot=ot.sibling;ot.tag!==5&&ot.tag!==6&&ot.tag!==18;){if(ot.flags&2||ot.child===null||ot.tag===4)continue t;ot.child.return=ot,ot=ot.child}if(!(ot.flags&2)){ot=ot.stateNode;break e}}ft?gl(_,ot,k):yl(_,ot,k)}}function gl(_,k,ot){var ft=_.tag,dt=ft===5||ft===6;if(dt)_=dt?_.stateNode:_.stateNode.instance,k?ro(ot,_,k):Wn(ot,_);else if(ft!==4&&(_=_.child,_!==null))for(gl(_,k,ot),_=_.sibling;_!==null;)gl(_,k,ot),_=_.sibling}function yl(_,k,ot){var ft=_.tag,dt=ft===5||ft===6;if(dt)_=dt?_.stateNode:_.stateNode.instance,k?Hr(ot,_,k):Tn(ot,_);else if(ft!==4&&(_=_.child,_!==null))for(yl(_,k,ot),_=_.sibling;_!==null;)yl(_,k,ot),_=_.sibling}function qu(_,k){for(var ot=k,ft=!1,dt,gt;;){if(!ft){ft=ot.return;e:for(;;){if(ft===null)throw Error(h(160));switch(dt=ft.stateNode,ft.tag){case 5:gt=!1;break e;case 3:dt=dt.containerInfo,gt=!0;break e;case 4:dt=dt.containerInfo,gt=!0;break e}ft=ft.return}ft=!0}if(ot.tag===5||ot.tag===6)ju(_,ot),gt?dr(dt,ot.stateNode):Ro(dt,ot.stateNode);else if(ot.tag===4){if(ot.child!==null){dt=ot.stateNode.containerInfo,gt=!0,ot.child.return=ot,ot=ot.child;continue}}else if(Hu(_,ot),ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===k)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===k)return;ot=ot.return,ot.tag===4&&(ft=!1)}ot.sibling.return=ot.return,ot=ot.sibling}}function vl(_,k){if(Dt){switch(k.tag){case 0:case 11:case 14:case 15:case 22:Gu(3,k);return;case 1:return;case 5:var ot=k.stateNode;if(ot!=null){var ft=k.memoizedProps;_=_!==null?_.memoizedProps:ft;var dt=k.type,gt=k.updateQueue;k.updateQueue=null,gt!==null&&zr(ot,gt,dt,_,ft,k)}return;case 6:if(k.stateNode===null)throw Error(h(162));ot=k.memoizedProps,fr(k.stateNode,_!==null?_.memoizedProps:ot,ot);return;case 3:Ut&&(k=k.stateNode,k.hydrate&&(k.hydrate=!1,Er(k.containerInfo)));return;case 12:return;case 13:Yu(k),bs(k);return;case 19:bs(k);return;case 17:return;case 23:case 24:zu(k,k.memoizedState!==null);return}throw Error(h(163))}switch(k.tag){case 0:case 11:case 14:case 15:case 22:Gu(3,k);return;case 12:return;case 13:Yu(k),bs(k);return;case 19:bs(k);return;case 3:Ut&&(ot=k.stateNode,ot.hydrate&&(ot.hydrate=!1,Er(ot.containerInfo)));break;case 23:case 24:return}e:if(Ht){switch(k.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:k=k.stateNode,nn(k.containerInfo,k.pendingChildren);break e}throw Error(h(163))}}function Yu(_){_.memoizedState!==null&&(Al=Qn(),Dt&&zu(_.child,!0))}function bs(_){var k=_.updateQueue;if(k!==null){_.updateQueue=null;var ot=_.stateNode;ot===null&&(ot=_.stateNode=new Cp),k.forEach(function(ft){var dt=Wp.bind(null,_,ft);ot.has(ft)||(ot.add(ft),ft.then(dt,dt))})}}function Ip(_,k){return _!==null&&(_=_.memoizedState,_===null||_.dehydrated!==null)?(k=k.memoizedState,k!==null&&k.dehydrated===null):!1}var Es=0,Ts=1,Ls=2,As=3,Rs=4;if(typeof Symbol=="function"&&Symbol.for){var Xo=Symbol.for;Es=Xo("selector.component"),Ts=Xo("selector.has_pseudo_class"),Ls=Xo("selector.role"),As=Xo("selector.test_id"),Rs=Xo("selector.text")}function _l(_){var k=xt(_);if(k!=null){if(typeof k.memoizedProps["data-testname"]!="string")throw Error(h(364));return k}if(_=ln(_),_===null)throw Error(h(362));return _.stateNode.current}function xl(_,k){switch(k.$$typeof){case Es:if(_.type===k.value)return!0;break;case Ts:e:{k=k.value,_=[_,0];for(var ot=0;ot<_.length;){var ft=_[ot++],dt=_[ot++],gt=k[dt];if(ft.tag!==5||!gn(ft)){for(;gt!=null&&xl(ft,gt);)dt++,gt=k[dt];if(dt===k.length){k=!0;break e}else for(ft=ft.child;ft!==null;)_.push(ft,dt),ft=ft.sibling}}k=!1}return k;case Ls:if(_.tag===5&&Mn(_.stateNode,k.value))return!0;break;case Rs:if((_.tag===5||_.tag===6)&&(_=pn(_),_!==null&&0<=_.indexOf(k.value)))return!0;break;case As:if(_.tag===5&&(_=_.memoizedProps["data-testname"],typeof _=="string"&&_.toLowerCase()===k.value.toLowerCase()))return!0;break;default:throw Error(h(365,k))}return!1}function wl(_){switch(_.$$typeof){case Es:return"<"+(Ft(_.value)||"Unknown")+">";case Ts:return":has("+(wl(_)||"")+")";case Ls:return'[role="'+_.value+'"]';case Rs:return'"'+_.value+'"';case As:return'[data-testname="'+_.value+'"]';default:throw Error(h(365,_))}}function Zu(_,k){var ot=[];_=[_,0];for(var ft=0;ft<_.length;){var dt=_[ft++],gt=_[ft++],Tt=k[gt];if(dt.tag!==5||!gn(dt)){for(;Tt!=null&&xl(dt,Tt);)gt++,Tt=k[gt];if(gt===k.length)ot.push(dt);else for(dt=dt.child;dt!==null;)_.push(dt,gt),dt=dt.sibling}}return ot}function Ml(_,k){if(!on)throw Error(h(363));_=_l(_),_=Zu(_,k),k=[],_=Array.from(_);for(var ot=0;ot<_.length;){var ft=_[ot++];if(ft.tag===5)gn(ft)||k.push(ft.stateNode);else for(ft=ft.child;ft!==null;)_.push(ft),ft=ft.sibling}return k}var Cs=null;function Dp(_){if(Cs===null)try{var k=("require"+Math.random()).slice(0,7);Cs=(o&&o[k]).call(o,"timers").setImmediate}catch{Cs=function(ft){var dt=new MessageChannel;dt.port1.onmessage=ft,dt.port2.postMessage(void 0)}}return Cs(_)}var Fp=Math.ceil,Ps=g.ReactCurrentDispatcher,Sl=g.ReactCurrentOwner,bl=g.IsSomeRendererActing,wn=0,ir=null,Zn=null,nr=0,ho=0,El=Wr(0),Jn=0,Os=null,bo=0,$o=0,Eo=0,Tl=0,Ll=null,Al=0,Rl=1/0;function Qr(){Rl=Qn()+500}var mn=null,Bs=!1,Cl=null,Cr=null,Kr=!1,qo=null,Yo=90,Pl=[],Ol=[],Nr=null,Zo=0,Bl=null,Is=-1,Vr=0,Ds=0,Qo=null,Ko=!1;function ur(){return(wn&48)!==0?Qn():Is!==-1?Is:Is=Qn()}function Jr(_){if(_=_.mode,(_&2)===0)return 1;if((_&4)===0)return vo()===99?1:2;if(Vr===0&&(Vr=bo),vp.transition!==0){Ds!==0&&(Ds=Ll!==null?Ll.pendingLanes:0),_=Vr;var k=4186112&~Ds;return k&=-k,k===0&&(_=4186112&~_,k=_&-_,k===0&&(k=8192)),k}return _=vo(),(wn&4)!==0&&_===98?_=es(12,Vr):(_=up(_),_=es(_,Vr)),_}function Ur(_,k,ot){if(50<Zo)throw Zo=0,Bl=null,Error(h(185));if(_=Fs(_,k),_===null)return null;ts(_,k,ot),_===ir&&(Eo|=k,Jn===4&&To(_,nr));var ft=vo();k===1?(wn&8)!==0&&(wn&48)===0?Il(_):(cr(_,ot),wn===0&&(Qr(),hr())):((wn&4)===0||ft!==98&&ft!==99||(Nr===null?Nr=new Set([_]):Nr.add(_)),cr(_,ot)),Ll=_}function Fs(_,k){_.lanes|=k;var ot=_.alternate;for(ot!==null&&(ot.lanes|=k),ot=_,_=_.return;_!==null;)_.childLanes|=k,ot=_.alternate,ot!==null&&(ot.childLanes|=k),ot=_,_=_.return;return ot.tag===3?ot.stateNode:null}function cr(_,k){for(var ot=_.callbackNode,ft=_.suspendedLanes,dt=_.pingedLanes,gt=_.expirationTimes,Tt=_.pendingLanes;0<Tt;){var kt=31-$r(Tt),Qt=1<<kt,un=gt[kt];if(un===-1){if((Qt&ft)===0||(Qt&dt)!==0){un=k,lo(Qt);var _n=Fn;gt[kt]=10<=_n?un+250:6<=_n?un+5e3:-1}}else un<=k&&(_.expiredLanes|=Qt);Tt&=~Qt}if(ft=Po(_,_===ir?nr:0),k=Fn,ft===0)ot!==null&&(ot!==$s&&Ws(ot),_.callbackNode=null,_.callbackPriority=0);else{if(ot!==null){if(_.callbackPriority===k)return;ot!==$s&&Ws(ot)}k===15?(ot=Il.bind(null,_),Ir===null?(Ir=[ot],rs=js(ns,Jl)):Ir.push(ot),ot=$s):k===14?ot=Oo(99,Il.bind(null,_)):(ot=cp(k),ot=Oo(ot,Qu.bind(null,_))),_.callbackPriority=k,_.callbackNode=ot}}function Qu(_){if(Is=-1,Ds=Vr=0,(wn&48)!==0)throw Error(h(327));var k=_.callbackNode;if(Gr()&&_.callbackNode!==k)return null;var ot=Po(_,_===ir?nr:0);if(ot===0)return null;var ft=ot,dt=wn;wn|=16;var gt=_f();(ir!==_||nr!==ft)&&(Qr(),Lo(_,ft));do try{Vp();break}catch(kt){_c(_,kt)}while(1);if(Ys(),Ps.current=gt,wn=dt,Zn!==null?ft=0:(ir=null,nr=0,ft=Jn),(bo&Eo)!==0)Lo(_,0);else if(ft!==0){if(ft===2&&(wn|=64,_.hydrate&&(_.hydrate=!1,Pr(_.containerInfo)),ot=Wl(_),ot!==0&&(ft=Jo(_,ot))),ft===1)throw k=Os,Lo(_,0),To(_,ot),cr(_,Qn()),k;switch(_.finishedWork=_.current.alternate,_.finishedLanes=ot,ft){case 0:case 1:throw Error(h(345));case 2:po(_);break;case 3:if(To(_,ot),(ot&62914560)===ot&&(ft=Al+500-Qn(),10<ft)){if(Po(_,0)!==0)break;if(dt=_.suspendedLanes,(dt&ot)!==ot){ur(),_.pingedLanes|=_.suspendedLanes&dt;break}_.timeoutHandle=Rt(po.bind(null,_),ft);break}po(_);break;case 4:if(To(_,ot),(ot&4186112)===ot)break;for(ft=_.eventTimes,dt=-1;0<ot;){var Tt=31-$r(ot);gt=1<<Tt,Tt=ft[Tt],Tt>dt&&(dt=Tt),ot&=~gt}if(ot=dt,ot=Qn()-ot,ot=(120>ot?120:480>ot?480:1080>ot?1080:1920>ot?1920:3e3>ot?3e3:4320>ot?4320:1960*Fp(ot/1960))-ot,10<ot){_.timeoutHandle=Rt(po.bind(null,_),ot);break}po(_);break;case 5:po(_);break;default:throw Error(h(329))}}return cr(_,Qn()),_.callbackNode===k?Qu.bind(null,_):null}function To(_,k){for(k&=~Tl,k&=~Eo,_.suspendedLanes|=k,_.pingedLanes&=~k,_=_.expirationTimes;0<k;){var ot=31-$r(k),ft=1<<ot;_[ot]=-1,k&=~ft}}function Il(_){if((wn&48)!==0)throw Error(h(327));if(Gr(),_===ir&&(_.expiredLanes&nr)!==0){var k=nr,ot=Jo(_,k);(bo&Eo)!==0&&(k=Po(_,k),ot=Jo(_,k))}else k=Po(_,0),ot=Jo(_,k);if(_.tag!==0&&ot===2&&(wn|=64,_.hydrate&&(_.hydrate=!1,Pr(_.containerInfo)),k=Wl(_),k!==0&&(ot=Jo(_,k))),ot===1)throw ot=Os,Lo(_,0),To(_,k),cr(_,Qn()),ot;return _.finishedWork=_.current.alternate,_.finishedLanes=k,po(_),cr(_,Qn()),null}function kp(){if(Nr!==null){var _=Nr;Nr=null,_.forEach(function(k){k.expiredLanes|=24&k.pendingLanes,cr(k,Qn())})}hr()}function Ku(_,k){var ot=wn;wn|=1;try{return _(k)}finally{wn=ot,wn===0&&(Qr(),hr())}}function Ju(_,k){var ot=wn;if((ot&48)!==0)return _(k);wn|=1;try{if(_)return Dr(99,_.bind(null,k))}finally{wn=ot,hr()}}function ks(_,k){zn(El,ho),ho|=k,bo|=k}function Dl(){ho=El.current,Vn(El)}function Lo(_,k){_.finishedWork=null,_.finishedLanes=0;var ot=_.timeoutHandle;if(ot!==Lt&&(_.timeoutHandle=Lt,Bt(ot)),Zn!==null)for(ot=Zn.return;ot!==null;){var ft=ot;switch(ft.tag){case 1:ft=ft.type.childContextTypes,ft!=null&&ga();break;case 3:Mo(),Vn(or),Vn(er),rl();break;case 5:el(ft);break;case 4:Mo();break;case 13:Vn(Hn);break;case 19:Vn(Hn);break;case 10:Zs(ft);break;case 23:case 24:Dl()}ot=ot.return}ir=_,Zn=eo(_.current,null),nr=ho=bo=k,Jn=0,Os=null,Tl=Eo=$o=0}function _c(_,k){do{var ot=Zn;try{if(Ys(),ko.current=xs,gs){for(var ft=jn.memoizedState;ft!==null;){var dt=ft.queue;dt!==null&&(dt.pending=null),ft=ft.next}gs=!1}if(No=0,Kn=tr=jn=null,Vo=!1,Sl.current=null,ot===null||ot.return===null){Jn=1,Os=k,Zn=null;break}e:{var gt=_,Tt=ot.return,kt=ot,Qt=k;if(k=nr,kt.flags|=2048,kt.firstEffect=kt.lastEffect=null,Qt!==null&&typeof Qt=="object"&&typeof Qt.then=="function"){var un=Qt;if((kt.mode&2)===0){var _n=kt.alternate;_n?(kt.updateQueue=_n.updateQueue,kt.memoizedState=_n.memoizedState,kt.lanes=_n.lanes):(kt.updateQueue=null,kt.memoizedState=null)}var Sn=(Hn.current&1)!==0,hn=Tt;do{var In;if(In=hn.tag===13){var Un=hn.memoizedState;if(Un!==null)In=Un.dehydrated!==null;else{var _r=hn.memoizedProps;In=_r.fallback===void 0?!1:_r.unstable_avoidThisFallback!==!0?!0:!Sn}}if(In){var jt=hn.updateQueue;if(jt===null){var Vt=new Set;Vt.add(un),hn.updateQueue=Vt}else jt.add(un);if((hn.mode&2)===0){if(hn.flags|=64,kt.flags|=16384,kt.flags&=-2981,kt.tag===1)if(kt.alternate===null)kt.tag=17;else{var Kt=Yr(-1,1);Kt.tag=2,Zr(kt,Kt)}kt.lanes|=1;break e}Qt=void 0,kt=k;var dn=gt.pingCache;if(dn===null?(dn=gt.pingCache=new Rp,Qt=new Set,dn.set(un,Qt)):(Qt=dn.get(un),Qt===void 0&&(Qt=new Set,dn.set(un,Qt))),!Qt.has(kt)){Qt.add(kt);var xn=jp.bind(null,gt,un,kt);un.then(xn,xn)}hn.flags|=4096,hn.lanes=k;break e}hn=hn.return}while(hn!==null);Qt=Error((Ft(kt.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Jn!==5&&(Jn=2),Qt=pl(Qt,kt),hn=Tt;do{switch(hn.tag){case 3:gt=Qt,hn.flags|=4096,k&=-k,hn.lanes|=k;var kn=Nu(hn,gt,k);ru(hn,kn);break e;case 1:gt=Qt;var bn=hn.type,Bn=hn.stateNode;if((hn.flags&64)===0&&(typeof bn.getDerivedStateFromError=="function"||Bn!==null&&typeof Bn.componentDidCatch=="function"&&(Cr===null||!Cr.has(Bn)))){hn.flags|=4096,k&=-k,hn.lanes|=k;var Yn=Vu(hn,gt,k);ru(hn,Yn);break e}}hn=hn.return}while(hn!==null)}_h(ot)}catch(Pn){k=Pn,Zn===ot&&ot!==null&&(Zn=ot=ot.return);continue}break}while(1)}function _f(){var _=Ps.current;return Ps.current=xs,_===null?xs:_}function Jo(_,k){var ot=wn;wn|=16;var ft=_f();ir===_&&nr===k||Lo(_,k);do try{Np();break}catch(dt){_c(_,dt)}while(1);if(Ys(),wn=ot,Ps.current=ft,Zn!==null)throw Error(h(261));return ir=null,nr=0,Jn}function Np(){for(;Zn!==null;)_d(Zn)}function Vp(){for(;Zn!==null&&!mp();)_d(Zn)}function _d(_){var k=np(_.alternate,_,ho);_.memoizedProps=_.pendingProps,k===null?_h(_):Zn=k,Sl.current=null}function _h(_){var k=_;do{var ot=k.alternate;if(_=k.return,(k.flags&2048)===0){if(ot=Lp(ot,k,ho),ot!==null){Zn=ot;return}if(ot=k,ot.tag!==24&&ot.tag!==23||ot.memoizedState===null||(ho&1073741824)!==0||(ot.mode&4)===0){for(var ft=0,dt=ot.child;dt!==null;)ft|=dt.lanes|dt.childLanes,dt=dt.sibling;ot.childLanes=ft}_!==null&&(_.flags&2048)===0&&(_.firstEffect===null&&(_.firstEffect=k.firstEffect),k.lastEffect!==null&&(_.lastEffect!==null&&(_.lastEffect.nextEffect=k.firstEffect),_.lastEffect=k.lastEffect),1<k.flags&&(_.lastEffect!==null?_.lastEffect.nextEffect=k:_.firstEffect=k,_.lastEffect=k))}else{if(ot=Ap(k),ot!==null){ot.flags&=2047,Zn=ot;return}_!==null&&(_.firstEffect=_.lastEffect=null,_.flags|=2048)}if(k=k.sibling,k!==null){Zn=k;return}Zn=k=_}while(k!==null);Jn===0&&(Jn=5)}function po(_){var k=vo();return Dr(99,Up.bind(null,_,k)),null}function Up(_,k){do Gr();while(qo!==null);if((wn&48)!==0)throw Error(h(327));var ot=_.finishedWork;if(ot===null)return null;if(_.finishedWork=null,_.finishedLanes=0,ot===_.current)throw Error(h(177));_.callbackNode=null;var ft=ot.lanes|ot.childLanes,dt=ft,gt=_.pendingLanes&~dt;_.pendingLanes=dt,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=dt,_.mutableReadLanes&=dt,_.entangledLanes&=dt,dt=_.entanglements;for(var Tt=_.eventTimes,kt=_.expirationTimes;0<gt;){var Qt=31-$r(gt),un=1<<Qt;dt[Qt]=0,Tt[Qt]=-1,kt[Qt]=-1,gt&=~un}if(Nr!==null&&(ft&24)===0&&Nr.has(_)&&Nr.delete(_),_===ir&&(Zn=ir=null,nr=0),1<ot.flags?ot.lastEffect!==null?(ot.lastEffect.nextEffect=ot,ft=ot.firstEffect):ft=ot:ft=ot.firstEffect,ft!==null){dt=wn,wn|=32,Sl.current=null,Qo=qt(_.containerInfo),Ko=!1,mn=ft;do try{Gp()}catch(Vt){if(mn===null)throw Error(h(330));_i(mn,Vt),mn=mn.nextEffect}while(mn!==null);Qo=null,mn=ft;do try{for(Tt=_;mn!==null;){var _n=mn.flags;if(_n&16&&Dt&&rr(mn.stateNode),_n&128){var Sn=mn.alternate;if(Sn!==null){var hn=Sn.ref;hn!==null&&(typeof hn=="function"?hn(null):hn.current=null)}}switch(_n&1038){case 2:$u(mn),mn.flags&=-3;break;case 6:$u(mn),mn.flags&=-3,vl(mn.alternate,mn);break;case 1024:mn.flags&=-1025;break;case 1028:mn.flags&=-1025,vl(mn.alternate,mn);break;case 4:vl(mn.alternate,mn);break;case 8:kt=Tt,gt=mn,Dt?qu(kt,gt):ju(kt,gt);var In=gt.alternate;Wu(gt),In!==null&&Wu(In)}mn=mn.nextEffect}}catch(Vt){if(mn===null)throw Error(h(330));_i(mn,Vt),mn=mn.nextEffect}while(mn!==null);Ko&&Ot(),sn(_.containerInfo),_.current=ot,mn=ft;do try{for(_n=_;mn!==null;){var Un=mn.flags;if(Un&36&&Bp(_n,mn.alternate,mn),Un&128){Sn=void 0;var _r=mn.ref;if(_r!==null){var jt=mn.stateNode;switch(mn.tag){case 5:Sn=en(jt);break;default:Sn=jt}typeof _r=="function"?_r(Sn):_r.current=Sn}}mn=mn.nextEffect}}catch(Vt){if(mn===null)throw Error(h(330));_i(mn,Vt),mn=mn.nextEffect}while(mn!==null);mn=null,yp(),wn=dt}else _.current=ot;if(Kr)Kr=!1,qo=_,Yo=k;else for(mn=ft;mn!==null;)k=mn.nextEffect,mn.nextEffect=null,mn.flags&8&&(Un=mn,Un.sibling=null,Un.stateNode=null),mn=k;if(ft=_.pendingLanes,ft===0&&(Cr=null),ft===1?_===Bl?Zo++:(Zo=0,Bl=_):Zo=0,ot=ot.stateNode,so&&typeof so.onCommitFiberRoot=="function")try{so.onCommitFiberRoot(zs,ot,void 0,(ot.current.flags&64)===64)}catch{}if(cr(_,Qn()),Bs)throw Bs=!1,_=Cl,Cl=null,_;return(wn&8)!==0||hr(),null}function Gp(){for(;mn!==null;){var _=mn.alternate;Ko||Qo===null||((mn.flags&8)!==0?Xt(mn,Qo)&&(Ko=!0,Wt()):mn.tag===13&&Ip(_,mn)&&Xt(mn,Qo)&&(Ko=!0,Wt()));var k=mn.flags;(k&256)!==0&&Pp(_,mn),(k&512)===0||Kr||(Kr=!0,Oo(97,function(){return Gr(),null})),mn=mn.nextEffect}}function Gr(){if(Yo!==90){var _=97<Yo?97:Yo;return Yo=90,Dr(_,Hp)}return!1}function zp(_,k){Pl.push(k,_),Kr||(Kr=!0,Oo(97,function(){return Gr(),null}))}function ep(_,k){Ol.push(k,_),Kr||(Kr=!0,Oo(97,function(){return Gr(),null}))}function Hp(){if(qo===null)return!1;var _=qo;if(qo=null,(wn&48)!==0)throw Error(h(331));var k=wn;wn|=32;var ot=Ol;Ol=[];for(var ft=0;ft<ot.length;ft+=2){var dt=ot[ft],gt=ot[ft+1],Tt=dt.destroy;if(dt.destroy=void 0,typeof Tt=="function")try{Tt()}catch(Qt){if(gt===null)throw Error(h(330));_i(gt,Qt)}}for(ot=Pl,Pl=[],ft=0;ft<ot.length;ft+=2){dt=ot[ft],gt=ot[ft+1];try{var kt=dt.create;dt.destroy=kt()}catch(Qt){if(gt===null)throw Error(h(330));_i(gt,Qt)}}for(kt=_.current.firstEffect;kt!==null;)_=kt.nextEffect,kt.nextEffect=null,kt.flags&8&&(kt.sibling=null,kt.stateNode=null),kt=_;return wn=k,hr(),!0}function tp(_,k,ot){k=pl(ot,k),k=Nu(_,k,1),Zr(_,k),k=ur(),_=Fs(_,1),_!==null&&(ts(_,1,k),cr(_,k))}function _i(_,k){if(_.tag===3)tp(_,_,k);else for(var ot=_.return;ot!==null;){if(ot.tag===3){tp(ot,_,k);break}else if(ot.tag===1){var ft=ot.stateNode;if(typeof ot.type.getDerivedStateFromError=="function"||typeof ft.componentDidCatch=="function"&&(Cr===null||!Cr.has(ft))){_=pl(k,_);var dt=Vu(ot,_,1);if(Zr(ot,dt),dt=ur(),ot=Fs(ot,1),ot!==null)ts(ot,1,dt),cr(ot,dt);else if(typeof ft.componentDidCatch=="function"&&(Cr===null||!Cr.has(ft)))try{ft.componentDidCatch(k,_)}catch{}break}}ot=ot.return}}function jp(_,k,ot){var ft=_.pingCache;ft!==null&&ft.delete(k),k=ur(),_.pingedLanes|=_.suspendedLanes&ot,ir===_&&(nr&ot)===ot&&(Jn===4||Jn===3&&(nr&62914560)===nr&&500>Qn()-Al?Lo(_,0):Tl|=ot),cr(_,k)}function Wp(_,k){var ot=_.stateNode;ot!==null&&ot.delete(k),k=0,k===0&&(k=_.mode,(k&2)===0?k=1:(k&4)===0?k=vo()===99?1:2:(Vr===0&&(Vr=bo),k=yo(62914560&~Vr),k===0&&(k=4194304))),ot=ur(),_=Fs(_,k),_!==null&&(ts(_,k,ot),cr(_,ot))}var np;np=function(_,k,ot){var ft=k.lanes;if(_!==null)if(_.memoizedProps!==k.pendingProps||or.current)Sr=!0;else if((ot&ft)!==0)Sr=(_.flags&16384)!==0;else{switch(Sr=!1,k.tag){case 3:Cu(k),nl();break;case 5:fu(k);break;case 1:ar(k.type)&&va(k);break;case 4:Js(k,k.stateNode.containerInfo);break;case 10:eu(k,k.memoizedProps.value);break;case 13:if(k.memoizedState!==null)return(ot&k.child.childLanes)!==0?Pu(_,k,ot):(zn(Hn,Hn.current&1),k=kr(_,k,ot),k!==null?k.sibling:null);zn(Hn,Hn.current&1);break;case 19:if(ft=(ot&k.childLanes)!==0,(_.flags&64)!==0){if(ft)return Fu(_,k,ot);k.flags|=64}var dt=k.memoizedState;if(dt!==null&&(dt.rendering=null,dt.tail=null,dt.lastEffect=null),zn(Hn,Hn.current),ft)break;return null;case 23:case 24:return k.lanes=0,cl(_,k,ot)}return kr(_,k,ot)}else Sr=!1;switch(k.lanes=0,k.tag){case 2:if(ft=k.type,_!==null&&(_.alternate=null,k.alternate=null,k.flags|=2),_=k.pendingProps,dt=go(k,er.current),xo(k,ot),dt=ol(null,k,ft,_,dt,ot),k.flags|=1,typeof dt=="object"&&dt!==null&&typeof dt.render=="function"&&dt.$$typeof===void 0){if(k.tag=1,k.memoizedState=null,k.updateQueue=null,ar(ft)){var gt=!0;va(k)}else gt=!1;k.memoizedState=dt.state!==null&&dt.state!==void 0?dt.state:null,Qs(k);var Tt=ft.getDerivedStateFromProps;typeof Tt=="function"&&us(k,ft,Tt,_),dt.updater=cs,k.stateNode=dt,dt._reactInternals=k,Ks(k,ft,_,ot),k=dl(null,k,ft,!0,gt,ot)}else k.tag=0,lr(null,k,dt,ot),k=k.child;return k;case 16:dt=k.elementType;e:{switch(_!==null&&(_.alternate=null,k.alternate=null,k.flags|=2),_=k.pendingProps,gt=dt._init,dt=gt(dt._payload),k.type=dt,gt=k.tag=$p(dt),_=Mr(dt,_),gt){case 0:k=fl(null,k,dt,_,ot);break e;case 1:k=Ru(null,k,dt,_,ot);break e;case 11:k=Eu(null,k,dt,_,ot);break e;case 14:k=Tu(null,k,dt,Mr(dt.type,_),ft,ot);break e}throw Error(h(306,dt,""))}return k;case 0:return ft=k.type,dt=k.pendingProps,dt=k.elementType===ft?dt:Mr(ft,dt),fl(_,k,ft,dt,ot);case 1:return ft=k.type,dt=k.pendingProps,dt=k.elementType===ft?dt:Mr(ft,dt),Ru(_,k,ft,dt,ot);case 3:if(Cu(k),ft=k.updateQueue,_===null||ft===null)throw Error(h(282));if(ft=k.pendingProps,dt=k.memoizedState,dt=dt!==null?dt.element:null,nu(_,k),Bo(k,ft,null,ot),ft=k.memoizedState.element,ft===dt)nl(),k=kr(_,k,ot);else{if(dt=k.stateNode,(gt=dt.hydrate)&&(Ut?(uo=En(k.stateNode.containerInfo),Fr=k,gt=Lr=!0):gt=!1),gt){if(Ut&&(_=dt.mutableSourceEagerHydrationData,_!=null))for(dt=0;dt<_.length;dt+=2)gt=_[dt],Tt=_[dt+1],Et?gt._workInProgressVersionPrimary=Tt:gt._workInProgressVersionSecondary=Tt,So.push(gt);for(ot=cu(k,null,ft,ot),k.child=ot;ot;)ot.flags=ot.flags&-3|1024,ot=ot.sibling}else lr(_,k,ft,ot),nl();k=k.child}return k;case 5:return fu(k),_===null&&tl(k),ft=k.type,dt=k.pendingProps,gt=_!==null?_.memoizedProps:null,Tt=dt.children,At(ft,dt)?Tt=null:gt!==null&&At(ft,gt)&&(k.flags|=16),Au(_,k),lr(_,k,Tt,ot),k.child;case 6:return _===null&&tl(k),null;case 13:return Pu(_,k,ot);case 4:return Js(k,k.stateNode.containerInfo),ft=k.pendingProps,_===null?k.child=hs(k,null,ft,ot):lr(_,k,ft,ot),k.child;case 11:return ft=k.type,dt=k.pendingProps,dt=k.elementType===ft?dt:Mr(ft,dt),Eu(_,k,ft,dt,ot);case 7:return lr(_,k,k.pendingProps,ot),k.child;case 8:return lr(_,k,k.pendingProps.children,ot),k.child;case 12:return lr(_,k,k.pendingProps.children,ot),k.child;case 10:e:{if(ft=k.type._context,dt=k.pendingProps,Tt=k.memoizedProps,gt=dt.value,eu(k,gt),Tt!==null){var kt=Tt.value;if(gt=pr(kt,gt)?0:(typeof ft._calculateChangedBits=="function"?ft._calculateChangedBits(kt,gt):1073741823)|0,gt===0){if(Tt.children===dt.children&&!or.current){k=kr(_,k,ot);break e}}else for(kt=k.child,kt!==null&&(kt.return=k);kt!==null;){var Qt=kt.dependencies;if(Qt!==null){Tt=kt.child;for(var un=Qt.firstContext;un!==null;){if(un.context===ft&&(un.observedBits&gt)!==0){kt.tag===1&&(un=Yr(-1,ot&-ot),un.tag=2,Zr(kt,un)),kt.lanes|=ot,un=kt.alternate,un!==null&&(un.lanes|=ot),tu(kt.return,ot),Qt.lanes|=ot;break}un=un.next}}else Tt=kt.tag===10&&kt.type===k.type?null:kt.child;if(Tt!==null)Tt.return=kt;else for(Tt=kt;Tt!==null;){if(Tt===k){Tt=null;break}if(kt=Tt.sibling,kt!==null){kt.return=Tt.return,Tt=kt;break}Tt=Tt.return}kt=Tt}}lr(_,k,dt.children,ot),k=k.child}return k;case 9:return dt=k.type,gt=k.pendingProps,ft=gt.children,xo(k,ot),dt=mr(dt,gt.unstable_observedBits),ft=ft(dt),k.flags|=1,lr(_,k,ft,ot),k.child;case 14:return dt=k.type,gt=Mr(dt,k.pendingProps),gt=Mr(dt.type,gt),Tu(_,k,dt,gt,ft,ot);case 15:return Lu(_,k,k.type,k.pendingProps,ft,ot);case 17:return ft=k.type,dt=k.pendingProps,dt=k.elementType===ft?dt:Mr(ft,dt),_!==null&&(_.alternate=null,k.alternate=null,k.flags|=2),k.tag=1,ar(ft)?(_=!0,va(k)):_=!1,xo(k,ot),su(k,ft,dt),Ks(k,ft,dt,ot),dl(null,k,ft,!0,_,ot);case 19:return Fu(_,k,ot);case 23:return cl(_,k,ot);case 24:return cl(_,k,ot)}throw Error(h(156,k.tag))};var Ns={current:!1},Fl=d.unstable_flushAllWithoutAsserting,rp=typeof Fl=="function";function kl(){if(Fl!==void 0)return Fl();for(var _=!1;Gr();)_=!0;return _}function ip(_){try{kl(),Dp(function(){kl()?ip(_):_()})}catch(k){_(k)}}var Vs=0,op=!1;function Xp(_,k,ot,ft){this.tag=_,this.key=ot,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=k,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ft,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(_,k,ot,ft){return new Xp(_,k,ot,ft)}function Nl(_){return _=_.prototype,!(!_||!_.isReactComponent)}function $p(_){if(typeof _=="function")return Nl(_)?1:0;if(_!=null){if(_=_.$$typeof,_===it)return 11;if(_===st)return 14}return 2}function eo(_,k){var ot=_.alternate;return ot===null?(ot=vr(_.tag,k,_.key,_.mode),ot.elementType=_.elementType,ot.type=_.type,ot.stateNode=_.stateNode,ot.alternate=_,_.alternate=ot):(ot.pendingProps=k,ot.type=_.type,ot.flags=0,ot.nextEffect=null,ot.firstEffect=null,ot.lastEffect=null),ot.childLanes=_.childLanes,ot.lanes=_.lanes,ot.child=_.child,ot.memoizedProps=_.memoizedProps,ot.memoizedState=_.memoizedState,ot.updateQueue=_.updateQueue,k=_.dependencies,ot.dependencies=k===null?null:{lanes:k.lanes,firstContext:k.firstContext},ot.sibling=_.sibling,ot.index=_.index,ot.ref=_.ref,ot}function Us(_,k,ot,ft,dt,gt){var Tt=2;if(ft=_,typeof _=="function")Nl(_)&&(Tt=1);else if(typeof _=="string")Tt=5;else e:switch(_){case j:return Ao(ot.children,dt,gt,k);case ut:Tt=8,dt|=16;break;case _e:Tt=8,dt|=1;break;case nt:return _=vr(12,ot,k,dt|8),_.elementType=nt,_.type=nt,_.lanes=gt,_;case $:return _=vr(13,ot,k,dt),_.type=$,_.elementType=$,_.lanes=gt,_;case et:return _=vr(19,ot,k,dt),_.elementType=et,_.lanes=gt,_;case ht:return Vl(ot,dt,gt,k);case pt:return _=vr(24,ot,k,dt),_.elementType=pt,_.lanes=gt,_;default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case rt:Tt=10;break e;case at:Tt=9;break e;case it:Tt=11;break e;case st:Tt=14;break e;case lt:Tt=16,ft=null;break e;case ct:Tt=22;break e}throw Error(h(130,_==null?_:typeof _,""))}return k=vr(Tt,ot,k,dt),k.elementType=_,k.type=ft,k.lanes=gt,k}function Ao(_,k,ot,ft){return _=vr(7,_,ft,k),_.lanes=ot,_}function Vl(_,k,ot,ft){return _=vr(23,_,ft,k),_.elementType=ht,_.lanes=ot,_}function Ul(_,k,ot){return _=vr(6,_,null,k),_.lanes=ot,_}function Gl(_,k,ot){return k=vr(4,_.children!==null?_.children:[],_.key,k),k.lanes=ot,k.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},k}function qp(_,k,ot){this.tag=k,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Lt,this.pendingContext=this.context=null,this.hydrate=ot,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Hs(0),this.expirationTimes=Hs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hs(0),Ut&&(this.mutableSourceEagerHydrationData=null)}function ap(_){var k=_._reactInternals;if(k===void 0)throw typeof _.render=="function"?Error(h(188)):Error(h(268,Object.keys(_)));return _=Nt(k),_===null?null:_.stateNode}function sp(_,k){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var ot=_.retryLane;_.retryLane=ot!==0&&ot<k?ot:k}}function Gs(_,k){sp(_,k),(_=_.alternate)&&sp(_,k)}function Yp(_){return _=Nt(_),_===null?null:_.stateNode}function Zp(){return null}return s.IsThisRendererActing=Ns,s.act=function(_){function k(){Vs--,bl.current=ot,Ns.current=ft}op===!1&&(op=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),Vs++;var ot=bl.current,ft=Ns.current;bl.current=!0,Ns.current=!0;try{var dt=Ku(_)}catch(gt){throw k(),gt}if(dt!==null&&typeof dt=="object"&&typeof dt.then=="function")return{then:function(gt,Tt){dt.then(function(){1<Vs||rp===!0&&ot===!0?(k(),gt()):ip(function(kt){k(),kt?Tt(kt):gt()})},function(kt){k(),Tt(kt)})}};try{Vs!==1||rp!==!1&&ot!==!1||kl(),k()}catch(gt){throw k(),gt}return{then:function(gt){gt()}}},s.attemptContinuousHydration=function(_){if(_.tag===13){var k=ur();Ur(_,67108864,k),Gs(_,67108864)}},s.attemptHydrationAtCurrentPriority=function(_){if(_.tag===13){var k=ur(),ot=Jr(_);Ur(_,ot,k),Gs(_,ot)}},s.attemptSynchronousHydration=function(_){switch(_.tag){case 3:var k=_.stateNode;if(k.hydrate){var ot=lo(k.pendingLanes);k.expiredLanes|=ot&k.pendingLanes,cr(k,Qn()),(wn&48)===0&&(Qr(),hr())}break;case 13:var ft=ur();Ju(function(){return Ur(_,1,ft)}),Gs(_,4)}},s.attemptUserBlockingHydration=function(_){if(_.tag===13){var k=ur();Ur(_,4,k),Gs(_,4)}},s.batchedEventUpdates=function(_,k){var ot=wn;wn|=2;try{return _(k)}finally{wn=ot,wn===0&&(Qr(),hr())}},s.batchedUpdates=Ku,s.createComponentSelector=function(_){return{$$typeof:Es,value:_}},s.createContainer=function(_,k,ot){return _=new qp(_,k,ot),k=vr(3,null,null,k===2?7:k===1?3:0),_.current=k,k.stateNode=_,Qs(k),_},s.createHasPsuedoClassSelector=function(_){return{$$typeof:Ts,value:_}},s.createPortal=function(_,k,ot){var ft=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tt,key:ft==null?null:""+ft,children:_,containerInfo:k,implementation:ot}},s.createRoleSelector=function(_){return{$$typeof:Ls,value:_}},s.createTestNameSelector=function(_){return{$$typeof:As,value:_}},s.createTextSelector=function(_){return{$$typeof:Rs,value:_}},s.deferredUpdates=function(_){return Dr(97,_)},s.discreteUpdates=function(_,k,ot,ft,dt){var gt=wn;wn|=4;try{return Dr(98,_.bind(null,k,ot,ft,dt))}finally{wn=gt,wn===0&&(Qr(),hr())}},s.findAllNodes=Ml,s.findBoundingRects=function(_,k){if(!on)throw Error(h(363));k=Ml(_,k),_=[];for(var ot=0;ot<k.length;ot++)_.push(an(k[ot]));for(k=_.length-1;0<k;k--){ot=_[k];for(var ft=ot.x,dt=ft+ot.width,gt=ot.y,Tt=gt+ot.height,kt=k-1;0<=kt;kt--)if(k!==kt){var Qt=_[kt],un=Qt.x,_n=un+Qt.width,Sn=Qt.y,hn=Sn+Qt.height;if(ft>=un&&gt>=Sn&&dt<=_n&&Tt<=hn){_.splice(k,1);break}else if(ft!==un||ot.width!==Qt.width||hn<gt||Sn>Tt){if(!(gt!==Sn||ot.height!==Qt.height||_n<ft||un>dt)){un>ft&&(Qt.width+=un-ft,Qt.x=ft),_n<dt&&(Qt.width=dt-un),_.splice(k,1);break}}else{Sn>gt&&(Qt.height+=Sn-gt,Qt.y=gt),hn<Tt&&(Qt.height=Tt-Sn),_.splice(k,1);break}}}return _},s.findHostInstance=ap,s.findHostInstanceWithNoPortals=function(_){return _=zt(_),_===null?null:_.tag===20?_.stateNode.instance:_.stateNode},s.findHostInstanceWithWarning=function(_){return ap(_)},s.flushControlled=function(_){var k=wn;wn|=1;try{Dr(99,_)}finally{wn=k,wn===0&&(Qr(),hr())}},s.flushDiscreteUpdates=function(){(wn&49)===0&&(kp(),Gr())},s.flushPassiveEffects=Gr,s.flushSync=Ju,s.focusWithin=function(_,k){if(!on)throw Error(h(363));for(_=_l(_),k=Zu(_,k),k=Array.from(k),_=0;_<k.length;){var ot=k[_++];if(!gn(ot)){if(ot.tag===5&&fn(ot.stateNode))return!0;for(ot=ot.child;ot!==null;)k.push(ot),ot=ot.sibling}}return!1},s.getCurrentUpdateLanePriority=function(){return _a},s.getFindAllNodesFailureDescription=function(_,k){if(!on)throw Error(h(363));var ot=0,ft=[];_=[_l(_),0];for(var dt=0;dt<_.length;){var gt=_[dt++],Tt=_[dt++],kt=k[Tt];if((gt.tag!==5||!gn(gt))&&(xl(gt,kt)&&(ft.push(wl(kt)),Tt++,Tt>ot&&(ot=Tt)),Tt<k.length))for(gt=gt.child;gt!==null;)_.push(gt,Tt),gt=gt.sibling}if(ot<k.length){for(_=[];ot<k.length;ot++)_.push(wl(k[ot]));return`findAllNodes was able to match part of the selector:
  `+(ft.join(" > ")+`

No matching component was found for:
  `)+_.join(" > ")}return null},s.getPublicRootInstance=function(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return en(_.child.stateNode);default:return _.child.stateNode}},s.injectIntoDevTools=function(_){if(_={bundleType:_.bundleType,version:_.version,rendererPackageName:_.rendererPackageName,rendererConfig:_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:g.ReactCurrentDispatcher,findHostInstanceByFiber:Yp,findFiberByHostInstance:_.findFiberByHostInstance||Zp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")_=!1;else{var k=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!k.isDisabled&&k.supportsFiber)try{zs=k.inject(_),so=k}catch{}_=!0}return _},s.observeVisibleRects=function(_,k,ot,ft){if(!on)throw Error(h(363));_=Ml(_,k);var dt=vn(_,ot,ft).disconnect;return{disconnect:function(){dt()}}},s.registerMutableSourceForHydration=function(_,k){var ot=k._getVersion;ot=ot(k._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[k,ot]:_.mutableSourceEagerHydrationData.push(k,ot)},s.runWithPriority=function(_,k){var ot=_a;try{return _a=_,k()}finally{_a=ot}},s.shouldSuspend=function(){return!1},s.unbatchedUpdates=function(_,k){var ot=wn;wn&=-2,wn|=8;try{return _(k)}finally{wn=ot,wn===0&&(Qr(),hr())}},s.updateContainer=function(_,k,ot,ft){var dt=k.current,gt=ur(),Tt=Jr(dt);e:if(ot){ot=ot._reactInternals;t:{if(It(ot)!==ot||ot.tag!==1)throw Error(h(170));var kt=ot;do{switch(kt.tag){case 3:kt=kt.stateNode.context;break t;case 1:if(ar(kt.type)){kt=kt.stateNode.__reactInternalMemoizedMergedChildContext;break t}}kt=kt.return}while(kt!==null);throw Error(h(171))}if(ot.tag===1){var Qt=ot.type;if(ar(Qt)){ot=Hl(ot,Qt,kt);break e}}ot=kt}else ot=Xr;return k.context===null?k.context=ot:k.pendingContext=ot,k=Yr(gt,Tt),k.payload={element:_},ft=ft===void 0?null:ft,ft!==null&&(k.callback=ft),Zr(dt,k),Ur(dt,Tt,gt),Tt},s}})(reactReconciler_production_min);reactReconciler.exports=reactReconciler_production_min.exports;var Reconciler=reactReconciler.exports;function debounce(o,e,a){var s,c,f,d,h;e==null&&(e=100);function g(){var tt=Date.now()-d;tt<e&&tt>=0?s=setTimeout(g,e-tt):(s=null,a||(h=o.apply(f,c),f=c=null))}var b=function(){f=this,c=arguments,d=Date.now();var tt=a&&!s;return s||(s=setTimeout(g,e)),tt&&(h=o.apply(f,c),f=c=null),h};return b.clear=function(){s&&(clearTimeout(s),s=null)},b.flush=function(){s&&(h=o.apply(f,c),f=c=null,clearTimeout(s),s=null)},b}debounce.debounce=debounce;var debounce_1=debounce;function useMeasure({debounce:o,scroll:e,polyfill:a}={debounce:0,scroll:!1}){const s=a||(typeof window=="undefined"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[c,f]=react.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),d=react.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:c}),h=o?typeof o=="number"?o:o.scroll:null,g=o?typeof o=="number"?o:o.resize:null,b=react.exports.useRef(!1);react.exports.useEffect(()=>(b.current=!0,()=>void(b.current=!1)));const[tt,j,_e]=react.exports.useMemo(()=>{const it=()=>{if(!d.current.element)return;const{left:$,top:et,width:st,height:lt,bottom:ct,right:ut,x:ht,y:pt}=d.current.element.getBoundingClientRect(),mt={left:$,top:et,width:st,height:lt,bottom:ct,right:ut,x:ht,y:pt};Object.freeze(mt),b.current&&!areBoundsEqual(d.current.lastBounds,mt)&&f(d.current.lastBounds=mt)};return[it,g?debounce_1.debounce(it,g):it,h?debounce_1.debounce(it,h):it]},[f,h,g]);function nt(){d.current.scrollContainers&&(d.current.scrollContainers.forEach(it=>it.removeEventListener("scroll",_e,!0)),d.current.scrollContainers=null),d.current.resizeObserver&&(d.current.resizeObserver.disconnect(),d.current.resizeObserver=null)}function rt(){!d.current.element||(d.current.resizeObserver=new s(_e),d.current.resizeObserver.observe(d.current.element),e&&d.current.scrollContainers&&d.current.scrollContainers.forEach(it=>it.addEventListener("scroll",_e,{capture:!0,passive:!0})))}const at=it=>{!it||it===d.current.element||(nt(),d.current.element=it,d.current.scrollContainers=findScrollContainers(it),rt())};return useOnWindowScroll(_e,Boolean(e)),useOnWindowResize(j),react.exports.useEffect(()=>{nt(),rt()},[e,_e,j]),react.exports.useEffect(()=>nt,[]),[at,c,tt]}function useOnWindowResize(o){react.exports.useEffect(()=>{const e=o;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[o])}function useOnWindowScroll(o,e){react.exports.useEffect(()=>{if(e){const a=o;return window.addEventListener("scroll",a,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",a,!0)}},[o,e])}function findScrollContainers(o){const e=[];if(!o||o===document.body)return e;const{overflow:a,overflowX:s,overflowY:c}=window.getComputedStyle(o);return[a,s,c].some(f=>f==="auto"||f==="scroll")&&e.push(o),[...e,...findScrollContainers(o.parentElement)]}const keys=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(o,e)=>keys.every(a=>o[a]===e[a]),is={obj:o=>o===Object(o)&&!is.arr(o)&&typeof o!="function",fun:o=>typeof o=="function",str:o=>typeof o=="string",num:o=>typeof o=="number",und:o=>o===void 0,arr:o=>Array.isArray(o),equ(o,e){if(typeof o!=typeof e||!!o!=!!e)return!1;if(is.str(o)||is.num(o)||is.obj(o))return o===e;if(is.arr(o)&&o==e)return!0;let a;for(a in o)if(!(a in e))return!1;for(a in e)if(o[a]!==e[a])return!1;return is.und(a)?o===e:!0}};function makeId(o){return(o.eventObject||o.object).uuid+"/"+o.index}function removeInteractivity(o,e){const{internal:a}=o.getState();a.interaction=a.interaction.filter(s=>s!==e),a.initialHits=a.initialHits.filter(s=>s!==e),a.hovered.forEach((s,c)=>{(s.eventObject===e||s.object===e)&&a.hovered.delete(c)})}function createEvents(o){const e=new Vector3;function a(j){var _e;const nt=o.getState(),{raycaster:rt,mouse:at,camera:it,size:$}=nt,{offsetX:et,offsetY:st}=(_e=rt.computeOffsets==null?void 0:rt.computeOffsets(j,nt))!=null?_e:j,{width:lt,height:ct}=$;at.set(et/lt*2-1,-(st/ct)*2+1),rt.setFromCamera(at,it)}function s(j){const{internal:_e}=o.getState(),nt=j.offsetX-_e.initialClick[0],rt=j.offsetY-_e.initialClick[1];return Math.round(Math.sqrt(nt*nt+rt*rt))}function c(j){return j.filter(_e=>["Move","Over","Enter","Out","Leave"].some(nt=>{var rt;return(rt=_e.__r3f.handlers)==null?void 0:rt["onPointer"+nt]}))}function f(j){const _e=o.getState(),{raycaster:nt,internal:rt}=_e;if(!nt.enabled)return[];const at=new Set,it=[],$=j?j(rt.interaction):rt.interaction;let et=nt.intersectObjects($,!0).filter(lt=>{const ct=makeId(lt);return at.has(ct)?!1:(at.add(ct),!0)});nt.filter&&(et=nt.filter(et,_e));for(const lt of et){let ct=lt.object;for(;ct;){var st;((st=ct.__r3f)==null?void 0:st.handlers)&&it.push({...lt,eventObject:ct}),ct=ct.parent}}return it}function d(j,_e){const{internal:nt}=o.getState();return"pointerId"in _e&&nt.capturedMap.has(_e.pointerId)&&!j.find(rt=>{var at;return rt.eventObject===((at=nt.capturedMap.get(_e.pointerId))==null?void 0:at.eventObject)})&&j.push(nt.capturedMap.get(_e.pointerId)),j}function h(j,_e,nt){const{raycaster:rt,mouse:at,camera:it,internal:$}=o.getState();if(j.length){const et=e.set(at.x,at.y,0).unproject(it),st=_e.type==="click"?s(_e):0,lt=ut=>_e.target.releasePointerCapture(ut),ct={stopped:!1};for(const ut of j){const ht=St=>{var Ft;return((Ft=$.capturedMap.get(St))==null?void 0:Ft.eventObject)===ut.eventObject},pt=St=>{$.capturedMap.set(St,ut),_e.target.setPointerCapture(St)};let mt={};for(let St in Object.getPrototypeOf(_e))mt[St]=_e[St];let bt={...ut,...mt,spaceX:at.x,spaceY:at.y,intersections:j,stopped:ct.stopped,delta:st,unprojectedPoint:et,ray:rt.ray,camera:it,stopPropagation:()=>{if(!("pointerId"in _e&&$.capturedMap.has(_e.pointerId))&&(bt.stopped=ct.stopped=!0,$.hovered.size&&Array.from($.hovered.values()).find(St=>St.eventObject===ut.eventObject))){const St=j.slice(0,j.indexOf(ut));g([...St,ut])}},target:{hasPointerCapture:ht,setPointerCapture:pt,releasePointerCapture:lt},currentTarget:{hasPointerCapture:ht,setPointerCapture:pt,releasePointerCapture:lt},sourceEvent:_e};if(nt(bt),ct.stopped===!0)break}}return j}function g(j){const{internal:_e}=o.getState();Array.from(_e.hovered.values()).forEach(nt=>{if(!j.length||!j.find(rt=>rt.object===nt.object&&rt.index===nt.index)){const at=nt.eventObject.__r3f.handlers;if(_e.hovered.delete(makeId(nt)),at){const it={...nt,intersections:j||[]};at.onPointerOut==null||at.onPointerOut(it),at.onPointerLeave==null||at.onPointerLeave(it)}}})}const b=j=>{switch(j){case"onPointerLeave":case"onPointerCancel":return()=>g([]);case"onLostPointerCapture":return _e=>{"pointerId"in _e&&o.getState().internal.capturedMap.delete(_e.pointerId),g([])}}return _e=>{const{onPointerMissed:nt,internal:rt}=o.getState();a(_e);const at=j==="onPointerMove",$=d(f(at?c:void 0),_e);at&&g($),h($,_e,et=>{const st=et.eventObject,lt=st.__r3f.handlers;if(!!lt)if(at){if(lt.onPointerOver||lt.onPointerEnter||lt.onPointerOut||lt.onPointerLeave){const ct=makeId(et),ut=rt.hovered.get(ct);ut?ut.stopped&&et.stopPropagation():(rt.hovered.set(ct,et),lt.onPointerOver==null||lt.onPointerOver(et),lt.onPointerEnter==null||lt.onPointerEnter(et))}lt.onPointerMove==null||lt.onPointerMove(et)}else{const ct=lt==null?void 0:lt[j];ct&&(j!=="onClick"&&j!=="onContextMenu"&&j!=="onDoubleClick"||rt.initialHits.includes(st))&&(ct(et),tt(_e,rt.interaction.filter(ut=>ut!==st)))}}),j==="onPointerDown"&&(rt.initialClick=[_e.offsetX,_e.offsetY],rt.initialHits=$.map(et=>et.eventObject)),(j==="onClick"||j==="onContextMenu"||j==="onDoubleClick")&&!$.length&&s(_e)<=2&&(tt(_e,rt.interaction),nt&&nt(_e))}};function tt(j,_e){_e.forEach(nt=>{var rt;return(rt=nt.__r3f.handlers)==null||rt.onPointerMissed==null?void 0:rt.onPointerMissed(j)})}return{handlePointer:b}}const isStore=o=>o&&!!o.getState,getContainer=(o,e)=>{var a,s;return{root:isStore(o)?o:(a=(s=o.__r3f)==null?void 0:s.root)!=null?a:e.__r3f.root,container:isStore(o)?o.getState().scene:o}},DEFAULT="__default",EMPTY={},FILTER=["children","key","ref"];let catalogue={};function prepare(o,e){const a=o;return(e!=null&&e.instance||!a.__r3f)&&(a.__r3f={root:null,memoizedProps:{},objects:[],...e}),o}function createRenderer(o){function e(j,_e,nt={},rt=!1){var at,it,$;const et=(at=j==null?void 0:j.__r3f)!=null?at:{},st=et.root,lt=(it=st==null||st.getState==null?void 0:st.getState())!=null?it:{},ct=[],ut=[],ht={};let pt=0;Object.entries(_e).forEach(([Ct,Pt])=>{FILTER.indexOf(Ct)===-1&&(ht[Ct]=Pt)}),et.memoizedProps&&et.memoizedProps.args&&(ht.args=et.memoizedProps.args),et.memoizedProps&&et.memoizedProps.attach&&(ht.attach=et.memoizedProps.attach),j.__r3f&&(j.__r3f.memoizedProps=ht);let mt=Object.keys(_e);for(pt=0;pt<mt.length;pt++)is.equ(_e[mt[pt]],nt[mt[pt]])&&ct.push(mt[pt]),is.fun(_e[mt[pt]])&&/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(mt[pt])&&ut.push(mt[pt]);const bt=[];if(rt)for(mt=Object.keys(nt),pt=0;pt<mt.length;pt++)_e.hasOwnProperty(mt[pt])||bt.push(mt[pt]);const St=[...ct,...FILTER];($=j.__r3f)!=null&&$.instance&&St.push("object");const Ft={..._e};for(mt=Object.keys(Ft),pt=0;pt<mt.length;pt++)St.indexOf(mt[pt])>-1&&delete Ft[mt[pt]];const It=Object.entries(Ft);for(pt=0;pt<bt.length;pt++)bt[pt]!=="children"&&It.unshift([bt[pt],DEFAULT+"remove"]);if(It.length>0){if(It.forEach(([Ct,Pt])=>{if(!ut.includes(Ct)){let Nt=j,zt=Nt[Ct];if(Ct.includes("-")){const Xt=Ct.split("-");if(zt=Xt.reduce((en,rn)=>en[rn],j),!(zt&&zt.set)){const[en,...rn]=Xt.reverse();Nt=rn.reverse().reduce((Gt,qt)=>Gt[qt],j),Ct=en}}if(Pt===DEFAULT+"remove")if(zt&&zt.constructor)Pt=new zt.constructor(ht.args);else if(Nt.constructor){const Xt=new Nt.constructor(Nt.__r3f.memoizedProps.args);Pt=Xt[zt],Xt.dispose&&Xt.dispose()}else Pt=0;if(zt&&zt.set&&(zt.copy||zt instanceof Layers)){if(Array.isArray(Pt))zt.fromArray?zt.fromArray(Pt):zt.set(...Pt);else if(zt.copy&&Pt&&Pt.constructor&&zt.constructor.name===Pt.constructor.name)zt.copy(Pt);else if(Pt!==void 0){const Xt=zt instanceof Color;!Xt&&zt.setScalar?zt.setScalar(Pt):zt instanceof Layers&&Pt instanceof Layers?zt.mask=Pt.mask:zt.set(Pt),!lt.linear&&Xt&&zt.convertSRGBToLinear()}}else Nt[Ct]=Pt,!lt.linear&&Nt[Ct]instanceof Texture&&(Nt[Ct].encoding=sRGBEncoding);a(j)}}),rt&&st&&j.raycast&&et.handlers){et.handlers=void 0;const Ct=lt.internal.interaction.indexOf(j);Ct>-1&&lt.internal.interaction.splice(Ct,1)}ut.length&&(rt&&st&&j.raycast&&lt.internal.interaction.push(j),et.handlers=ut.reduce((Ct,Pt)=>({...Ct,[Pt]:_e[Pt]}),{})),j.parent&&s(j)}}function a(j){var _e,nt;const rt=(_e=j.__r3f)==null||(nt=_e.root)==null||nt.getState==null?void 0:nt.getState();rt&&rt.internal.frames===0&&rt.invalidate()}function s(j){j.onUpdate==null||j.onUpdate(j)}function c(j,{args:_e=[],...nt},rt,at,it){let $=`${j[0].toUpperCase()}${j.slice(1)}`,et;if(!isStore(rt)&&it){const st=lt=>lt.return?st(lt.return):lt.stateNode&&lt.stateNode.containerInfo;rt=st(it)}if(!rt||!isStore(rt))throw`No valid root for ${$}!`;if(j==="primitive"){if(nt.object===void 0)throw"Primitives without 'object' are invalid!";const st=nt.object;et=prepare(st,{root:rt,instance:!0})}else{const st=catalogue[$]||three_module[$];if(!st)throw`${$} is not part of the THREE namespace! Did you forget to extend? See: https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#using-3rd-party-objects-declaratively`;const lt=is.arr(_e);et=prepare(lt?new st(..._e):new st(_e),{root:rt,memoizedProps:{args:lt&&_e.length===0?null:_e}})}return $.endsWith("Geometry")?nt={attach:"geometry",...nt}:$.endsWith("Material")&&(nt={attach:"material",...nt}),e(et,nt,{}),et}function f(j,_e){_e&&(_e.isObject3D?j.add(_e):(j.__r3f.objects.push(_e),_e.parent=j,_e.attachArray?(is.arr(j[_e.attachArray])||(j[_e.attachArray]=[]),j[_e.attachArray].push(_e)):_e.attachObject?(is.obj(j[_e.attachObject[0]])||(j[_e.attachObject[0]]={}),j[_e.attachObject[0]][_e.attachObject[1]]=_e):_e.attach&&(j[_e.attach]=_e)),s(_e),a(_e))}function d(j,_e,nt){if(_e){if(_e.isObject3D){_e.parent=j,_e.dispatchEvent({type:"added"});const rt=j.children.filter(it=>it!==_e),at=rt.indexOf(nt);j.children=[...rt.slice(0,at),_e,...rt.slice(at)]}else if(_e.attachArray){j.__r3f.objects.push(_e),_e.parent=j;const rt=j[_e.attachArray];is.arr(rt)||(j[_e.attachArray]=[]),rt.splice(rt.indexOf(nt),0,_e)}else return f(j,_e);s(_e),a(_e)}}function h(j,_e,nt=!1){j&&[...j].forEach(rt=>g(_e,rt,nt))}function g(j,_e,nt){if(_e){var rt;if(_e.isObject3D){var at;j.remove(_e),(at=_e.__r3f)!=null&&at.root&&removeInteractivity(_e.__r3f.root,_e)}else _e.parent=null,j.__r3f.objects&&(j.__r3f.objects=j.__r3f.objects.filter(st=>st!==_e)),_e.attachArray?j[_e.attachArray]=j[_e.attachArray].filter(st=>st!==_e):_e.attachObject?delete j[_e.attachObject[0]][_e.attachObject[1]]:_e.attach&&(j[_e.attach]=null);const $=(rt=_e.__r3f)==null?void 0:rt.instance,et=nt===void 0?_e.dispose!==null&&!$:nt;if(!$){var it;h((it=_e.__r3f)==null?void 0:it.objects,_e,et),h(_e.children,_e,et)}_e.__r3f&&(delete _e.__r3f.root,delete _e.__r3f.objects,delete _e.__r3f.handlers,delete _e.__r3f.memoizedProps,$||delete _e.__r3f),et&&_e.dispose&&_e.type!=="Scene"&&scheduler.exports.unstable_runWithPriority(scheduler.exports.unstable_IdlePriority,()=>_e.dispose()),a(j)}}function b(j,_e,nt,rt){const at=j.parent;if(!at)return;const it=c(_e,nt,j.__r3f.root);g(at,j),f(at,it),[rt,rt.alternate].forEach($=>{$!==null&&($.stateNode=it,$.ref&&(typeof $.ref=="function"?$.ref(it):$.ref.current=it))})}return{reconciler:Reconciler({now:scheduler.exports.unstable_now,createInstance:c,removeChild:g,appendChild:f,appendInitialChild:f,insertBefore:d,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0,setTimeout:is.fun(setTimeout)?setTimeout:void 0,clearTimeout:is.fun(clearTimeout)?clearTimeout:void 0,noTimeout:-1,appendChildToContainer:(j,_e)=>{const{container:nt,root:rt}=getContainer(j,_e);nt.__r3f.root=rt,f(nt,_e)},removeChildFromContainer:(j,_e)=>{const{container:nt}=getContainer(j,_e);g(nt,_e)},insertInContainerBefore:(j,_e,nt)=>{const{container:rt}=getContainer(j,_e);d(rt,_e,nt)},commitUpdate(j,_e,nt,rt,at,it){if(j.__r3f.instance&&at.object&&at.object!==j)b(j,nt,at,it);else{const{args:$=[],...et}=at,{args:st=[],...lt}=rt;$.some((ut,ht)=>is.obj(ut)?Object.entries(ut).some(([pt,mt])=>mt!==st[ht][pt]):ut!==st[ht])?b(j,nt,at,it):e(j,et,lt,!0)}},hideInstance(j){j.isObject3D&&(j.visible=!1,a(j))},unhideInstance(j,_e){(j.isObject3D&&_e.visible==null||_e.visible)&&(j.visible=!0,a(j))},hideTextInstance(){throw new Error("Text is not allowed in the R3F tree.")},getPublicInstance(j){return j},getRootHostContext(j){return EMPTY},getChildHostContext(j){return EMPTY},createTextInstance(){},finalizeInitialChildren(j){return!!j.__r3f.handlers},commitMount(j){j.raycast&&j.__r3f.handlers&&j.__r3f.root.getState().internal.interaction.push(j)},prepareUpdate(){return EMPTY},shouldDeprioritizeSubtree(){return!1},prepareForCommit(){return null},preparePortalMount(...j){},resetAfterCommit(){},shouldSetTextContent(){return!1},clearContainer(){return!1}}),applyProps:e}}const isRenderer=o=>o&&!!o.render,isOrthographicCamera=o=>o&&o.isOrthographicCamera,context=react.exports.createContext(null),createStore=(o,e,a,s)=>{const{gl:c,size:f,shadows:d=!1,linear:h=!1,flat:g=!1,vr:b=!1,orthographic:tt=!1,frameloop:j="always",dpr:_e=1,performance:nt,clock:rt=new Clock,raycaster:at,camera:it,onPointerMissed:$}=s;d&&(c.shadowMap.enabled=!0,typeof d=="object"?Object.assign(c.shadowMap,d):c.shadowMap.type=PCFSoftShadowMap),h||(g||(c.toneMapping=ACESFilmicToneMapping),c.outputEncoding=sRGBEncoding),j==="never"&&(rt.stop(),rt.elapsedTime=0);const et=create$2((lt,ct)=>{const ut=new Raycaster,{params:ht,...pt}=at||{};o(ut,{enabled:!0,...pt,params:{...ut.params,...ht}},{});const mt=it instanceof Camera,bt=mt?it:tt?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);mt||(bt.position.z=5,it&&o(bt,it,{}),bt.lookAt(0,0,0));function St(Xt){return Array.isArray(Xt)?Math.min(Math.max(Xt[0],window.devicePixelRatio),Xt[1]):Xt}const Ft=St(_e),It=new Vector3,Ct=new Vector3;function Pt(Xt=ct().camera,en=Ct,rn=ct().size){const{width:Gt,height:qt}=rn,sn=Gt/qt,yn=Xt.getWorldPosition(It).distanceTo(en);if(isOrthographicCamera(Xt))return{width:Gt/Xt.zoom,height:qt/Xt.zoom,factor:1,distance:yn,aspect:sn};{const Yt=Xt.fov*Math.PI/180,_t=2*Math.tan(Yt/2)*yn,yt=_t*(Gt/qt);return{width:yt,height:_t,factor:Gt/yt,distance:yn,aspect:sn}}}let Nt;const zt=Xt=>lt(en=>({performance:{...en.performance,current:Xt}}));return{gl:c,set:lt,get:ct,invalidate:()=>e(ct()),advance:(Xt,en)=>a(Xt,en,ct()),linear:h,flat:g,scene:prepare(new Scene),camera:bt,raycaster:ut,clock:rt,mouse:new Vector2,vr:b,frameloop:j,onPointerMissed:$,performance:{current:1,min:.5,max:1,debounce:200,...nt,regress:()=>{const Xt=ct();Nt&&clearTimeout(Nt),Xt.performance.current!==Xt.performance.min&&zt(Xt.performance.min),Nt=setTimeout(()=>zt(ct().performance.max),Xt.performance.debounce)}},size:{width:0,height:0},viewport:{initialDpr:Ft,dpr:Ft,width:0,height:0,aspect:0,distance:0,factor:0,getCurrentViewport:Pt},setSize:(Xt,en)=>{const rn={width:Xt,height:en};lt(Gt=>({size:rn,viewport:{...Gt.viewport,...Pt(bt,Ct,rn)}}))},setDpr:Xt=>lt(en=>({viewport:{...en.viewport,dpr:St(Xt)}})),events:{connected:!1},internal:{active:!1,priority:0,frames:0,lastProps:s,interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(Xt,en=0)=>(lt(({internal:rn})=>({internal:{...rn,priority:rn.priority+(en?1:0),subscribers:[...rn.subscribers,{ref:Xt,priority:en}].sort((Gt,qt)=>Gt.priority-qt.priority)}})),()=>{lt(({internal:rn})=>({internal:{...rn,priority:rn.priority-(en?1:0),subscribers:rn.subscribers.filter(Gt=>Gt.ref!==Xt)}}))})}}});et.subscribe(()=>{const{camera:lt,size:ct,viewport:ut,internal:ht}=et.getState();ht.lastProps.camera instanceof Camera||(isOrthographicCamera(lt)?(lt.left=ct.width/-2,lt.right=ct.width/2,lt.top=ct.height/2,lt.bottom=ct.height/-2):lt.aspect=ct.width/ct.height,lt.updateProjectionMatrix(),lt.updateMatrixWorld()),c.setPixelRatio(ut.dpr),c.setSize(ct.width,ct.height)},lt=>[lt.viewport.dpr,lt.size],shallow);const st=et.getState();return f&&st.setSize(f.width,f.height),et.subscribe(lt=>e(lt)),et};let i,globalEffects=[],globalAfterEffects=[],globalTailEffects=[];function run(o,e){for(i=0;i<o.length;i++)o[i](e)}function render$1(o,e){let a=e.clock.getDelta();for(e.frameloop==="never"&&typeof o=="number"&&(a=o-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=o),i=0;i<e.internal.subscribers.length;i++)e.internal.subscribers[i].ref.current(e,a);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function createLoop(o){let e=!1,a;function s(d){if(e=!0,a=0,run(globalEffects,d),o.forEach(h=>{const g=h.store.getState();g.internal.active&&(g.frameloop==="always"||g.internal.frames>0)&&(a+=render$1(d,g))}),run(globalAfterEffects,d),a>0)return requestAnimationFrame(s);run(globalTailEffects,d),e=!1}function c(d){if(!d)return o.forEach(h=>c(h.store.getState()));d.vr||!d.internal.active||d.frameloop==="never"||(d.internal.frames=Math.min(60,d.internal.frames+1),e||(e=!0,requestAnimationFrame(s)))}function f(d,h=!0,g){h&&run(globalEffects,d),g?render$1(d,g):o.forEach(b=>render$1(d,b.store.getState())),h&&run(globalAfterEffects,d)}return{loop:s,invalidate:c,advance:f}}function createPointerEvents(o){const{handlePointer:e}=createEvents(o),a={onClick:"click",onContextMenu:"contextmenu",onDoubleClick:"dblclick",onWheel:"wheel",onPointerDown:"pointerdown",onPointerUp:"pointerup",onPointerLeave:"pointerleave",onPointerMove:"pointermove",onPointerCancel:"pointercancel",onLostPointerCapture:"lostpointercapture"};return{connected:!1,handlers:Object.keys(a).reduce((s,c)=>({...s,[c]:e(c)}),{}),connect:s=>{var c;const{set:f,events:d}=o.getState();d.disconnect==null||d.disconnect(),f(h=>({events:{...h.events,connected:s}})),Object.entries((c=d==null?void 0:d.handlers)!=null?c:[]).forEach(([h,g])=>s.addEventListener(a[h],g,{passive:!0}))},disconnect:()=>{const{set:s,events:c}=o.getState();if(c.connected){var f;Object.entries((f=c.handlers)!=null?f:[]).forEach(([d,h])=>{c&&c.connected instanceof HTMLElement&&c.connected.removeEventListener(a[d],h)}),s(d=>({events:{...d.events,connected:!1}}))}}}}const useIsomorphicLayoutEffect=typeof window!="undefined"?react.exports.useLayoutEffect:react.exports.useEffect;function Block({set:o}){return useIsomorphicLayoutEffect(()=>(o(new Promise(()=>null)),()=>o(!1)),[]),null}class ErrorBoundary extends react.exports.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});function Canvas({children:o,fallback:e,tabIndex:a,resize:s,id:c,style:f,className:d,events:h,...g}){const[b,tt]=useMeasure({scroll:!0,debounce:{scroll:50,resize:0},...s}),j=react.exports.useRef(null),[_e,nt]=react.exports.useState(!1),[rt,at]=react.exports.useState(!1);if(_e)throw _e;if(rt)throw rt;return useIsomorphicLayoutEffect(()=>{tt.width>0&&tt.height>0&&render(react.exports.createElement(ErrorBoundary,{set:at},react.exports.createElement(react.exports.Suspense,{fallback:react.exports.createElement(Block,{set:nt})},o)),j.current,{...g,size:tt,events:h||createPointerEvents})},[tt,o]),useIsomorphicLayoutEffect(()=>{const it=j.current;return()=>unmountComponentAtNode(it)},[]),react.exports.createElement("div",{ref:b,id:c,className:d,tabIndex:a,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",...f}},react.exports.createElement("canvas",{ref:j,style:{display:"block"}},e))}function useThree(o=a=>a,e){const a=react.exports.useContext(context);if(!a)throw"R3F hooks can only be used within the Canvas component!";return a(o,e)}function useFrame(o,e=0){const{subscribe:a}=react.exports.useContext(context).getState().internal,s=react.exports.useRef(o);return react.exports.useLayoutEffect(()=>void(s.current=o),[o]),react.exports.useLayoutEffect(()=>{const c=a(s,e);return()=>c()},[e,a]),null}const roots$1=new Map,modes=["legacy","blocking","concurrent"],{invalidate,advance}=createLoop(roots$1),{reconciler,applyProps}=createRenderer(),createRendererInstance=(o,e)=>isRenderer(o)?o:new WebGLRenderer({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...o});function render(o,e,{gl:a,size:s,mode:c=modes[1],events:f,onCreated:d,...h}={}){var g;if(!s){var b,tt,j,_e;s={width:(b=(tt=e.parentElement)==null?void 0:tt.clientWidth)!=null?b:0,height:(j=(_e=e.parentElement)==null?void 0:_e.clientHeight)!=null?j:0}}let nt=roots$1.get(e),rt=nt==null?void 0:nt.fiber,at=nt==null?void 0:nt.store,it=(g=at)==null?void 0:g.getState();if(rt&&it){const $=it.internal.lastProps;h.dpr!==void 0&&!is.equ($.dpr,h.dpr)&&it.setDpr(h.dpr),s!==void 0&&!is.equ($.size,s)&&it.setSize(s.width,s.height),h.linear!==$.linear&&(unmountComponentAtNode(e),rt=void 0)}if(!rt){const $=createRendererInstance(a,e);h.vr&&($.xr.enabled=!0,$.setAnimationLoop(st=>advance(st,!0))),at=createStore(applyProps,invalidate,advance,{gl:$,size:s,...h});const et=at.getState();et.get,rt=reconciler.createContainer(at,modes.indexOf(c),!1,null),roots$1.set(e,{fiber:rt,store:at}),f&&et.set({events:f(at)})}if(at&&rt)return reconciler.updateContainer(react.exports.createElement(Provider,{store:at,element:o,onCreated:d,target:e}),rt,null,()=>{}),at;throw"Error creating root!"}function Provider({store:o,element:e,onCreated:a,target:s}){return react.exports.useEffect(()=>{const c=o.getState();c.set(f=>({internal:{...f.internal,active:!0}})),c.events.connect==null||c.events.connect(s),a&&a(c)},[]),react.exports.createElement(context.Provider,{value:o},e)}function unmountComponentAtNode(o,e){const a=roots$1.get(o),s=a==null?void 0:a.fiber;if(s){const c=a==null?void 0:a.store.getState();c&&(c.internal.active=!1),reconciler.updateContainer(null,s,null,()=>{c&&setTimeout(()=>{var f,d,h;c.events.disconnect==null||c.events.disconnect(),(f=c.gl)==null||(d=f.renderLists)==null||d.dispose==null||d.dispose(),(h=c.gl)==null||h.forceContextLoss==null||h.forceContextLoss(),dispose(c),roots$1.delete(o),e&&e(o)},500)})}}function dispose(o){o.dispose&&o.type!=="Scene"&&o.dispose();for(const s in o){var e,a;(e=(a=s).dispose)==null||e.call(a),delete o[s]}}reconciler.act;reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:"17.0.2"});var threeVrm_module={exports:{}},require$$0=getAugmentedNamespace(three_module);/*! (c) 2019-2020 pixiv Inc. - https://github.com/pixiv/three-vrm/blob/master/LICENSE */(function(o,e){(function(a,s){o.exports=s(require$$0)})(commonjsGlobal,function(a){return function(s){var c={};function f(d){if(c[d])return c[d].exports;var h=c[d]={i:d,l:!1,exports:{}};return s[d].call(h.exports,h,h.exports,f),h.l=!0,h.exports}return f.m=s,f.c=c,f.d=function(d,h,g){f.o(d,h)||Object.defineProperty(d,h,{enumerable:!0,get:g})},f.r=function(d){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},f.t=function(d,h){if(1&h&&(d=f(d)),8&h||4&h&&typeof d=="object"&&d&&d.__esModule)return d;var g=Object.create(null);if(f.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:d}),2&h&&typeof d!="string")for(var b in d)f.d(g,b,function(tt){return d[tt]}.bind(null,b));return g},f.n=function(d){var h=d&&d.__esModule?function(){return d.default}:function(){return d};return f.d(h,"a",h),h},f.o=function(d,h){return Object.prototype.hasOwnProperty.call(d,h)},f.p="",f(f.s=32)}([function(s,c){s.exports=a},function(s,c,f){var d=this&&this.__createBinding||(Object.create?function(g,b,tt,j){j===void 0&&(j=tt),Object.defineProperty(g,j,{enumerable:!0,get:function(){return b[tt]}})}:function(g,b,tt,j){j===void 0&&(j=tt),g[j]=b[tt]}),h=this&&this.__exportStar||function(g,b){for(var tt in g)tt==="default"||Object.prototype.hasOwnProperty.call(b,tt)||d(b,g,tt)};Object.defineProperty(c,"__esModule",{value:!0}),h(f(36),c),h(f(37),c),h(f(38),c)},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.getWorldQuaternionLite=c.getWorldScaleLite=c.getWorldPositionLite=c.linstep=c.saturate=void 0;var d=f(0);c.saturate=function(tt){return Math.max(Math.min(tt,1),0)},c.linstep=function(tt,j,_e){return tt<=j?0:tt>=_e?1:(tt-j)/(_e-j)};var h=new d.Vector3,g=new d.Vector3,b=new d.Quaternion;c.getWorldPositionLite=function(tt,j){return tt.matrixWorld.decompose(j,b,g),j},c.getWorldScaleLite=function(tt,j){return tt.matrixWorld.decompose(h,b,j),j},c.getWorldQuaternionLite=function(tt,j){return tt.matrixWorld.decompose(h,j,g),j}},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.VRMLookAtHead=void 0;var d=f(0),h=f(2),g=f(19),b=Object.freeze(new d.Vector3(0,0,-1)),tt=new d.Vector3,j=new d.Vector3,_e=new d.Vector3,nt=new d.Quaternion,rt=function(){function at(it,$){this.autoUpdate=!0,this._euler=new d.Euler(0,0,0,at.EULER_ORDER),this.firstPerson=it,this.applyer=$}return at.prototype.getLookAtWorldDirection=function(it){var $=h.getWorldQuaternionLite(this.firstPerson.firstPersonBone,nt);return it.copy(b).applyEuler(this._euler).applyQuaternion($)},at.prototype.lookAt=function(it){this._calcEuler(this._euler,it),this.applyer&&this.applyer.lookAt(this._euler)},at.prototype.update=function(it){this.target&&this.autoUpdate&&(this.lookAt(this.target.getWorldPosition(tt)),this.applyer&&this.applyer.lookAt(this._euler))},at.prototype._calcEuler=function(it,$){var et=this.firstPerson.getFirstPersonWorldPosition(j),st=_e.copy($).sub(et).normalize();return st.applyQuaternion(g.quatInvertCompat(h.getWorldQuaternionLite(this.firstPerson.firstPersonBone,nt))),it.x=Math.atan2(st.y,Math.sqrt(st.x*st.x+st.z*st.z)),it.y=Math.atan2(-st.x,-st.z),it},at.EULER_ORDER="YXZ",at}();c.VRMLookAtHead=rt},function(s,c,f){var d,h=this&&this.__extends||(d=function(rt,at){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,$){it.__proto__=$}||function(it,$){for(var et in $)Object.prototype.hasOwnProperty.call($,et)&&(it[et]=$[et])})(rt,at)},function(rt,at){function it(){this.constructor=rt}d(rt,at),rt.prototype=at===null?Object.create(at):(it.prototype=at.prototype,new it)}),g=this&&this.__awaiter||function(rt,at,it,$){return new(it||(it=Promise))(function(et,st){function lt(ht){try{ut($.next(ht))}catch(pt){st(pt)}}function ct(ht){try{ut($.throw(ht))}catch(pt){st(pt)}}function ut(ht){var pt;ht.done?et(ht.value):(pt=ht.value,pt instanceof it?pt:new it(function(mt){mt(pt)})).then(lt,ct)}ut(($=$.apply(rt,at||[])).next())})},b=this&&this.__generator||function(rt,at){var it,$,et,st,lt={label:0,sent:function(){if(1&et[0])throw et[1];return et[1]},trys:[],ops:[]};return st={next:ct(0),throw:ct(1),return:ct(2)},typeof Symbol=="function"&&(st[Symbol.iterator]=function(){return this}),st;function ct(ut){return function(ht){return function(pt){if(it)throw new TypeError("Generator is already executing.");for(;lt;)try{if(it=1,$&&(et=2&pt[0]?$.return:pt[0]?$.throw||((et=$.return)&&et.call($),0):$.next)&&!(et=et.call($,pt[1])).done)return et;switch($=0,et&&(pt=[2&pt[0],et.value]),pt[0]){case 0:case 1:et=pt;break;case 4:return lt.label++,{value:pt[1],done:!1};case 5:lt.label++,$=pt[1],pt=[0];continue;case 7:pt=lt.ops.pop(),lt.trys.pop();continue;default:if(et=lt.trys,!((et=et.length>0&&et[et.length-1])||pt[0]!==6&&pt[0]!==2)){lt=0;continue}if(pt[0]===3&&(!et||pt[1]>et[0]&&pt[1]<et[3])){lt.label=pt[1];break}if(pt[0]===6&&lt.label<et[1]){lt.label=et[1],et=pt;break}if(et&&lt.label<et[2]){lt.label=et[2],lt.ops.push(pt);break}et[2]&&lt.ops.pop(),lt.trys.pop();continue}pt=at.call(rt,lt)}catch(mt){pt=[6,mt],$=0}finally{it=et=0}if(5&pt[0])throw pt[1];return{value:pt[0]?pt[1]:void 0,done:!0}}([ut,ht])}}};Object.defineProperty(c,"__esModule",{value:!0}),c.VRMDebug=c.VRM_GIZMO_RENDER_ORDER=void 0;var tt=f(0),j=f(5),_e=f(53);c.VRM_GIZMO_RENDER_ORDER=1e4;var nt=function(rt){function at(it,$){$===void 0&&($={});var et=rt.call(this,it)||this;return $.disableBoxHelper||et.scene.add(new tt.BoxHelper(et.scene)),$.disableSkeletonHelper||et.scene.add(new tt.SkeletonHelper(et.scene)),et}return h(at,rt),at.from=function(it,$,et){return $===void 0&&($={}),et===void 0&&(et={}),g(this,void 0,Promise,function(){return b(this,function(st){switch(st.label){case 0:return[4,new _e.VRMImporterDebug($).import(it,et)];case 1:return[2,st.sent()]}})})},at.prototype.update=function(it){rt.prototype.update.call(this,it)},at}(j.VRM);c.VRMDebug=nt},function(s,c,f){var d=this&&this.__awaiter||function(j,_e,nt,rt){return new(nt||(nt=Promise))(function(at,it){function $(lt){try{st(rt.next(lt))}catch(ct){it(ct)}}function et(lt){try{st(rt.throw(lt))}catch(ct){it(ct)}}function st(lt){var ct;lt.done?at(lt.value):(ct=lt.value,ct instanceof nt?ct:new nt(function(ut){ut(ct)})).then($,et)}st((rt=rt.apply(j,_e||[])).next())})},h=this&&this.__generator||function(j,_e){var nt,rt,at,it,$={label:0,sent:function(){if(1&at[0])throw at[1];return at[1]},trys:[],ops:[]};return it={next:et(0),throw:et(1),return:et(2)},typeof Symbol=="function"&&(it[Symbol.iterator]=function(){return this}),it;function et(st){return function(lt){return function(ct){if(nt)throw new TypeError("Generator is already executing.");for(;$;)try{if(nt=1,rt&&(at=2&ct[0]?rt.return:ct[0]?rt.throw||((at=rt.return)&&at.call(rt),0):rt.next)&&!(at=at.call(rt,ct[1])).done)return at;switch(rt=0,at&&(ct=[2&ct[0],at.value]),ct[0]){case 0:case 1:at=ct;break;case 4:return $.label++,{value:ct[1],done:!1};case 5:$.label++,rt=ct[1],ct=[0];continue;case 7:ct=$.ops.pop(),$.trys.pop();continue;default:if(at=$.trys,!((at=at.length>0&&at[at.length-1])||ct[0]!==6&&ct[0]!==2)){$=0;continue}if(ct[0]===3&&(!at||ct[1]>at[0]&&ct[1]<at[3])){$.label=ct[1];break}if(ct[0]===6&&$.label<at[1]){$.label=at[1],at=ct;break}if(at&&$.label<at[2]){$.label=at[2],$.ops.push(ct);break}at[2]&&$.ops.pop(),$.trys.pop();continue}ct=_e.call(j,$)}catch(ut){ct=[6,ut],rt=0}finally{nt=at=0}if(5&ct[0])throw ct[1];return{value:ct[0]?ct[1]:void 0,done:!0}}([st,lt])}}};Object.defineProperty(c,"__esModule",{value:!0}),c.VRM=void 0;var g=f(34),b=f(6),tt=function(){function j(_e){this.scene=_e.scene,this.humanoid=_e.humanoid,this.blendShapeProxy=_e.blendShapeProxy,this.firstPerson=_e.firstPerson,this.lookAt=_e.lookAt,this.materials=_e.materials,this.springBoneManager=_e.springBoneManager,this.meta=_e.meta}return j.from=function(_e,nt){return nt===void 0&&(nt={}),d(this,void 0,Promise,function(){return h(this,function(rt){switch(rt.label){case 0:return[4,new b.VRMImporter(nt).import(_e)];case 1:return[2,rt.sent()]}})})},j.prototype.update=function(_e){this.lookAt&&this.lookAt.update(_e),this.blendShapeProxy&&this.blendShapeProxy.update(),this.springBoneManager&&this.springBoneManager.lateUpdate(_e),this.materials&&this.materials.forEach(function(nt){nt.updateVRMMaterials&&nt.updateVRMMaterials(_e)})},j.prototype.dispose=function(){var _e,nt,rt=this.scene;rt&&g.deepDispose(rt),(nt=(_e=this.meta)===null||_e===void 0?void 0:_e.texture)===null||nt===void 0||nt.dispose()},j}();c.VRM=tt},function(s,c,f){var d=this&&this.__awaiter||function($,et,st,lt){return new(st||(st=Promise))(function(ct,ut){function ht(bt){try{mt(lt.next(bt))}catch(St){ut(St)}}function pt(bt){try{mt(lt.throw(bt))}catch(St){ut(St)}}function mt(bt){var St;bt.done?ct(bt.value):(St=bt.value,St instanceof st?St:new st(function(Ft){Ft(St)})).then(ht,pt)}mt((lt=lt.apply($,et||[])).next())})},h=this&&this.__generator||function($,et){var st,lt,ct,ut,ht={label:0,sent:function(){if(1&ct[0])throw ct[1];return ct[1]},trys:[],ops:[]};return ut={next:pt(0),throw:pt(1),return:pt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function pt(mt){return function(bt){return function(St){if(st)throw new TypeError("Generator is already executing.");for(;ht;)try{if(st=1,lt&&(ct=2&St[0]?lt.return:St[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,St[1])).done)return ct;switch(lt=0,ct&&(St=[2&St[0],ct.value]),St[0]){case 0:case 1:ct=St;break;case 4:return ht.label++,{value:St[1],done:!1};case 5:ht.label++,lt=St[1],St=[0];continue;case 7:St=ht.ops.pop(),ht.trys.pop();continue;default:if(ct=ht.trys,!((ct=ct.length>0&&ct[ct.length-1])||St[0]!==6&&St[0]!==2)){ht=0;continue}if(St[0]===3&&(!ct||St[1]>ct[0]&&St[1]<ct[3])){ht.label=St[1];break}if(St[0]===6&&ht.label<ct[1]){ht.label=ct[1],ct=St;break}if(ct&&ht.label<ct[2]){ht.label=ct[2],ht.ops.push(St);break}ct[2]&&ht.ops.pop(),ht.trys.pop();continue}St=et.call($,ht)}catch(Ft){St=[6,Ft],lt=0}finally{st=ct=0}if(5&St[0])throw St[1];return{value:St[0]?St[1]:void 0,done:!0}}([mt,bt])}}};Object.defineProperty(c,"__esModule",{value:!0}),c.VRMImporter=void 0;var g=f(11),b=f(14),tt=f(16),j=f(7),_e=f(23),nt=f(26),rt=f(9),at=f(5),it=function(){function $(et){et===void 0&&(et={}),this._metaImporter=et.metaImporter||new nt.VRMMetaImporter,this._blendShapeImporter=et.blendShapeImporter||new g.VRMBlendShapeImporter,this._lookAtImporter=et.lookAtImporter||new j.VRMLookAtImporter,this._humanoidImporter=et.humanoidImporter||new tt.VRMHumanoidImporter,this._firstPersonImporter=et.firstPersonImporter||new b.VRMFirstPersonImporter,this._materialImporter=et.materialImporter||new _e.VRMMaterialImporter,this._springBoneImporter=et.springBoneImporter||new rt.VRMSpringBoneImporter}return $.prototype.import=function(et){return d(this,void 0,Promise,function(){var st,lt,ct,ut,ht,pt,mt,bt,St,Ft;return h(this,function(It){switch(It.label){case 0:if(et.parser.json.extensions===void 0||et.parser.json.extensions.VRM===void 0)throw new Error("Could not find VRM extension on the GLTF");return(st=et.scene).updateMatrixWorld(!1),st.traverse(function(Ct){Ct.isMesh&&(Ct.frustumCulled=!1)}),[4,this._metaImporter.import(et)];case 1:return lt=It.sent()||void 0,[4,this._materialImporter.convertGLTFMaterials(et)];case 2:return ct=It.sent()||void 0,[4,this._humanoidImporter.import(et)];case 3:return(ut=It.sent()||void 0)?[4,this._firstPersonImporter.import(et,ut)]:[3,5];case 4:return pt=It.sent()||void 0,[3,6];case 5:pt=void 0,It.label=6;case 6:return ht=pt,[4,this._blendShapeImporter.import(et)];case 7:return mt=It.sent()||void 0,ht&&mt&&ut?[4,this._lookAtImporter.import(et,ht,mt,ut)]:[3,9];case 8:return St=It.sent()||void 0,[3,10];case 9:St=void 0,It.label=10;case 10:return bt=St,[4,this._springBoneImporter.import(et)];case 11:return Ft=It.sent()||void 0,[2,new at.VRM({scene:et.scene,meta:lt,materials:ct,humanoid:ut,firstPerson:ht,blendShapeProxy:mt,lookAt:bt,springBoneManager:Ft})]}})})},$}();c.VRMImporter=it},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.VRMLookAtImporter=void 0;var d=f(1),h=f(20),g=f(21),b=f(22),tt=f(3),j=Math.PI/180,_e=function(){function nt(){}return nt.prototype.import=function(rt,at,it,$){var et,st=(et=rt.parser.json.extensions)===null||et===void 0?void 0:et.VRM;if(!st)return null;var lt=st.firstPerson;if(!lt)return null;var ct=this._importApplyer(lt,it,$);return new tt.VRMLookAtHead(at,ct||void 0)},nt.prototype._importApplyer=function(rt,at,it){var $=rt.lookAtHorizontalInner,et=rt.lookAtHorizontalOuter,st=rt.lookAtVerticalDown,lt=rt.lookAtVerticalUp;switch(rt.lookAtTypeName){case d.VRMSchema.FirstPersonLookAtTypeName.Bone:return $===void 0||et===void 0||st===void 0||lt===void 0?null:new b.VRMLookAtBoneApplyer(it,this._importCurveMapperBone($),this._importCurveMapperBone(et),this._importCurveMapperBone(st),this._importCurveMapperBone(lt));case d.VRMSchema.FirstPersonLookAtTypeName.BlendShape:return et===void 0||st===void 0||lt===void 0?null:new g.VRMLookAtBlendShapeApplyer(at,this._importCurveMapperBlendShape(et),this._importCurveMapperBlendShape(st),this._importCurveMapperBlendShape(lt));default:return null}},nt.prototype._importCurveMapperBone=function(rt){return new h.VRMCurveMapper(typeof rt.xRange=="number"?j*rt.xRange:void 0,typeof rt.yRange=="number"?j*rt.yRange:void 0,rt.curve)},nt.prototype._importCurveMapperBlendShape=function(rt){return new h.VRMCurveMapper(typeof rt.xRange=="number"?j*rt.xRange:void 0,rt.yRange,rt.curve)},nt}();c.VRMLookAtImporter=_e},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.VRMLookAtApplyer=void 0;var d=function(){};c.VRMLookAtApplyer=d},function(s,c,f){var d=this&&this.__awaiter||function(rt,at,it,$){return new(it||(it=Promise))(function(et,st){function lt(ht){try{ut($.next(ht))}catch(pt){st(pt)}}function ct(ht){try{ut($.throw(ht))}catch(pt){st(pt)}}function ut(ht){var pt;ht.done?et(ht.value):(pt=ht.value,pt instanceof it?pt:new it(function(mt){mt(pt)})).then(lt,ct)}ut(($=$.apply(rt,at||[])).next())})},h=this&&this.__generator||function(rt,at){var it,$,et,st,lt={label:0,sent:function(){if(1&et[0])throw et[1];return et[1]},trys:[],ops:[]};return st={next:ct(0),throw:ct(1),return:ct(2)},typeof Symbol=="function"&&(st[Symbol.iterator]=function(){return this}),st;function ct(ut){return function(ht){return function(pt){if(it)throw new TypeError("Generator is already executing.");for(;lt;)try{if(it=1,$&&(et=2&pt[0]?$.return:pt[0]?$.throw||((et=$.return)&&et.call($),0):$.next)&&!(et=et.call($,pt[1])).done)return et;switch($=0,et&&(pt=[2&pt[0],et.value]),pt[0]){case 0:case 1:et=pt;break;case 4:return lt.label++,{value:pt[1],done:!1};case 5:lt.label++,$=pt[1],pt=[0];continue;case 7:pt=lt.ops.pop(),lt.trys.pop();continue;default:if(et=lt.trys,!((et=et.length>0&&et[et.length-1])||pt[0]!==6&&pt[0]!==2)){lt=0;continue}if(pt[0]===3&&(!et||pt[1]>et[0]&&pt[1]<et[3])){lt.label=pt[1];break}if(pt[0]===6&&lt.label<et[1]){lt.label=et[1],et=pt;break}if(et&&lt.label<et[2]){lt.label=et[2],lt.ops.push(pt);break}et[2]&&lt.ops.pop(),lt.trys.pop();continue}pt=at.call(rt,lt)}catch(mt){pt=[6,mt],$=0}finally{it=et=0}if(5&pt[0])throw pt[1];return{value:pt[0]?pt[1]:void 0,done:!0}}([ut,ht])}}};Object.defineProperty(c,"__esModule",{value:!0}),c.VRMSpringBoneImporter=void 0;var g=f(0),b=f(27),tt=f(29),j=new g.Vector3,_e=new g.MeshBasicMaterial({visible:!1}),nt=function(){function rt(){}return rt.prototype.import=function(at){var it;return d(this,void 0,Promise,function(){var $,et,st,lt;return h(this,function(ct){switch(ct.label){case 0:return($=(it=at.parser.json.extensions)===null||it===void 0?void 0:it.VRM)&&(et=$.secondaryAnimation)?[4,this._importColliderMeshGroups(at,et)]:[2,null];case 1:return st=ct.sent(),[4,this._importSpringBoneGroupList(at,et,st)];case 2:return lt=ct.sent(),[2,new tt.VRMSpringBoneManager(st,lt)]}})})},rt.prototype._createSpringBone=function(at,it){return it===void 0&&(it={}),new b.VRMSpringBone(at,it)},rt.prototype._importSpringBoneGroupList=function(at,it,$){return d(this,void 0,Promise,function(){var et,st,lt=this;return h(this,function(ct){switch(ct.label){case 0:return et=it.boneGroups||[],st=[],[4,Promise.all(et.map(function(ut){return d(lt,void 0,void 0,function(){var ht,pt,mt,bt,St,Ft,It,Ct=this;return h(this,function(Pt){switch(Pt.label){case 0:return ut.stiffiness===void 0||ut.gravityDir===void 0||ut.gravityDir.x===void 0||ut.gravityDir.y===void 0||ut.gravityDir.z===void 0||ut.gravityPower===void 0||ut.dragForce===void 0||ut.hitRadius===void 0||ut.colliderGroups===void 0||ut.bones===void 0||ut.center===void 0?[2]:(ht=ut.stiffiness,pt=new g.Vector3(ut.gravityDir.x,ut.gravityDir.y,-ut.gravityDir.z),mt=ut.gravityPower,bt=ut.dragForce,St=ut.hitRadius,Ft=[],ut.colliderGroups.forEach(function(Nt){Ft.push.apply(Ft,$[Nt].colliders)}),It=[],[4,Promise.all(ut.bones.map(function(Nt){return d(Ct,void 0,void 0,function(){var zt,Xt,en,rn=this;return h(this,function(Gt){switch(Gt.label){case 0:return[4,at.parser.getDependency("node",Nt)];case 1:return zt=Gt.sent(),ut.center===-1?[3,3]:[4,at.parser.getDependency("node",ut.center)];case 2:return en=Gt.sent(),[3,4];case 3:en=null,Gt.label=4;case 4:return Xt=en,zt?(zt.traverse(function(qt){var sn=rn._createSpringBone(qt,{radius:St,stiffnessForce:ht,gravityDir:pt,gravityPower:mt,dragForce:bt,colliders:Ft,center:Xt});It.push(sn)}),[2]):[2]}})})}))]);case 1:return Pt.sent(),st.push(It),[2]}})})}))];case 1:return ct.sent(),[2,st]}})})},rt.prototype._importColliderMeshGroups=function(at,it){return d(this,void 0,Promise,function(){var $,et,st=this;return h(this,function(lt){return($=it.colliderGroups)===void 0?[2,[]]:(et=[],$.forEach(function(ct){return d(st,void 0,void 0,function(){var ut,ht,pt,mt=this;return h(this,function(bt){switch(bt.label){case 0:return ct.node===void 0||ct.colliders===void 0?[2]:[4,at.parser.getDependency("node",ct.node)];case 1:return ut=bt.sent(),ht=[],ct.colliders.forEach(function(St){if(St.offset!==void 0&&St.offset.x!==void 0&&St.offset.y!==void 0&&St.offset.z!==void 0&&St.radius!==void 0){var Ft=j.set(St.offset.x,St.offset.y,-St.offset.z),It=mt._createColliderMesh(St.radius,Ft);ut.add(It),ht.push(It)}}),pt={node:ct.node,colliders:ht},et.push(pt),[2]}})})}),[2,et])})})},rt.prototype._createColliderMesh=function(at,it){var $=new g.Mesh(new g.SphereBufferGeometry(at,8,4),_e);return $.position.copy(it),$.name="vrmColliderSphere",$.geometry.computeBoundingSphere(),$},rt}();c.VRMSpringBoneImporter=nt},function(s,c,f){var d=this&&this.__createBinding||(Object.create?function(g,b,tt,j){j===void 0&&(j=tt),Object.defineProperty(g,j,{enumerable:!0,get:function(){return b[tt]}})}:function(g,b,tt,j){j===void 0&&(j=tt),g[j]=b[tt]}),h=this&&this.__exportStar||function(g,b){for(var tt in g)tt==="default"||Object.prototype.hasOwnProperty.call(b,tt)||d(b,g,tt)};Object.defineProperty(c,"__esModule",{value:!0}),h(f(27),c),h(f(57),c),h(f(9),c),h(f(29),c),h(f(58),c)},function(s,c,f){var d=this&&this.__createBinding||(Object.create?function(g,b,tt,j){j===void 0&&(j=tt),Object.defineProperty(g,j,{enumerable:!0,get:function(){return b[tt]}})}:function(g,b,tt,j){j===void 0&&(j=tt),g[j]=b[tt]}),h=this&&this.__exportStar||function(g,b){for(var tt in g)tt==="default"||Object.prototype.hasOwnProperty.call(b,tt)||d(b,g,tt)};Object.defineProperty(c,"__esModule",{value:!0}),h(f(12),c),h(f(35),c),h(f(13),c)},function(s,c,f){var d,h=this&&this.__extends||(d=function(at,it){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,et){$.__proto__=et}||function($,et){for(var st in et)Object.prototype.hasOwnProperty.call(et,st)&&($[st]=et[st])})(at,it)},function(at,it){function $(){this.constructor=at}d(at,it),at.prototype=it===null?Object.create(it):($.prototype=it.prototype,new $)});Object.defineProperty(c,"__esModule",{value:!0}),c.VRMBlendShapeGroup=void 0;var g,b=f(0);(function(at){at[at.NUMBER=0]="NUMBER",at[at.VECTOR2=1]="VECTOR2",at[at.VECTOR3=2]="VECTOR3",at[at.VECTOR4=3]="VECTOR4",at[at.COLOR=4]="COLOR"})(g||(g={}));var tt=new b.Vector2,j=new b.Vector3,_e=new b.Vector4,nt=new b.Color,rt=function(at){function it($){var et=at.call(this)||this;return et.weight=0,et.isBinary=!1,et._binds=[],et._materialValues=[],et.name="BlendShapeController_"+$,et.type="BlendShapeController",et.visible=!1,et}return h(it,at),it.prototype.addBind=function($){var et=$.weight/100;this._binds.push({meshes:$.meshes,morphTargetIndex:$.morphTargetIndex,weight:et})},it.prototype.addMaterialValue=function($){var et,st,lt,ct,ut=$.material,ht=$.propertyName,pt=ut[ht];pt&&((pt=$.defaultValue||pt).isVector2?(et=g.VECTOR2,st=pt.clone(),ct=(lt=new b.Vector2().fromArray($.targetValue)).clone().sub(st)):pt.isVector3?(et=g.VECTOR3,st=pt.clone(),ct=(lt=new b.Vector3().fromArray($.targetValue)).clone().sub(st)):pt.isVector4?(et=g.VECTOR4,st=pt.clone(),ct=(lt=new b.Vector4().fromArray([$.targetValue[2],$.targetValue[3],$.targetValue[0],$.targetValue[1]])).clone().sub(st)):pt.isColor?(et=g.COLOR,st=pt.clone(),ct=(lt=new b.Color().fromArray($.targetValue)).clone().sub(st)):(et=g.NUMBER,st=pt,ct=(lt=$.targetValue[0])-st),this._materialValues.push({material:ut,propertyName:ht,defaultValue:st,targetValue:lt,deltaValue:ct,type:et}))},it.prototype.applyWeight=function(){var $=this.isBinary?this.weight<.5?0:1:this.weight;this._binds.forEach(function(et){et.meshes.forEach(function(st){st.morphTargetInfluences&&(st.morphTargetInfluences[et.morphTargetIndex]+=$*et.weight)})}),this._materialValues.forEach(function(et){if(et.material[et.propertyName]!==void 0){if(et.type===g.NUMBER){var st=et.deltaValue;et.material[et.propertyName]+=st*$}else et.type===g.VECTOR2?(st=et.deltaValue,et.material[et.propertyName].add(tt.copy(st).multiplyScalar($))):et.type===g.VECTOR3?(st=et.deltaValue,et.material[et.propertyName].add(j.copy(st).multiplyScalar($))):et.type===g.VECTOR4?(st=et.deltaValue,et.material[et.propertyName].add(_e.copy(st).multiplyScalar($))):et.type===g.COLOR&&(st=et.deltaValue,et.material[et.propertyName].add(nt.copy(st).multiplyScalar($)));typeof et.material.shouldApplyUniforms=="boolean"&&(et.material.shouldApplyUniforms=!0)}})},it.prototype.clearAppliedWeight=function(){this._binds.forEach(function($){$.meshes.forEach(function(et){et.morphTargetInfluences&&(et.morphTargetInfluences[$.morphTargetIndex]=0)})}),this._materialValues.forEach(function($){if($.material[$.propertyName]!==void 0){if($.type===g.NUMBER){var et=$.defaultValue;$.material[$.propertyName]=et}else($.type===g.VECTOR2||$.type===g.VECTOR3||$.type===g.VECTOR4||$.type===g.COLOR)&&(et=$.defaultValue,$.material[$.propertyName].copy(et));typeof $.material.shouldApplyUniforms=="boolean"&&($.material.shouldApplyUniforms=!0)}})},it}(b.Object3D);c.VRMBlendShapeGroup=rt},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.VRMBlendShapeProxy=void 0;var d=f(2),h=function(){function g(){this._blendShapeGroups={},this._blendShapePresetMap={},this._unknownGroupNames=[]}return Object.defineProperty(g.prototype,"expressions",{get:function(){return Object.keys(this._blendShapeGroups)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"blendShapePresetMap",{get:function(){return this._blendShapePresetMap},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"unknownGroupNames",{get:function(){return this._unknownGroupNames},enumerable:!1,configurable:!0}),g.prototype.getBlendShapeGroup=function(b){var tt=this._blendShapePresetMap[b],j=tt?this._blendShapeGroups[tt]:this._blendShapeGroups[b];if(j)return j;console.warn("no blend shape found by "+b)},g.prototype.registerBlendShapeGroup=function(b,tt,j){this._blendShapeGroups[b]=j,tt?this._blendShapePresetMap[tt]=b:this._unknownGroupNames.push(b)},g.prototype.getValue=function(b){var tt,j=this.getBlendShapeGroup(b);return(tt=j==null?void 0:j.weight)!==null&&tt!==void 0?tt:null},g.prototype.setValue=function(b,tt){var j=this.getBlendShapeGroup(b);j&&(j.weight=d.saturate(tt))},g.prototype.getBlendShapeTrackName=function(b){var tt=this.getBlendShapeGroup(b);return tt?tt.name+".weight":null},g.prototype.update=function(){var b=this;Object.keys(this._blendShapeGroups).forEach(function(tt){b._blendShapeGroups[tt].clearAppliedWeight()}),Object.keys(this._blendShapeGroups).forEach(function(tt){b._blendShapeGroups[tt].applyWeight()})},g}();c.VRMBlendShapeProxy=h},function(s,c,f){var d=this&&this.__createBinding||(Object.create?function(g,b,tt,j){j===void 0&&(j=tt),Object.defineProperty(g,j,{enumerable:!0,get:function(){return b[tt]}})}:function(g,b,tt,j){j===void 0&&(j=tt),g[j]=b[tt]}),h=this&&this.__exportStar||function(g,b){for(var tt in g)tt==="default"||Object.prototype.hasOwnProperty.call(b,tt)||d(b,g,tt)};Object.defineProperty(c,"__esModule",{value:!0}),h(f(15),c),h(f(40),c)},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.VRMFirstPerson=c.VRMRendererFirstPersonFlags=void 0;var d,h=f(0),g=f(2),b=Object.freeze(new h.Vector3(0,0,-1)),tt=new h.Quaternion;(function(nt){nt[nt.Auto=0]="Auto",nt[nt.Both=1]="Both",nt[nt.ThirdPersonOnly=2]="ThirdPersonOnly",nt[nt.FirstPersonOnly=3]="FirstPersonOnly"})(d||(d={}));var j=function(){function nt(rt,at){this.firstPersonFlag=nt._parseFirstPersonFlag(rt),this.mesh=at}return nt._parseFirstPersonFlag=function(rt){switch(rt){case"Both":return d.Both;case"ThirdPersonOnly":return d.ThirdPersonOnly;case"FirstPersonOnly":return d.FirstPersonOnly;default:return d.Auto}},nt}();c.VRMRendererFirstPersonFlags=j;var _e=function(){function nt(rt,at,it){this._meshAnnotations=[],this._firstPersonOnlyLayer=nt._DEFAULT_FIRSTPERSON_ONLY_LAYER,this._thirdPersonOnlyLayer=nt._DEFAULT_THIRDPERSON_ONLY_LAYER,this._initialized=!1,this._firstPersonBone=rt,this._firstPersonBoneOffset=at,this._meshAnnotations=it}return Object.defineProperty(nt.prototype,"firstPersonBone",{get:function(){return this._firstPersonBone},enumerable:!1,configurable:!0}),Object.defineProperty(nt.prototype,"meshAnnotations",{get:function(){return this._meshAnnotations},enumerable:!1,configurable:!0}),nt.prototype.getFirstPersonWorldDirection=function(rt){return rt.copy(b).applyQuaternion(g.getWorldQuaternionLite(this._firstPersonBone,tt))},Object.defineProperty(nt.prototype,"firstPersonOnlyLayer",{get:function(){return this._firstPersonOnlyLayer},enumerable:!1,configurable:!0}),Object.defineProperty(nt.prototype,"thirdPersonOnlyLayer",{get:function(){return this._thirdPersonOnlyLayer},enumerable:!1,configurable:!0}),nt.prototype.getFirstPersonBoneOffset=function(rt){return rt.copy(this._firstPersonBoneOffset)},nt.prototype.getFirstPersonWorldPosition=function(rt){var at=this._firstPersonBoneOffset,it=new h.Vector4(at.x,at.y,at.z,1);return it.applyMatrix4(this._firstPersonBone.matrixWorld),rt.set(it.x,it.y,it.z)},nt.prototype.setup=function(rt){var at=this,it=rt===void 0?{}:rt,$=it.firstPersonOnlyLayer,et=$===void 0?nt._DEFAULT_FIRSTPERSON_ONLY_LAYER:$,st=it.thirdPersonOnlyLayer,lt=st===void 0?nt._DEFAULT_THIRDPERSON_ONLY_LAYER:st;this._initialized||(this._initialized=!0,this._firstPersonOnlyLayer=et,this._thirdPersonOnlyLayer=lt,this._meshAnnotations.forEach(function(ct){ct.firstPersonFlag===d.FirstPersonOnly?(ct.mesh.layers.set(at._firstPersonOnlyLayer),ct.mesh.traverse(function(ut){return ut.layers.set(at._firstPersonOnlyLayer)})):ct.firstPersonFlag===d.ThirdPersonOnly?(ct.mesh.layers.set(at._thirdPersonOnlyLayer),ct.mesh.traverse(function(ut){return ut.layers.set(at._thirdPersonOnlyLayer)})):ct.firstPersonFlag===d.Auto&&at._createHeadlessModel(ct.mesh)}))},nt.prototype._excludeTriangles=function(rt,at,it,$){var et=0;if(at!=null&&at.length>0)for(var st=0;st<rt.length;st+=3){var lt=rt[st],ct=rt[st+1],ut=rt[st+2],ht=at[lt],pt=it[lt];if(!(ht[0]>0&&$.includes(pt[0]))&&!(ht[1]>0&&$.includes(pt[1])||ht[2]>0&&$.includes(pt[2])||ht[3]>0&&$.includes(pt[3]))){var mt=at[ct],bt=it[ct];if(!(mt[0]>0&&$.includes(bt[0])||mt[1]>0&&$.includes(bt[1])||mt[2]>0&&$.includes(bt[2])||mt[3]>0&&$.includes(bt[3]))){var St=at[ut],Ft=it[ut];St[0]>0&&$.includes(Ft[0])||St[1]>0&&$.includes(Ft[1])||St[2]>0&&$.includes(Ft[2])||St[3]>0&&$.includes(Ft[3])||(rt[et++]=lt,rt[et++]=ct,rt[et++]=ut)}}}return et},nt.prototype._createErasedMesh=function(rt,at){var it=new h.SkinnedMesh(rt.geometry.clone(),rt.material);it.name=rt.name+"(erase)",it.frustumCulled=rt.frustumCulled,it.layers.set(this._firstPersonOnlyLayer);for(var $=it.geometry,et=$.getAttribute("skinIndex").array,st=[],lt=0;lt<et.length;lt+=4)st.push([et[lt],et[lt+1],et[lt+2],et[lt+3]]);var ct=$.getAttribute("skinWeight").array,ut=[];for(lt=0;lt<ct.length;lt+=4)ut.push([ct[lt],ct[lt+1],ct[lt+2],ct[lt+3]]);var ht=$.getIndex();if(!ht)throw new Error("The geometry doesn't have an index buffer");var pt=Array.from(ht.array),mt=this._excludeTriangles(pt,ut,st,at),bt=[];for(lt=0;lt<mt;lt++)bt[lt]=pt[lt];return $.setIndex(bt),rt.onBeforeRender&&(it.onBeforeRender=rt.onBeforeRender),it.bind(new h.Skeleton(rt.skeleton.bones,rt.skeleton.boneInverses),new h.Matrix4),it},nt.prototype._createHeadlessModelForSkinnedMesh=function(rt,at){var it=this,$=[];if(at.skeleton.bones.forEach(function(st,lt){it._isEraseTarget(st)&&$.push(lt)}),!$.length)return at.layers.enable(this._thirdPersonOnlyLayer),void at.layers.enable(this._firstPersonOnlyLayer);at.layers.set(this._thirdPersonOnlyLayer);var et=this._createErasedMesh(at,$);rt.add(et)},nt.prototype._createHeadlessModel=function(rt){var at=this;if(rt.type==="Group")if(rt.layers.set(this._thirdPersonOnlyLayer),this._isEraseTarget(rt))rt.traverse(function(et){return et.layers.set(at._thirdPersonOnlyLayer)});else{var it=new h.Group;it.name="_headless_"+rt.name,it.layers.set(this._firstPersonOnlyLayer),rt.parent.add(it),rt.children.filter(function(et){return et.type==="SkinnedMesh"}).forEach(function(et){var st=et;at._createHeadlessModelForSkinnedMesh(it,st)})}else if(rt.type==="SkinnedMesh"){var $=rt;this._createHeadlessModelForSkinnedMesh(rt.parent,$)}else this._isEraseTarget(rt)&&(rt.layers.set(this._thirdPersonOnlyLayer),rt.traverse(function(et){return et.layers.set(at._thirdPersonOnlyLayer)}))},nt.prototype._isEraseTarget=function(rt){return rt.name===this._firstPersonBone.name||!!rt.parent&&this._isEraseTarget(rt.parent)},nt._DEFAULT_FIRSTPERSON_ONLY_LAYER=9,nt._DEFAULT_THIRDPERSON_ONLY_LAYER=10,nt}();c.VRMFirstPerson=_e},function(s,c,f){var d=this&&this.__awaiter||function(_e,nt,rt,at){return new(rt||(rt=Promise))(function(it,$){function et(ct){try{lt(at.next(ct))}catch(ut){$(ut)}}function st(ct){try{lt(at.throw(ct))}catch(ut){$(ut)}}function lt(ct){var ut;ct.done?it(ct.value):(ut=ct.value,ut instanceof rt?ut:new rt(function(ht){ht(ut)})).then(et,st)}lt((at=at.apply(_e,nt||[])).next())})},h=this&&this.__generator||function(_e,nt){var rt,at,it,$,et={label:0,sent:function(){if(1&it[0])throw it[1];return it[1]},trys:[],ops:[]};return $={next:st(0),throw:st(1),return:st(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function st(lt){return function(ct){return function(ut){if(rt)throw new TypeError("Generator is already executing.");for(;et;)try{if(rt=1,at&&(it=2&ut[0]?at.return:ut[0]?at.throw||((it=at.return)&&it.call(at),0):at.next)&&!(it=it.call(at,ut[1])).done)return it;switch(at=0,it&&(ut=[2&ut[0],it.value]),ut[0]){case 0:case 1:it=ut;break;case 4:return et.label++,{value:ut[1],done:!1};case 5:et.label++,at=ut[1],ut=[0];continue;case 7:ut=et.ops.pop(),et.trys.pop();continue;default:if(it=et.trys,!((it=it.length>0&&it[it.length-1])||ut[0]!==6&&ut[0]!==2)){et=0;continue}if(ut[0]===3&&(!it||ut[1]>it[0]&&ut[1]<it[3])){et.label=ut[1];break}if(ut[0]===6&&et.label<it[1]){et.label=it[1],it=ut;break}if(it&&et.label<it[2]){et.label=it[2],et.ops.push(ut);break}it[2]&&et.ops.pop(),et.trys.pop();continue}ut=nt.call(_e,et)}catch(ht){ut=[6,ht],at=0}finally{rt=it=0}if(5&ut[0])throw ut[1];return{value:ut[0]?ut[1]:void 0,done:!0}}([lt,ct])}}};Object.defineProperty(c,"__esModule",{value:!0}),c.VRMHumanoidImporter=void 0;var g=f(0),b=f(17),tt=f(18),j=function(){function _e(){}return _e.prototype.import=function(nt){var rt;return d(this,void 0,Promise,function(){var at,it,$,et,st=this;return h(this,function(lt){switch(lt.label){case 0:return(at=(rt=nt.parser.json.extensions)===null||rt===void 0?void 0:rt.VRM)&&(it=at.humanoid)?($=[],it.humanBones?[4,Promise.all(it.humanBones.map(function(ct){return d(st,void 0,void 0,function(){var ut;return h(this,function(ht){switch(ht.label){case 0:return ct.bone&&ct.node!=null?[4,nt.parser.getDependency("node",ct.node)]:[2];case 1:return ut=ht.sent(),$.push({name:ct.bone,bone:new b.VRMHumanBone(ut,{axisLength:ct.axisLength,center:ct.center&&new g.Vector3(ct.center.x,ct.center.y,ct.center.z),max:ct.max&&new g.Vector3(ct.max.x,ct.max.y,ct.max.z),min:ct.min&&new g.Vector3(ct.min.x,ct.min.y,ct.min.z),useDefaultValues:ct.useDefaultValues})}),[2]}})})}))]:[3,2]):[2,null];case 1:lt.sent(),lt.label=2;case 2:return et={armStretch:it.armStretch,legStretch:it.legStretch,upperArmTwist:it.upperArmTwist,lowerArmTwist:it.lowerArmTwist,upperLegTwist:it.upperLegTwist,lowerLegTwist:it.lowerLegTwist,feetSpacing:it.feetSpacing,hasTranslationDoF:it.hasTranslationDoF},[2,new tt.VRMHumanoid($,et)]}})})},_e}();c.VRMHumanoidImporter=j},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.VRMHumanBone=void 0;var d=function(h,g){this.node=h,this.humanLimit=g};c.VRMHumanBone=d},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.VRMHumanoid=void 0;var d=f(0),h=f(1),g=f(19),b=new d.Vector3,tt=new d.Quaternion,j=function(){function _e(nt,rt){this.restPose={},this.humanBones=this._createHumanBones(nt),this.humanDescription=rt,this.restPose=this.getPose()}return _e.prototype.getPose=function(){var nt=this,rt={};return Object.keys(this.humanBones).forEach(function(at){var it=nt.getBoneNode(at);if(it&&!rt[at]){b.set(0,0,0),tt.identity();var $=nt.restPose[at];$!=null&&$.position&&b.fromArray($.position).negate(),$!=null&&$.rotation&&g.quatInvertCompat(tt.fromArray($.rotation)),b.add(it.position),tt.premultiply(it.quaternion),rt[at]={position:b.toArray(),rotation:tt.toArray()}}},{}),rt},_e.prototype.setPose=function(nt){var rt=this;Object.keys(nt).forEach(function(at){var it=nt[at],$=rt.getBoneNode(at);if($){var et=rt.restPose[at];et&&(it.position&&($.position.fromArray(it.position),et.position&&$.position.add(b.fromArray(et.position))),it.rotation&&($.quaternion.fromArray(it.rotation),et.rotation&&$.quaternion.multiply(tt.fromArray(et.rotation))))}})},_e.prototype.resetPose=function(){this.setPose({})},_e.prototype.getBone=function(nt){return this.humanBones[nt][0]||void 0},_e.prototype.getBones=function(nt){return this.humanBones[nt]},_e.prototype.getBoneNode=function(nt){var rt,at;return(at=(rt=this.humanBones[nt][0])===null||rt===void 0?void 0:rt.node)!==null&&at!==void 0?at:null},_e.prototype.getBoneNodes=function(nt){return this.humanBones[nt].map(function(rt){return rt.node})},_e.prototype._createHumanBones=function(nt){var rt=Object.values(h.VRMSchema.HumanoidBoneName).reduce(function(at,it){return at[it]=[],at},{});return nt.forEach(function(at){rt[at.name].push(at.bone)}),rt},_e}();c.VRMHumanoid=j},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.quatInvertCompat=void 0,c.quatInvertCompat=function(d){return d.invert?d.invert():d.inverse(),d}},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.VRMCurveMapper=void 0;var d=function(){function h(g,b,tt){this.curve=[0,0,0,1,1,1,1,0],this.curveXRangeDegree=90,this.curveYRangeDegree=10,g!==void 0&&(this.curveXRangeDegree=g),b!==void 0&&(this.curveYRangeDegree=b),tt!==void 0&&(this.curve=tt)}return h.prototype.map=function(g){var b=Math.min(Math.max(g,0),this.curveXRangeDegree)/this.curveXRangeDegree;return this.curveYRangeDegree*function(tt,j){if(tt.length<8)throw new Error("evaluateCurve: Invalid curve detected! (Array length must be 8 at least)");if(tt.length%4!=0)throw new Error("evaluateCurve: Invalid curve detected! (Array length must be multiples of 4");var _e;for(_e=0;;_e++){if(tt.length<=4*_e)return tt[4*_e-3];if(j<=tt[4*_e])break}var nt=_e-1;if(nt<0)return tt[4*nt+5];var rt=tt[4*nt],at=(j-rt)/(tt[4*_e]-rt);return function(it,$,et,st,lt){var ct=lt*lt*lt,ut=lt*lt;return it+($-it)*(-2*ct+3*ut)+et*(ct-2*ut+lt)+st*(ct-ut)}(tt[4*nt+1],tt[4*_e+1],tt[4*nt+3],tt[4*_e+2],at)}(this.curve,b)},h}();c.VRMCurveMapper=d},function(s,c,f){var d,h=this&&this.__extends||(d=function(tt,j){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_e,nt){_e.__proto__=nt}||function(_e,nt){for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(_e[rt]=nt[rt])})(tt,j)},function(tt,j){function _e(){this.constructor=tt}d(tt,j),tt.prototype=j===null?Object.create(j):(_e.prototype=j.prototype,new _e)});Object.defineProperty(c,"__esModule",{value:!0}),c.VRMLookAtBlendShapeApplyer=void 0;var g=f(1),b=function(tt){function j(_e,nt,rt,at){var it=tt.call(this)||this;return it.type=g.VRMSchema.FirstPersonLookAtTypeName.BlendShape,it._curveHorizontal=nt,it._curveVerticalDown=rt,it._curveVerticalUp=at,it._blendShapeProxy=_e,it}return h(j,tt),j.prototype.name=function(){return g.VRMSchema.FirstPersonLookAtTypeName.BlendShape},j.prototype.lookAt=function(_e){var nt=_e.x,rt=_e.y;nt<0?(this._blendShapeProxy.setValue(g.VRMSchema.BlendShapePresetName.Lookup,0),this._blendShapeProxy.setValue(g.VRMSchema.BlendShapePresetName.Lookdown,this._curveVerticalDown.map(-nt))):(this._blendShapeProxy.setValue(g.VRMSchema.BlendShapePresetName.Lookdown,0),this._blendShapeProxy.setValue(g.VRMSchema.BlendShapePresetName.Lookup,this._curveVerticalUp.map(nt))),rt<0?(this._blendShapeProxy.setValue(g.VRMSchema.BlendShapePresetName.Lookleft,0),this._blendShapeProxy.setValue(g.VRMSchema.BlendShapePresetName.Lookright,this._curveHorizontal.map(-rt))):(this._blendShapeProxy.setValue(g.VRMSchema.BlendShapePresetName.Lookright,0),this._blendShapeProxy.setValue(g.VRMSchema.BlendShapePresetName.Lookleft,this._curveHorizontal.map(rt)))},j}(f(8).VRMLookAtApplyer);c.VRMLookAtBlendShapeApplyer=b},function(s,c,f){var d,h=this&&this.__extends||(d=function(rt,at){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,$){it.__proto__=$}||function(it,$){for(var et in $)Object.prototype.hasOwnProperty.call($,et)&&(it[et]=$[et])})(rt,at)},function(rt,at){function it(){this.constructor=rt}d(rt,at),rt.prototype=at===null?Object.create(at):(it.prototype=at.prototype,new it)});Object.defineProperty(c,"__esModule",{value:!0}),c.VRMLookAtBoneApplyer=void 0;var g=f(0),b=f(1),tt=f(8),j=f(3),_e=new g.Euler(0,0,0,j.VRMLookAtHead.EULER_ORDER),nt=function(rt){function at(it,$,et,st,lt){var ct=rt.call(this)||this;return ct.type=b.VRMSchema.FirstPersonLookAtTypeName.Bone,ct._curveHorizontalInner=$,ct._curveHorizontalOuter=et,ct._curveVerticalDown=st,ct._curveVerticalUp=lt,ct._leftEye=it.getBoneNode(b.VRMSchema.HumanoidBoneName.LeftEye),ct._rightEye=it.getBoneNode(b.VRMSchema.HumanoidBoneName.RightEye),ct}return h(at,rt),at.prototype.lookAt=function(it){var $=it.x,et=it.y;this._leftEye&&(_e.x=$<0?-this._curveVerticalDown.map(-$):this._curveVerticalUp.map($),_e.y=et<0?-this._curveHorizontalInner.map(-et):this._curveHorizontalOuter.map(et),this._leftEye.quaternion.setFromEuler(_e)),this._rightEye&&(_e.x=$<0?-this._curveVerticalDown.map(-$):this._curveVerticalUp.map($),_e.y=et<0?-this._curveHorizontalOuter.map(-et):this._curveHorizontalInner.map(et),this._rightEye.quaternion.setFromEuler(_e))},at}(tt.VRMLookAtApplyer);c.VRMLookAtBoneApplyer=nt},function(s,c,f){var d=this&&this.__createBinding||(Object.create?function(g,b,tt,j){j===void 0&&(j=tt),Object.defineProperty(g,j,{enumerable:!0,get:function(){return b[tt]}})}:function(g,b,tt,j){j===void 0&&(j=tt),g[j]=b[tt]}),h=this&&this.__exportStar||function(g,b){for(var tt in g)tt==="default"||Object.prototype.hasOwnProperty.call(b,tt)||d(b,g,tt)};Object.defineProperty(c,"__esModule",{value:!0}),h(f(24),c),h(f(44),c),h(f(25),c)},function(s,c,f){var d,h=this&&this.__extends||(d=function(st,lt){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ct,ut){ct.__proto__=ut}||function(ct,ut){for(var ht in ut)Object.prototype.hasOwnProperty.call(ut,ht)&&(ct[ht]=ut[ht])})(st,lt)},function(st,lt){function ct(){this.constructor=st}d(st,lt),st.prototype=lt===null?Object.create(lt):(ct.prototype=lt.prototype,new ct)});Object.defineProperty(c,"__esModule",{value:!0}),c.MToonMaterial=c.MToonMaterialRenderMode=c.MToonMaterialOutlineWidthMode=c.MToonMaterialOutlineColorMode=c.MToonMaterialDebugMode=c.MToonMaterialCullMode=void 0;var g,b,tt,j,_e,nt=f(0),rt=f(41),at=f(42),it=f(43),$=2*Math.PI;(function(st){st[st.Off=0]="Off",st[st.Front=1]="Front",st[st.Back=2]="Back"})(g=c.MToonMaterialCullMode||(c.MToonMaterialCullMode={})),function(st){st[st.None=0]="None",st[st.Normal=1]="Normal",st[st.LitShadeRate=2]="LitShadeRate",st[st.UV=3]="UV"}(b=c.MToonMaterialDebugMode||(c.MToonMaterialDebugMode={})),function(st){st[st.FixedColor=0]="FixedColor",st[st.MixedLighting=1]="MixedLighting"}(tt=c.MToonMaterialOutlineColorMode||(c.MToonMaterialOutlineColorMode={})),function(st){st[st.None=0]="None",st[st.WorldCoordinates=1]="WorldCoordinates",st[st.ScreenCoordinates=2]="ScreenCoordinates"}(j=c.MToonMaterialOutlineWidthMode||(c.MToonMaterialOutlineWidthMode={})),function(st){st[st.Opaque=0]="Opaque",st[st.Cutout=1]="Cutout",st[st.Transparent=2]="Transparent",st[st.TransparentWithZWrite=3]="TransparentWithZWrite"}(_e=c.MToonMaterialRenderMode||(c.MToonMaterialRenderMode={}));var et=function(st){function lt(ct){ct===void 0&&(ct={});var ut=st.call(this)||this;return ut.isMToonMaterial=!0,ut.cutoff=.5,ut.color=new nt.Vector4(1,1,1,1),ut.shadeColor=new nt.Vector4(.97,.81,.86,1),ut.map=null,ut.mainTex_ST=new nt.Vector4(0,0,1,1),ut.shadeTexture=null,ut.normalMap=null,ut.normalMapType=nt.TangentSpaceNormalMap,ut.normalScale=new nt.Vector2(1,1),ut.receiveShadowRate=1,ut.receiveShadowTexture=null,ut.shadingGradeRate=1,ut.shadingGradeTexture=null,ut.shadeShift=0,ut.shadeToony=.9,ut.lightColorAttenuation=0,ut.indirectLightIntensity=.1,ut.rimTexture=null,ut.rimColor=new nt.Vector4(0,0,0,1),ut.rimLightingMix=0,ut.rimFresnelPower=1,ut.rimLift=0,ut.sphereAdd=null,ut.emissionColor=new nt.Vector4(0,0,0,1),ut.emissiveMap=null,ut.outlineWidthTexture=null,ut.outlineWidth=.5,ut.outlineScaledMaxDistance=1,ut.outlineColor=new nt.Vector4(0,0,0,1),ut.outlineLightingMix=1,ut.uvAnimMaskTexture=null,ut.uvAnimScrollX=0,ut.uvAnimScrollY=0,ut.uvAnimRotation=0,ut.shouldApplyUniforms=!0,ut._debugMode=b.None,ut._blendMode=_e.Opaque,ut._outlineWidthMode=j.None,ut._outlineColorMode=tt.FixedColor,ut._cullMode=g.Back,ut._outlineCullMode=g.Front,ut._isOutline=!1,ut._uvAnimOffsetX=0,ut._uvAnimOffsetY=0,ut._uvAnimPhase=0,ut.encoding=ct.encoding||nt.LinearEncoding,ut.encoding!==nt.LinearEncoding&&ut.encoding!==nt.sRGBEncoding&&console.warn("The specified color encoding does not work properly with MToonMaterial. You might want to use THREE.sRGBEncoding instead."),["mToonVersion","shadeTexture_ST","bumpMap_ST","receiveShadowTexture_ST","shadingGradeTexture_ST","rimTexture_ST","sphereAdd_ST","emissionMap_ST","outlineWidthTexture_ST","uvAnimMaskTexture_ST","srcBlend","dstBlend"].forEach(function(ht){ct[ht]!==void 0&&delete ct[ht]}),ct.fog=!0,ct.lights=!0,ct.clipping=!0,ct.skinning=ct.skinning||!1,ct.morphTargets=ct.morphTargets||!1,ct.morphNormals=ct.morphNormals||!1,ct.uniforms=nt.UniformsUtils.merge([nt.UniformsLib.common,nt.UniformsLib.normalmap,nt.UniformsLib.emissivemap,nt.UniformsLib.fog,nt.UniformsLib.lights,{cutoff:{value:.5},color:{value:new nt.Color(1,1,1)},colorAlpha:{value:1},shadeColor:{value:new nt.Color(.97,.81,.86)},mainTex_ST:{value:new nt.Vector4(0,0,1,1)},shadeTexture:{value:null},receiveShadowRate:{value:1},receiveShadowTexture:{value:null},shadingGradeRate:{value:1},shadingGradeTexture:{value:null},shadeShift:{value:0},shadeToony:{value:.9},lightColorAttenuation:{value:0},indirectLightIntensity:{value:.1},rimTexture:{value:null},rimColor:{value:new nt.Color(0,0,0)},rimLightingMix:{value:0},rimFresnelPower:{value:1},rimLift:{value:0},sphereAdd:{value:null},emissionColor:{value:new nt.Color(0,0,0)},outlineWidthTexture:{value:null},outlineWidth:{value:.5},outlineScaledMaxDistance:{value:1},outlineColor:{value:new nt.Color(0,0,0)},outlineLightingMix:{value:1},uvAnimMaskTexture:{value:null},uvAnimOffsetX:{value:0},uvAnimOffsetY:{value:0},uvAnimTheta:{value:0}}]),ut.setValues(ct),ut._updateShaderCode(),ut._applyUniforms(),ut}return h(lt,st),Object.defineProperty(lt.prototype,"mainTex",{get:function(){return this.map},set:function(ct){this.map=ct},enumerable:!1,configurable:!0}),Object.defineProperty(lt.prototype,"bumpMap",{get:function(){return this.normalMap},set:function(ct){this.normalMap=ct},enumerable:!1,configurable:!0}),Object.defineProperty(lt.prototype,"bumpScale",{get:function(){return this.normalScale.x},set:function(ct){this.normalScale.set(ct,ct)},enumerable:!1,configurable:!0}),Object.defineProperty(lt.prototype,"emissionMap",{get:function(){return this.emissiveMap},set:function(ct){this.emissiveMap=ct},enumerable:!1,configurable:!0}),Object.defineProperty(lt.prototype,"blendMode",{get:function(){return this._blendMode},set:function(ct){this._blendMode=ct,this.depthWrite=this._blendMode!==_e.Transparent,this.transparent=this._blendMode===_e.Transparent||this._blendMode===_e.TransparentWithZWrite,this._updateShaderCode()},enumerable:!1,configurable:!0}),Object.defineProperty(lt.prototype,"debugMode",{get:function(){return this._debugMode},set:function(ct){this._debugMode=ct,this._updateShaderCode()},enumerable:!1,configurable:!0}),Object.defineProperty(lt.prototype,"outlineWidthMode",{get:function(){return this._outlineWidthMode},set:function(ct){this._outlineWidthMode=ct,this._updateShaderCode()},enumerable:!1,configurable:!0}),Object.defineProperty(lt.prototype,"outlineColorMode",{get:function(){return this._outlineColorMode},set:function(ct){this._outlineColorMode=ct,this._updateShaderCode()},enumerable:!1,configurable:!0}),Object.defineProperty(lt.prototype,"cullMode",{get:function(){return this._cullMode},set:function(ct){this._cullMode=ct,this._updateCullFace()},enumerable:!1,configurable:!0}),Object.defineProperty(lt.prototype,"outlineCullMode",{get:function(){return this._outlineCullMode},set:function(ct){this._outlineCullMode=ct,this._updateCullFace()},enumerable:!1,configurable:!0}),Object.defineProperty(lt.prototype,"zWrite",{get:function(){return this.depthWrite?1:0},set:function(ct){this.depthWrite=.5<=ct},enumerable:!1,configurable:!0}),Object.defineProperty(lt.prototype,"isOutline",{get:function(){return this._isOutline},set:function(ct){this._isOutline=ct,this._updateShaderCode(),this._updateCullFace()},enumerable:!1,configurable:!0}),lt.prototype.updateVRMMaterials=function(ct){this._uvAnimOffsetX=this._uvAnimOffsetX+ct*this.uvAnimScrollX,this._uvAnimOffsetY=this._uvAnimOffsetY-ct*this.uvAnimScrollY,this._uvAnimPhase=this._uvAnimPhase+ct*this.uvAnimRotation,this._applyUniforms()},lt.prototype.copy=function(ct){return st.prototype.copy.call(this,ct),this.cutoff=ct.cutoff,this.color.copy(ct.color),this.shadeColor.copy(ct.shadeColor),this.map=ct.map,this.mainTex_ST.copy(ct.mainTex_ST),this.shadeTexture=ct.shadeTexture,this.normalMap=ct.normalMap,this.normalMapType=ct.normalMapType,this.normalScale.copy(this.normalScale),this.receiveShadowRate=ct.receiveShadowRate,this.receiveShadowTexture=ct.receiveShadowTexture,this.shadingGradeRate=ct.shadingGradeRate,this.shadingGradeTexture=ct.shadingGradeTexture,this.shadeShift=ct.shadeShift,this.shadeToony=ct.shadeToony,this.lightColorAttenuation=ct.lightColorAttenuation,this.indirectLightIntensity=ct.indirectLightIntensity,this.rimTexture=ct.rimTexture,this.rimColor.copy(ct.rimColor),this.rimLightingMix=ct.rimLightingMix,this.rimFresnelPower=ct.rimFresnelPower,this.rimLift=ct.rimLift,this.sphereAdd=ct.sphereAdd,this.emissionColor.copy(ct.emissionColor),this.emissiveMap=ct.emissiveMap,this.outlineWidthTexture=ct.outlineWidthTexture,this.outlineWidth=ct.outlineWidth,this.outlineScaledMaxDistance=ct.outlineScaledMaxDistance,this.outlineColor.copy(ct.outlineColor),this.outlineLightingMix=ct.outlineLightingMix,this.uvAnimMaskTexture=ct.uvAnimMaskTexture,this.uvAnimScrollX=ct.uvAnimScrollX,this.uvAnimScrollY=ct.uvAnimScrollY,this.uvAnimRotation=ct.uvAnimRotation,this.debugMode=ct.debugMode,this.blendMode=ct.blendMode,this.outlineWidthMode=ct.outlineWidthMode,this.outlineColorMode=ct.outlineColorMode,this.cullMode=ct.cullMode,this.outlineCullMode=ct.outlineCullMode,this.isOutline=ct.isOutline,this},lt.prototype._applyUniforms=function(){this.uniforms.uvAnimOffsetX.value=this._uvAnimOffsetX,this.uniforms.uvAnimOffsetY.value=this._uvAnimOffsetY,this.uniforms.uvAnimTheta.value=$*this._uvAnimPhase,this.shouldApplyUniforms&&(this.shouldApplyUniforms=!1,this.uniforms.cutoff.value=this.cutoff,this.uniforms.color.value.setRGB(this.color.x,this.color.y,this.color.z),this.uniforms.colorAlpha.value=this.color.w,this.uniforms.shadeColor.value.setRGB(this.shadeColor.x,this.shadeColor.y,this.shadeColor.z),this.uniforms.map.value=this.map,this.uniforms.mainTex_ST.value.copy(this.mainTex_ST),this.uniforms.shadeTexture.value=this.shadeTexture,this.uniforms.normalMap.value=this.normalMap,this.uniforms.normalScale.value.copy(this.normalScale),this.uniforms.receiveShadowRate.value=this.receiveShadowRate,this.uniforms.receiveShadowTexture.value=this.receiveShadowTexture,this.uniforms.shadingGradeRate.value=this.shadingGradeRate,this.uniforms.shadingGradeTexture.value=this.shadingGradeTexture,this.uniforms.shadeShift.value=this.shadeShift,this.uniforms.shadeToony.value=this.shadeToony,this.uniforms.lightColorAttenuation.value=this.lightColorAttenuation,this.uniforms.indirectLightIntensity.value=this.indirectLightIntensity,this.uniforms.rimTexture.value=this.rimTexture,this.uniforms.rimColor.value.setRGB(this.rimColor.x,this.rimColor.y,this.rimColor.z),this.uniforms.rimLightingMix.value=this.rimLightingMix,this.uniforms.rimFresnelPower.value=this.rimFresnelPower,this.uniforms.rimLift.value=this.rimLift,this.uniforms.sphereAdd.value=this.sphereAdd,this.uniforms.emissionColor.value.setRGB(this.emissionColor.x,this.emissionColor.y,this.emissionColor.z),this.uniforms.emissiveMap.value=this.emissiveMap,this.uniforms.outlineWidthTexture.value=this.outlineWidthTexture,this.uniforms.outlineWidth.value=this.outlineWidth,this.uniforms.outlineScaledMaxDistance.value=this.outlineScaledMaxDistance,this.uniforms.outlineColor.value.setRGB(this.outlineColor.x,this.outlineColor.y,this.outlineColor.z),this.uniforms.outlineLightingMix.value=this.outlineLightingMix,this.uniforms.uvAnimMaskTexture.value=this.uvAnimMaskTexture,this.encoding===nt.sRGBEncoding&&(this.uniforms.color.value.convertSRGBToLinear(),this.uniforms.shadeColor.value.convertSRGBToLinear(),this.uniforms.rimColor.value.convertSRGBToLinear(),this.uniforms.emissionColor.value.convertSRGBToLinear(),this.uniforms.outlineColor.value.convertSRGBToLinear()),this._updateCullFace())},lt.prototype._updateShaderCode=function(){this.defines={OUTLINE:this._isOutline,BLENDMODE_OPAQUE:this._blendMode===_e.Opaque,BLENDMODE_CUTOUT:this._blendMode===_e.Cutout,BLENDMODE_TRANSPARENT:this._blendMode===_e.Transparent||this._blendMode===_e.TransparentWithZWrite,USE_SHADETEXTURE:this.shadeTexture!==null,USE_RECEIVESHADOWTEXTURE:this.receiveShadowTexture!==null,USE_SHADINGGRADETEXTURE:this.shadingGradeTexture!==null,USE_RIMTEXTURE:this.rimTexture!==null,USE_SPHEREADD:this.sphereAdd!==null,USE_OUTLINEWIDTHTEXTURE:this.outlineWidthTexture!==null,USE_UVANIMMASKTEXTURE:this.uvAnimMaskTexture!==null,DEBUG_NORMAL:this._debugMode===b.Normal,DEBUG_LITSHADERATE:this._debugMode===b.LitShadeRate,DEBUG_UV:this._debugMode===b.UV,OUTLINE_WIDTH_WORLD:this._outlineWidthMode===j.WorldCoordinates,OUTLINE_WIDTH_SCREEN:this._outlineWidthMode===j.ScreenCoordinates,OUTLINE_COLOR_FIXED:this._outlineColorMode===tt.FixedColor,OUTLINE_COLOR_MIXED:this._outlineColorMode===tt.MixedLighting};var ct=(this.shadeTexture!==null?rt.getTexelDecodingFunction("shadeTextureTexelToLinear",this.shadeTexture.encoding)+`
`:"")+(this.sphereAdd!==null?rt.getTexelDecodingFunction("sphereAddTexelToLinear",this.sphereAdd.encoding)+`
`:"")+(this.rimTexture!==null?rt.getTexelDecodingFunction("rimTextureTexelToLinear",this.rimTexture.encoding)+`
`:"");this.vertexShader=at.default,this.fragmentShader=ct+it.default,this.needsUpdate=!0},lt.prototype._updateCullFace=function(){this.isOutline?this.outlineCullMode===g.Off?this.side=nt.DoubleSide:this.outlineCullMode===g.Front?this.side=nt.BackSide:this.outlineCullMode===g.Back&&(this.side=nt.FrontSide):this.cullMode===g.Off?this.side=nt.DoubleSide:this.cullMode===g.Front?this.side=nt.BackSide:this.cullMode===g.Back&&(this.side=nt.FrontSide)},lt}(nt.ShaderMaterial);c.MToonMaterial=et},function(s,c,f){var d,h=this&&this.__extends||(d=function(nt,rt){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,it){at.__proto__=it}||function(at,it){for(var $ in it)Object.prototype.hasOwnProperty.call(it,$)&&(at[$]=it[$])})(nt,rt)},function(nt,rt){function at(){this.constructor=nt}d(nt,rt),nt.prototype=rt===null?Object.create(rt):(at.prototype=rt.prototype,new at)});Object.defineProperty(c,"__esModule",{value:!0}),c.VRMUnlitMaterial=c.VRMUnlitMaterialRenderType=void 0;var g,b=f(0),tt=f(45),j=f(46);(function(nt){nt[nt.Opaque=0]="Opaque",nt[nt.Cutout=1]="Cutout",nt[nt.Transparent=2]="Transparent",nt[nt.TransparentWithZWrite=3]="TransparentWithZWrite"})(g=c.VRMUnlitMaterialRenderType||(c.VRMUnlitMaterialRenderType={}));var _e=function(nt){function rt(at){var it=nt.call(this)||this;return it.isVRMUnlitMaterial=!0,it.cutoff=.5,it.map=null,it.mainTex_ST=new b.Vector4(0,0,1,1),it._renderType=g.Opaque,it.shouldApplyUniforms=!0,at===void 0&&(at={}),at.fog=!0,at.clipping=!0,at.skinning=at.skinning||!1,at.morphTargets=at.morphTargets||!1,at.morphNormals=at.morphNormals||!1,at.uniforms=b.UniformsUtils.merge([b.UniformsLib.common,b.UniformsLib.fog,{cutoff:{value:.5},mainTex_ST:{value:new b.Vector4(0,0,1,1)}}]),it.setValues(at),it._updateShaderCode(),it._applyUniforms(),it}return h(rt,nt),Object.defineProperty(rt.prototype,"mainTex",{get:function(){return this.map},set:function(at){this.map=at},enumerable:!1,configurable:!0}),Object.defineProperty(rt.prototype,"renderType",{get:function(){return this._renderType},set:function(at){this._renderType=at,this.depthWrite=this._renderType!==g.Transparent,this.transparent=this._renderType===g.Transparent||this._renderType===g.TransparentWithZWrite,this._updateShaderCode()},enumerable:!1,configurable:!0}),rt.prototype.updateVRMMaterials=function(at){this._applyUniforms()},rt.prototype.copy=function(at){return nt.prototype.copy.call(this,at),this.cutoff=at.cutoff,this.map=at.map,this.mainTex_ST.copy(at.mainTex_ST),this.renderType=at.renderType,this},rt.prototype._applyUniforms=function(){this.shouldApplyUniforms&&(this.shouldApplyUniforms=!1,this.uniforms.cutoff.value=this.cutoff,this.uniforms.map.value=this.map,this.uniforms.mainTex_ST.value.copy(this.mainTex_ST))},rt.prototype._updateShaderCode=function(){this.defines={RENDERTYPE_OPAQUE:this._renderType===g.Opaque,RENDERTYPE_CUTOUT:this._renderType===g.Cutout,RENDERTYPE_TRANSPARENT:this._renderType===g.Transparent||this._renderType===g.TransparentWithZWrite},this.vertexShader=tt.default,this.fragmentShader=j.default,this.needsUpdate=!0},rt}(b.ShaderMaterial);c.VRMUnlitMaterial=_e},function(s,c,f){var d=this&&this.__awaiter||function(b,tt,j,_e){return new(j||(j=Promise))(function(nt,rt){function at(et){try{$(_e.next(et))}catch(st){rt(st)}}function it(et){try{$(_e.throw(et))}catch(st){rt(st)}}function $(et){var st;et.done?nt(et.value):(st=et.value,st instanceof j?st:new j(function(lt){lt(st)})).then(at,it)}$((_e=_e.apply(b,tt||[])).next())})},h=this&&this.__generator||function(b,tt){var j,_e,nt,rt,at={label:0,sent:function(){if(1&nt[0])throw nt[1];return nt[1]},trys:[],ops:[]};return rt={next:it(0),throw:it(1),return:it(2)},typeof Symbol=="function"&&(rt[Symbol.iterator]=function(){return this}),rt;function it($){return function(et){return function(st){if(j)throw new TypeError("Generator is already executing.");for(;at;)try{if(j=1,_e&&(nt=2&st[0]?_e.return:st[0]?_e.throw||((nt=_e.return)&&nt.call(_e),0):_e.next)&&!(nt=nt.call(_e,st[1])).done)return nt;switch(_e=0,nt&&(st=[2&st[0],nt.value]),st[0]){case 0:case 1:nt=st;break;case 4:return at.label++,{value:st[1],done:!1};case 5:at.label++,_e=st[1],st=[0];continue;case 7:st=at.ops.pop(),at.trys.pop();continue;default:if(nt=at.trys,!((nt=nt.length>0&&nt[nt.length-1])||st[0]!==6&&st[0]!==2)){at=0;continue}if(st[0]===3&&(!nt||st[1]>nt[0]&&st[1]<nt[3])){at.label=st[1];break}if(st[0]===6&&at.label<nt[1]){at.label=nt[1],nt=st;break}if(nt&&at.label<nt[2]){at.label=nt[2],at.ops.push(st);break}nt[2]&&at.ops.pop(),at.trys.pop();continue}st=tt.call(b,at)}catch(lt){st=[6,lt],_e=0}finally{j=nt=0}if(5&st[0])throw st[1];return{value:st[0]?st[1]:void 0,done:!0}}([$,et])}}};Object.defineProperty(c,"__esModule",{value:!0}),c.VRMMetaImporter=void 0;var g=function(){function b(tt){var j;this.ignoreTexture=(j=tt==null?void 0:tt.ignoreTexture)!==null&&j!==void 0&&j}return b.prototype.import=function(tt){var j;return d(this,void 0,Promise,function(){var _e,nt,rt;return h(this,function(at){switch(at.label){case 0:return(_e=(j=tt.parser.json.extensions)===null||j===void 0?void 0:j.VRM)&&(nt=_e.meta)?this.ignoreTexture||nt.texture==null||nt.texture===-1?[3,2]:[4,tt.parser.getDependency("texture",nt.texture)]:[2,null];case 1:rt=at.sent(),at.label=2;case 2:return[2,{allowedUserName:nt.allowedUserName,author:nt.author,commercialUssageName:nt.commercialUssageName,contactInformation:nt.contactInformation,licenseName:nt.licenseName,otherLicenseUrl:nt.otherLicenseUrl,otherPermissionUrl:nt.otherPermissionUrl,reference:nt.reference,sexualUssageName:nt.sexualUssageName,texture:rt!=null?rt:void 0,title:nt.title,version:nt.version,violentUssageName:nt.violentUssageName}]}})})},b}();c.VRMMetaImporter=g},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.VRMSpringBone=void 0;var d=f(0),h=f(28),g=f(2),b=f(47),tt=Object.freeze(new d.Matrix4),j=Object.freeze(new d.Quaternion),_e=new d.Vector3,nt=new d.Vector3,rt=new d.Vector3,at=new d.Quaternion,it=new d.Matrix4,$=new d.Matrix4,et=function(){function st(lt,ct){var ut,ht,pt,mt,bt,St;if(ct===void 0&&(ct={}),this._currentTail=new d.Vector3,this._prevTail=new d.Vector3,this._nextTail=new d.Vector3,this._boneAxis=new d.Vector3,this._centerSpacePosition=new d.Vector3,this._center=null,this._parentWorldRotation=new d.Quaternion,this._initialLocalMatrix=new d.Matrix4,this._initialLocalRotation=new d.Quaternion,this._initialLocalChildPosition=new d.Vector3,this.bone=lt,this.bone.matrixAutoUpdate=!1,this.radius=(ut=ct.radius)!==null&&ut!==void 0?ut:.02,this.stiffnessForce=(ht=ct.stiffnessForce)!==null&&ht!==void 0?ht:1,this.gravityDir=ct.gravityDir?new d.Vector3().copy(ct.gravityDir):new d.Vector3().set(0,-1,0),this.gravityPower=(pt=ct.gravityPower)!==null&&pt!==void 0?pt:0,this.dragForce=(mt=ct.dragForce)!==null&&mt!==void 0?mt:.4,this.colliders=(bt=ct.colliders)!==null&&bt!==void 0?bt:[],this._centerSpacePosition.setFromMatrixPosition(this.bone.matrixWorld),this._initialLocalMatrix.copy(this.bone.matrix),this._initialLocalRotation.copy(this.bone.quaternion),this.bone.children.length===0)this._initialLocalChildPosition.copy(this.bone.position).normalize().multiplyScalar(.07);else{var Ft=this.bone.children[0];this._initialLocalChildPosition.copy(Ft.position)}this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)),this._prevTail.copy(this._currentTail),this._nextTail.copy(this._currentTail),this._boneAxis.copy(this._initialLocalChildPosition).normalize(),this._centerSpaceBoneLength=_e.copy(this._initialLocalChildPosition).applyMatrix4(this.bone.matrixWorld).sub(this._centerSpacePosition).length(),this.center=(St=ct.center)!==null&&St!==void 0?St:null}return Object.defineProperty(st.prototype,"center",{get:function(){return this._center},set:function(lt){var ct;this._getMatrixCenterToWorld(it),this._currentTail.applyMatrix4(it),this._prevTail.applyMatrix4(it),this._nextTail.applyMatrix4(it),!((ct=this._center)===null||ct===void 0)&&ct.userData.inverseCacheProxy&&(this._center.userData.inverseCacheProxy.revert(),delete this._center.userData.inverseCacheProxy),this._center=lt,this._center&&(this._center.userData.inverseCacheProxy||(this._center.userData.inverseCacheProxy=new b.Matrix4InverseCache(this._center.matrixWorld))),this._getMatrixWorldToCenter(it),this._currentTail.applyMatrix4(it),this._prevTail.applyMatrix4(it),this._nextTail.applyMatrix4(it),it.multiply(this.bone.matrixWorld),this._centerSpacePosition.setFromMatrixPosition(it),this._centerSpaceBoneLength=_e.copy(this._initialLocalChildPosition).applyMatrix4(it).sub(this._centerSpacePosition).length()},enumerable:!1,configurable:!0}),st.prototype.reset=function(){this.bone.quaternion.copy(this._initialLocalRotation),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._getParentMatrixWorld(),this.bone.matrix),this._centerSpacePosition.setFromMatrixPosition(this.bone.matrixWorld),this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)),this._prevTail.copy(this._currentTail),this._nextTail.copy(this._currentTail)},st.prototype.update=function(lt){if(!(lt<=0)){this.bone.matrixWorld.multiplyMatrices(this._getParentMatrixWorld(),this.bone.matrix),this.bone.parent?g.getWorldQuaternionLite(this.bone.parent,this._parentWorldRotation):this._parentWorldRotation.copy(j),this._getMatrixWorldToCenter(it),it.multiply(this.bone.matrixWorld),this._centerSpacePosition.setFromMatrixPosition(it),this._getMatrixWorldToCenter($),$.multiply(this._getParentMatrixWorld());var ct=this.stiffnessForce*lt,ut=nt.copy(this.gravityDir).multiplyScalar(this.gravityPower*lt);this._nextTail.copy(this._currentTail).add(_e.copy(this._currentTail).sub(this._prevTail).multiplyScalar(1-this.dragForce)).add(_e.copy(this._boneAxis).applyMatrix4(this._initialLocalMatrix).applyMatrix4($).sub(this._centerSpacePosition).normalize().multiplyScalar(ct)).add(ut),this._nextTail.sub(this._centerSpacePosition).normalize().multiplyScalar(this._centerSpaceBoneLength).add(this._centerSpacePosition),this._collision(this._nextTail),this._prevTail.copy(this._currentTail),this._currentTail.copy(this._nextTail);var ht=h.mat4InvertCompat(it.copy($.multiply(this._initialLocalMatrix))),pt=at.setFromUnitVectors(this._boneAxis,_e.copy(this._nextTail).applyMatrix4(ht).normalize());this.bone.quaternion.copy(this._initialLocalRotation).multiply(pt),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._getParentMatrixWorld(),this.bone.matrix)}},st.prototype._collision=function(lt){var ct=this;this.colliders.forEach(function(ut){ct._getMatrixWorldToCenter(it),it.multiply(ut.matrixWorld);var ht=_e.setFromMatrixPosition(it),pt=ut.geometry.boundingSphere.radius,mt=ct.radius+pt;if(lt.distanceToSquared(ht)<=mt*mt){var bt=nt.subVectors(lt,ht).normalize(),St=rt.addVectors(ht,bt.multiplyScalar(mt));lt.copy(St.sub(ct._centerSpacePosition).normalize().multiplyScalar(ct._centerSpaceBoneLength).add(ct._centerSpacePosition))}})},st.prototype._getMatrixCenterToWorld=function(lt){return this._center?lt.copy(this._center.matrixWorld):lt.identity(),lt},st.prototype._getMatrixWorldToCenter=function(lt){return this._center?lt.copy(this._center.userData.inverseCacheProxy.inverse):lt.identity(),lt},st.prototype._getParentMatrixWorld=function(){return this.bone.parent?this.bone.parent.matrixWorld:tt},st}();c.VRMSpringBone=et},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.mat4InvertCompat=void 0;var d=new(f(0)).Matrix4;c.mat4InvertCompat=function(h){return h.invert?h.invert():h.getInverse(d.copy(h)),h}},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.VRMSpringBoneManager=void 0;var d=function(){function h(g,b){this.colliderGroups=[],this.springBoneGroupList=[],this.colliderGroups=g,this.springBoneGroupList=b}return h.prototype.setCenter=function(g){this.springBoneGroupList.forEach(function(b){b.forEach(function(tt){tt.center=g})})},h.prototype.lateUpdate=function(g){this.springBoneGroupList.forEach(function(b){b.forEach(function(tt){tt.update(g)})})},h.prototype.reset=function(){this.springBoneGroupList.forEach(function(g){g.forEach(function(b){b.reset()})})},h}();c.VRMSpringBoneManager=d},function(s,c,f){var d,h=this&&this.__extends||(d=function(rt,at){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,$){it.__proto__=$}||function(it,$){for(var et in $)Object.prototype.hasOwnProperty.call($,et)&&(it[et]=$[et])})(rt,at)},function(rt,at){function it(){this.constructor=rt}d(rt,at),rt.prototype=at===null?Object.create(at):(it.prototype=at.prototype,new it)}),g=this&&this.__awaiter||function(rt,at,it,$){return new(it||(it=Promise))(function(et,st){function lt(ht){try{ut($.next(ht))}catch(pt){st(pt)}}function ct(ht){try{ut($.throw(ht))}catch(pt){st(pt)}}function ut(ht){var pt;ht.done?et(ht.value):(pt=ht.value,pt instanceof it?pt:new it(function(mt){mt(pt)})).then(lt,ct)}ut(($=$.apply(rt,at||[])).next())})},b=this&&this.__generator||function(rt,at){var it,$,et,st,lt={label:0,sent:function(){if(1&et[0])throw et[1];return et[1]},trys:[],ops:[]};return st={next:ct(0),throw:ct(1),return:ct(2)},typeof Symbol=="function"&&(st[Symbol.iterator]=function(){return this}),st;function ct(ut){return function(ht){return function(pt){if(it)throw new TypeError("Generator is already executing.");for(;lt;)try{if(it=1,$&&(et=2&pt[0]?$.return:pt[0]?$.throw||((et=$.return)&&et.call($),0):$.next)&&!(et=et.call($,pt[1])).done)return et;switch($=0,et&&(pt=[2&pt[0],et.value]),pt[0]){case 0:case 1:et=pt;break;case 4:return lt.label++,{value:pt[1],done:!1};case 5:lt.label++,$=pt[1],pt=[0];continue;case 7:pt=lt.ops.pop(),lt.trys.pop();continue;default:if(et=lt.trys,!((et=et.length>0&&et[et.length-1])||pt[0]!==6&&pt[0]!==2)){lt=0;continue}if(pt[0]===3&&(!et||pt[1]>et[0]&&pt[1]<et[3])){lt.label=pt[1];break}if(pt[0]===6&&lt.label<et[1]){lt.label=et[1],et=pt;break}if(et&&lt.label<et[2]){lt.label=et[2],lt.ops.push(pt);break}et[2]&&lt.ops.pop(),lt.trys.pop();continue}pt=at.call(rt,lt)}catch(mt){pt=[6,mt],$=0}finally{it=et=0}if(5&pt[0])throw pt[1];return{value:pt[0]?pt[1]:void 0,done:!0}}([ut,ht])}}};Object.defineProperty(c,"__esModule",{value:!0}),c.VRMSpringBoneImporterDebug=void 0;var tt=f(9),j=f(56),_e=f(31),nt=function(rt){function at(){return rt!==null&&rt.apply(this,arguments)||this}return h(at,rt),at.prototype.import=function(it){var $;return g(this,void 0,Promise,function(){var et,st,lt,ct;return b(this,function(ut){switch(ut.label){case 0:return(et=($=it.parser.json.extensions)===null||$===void 0?void 0:$.VRM)&&(st=et.secondaryAnimation)?[4,this._importColliderMeshGroups(it,st)]:[2,null];case 1:return lt=ut.sent(),[4,this._importSpringBoneGroupList(it,st,lt)];case 2:return ct=ut.sent(),[2,new j.VRMSpringBoneManagerDebug(lt,ct)]}})})},at.prototype._createSpringBone=function(it,$){return new _e.VRMSpringBoneDebug(it,$)},at}(tt.VRMSpringBoneImporter);c.VRMSpringBoneImporterDebug=nt},function(s,c,f){var d,h=this&&this.__extends||(d=function(nt,rt){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,it){at.__proto__=it}||function(at,it){for(var $ in it)Object.prototype.hasOwnProperty.call(it,$)&&(at[$]=it[$])})(nt,rt)},function(nt,rt){function at(){this.constructor=nt}d(nt,rt),nt.prototype=rt===null?Object.create(rt):(at.prototype=rt.prototype,new at)});Object.defineProperty(c,"__esModule",{value:!0}),c.VRMSpringBoneDebug=void 0;var g=f(0),b=f(10),tt=f(4),j=new g.Vector3,_e=function(nt){function rt(at,it){return nt.call(this,at,it)||this}return h(rt,nt),rt.prototype.getGizmo=function(){if(this._gizmo)return this._gizmo;var at=j.copy(this._nextTail).sub(this._centerSpacePosition),it=at.length();return this._gizmo=new g.ArrowHelper(at.normalize(),this._centerSpacePosition,it,16776960,this.radius,this.radius),this._gizmo.line.renderOrder=tt.VRM_GIZMO_RENDER_ORDER,this._gizmo.cone.renderOrder=tt.VRM_GIZMO_RENDER_ORDER,this._gizmo.line.material.depthTest=!1,this._gizmo.line.material.transparent=!0,this._gizmo.cone.material.depthTest=!1,this._gizmo.cone.material.transparent=!0,this._gizmo},rt.prototype.update=function(at){nt.prototype.update.call(this,at),this._updateGizmo()},rt.prototype._updateGizmo=function(){if(this._gizmo){var at=j.copy(this._currentTail).sub(this._centerSpacePosition),it=at.length();this._gizmo.setDirection(at.normalize()),this._gizmo.setLength(it,this.radius,this.radius),this._gizmo.position.copy(this._centerSpacePosition)}},rt}(b.VRMSpringBone);c.VRMSpringBoneDebug=_e},function(s,c,f){var d=this&&this.__createBinding||(Object.create?function(g,b,tt,j){j===void 0&&(j=tt),Object.defineProperty(g,j,{enumerable:!0,get:function(){return b[tt]}})}:function(g,b,tt,j){j===void 0&&(j=tt),g[j]=b[tt]}),h=this&&this.__exportStar||function(g,b){for(var tt in g)tt==="default"||Object.prototype.hasOwnProperty.call(b,tt)||d(b,g,tt)};Object.defineProperty(c,"__esModule",{value:!0}),h(f(33),c)},function(s,c,f){var d=this&&this.__createBinding||(Object.create?function(g,b,tt,j){j===void 0&&(j=tt),Object.defineProperty(g,j,{enumerable:!0,get:function(){return b[tt]}})}:function(g,b,tt,j){j===void 0&&(j=tt),g[j]=b[tt]}),h=this&&this.__exportStar||function(g,b){for(var tt in g)tt==="default"||Object.prototype.hasOwnProperty.call(b,tt)||d(b,g,tt)};Object.defineProperty(c,"__esModule",{value:!0}),h(f(5),c),h(f(6),c),h(f(48),c),h(f(11),c),h(f(51),c),h(f(14),c),h(f(59),c),h(f(63),c),h(f(10),c),h(f(1),c),h(f(23),c),h(f(64),c)},function(s,c,f){function d(g){Object.keys(g).forEach(function(b){var tt=g[b];tt!=null&&tt.isTexture&&tt.dispose()}),g.dispose()}function h(g){var b=g.geometry;b&&b.dispose();var tt=g.material;tt&&(Array.isArray(tt)?tt.forEach(function(j){return d(j)}):tt&&d(tt))}Object.defineProperty(c,"__esModule",{value:!0}),c.deepDispose=void 0,c.deepDispose=function(g){g.traverse(h)}},function(s,c,f){var d=this&&this.__awaiter||function(nt,rt,at,it){return new(at||(at=Promise))(function($,et){function st(ut){try{ct(it.next(ut))}catch(ht){et(ht)}}function lt(ut){try{ct(it.throw(ut))}catch(ht){et(ht)}}function ct(ut){var ht;ut.done?$(ut.value):(ht=ut.value,ht instanceof at?ht:new at(function(pt){pt(ht)})).then(st,lt)}ct((it=it.apply(nt,rt||[])).next())})},h=this&&this.__generator||function(nt,rt){var at,it,$,et,st={label:0,sent:function(){if(1&$[0])throw $[1];return $[1]},trys:[],ops:[]};return et={next:lt(0),throw:lt(1),return:lt(2)},typeof Symbol=="function"&&(et[Symbol.iterator]=function(){return this}),et;function lt(ct){return function(ut){return function(ht){if(at)throw new TypeError("Generator is already executing.");for(;st;)try{if(at=1,it&&($=2&ht[0]?it.return:ht[0]?it.throw||(($=it.return)&&$.call(it),0):it.next)&&!($=$.call(it,ht[1])).done)return $;switch(it=0,$&&(ht=[2&ht[0],$.value]),ht[0]){case 0:case 1:$=ht;break;case 4:return st.label++,{value:ht[1],done:!1};case 5:st.label++,it=ht[1],ht=[0];continue;case 7:ht=st.ops.pop(),st.trys.pop();continue;default:if($=st.trys,!(($=$.length>0&&$[$.length-1])||ht[0]!==6&&ht[0]!==2)){st=0;continue}if(ht[0]===3&&(!$||ht[1]>$[0]&&ht[1]<$[3])){st.label=ht[1];break}if(ht[0]===6&&st.label<$[1]){st.label=$[1],$=ht;break}if($&&st.label<$[2]){st.label=$[2],st.ops.push(ht);break}$[2]&&st.ops.pop(),st.trys.pop();continue}ht=rt.call(nt,st)}catch(pt){ht=[6,pt],it=0}finally{at=$=0}if(5&ht[0])throw ht[1];return{value:ht[0]?ht[1]:void 0,done:!0}}([ct,ut])}}};Object.defineProperty(c,"__esModule",{value:!0}),c.VRMBlendShapeImporter=void 0;var g=f(1),b=f(39),tt=f(12),j=f(13),_e=function(){function nt(){}return nt.prototype.import=function(rt){var at;return d(this,void 0,Promise,function(){var it,$,et,st,lt,ct=this;return h(this,function(ut){switch(ut.label){case 0:return(it=(at=rt.parser.json.extensions)===null||at===void 0?void 0:at.VRM)&&($=it.blendShapeMaster)?(et=new j.VRMBlendShapeProxy,(st=$.blendShapeGroups)?(lt={},[4,Promise.all(st.map(function(ht){return d(ct,void 0,void 0,function(){var pt,mt,bt,St,Ft=this;return h(this,function(It){return(pt=ht.name)===void 0?(console.warn("VRMBlendShapeImporter: One of blendShapeGroups has no name"),[2]):(ht.presetName&&ht.presetName!==g.VRMSchema.BlendShapePresetName.Unknown&&!lt[ht.presetName]&&(mt=ht.presetName,lt[ht.presetName]=pt),bt=new tt.VRMBlendShapeGroup(pt),rt.scene.add(bt),bt.isBinary=ht.isBinary||!1,ht.binds&&ht.binds.forEach(function(Ct){return d(Ft,void 0,void 0,function(){var Pt,Nt,zt;return h(this,function(Xt){switch(Xt.label){case 0:return Ct.mesh===void 0||Ct.index===void 0?[2]:[4,rt.parser.getDependency("mesh",Ct.mesh)];case 1:return Pt=Xt.sent(),Nt=Pt.type==="Group"?Pt.children:[Pt],zt=Ct.index,Nt.every(function(en){return Array.isArray(en.morphTargetInfluences)&&zt<en.morphTargetInfluences.length})?(bt.addBind({meshes:Nt,morphTargetIndex:zt,weight:Ct.weight||100}),[2]):(console.warn("VRMBlendShapeImporter: "+ht.name+" attempts to index "+zt+"th morph but not found."),[2])}})})}),(St=ht.materialValues)&&St.forEach(function(Ct){if(Ct.materialName!==void 0&&Ct.propertyName!==void 0&&Ct.targetValue!==void 0){var Pt=[];rt.scene.traverse(function(Nt){if(Nt.material){var zt=Nt.material;Array.isArray(zt)?Pt.push.apply(Pt,zt.filter(function(Xt){return Xt.name===Ct.materialName&&Pt.indexOf(Xt)===-1})):zt.name===Ct.materialName&&Pt.indexOf(zt)===-1&&Pt.push(zt)}}),Pt.forEach(function(Nt){bt.addMaterialValue({material:Nt,propertyName:b.renameMaterialProperty(Ct.propertyName),targetValue:Ct.targetValue})})}}),et.registerBlendShapeGroup(pt,mt,bt),[2])})})}))]):[2,et]):[2,null];case 1:return ut.sent(),[2,et]}})})},nt}();c.VRMBlendShapeImporter=_e},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0})},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.VRMSchema=void 0,function(d){(function(h){h.A="a",h.Angry="angry",h.Blink="blink",h.BlinkL="blink_l",h.BlinkR="blink_r",h.E="e",h.Fun="fun",h.I="i",h.Joy="joy",h.Lookdown="lookdown",h.Lookleft="lookleft",h.Lookright="lookright",h.Lookup="lookup",h.Neutral="neutral",h.O="o",h.Sorrow="sorrow",h.U="u",h.Unknown="unknown"})(d.BlendShapePresetName||(d.BlendShapePresetName={})),function(h){h.BlendShape="BlendShape",h.Bone="Bone"}(d.FirstPersonLookAtTypeName||(d.FirstPersonLookAtTypeName={})),function(h){h.Chest="chest",h.Head="head",h.Hips="hips",h.Jaw="jaw",h.LeftEye="leftEye",h.LeftFoot="leftFoot",h.LeftHand="leftHand",h.LeftIndexDistal="leftIndexDistal",h.LeftIndexIntermediate="leftIndexIntermediate",h.LeftIndexProximal="leftIndexProximal",h.LeftLittleDistal="leftLittleDistal",h.LeftLittleIntermediate="leftLittleIntermediate",h.LeftLittleProximal="leftLittleProximal",h.LeftLowerArm="leftLowerArm",h.LeftLowerLeg="leftLowerLeg",h.LeftMiddleDistal="leftMiddleDistal",h.LeftMiddleIntermediate="leftMiddleIntermediate",h.LeftMiddleProximal="leftMiddleProximal",h.LeftRingDistal="leftRingDistal",h.LeftRingIntermediate="leftRingIntermediate",h.LeftRingProximal="leftRingProximal",h.LeftShoulder="leftShoulder",h.LeftThumbDistal="leftThumbDistal",h.LeftThumbIntermediate="leftThumbIntermediate",h.LeftThumbProximal="leftThumbProximal",h.LeftToes="leftToes",h.LeftUpperArm="leftUpperArm",h.LeftUpperLeg="leftUpperLeg",h.Neck="neck",h.RightEye="rightEye",h.RightFoot="rightFoot",h.RightHand="rightHand",h.RightIndexDistal="rightIndexDistal",h.RightIndexIntermediate="rightIndexIntermediate",h.RightIndexProximal="rightIndexProximal",h.RightLittleDistal="rightLittleDistal",h.RightLittleIntermediate="rightLittleIntermediate",h.RightLittleProximal="rightLittleProximal",h.RightLowerArm="rightLowerArm",h.RightLowerLeg="rightLowerLeg",h.RightMiddleDistal="rightMiddleDistal",h.RightMiddleIntermediate="rightMiddleIntermediate",h.RightMiddleProximal="rightMiddleProximal",h.RightRingDistal="rightRingDistal",h.RightRingIntermediate="rightRingIntermediate",h.RightRingProximal="rightRingProximal",h.RightShoulder="rightShoulder",h.RightThumbDistal="rightThumbDistal",h.RightThumbIntermediate="rightThumbIntermediate",h.RightThumbProximal="rightThumbProximal",h.RightToes="rightToes",h.RightUpperArm="rightUpperArm",h.RightUpperLeg="rightUpperLeg",h.Spine="spine",h.UpperChest="upperChest"}(d.HumanoidBoneName||(d.HumanoidBoneName={})),function(h){h.Everyone="Everyone",h.ExplicitlyLicensedPerson="ExplicitlyLicensedPerson",h.OnlyAuthor="OnlyAuthor"}(d.MetaAllowedUserName||(d.MetaAllowedUserName={})),function(h){h.Allow="Allow",h.Disallow="Disallow"}(d.MetaUssageName||(d.MetaUssageName={})),function(h){h.Cc0="CC0",h.CcBy="CC_BY",h.CcByNc="CC_BY_NC",h.CcByNcNd="CC_BY_NC_ND",h.CcByNcSa="CC_BY_NC_SA",h.CcByNd="CC_BY_ND",h.CcBySa="CC_BY_SA",h.Other="Other",h.RedistributionProhibited="Redistribution_Prohibited"}(d.MetaLicenseName||(d.MetaLicenseName={}))}(c.VRMSchema||(c.VRMSchema={}))},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0})},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.renameMaterialProperty=void 0,c.renameMaterialProperty=function(d){return d[0]!=="_"?(console.warn('renameMaterialProperty: Given property name "'+d+'" might be invalid'),d):(d=d.substring(1),/[A-Z]/.test(d[0])?d[0].toLowerCase()+d.substring(1):(console.warn('renameMaterialProperty: Given property name "'+d+'" might be invalid'),d))}},function(s,c,f){var d=this&&this.__awaiter||function(_e,nt,rt,at){return new(rt||(rt=Promise))(function(it,$){function et(ct){try{lt(at.next(ct))}catch(ut){$(ut)}}function st(ct){try{lt(at.throw(ct))}catch(ut){$(ut)}}function lt(ct){var ut;ct.done?it(ct.value):(ut=ct.value,ut instanceof rt?ut:new rt(function(ht){ht(ut)})).then(et,st)}lt((at=at.apply(_e,nt||[])).next())})},h=this&&this.__generator||function(_e,nt){var rt,at,it,$,et={label:0,sent:function(){if(1&it[0])throw it[1];return it[1]},trys:[],ops:[]};return $={next:st(0),throw:st(1),return:st(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function st(lt){return function(ct){return function(ut){if(rt)throw new TypeError("Generator is already executing.");for(;et;)try{if(rt=1,at&&(it=2&ut[0]?at.return:ut[0]?at.throw||((it=at.return)&&it.call(at),0):at.next)&&!(it=it.call(at,ut[1])).done)return it;switch(at=0,it&&(ut=[2&ut[0],it.value]),ut[0]){case 0:case 1:it=ut;break;case 4:return et.label++,{value:ut[1],done:!1};case 5:et.label++,at=ut[1],ut=[0];continue;case 7:ut=et.ops.pop(),et.trys.pop();continue;default:if(it=et.trys,!((it=it.length>0&&it[it.length-1])||ut[0]!==6&&ut[0]!==2)){et=0;continue}if(ut[0]===3&&(!it||ut[1]>it[0]&&ut[1]<it[3])){et.label=ut[1];break}if(ut[0]===6&&et.label<it[1]){et.label=it[1],it=ut;break}if(it&&et.label<it[2]){et.label=it[2],et.ops.push(ut);break}it[2]&&et.ops.pop(),et.trys.pop();continue}ut=nt.call(_e,et)}catch(ht){ut=[6,ht],at=0}finally{rt=it=0}if(5&ut[0])throw ut[1];return{value:ut[0]?ut[1]:void 0,done:!0}}([lt,ct])}}};Object.defineProperty(c,"__esModule",{value:!0}),c.VRMFirstPersonImporter=void 0;var g=f(0),b=f(1),tt=f(15),j=function(){function _e(){}return _e.prototype.import=function(nt,rt){var at;return d(this,void 0,Promise,function(){var it,$,et,st,lt,ct;return h(this,function(ut){switch(ut.label){case 0:return(it=(at=nt.parser.json.extensions)===null||at===void 0?void 0:at.VRM)&&($=it.firstPerson)?(et=$.firstPersonBone)!==void 0&&et!==-1?[3,1]:(st=rt.getBoneNode(b.VRMSchema.HumanoidBoneName.Head),[3,3]):[2,null];case 1:return[4,nt.parser.getDependency("node",et)];case 2:st=ut.sent(),ut.label=3;case 3:return st?(lt=$.firstPersonBoneOffset?new g.Vector3($.firstPersonBoneOffset.x,$.firstPersonBoneOffset.y,-$.firstPersonBoneOffset.z):new g.Vector3(0,.06,0),ct=[],[4,nt.parser.getDependencies("mesh")]):(console.warn("VRMFirstPersonImporter: Could not find firstPersonBone of the VRM"),[2,null]);case 4:return ut.sent().forEach(function(ht,pt){var mt=$.meshAnnotations?$.meshAnnotations.find(function(bt){return bt.mesh===pt}):void 0;ct.push(new tt.VRMRendererFirstPersonFlags(mt==null?void 0:mt.firstPersonFlag,ht))}),[2,new tt.VRMFirstPerson(st,lt,ct)]}})})},_e}();c.VRMFirstPersonImporter=j},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.getTexelDecodingFunction=c.getEncodingComponents=void 0;var d=f(0);c.getEncodingComponents=function(h){switch(h){case d.LinearEncoding:return["Linear","( value )"];case d.sRGBEncoding:return["sRGB","( value )"];case d.RGBEEncoding:return["RGBE","( value )"];case d.RGBM7Encoding:return["RGBM","( value, 7.0 )"];case d.RGBM16Encoding:return["RGBM","( value, 16.0 )"];case d.RGBDEncoding:return["RGBD","( value, 256.0 )"];case d.GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+h)}},c.getTexelDecodingFunction=function(h,g){var b=c.getEncodingComponents(g);return"vec4 "+h+"( vec4 value ) { return "+b[0]+"ToLinear"+b[1]+"; }"}},function(s,c,f){f.r(c),c.default=`// #define PHONG

varying vec3 vViewPosition;

#ifndef FLAT_SHADED
  varying vec3 vNormal;
#endif

#include <common>

// #include <uv_pars_vertex>
#if defined( USE_MAP ) || defined( USE_SHADETEXTURE ) || defined( USE_NORMALMAP ) || defined( USE_RECEIVESHADOWTEXTURE ) || defined( USE_SHADINGGRADETEXTURE ) || defined( USE_RIMTEXTURE ) || defined( USE_EMISSIVEMAP ) || defined( USE_OUTLINEWIDTHTEXTURE ) || defined( USE_UVANIMMASKTEXTURE )
  varying vec2 vUv;
  uniform vec4 mainTex_ST;
#endif

#include <uv2_pars_vertex>
// #include <displacementmap_pars_vertex>
// #include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

#ifdef USE_OUTLINEWIDTHTEXTURE
  uniform sampler2D outlineWidthTexture;
#endif

uniform float outlineWidth;
uniform float outlineScaledMaxDistance;

void main() {

  // #include <uv_vertex>
  #if defined( USE_MAP ) || defined( USE_SHADETEXTURE ) || defined( USE_NORMALMAP ) || defined( USE_RECEIVESHADOWTEXTURE ) || defined( USE_SHADINGGRADETEXTURE ) || defined( USE_RIMTEXTURE ) || defined( USE_EMISSIVEMAP ) || defined( USE_OUTLINEWIDTHTEXTURE ) || defined( USE_UVANIMMASKTEXTURE )
    vUv = vec2( mainTex_ST.p * uv.x + mainTex_ST.s, mainTex_ST.q * uv.y + mainTex_ST.t );
  #endif

  #include <uv2_vertex>
  #include <color_vertex>

  #include <beginnormal_vertex>
  #include <morphnormal_vertex>
  #include <skinbase_vertex>
  #include <skinnormal_vertex>

  // we need this to compute the outline properly
  objectNormal = normalize( objectNormal );

  #include <defaultnormal_vertex>

  #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED
    vNormal = normalize( transformedNormal );
  #endif

  #include <begin_vertex>

  #include <morphtarget_vertex>
  #include <skinning_vertex>
  // #include <displacementmap_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>
  #include <clipping_planes_vertex>

  vViewPosition = - mvPosition.xyz;

  float outlineTex = 1.0;

  #ifdef OUTLINE
    #ifdef USE_OUTLINEWIDTHTEXTURE
      outlineTex = texture2D( outlineWidthTexture, vUv ).r;
    #endif

    #ifdef OUTLINE_WIDTH_WORLD
      float worldNormalLength = length( transformedNormal );
      vec3 outlineOffset = 0.01 * outlineWidth * outlineTex * worldNormalLength * objectNormal;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( outlineOffset + transformed, 1.0 );
    #endif

    #ifdef OUTLINE_WIDTH_SCREEN
      vec3 clipNormal = ( projectionMatrix * modelViewMatrix * vec4( objectNormal, 0.0 ) ).xyz;
      vec2 projectedNormal = normalize( clipNormal.xy );
      projectedNormal *= min( gl_Position.w, outlineScaledMaxDistance );
      projectedNormal.x *= projectionMatrix[ 0 ].x / projectionMatrix[ 1 ].y;
      gl_Position.xy += 0.01 * outlineWidth * outlineTex * projectedNormal.xy;
    #endif

    gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic
  #endif

  #include <worldpos_vertex>
  // #include <envmap_vertex>
  #include <shadowmap_vertex>
  #include <fog_vertex>

}`},function(s,c,f){f.r(c),c.default=`// #define PHONG

#ifdef BLENDMODE_CUTOUT
  uniform float cutoff;
#endif

uniform vec3 color;
uniform float colorAlpha;
uniform vec3 shadeColor;
#ifdef USE_SHADETEXTURE
  uniform sampler2D shadeTexture;
#endif

uniform float receiveShadowRate;
#ifdef USE_RECEIVESHADOWTEXTURE
  uniform sampler2D receiveShadowTexture;
#endif

uniform float shadingGradeRate;
#ifdef USE_SHADINGGRADETEXTURE
  uniform sampler2D shadingGradeTexture;
#endif

uniform float shadeShift;
uniform float shadeToony;
uniform float lightColorAttenuation;
uniform float indirectLightIntensity;

#ifdef USE_RIMTEXTURE
  uniform sampler2D rimTexture;
#endif
uniform vec3 rimColor;
uniform float rimLightingMix;
uniform float rimFresnelPower;
uniform float rimLift;

#ifdef USE_SPHEREADD
  uniform sampler2D sphereAdd;
#endif

uniform vec3 emissionColor;

uniform vec3 outlineColor;
uniform float outlineLightingMix;

#ifdef USE_UVANIMMASKTEXTURE
  uniform sampler2D uvAnimMaskTexture;
#endif

uniform float uvAnimOffsetX;
uniform float uvAnimOffsetY;
uniform float uvAnimTheta;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>

// #include <uv_pars_fragment>
#if defined( USE_MAP ) || defined( USE_SHADETEXTURE ) || defined( USE_NORMALMAP ) || defined( USE_RECEIVESHADOWTEXTURE ) || defined( USE_SHADINGGRADETEXTURE ) || defined( USE_RIMTEXTURE ) || defined( USE_EMISSIVEMAP ) || defined( USE_OUTLINEWIDTHTEXTURE ) || defined( USE_UVANIMMASKTEXTURE )
  varying vec2 vUv;
#endif

#include <uv2_pars_fragment>
#include <map_pars_fragment>
// #include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
// #include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
// #include <envmap_pars_fragment>
// #include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>

// #include <lights_phong_pars_fragment>
varying vec3 vViewPosition;

#ifndef FLAT_SHADED
  varying vec3 vNormal;
#endif

#define Material_LightProbeLOD( material ) (0)

#include <shadowmap_pars_fragment>
// #include <bumpmap_pars_fragment>

// #include <normalmap_pars_fragment>
#ifdef USE_NORMALMAP

  uniform sampler2D normalMap;
  uniform vec2 normalScale;

#endif

#ifdef OBJECTSPACE_NORMALMAP

  uniform mat3 normalMatrix;

#endif

#if ! defined ( USE_TANGENT ) && defined ( TANGENTSPACE_NORMALMAP )

  // Per-Pixel Tangent Space Normal Mapping
  // http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html

  // three-vrm specific change: it requires \`uv\` as an input in order to support uv scrolls

  vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {

    // Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988

    vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
    vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
    vec2 st0 = dFdx( uv.st );
    vec2 st1 = dFdy( uv.st );

    float scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude

    vec3 S = ( q0 * st1.t - q1 * st0.t ) * scale;
    vec3 T = ( - q0 * st1.s + q1 * st0.s ) * scale;

    // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
    // TODO: Is this still required? Or shall I make a PR about it?

    if ( length( S ) == 0.0 || length( T ) == 0.0 ) {
      return surf_norm;
    }

    S = normalize( S );
    T = normalize( T );
    vec3 N = normalize( surf_norm );

    #ifdef DOUBLE_SIDED

      // Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331

      bool frontFacing = dot( cross( S, T ), N ) > 0.0;

      mapN.xy *= ( float( frontFacing ) * 2.0 - 1.0 );

    #else

      mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );

    #endif

    mat3 tsn = mat3( S, T, N );
    return normalize( tsn * mapN );

  }

#endif

// #include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

// == lighting stuff ===========================================================
float getLightIntensity(
  const in IncidentLight directLight,
  const in GeometricContext geometry,
  const in float shadow,
  const in float shadingGrade
) {
  float lightIntensity = dot( geometry.normal, directLight.direction );
  lightIntensity = 0.5 + 0.5 * lightIntensity;
  lightIntensity = lightIntensity * shadow;
  lightIntensity = lightIntensity * shadingGrade;
  lightIntensity = lightIntensity * 2.0 - 1.0;
  return shadeToony == 1.0
    ? step( shadeShift, lightIntensity )
    : smoothstep( shadeShift, shadeShift + ( 1.0 - shadeToony ), lightIntensity );
}

vec3 getLighting( const in vec3 lightColor ) {
  vec3 lighting = lightColor;
  lighting = mix(
    lighting,
    vec3( max( 0.001, max( lighting.x, max( lighting.y, lighting.z ) ) ) ),
    lightColorAttenuation
  );

  #ifndef PHYSICALLY_CORRECT_LIGHTS
    lighting *= PI;
  #endif

  return lighting;
}

vec3 getDiffuse(
  const in vec3 lit,
  const in vec3 shade,
  const in float lightIntensity,
  const in vec3 lighting
) {
  #ifdef DEBUG_LITSHADERATE
    return vec3( BRDF_Diffuse_Lambert( lightIntensity * lighting ) );
  #endif

  return lighting * BRDF_Diffuse_Lambert( mix( shade, lit, lightIntensity ) );
}

vec3 calcDirectDiffuse(
  const in vec2 uv,
  const in vec3 lit,
  const in vec3 shade,
  in GeometricContext geometry,
  inout ReflectedLight reflectedLight
) {
  IncidentLight directLight;
  vec3 lightingSum = vec3( 0.0 );

  float shadingGrade = 1.0;
  #ifdef USE_SHADINGGRADETEXTURE
    shadingGrade = 1.0 - shadingGradeRate * ( 1.0 - texture2D( shadingGradeTexture, uv ).r );
  #endif

  float receiveShadow = receiveShadowRate;
  #ifdef USE_RECEIVESHADOWTEXTURE
    receiveShadow *= texture2D( receiveShadowTexture, uv ).a;
  #endif

  #if ( NUM_POINT_LIGHTS > 0 )
    PointLight pointLight;

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
      pointLight = pointLights[ i ];
      getPointDirectLightIrradiance( pointLight, geometry, directLight );

      float atten = 1.0;
      #ifdef USE_SHADOWMAP
        atten = all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
      #endif

      float shadow = 1.0 - receiveShadow * ( 1.0 - ( 0.5 + 0.5 * atten ) );
      float lightIntensity = getLightIntensity( directLight, geometry, shadow, shadingGrade );
      vec3 lighting = getLighting( directLight.color );
      reflectedLight.directDiffuse += getDiffuse( lit, shade, lightIntensity, lighting );
      lightingSum += lighting;
    }
    #pragma unroll_loop_end
  #endif

  #if ( NUM_SPOT_LIGHTS > 0 )
    SpotLight spotLight;

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
      spotLight = spotLights[ i ];
      getSpotDirectLightIrradiance( spotLight, geometry, directLight );

      float atten = 1.0;
      #ifdef USE_SHADOWMAP
        atten = all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #endif

      float shadow = 1.0 - receiveShadow * ( 1.0 - ( 0.5 + 0.5 * atten ) );
      float lightIntensity = getLightIntensity( directLight, geometry, shadow, shadingGrade );
      vec3 lighting = getLighting( directLight.color );
      reflectedLight.directDiffuse += getDiffuse( lit, shade, lightIntensity, lighting );
      lightingSum += lighting;
    }
    #pragma unroll_loop_end
  #endif

  #if ( NUM_DIR_LIGHTS > 0 )
    DirectionalLight directionalLight;

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
      directionalLight = directionalLights[ i ];
      getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );

      float atten = 1.0;
      #ifdef USE_SHADOWMAP
        atten = all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #endif

      float shadow = 1.0 - receiveShadow * ( 1.0 - ( 0.5 + 0.5 * atten ) );
      float lightIntensity = getLightIntensity( directLight, geometry, shadow, shadingGrade );
      vec3 lighting = getLighting( directLight.color );
      reflectedLight.directDiffuse += getDiffuse( lit, shade, lightIntensity, lighting );
      lightingSum += lighting;
    }
    #pragma unroll_loop_end
  #endif

  return lightingSum;
}

// == post correction ==========================================================
void postCorrection() {
  #include <tonemapping_fragment>
  #include <encodings_fragment>
  #include <fog_fragment>
  #include <premultiplied_alpha_fragment>
  #include <dithering_fragment>
}

// == main procedure ===========================================================
void main() {
  #include <clipping_planes_fragment>

  vec2 uv = vec2(0.5, 0.5);

  #if defined( USE_MAP ) || defined( USE_SHADETEXTURE ) || defined( USE_NORMALMAP ) || defined( USE_RECEIVESHADOWTEXTURE ) || defined( USE_SHADINGGRADETEXTURE ) || defined( USE_RIMTEXTURE ) || defined( USE_EMISSIVEMAP ) || defined( USE_OUTLINEWIDTHTEXTURE ) || defined( USE_UVANIMMASKTEXTURE )
    uv = vUv;

    float uvAnimMask = 1.0;
    #ifdef USE_UVANIMMASKTEXTURE
      uvAnimMask = texture2D( uvAnimMaskTexture, uv ).x;
    #endif

    uv = uv + vec2( uvAnimOffsetX, uvAnimOffsetY ) * uvAnimMask;
    float uvRotCos = cos( uvAnimTheta * uvAnimMask );
    float uvRotSin = sin( uvAnimTheta * uvAnimMask );
    uv = mat2( uvRotCos, uvRotSin, -uvRotSin, uvRotCos ) * ( uv - 0.5 ) + 0.5;
  #endif

  #ifdef DEBUG_UV
    gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #if defined( USE_MAP ) || defined( USE_SHADETEXTURE ) || defined( USE_NORMALMAP ) || defined( USE_RECEIVESHADOWTEXTURE ) || defined( USE_SHADINGGRADETEXTURE ) || defined( USE_RIMTEXTURE ) || defined( USE_EMISSIVEMAP ) || defined( USE_OUTLINEWIDTHTEXTURE ) || defined( USE_UVANIMMASKTEXTURE )
      gl_FragColor = vec4( uv, 0.0, 1.0 );
    #endif
    return;
  #endif

  vec4 diffuseColor = vec4( color, colorAlpha );
  ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
  vec3 totalEmissiveRadiance = emissionColor;

  #include <logdepthbuf_fragment>

  // #include <map_fragment>
  #ifdef USE_MAP
    diffuseColor *= mapTexelToLinear( texture2D( map, uv ) );
  #endif

  #include <color_fragment>
  // #include <alphamap_fragment>

  // -- MToon: alpha -----------------------------------------------------------
  // #include <alphatest_fragment>
  #ifdef BLENDMODE_CUTOUT
    if ( diffuseColor.a <= cutoff ) { discard; }
    diffuseColor.a = 1.0;
  #endif

  #ifdef BLENDMODE_OPAQUE
    diffuseColor.a = 1.0;
  #endif

  #if defined( OUTLINE ) && defined( OUTLINE_COLOR_FIXED ) // omitting DebugMode
    gl_FragColor = vec4( outlineColor, diffuseColor.a );
    postCorrection();
    return;
  #endif

  // #include <specularmap_fragment>
  #include <normal_fragment_begin>

  #ifdef OUTLINE
    normal *= -1.0;
  #endif

  // #include <normal_fragment_maps>

  #ifdef OBJECTSPACE_NORMALMAP

    normal = texture2D( normalMap, uv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals

    #ifdef FLIP_SIDED

      normal = - normal;

    #endif

    #ifdef DOUBLE_SIDED

      normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );

    #endif

    normal = normalize( normalMatrix * normal );

  #elif defined( TANGENTSPACE_NORMALMAP )

    vec3 mapN = texture2D( normalMap, uv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;

    #ifdef USE_TANGENT

      normal = normalize( vTBN * mapN );

    #else

      normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN );

    #endif

  #endif

  // #include <emissivemap_fragment>
  #ifdef USE_EMISSIVEMAP
    totalEmissiveRadiance *= emissiveMapTexelToLinear( texture2D( emissiveMap, uv ) ).rgb;
  #endif

  #ifdef DEBUG_NORMAL
    gl_FragColor = vec4( 0.5 + 0.5 * normal, 1.0 );
    return;
  #endif

  // -- MToon: lighting --------------------------------------------------------
  // accumulation
  // #include <lights_phong_fragment>
  // #include <lights_fragment_begin>
  vec3 lit = diffuseColor.rgb;
  vec3 shade = shadeColor;
  #ifdef USE_SHADETEXTURE
    shade *= shadeTextureTexelToLinear( texture2D( shadeTexture, uv ) ).rgb;
  #endif

  GeometricContext geometry;

  geometry.position = - vViewPosition;
  geometry.normal = normal;
  geometry.viewDir = normalize( vViewPosition );

  vec3 lighting = calcDirectDiffuse( uv, diffuseColor.rgb, shade, geometry, reflectedLight );

  vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
  #if ( NUM_HEMI_LIGHTS > 0 )
    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
      irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
    }
    #pragma unroll_loop_end
  #endif

  // #include <lights_fragment_maps>
  #ifdef USE_LIGHTMAP
    vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).rgb * lightMapIntensity;
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      lightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage
    #endif
    irradiance += lightMapIrradiance;
  #endif

  // #include <lights_fragment_end>
  reflectedLight.indirectDiffuse += indirectLightIntensity * irradiance * BRDF_Diffuse_Lambert( lit );

  // modulation
  #include <aomap_fragment>

  vec3 col = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;

  #if defined( OUTLINE ) && defined( OUTLINE_COLOR_MIXED )
    gl_FragColor = vec4(
      outlineColor.rgb * mix( vec3( 1.0 ), col, outlineLightingMix ),
      diffuseColor.a
    );
    postCorrection();
    return;
  #endif

  #ifdef DEBUG_LITSHADERATE
    gl_FragColor = vec4( col, diffuseColor.a );
    postCorrection();
    return;
  #endif

  // -- MToon: parametric rim lighting -----------------------------------------
  vec3 viewDir = normalize( vViewPosition );
  vec3 rimMix = mix(vec3(1.0), lighting + indirectLightIntensity * irradiance, rimLightingMix);
  vec3 rim = rimColor * pow( saturate( 1.0 - dot( viewDir, normal ) + rimLift ), rimFresnelPower );
  #ifdef USE_RIMTEXTURE
    rim *= rimTextureTexelToLinear( texture2D( rimTexture, uv ) ).rgb;
  #endif
  col += rim;

  // -- MToon: additive matcap -------------------------------------------------
  #ifdef USE_SPHEREADD
    {
      vec3 x = normalize( vec3( viewDir.z, 0.0, -viewDir.x ) );
      vec3 y = cross( viewDir, x ); // guaranteed to be normalized
      vec2 sphereUv = 0.5 + 0.5 * vec2( dot( x, normal ), -dot( y, normal ) );
      vec3 matcap = sphereAddTexelToLinear( texture2D( sphereAdd, sphereUv ) ).xyz;
      col += matcap;
    }
  #endif

  // -- MToon: Emission --------------------------------------------------------
  col += totalEmissiveRadiance;

  // #include <envmap_fragment>

  // -- Almost done! -----------------------------------------------------------
  gl_FragColor = vec4( col, diffuseColor.a );
  postCorrection();
}`},function(s,c,f){var d=this&&this.__awaiter||function(nt,rt,at,it){return new(at||(at=Promise))(function($,et){function st(ut){try{ct(it.next(ut))}catch(ht){et(ht)}}function lt(ut){try{ct(it.throw(ut))}catch(ht){et(ht)}}function ct(ut){var ht;ut.done?$(ut.value):(ht=ut.value,ht instanceof at?ht:new at(function(pt){pt(ht)})).then(st,lt)}ct((it=it.apply(nt,rt||[])).next())})},h=this&&this.__generator||function(nt,rt){var at,it,$,et,st={label:0,sent:function(){if(1&$[0])throw $[1];return $[1]},trys:[],ops:[]};return et={next:lt(0),throw:lt(1),return:lt(2)},typeof Symbol=="function"&&(et[Symbol.iterator]=function(){return this}),et;function lt(ct){return function(ut){return function(ht){if(at)throw new TypeError("Generator is already executing.");for(;st;)try{if(at=1,it&&($=2&ht[0]?it.return:ht[0]?it.throw||(($=it.return)&&$.call(it),0):it.next)&&!($=$.call(it,ht[1])).done)return $;switch(it=0,$&&(ht=[2&ht[0],$.value]),ht[0]){case 0:case 1:$=ht;break;case 4:return st.label++,{value:ht[1],done:!1};case 5:st.label++,it=ht[1],ht=[0];continue;case 7:ht=st.ops.pop(),st.trys.pop();continue;default:if($=st.trys,!(($=$.length>0&&$[$.length-1])||ht[0]!==6&&ht[0]!==2)){st=0;continue}if(ht[0]===3&&(!$||ht[1]>$[0]&&ht[1]<$[3])){st.label=ht[1];break}if(ht[0]===6&&st.label<$[1]){st.label=$[1],$=ht;break}if($&&st.label<$[2]){st.label=$[2],st.ops.push(ht);break}$[2]&&st.ops.pop(),st.trys.pop();continue}ht=rt.call(nt,st)}catch(pt){ht=[6,pt],it=0}finally{at=$=0}if(5&ht[0])throw ht[1];return{value:ht[0]?ht[1]:void 0,done:!0}}([ct,ut])}}},g=this&&this.__spreadArrays||function(){for(var nt=0,rt=0,at=arguments.length;rt<at;rt++)nt+=arguments[rt].length;var it=Array(nt),$=0;for(rt=0;rt<at;rt++)for(var et=arguments[rt],st=0,lt=et.length;st<lt;st++,$++)it[$]=et[st];return it};Object.defineProperty(c,"__esModule",{value:!0}),c.VRMMaterialImporter=void 0;var b=f(0),tt=f(24),j=f(25),_e=function(){function nt(rt){rt===void 0&&(rt={}),this._encoding=rt.encoding||b.LinearEncoding,this._encoding!==b.LinearEncoding&&this._encoding!==b.sRGBEncoding&&console.warn("The specified color encoding might not work properly with VRMMaterialImporter. You might want to use THREE.sRGBEncoding instead."),this._requestEnvMap=rt.requestEnvMap}return nt.prototype.convertGLTFMaterials=function(rt){var at;return d(this,void 0,Promise,function(){var it,$,et,st,lt,ct=this;return h(this,function(ut){switch(ut.label){case 0:return(it=(at=rt.parser.json.extensions)===null||at===void 0?void 0:at.VRM)&&($=it.materialProperties)?[4,rt.parser.getDependencies("mesh")]:[2,null];case 1:return et=ut.sent(),st={},lt=[],[4,Promise.all(et.map(function(ht,pt){return d(ct,void 0,void 0,function(){var mt,bt,St=this;return h(this,function(Ft){switch(Ft.label){case 0:return mt=rt.parser.json.meshes[pt],bt=ht.type==="Group"?ht.children:[ht],[4,Promise.all(bt.map(function(It,Ct){return d(St,void 0,void 0,function(){var Pt,Nt,zt,Xt,en,rn;return h(this,function(Gt){switch(Gt.label){case 0:return(Pt=mt.primitives[Ct])?(Nt=It.geometry,zt=Nt.index?Nt.index.count:Nt.attributes.position.count/3,Array.isArray(It.material)||(It.material=[It.material],Nt.addGroup(0,zt,0)),Xt=Pt.material,(en=$[Xt])||(console.warn("VRMMaterialImporter: There are no material definition for material #"+Xt+" on VRM extension."),en={shader:"VRM_USE_GLTFSHADER"}),st[Xt]?(rn=st[Xt],[3,3]):[3,1]):[2];case 1:return[4,this.createVRMMaterials(It.material[0],en,rt)];case 2:rn=Gt.sent(),st[Xt]=rn,lt.push(rn.surface),rn.outline&&lt.push(rn.outline),Gt.label=3;case 3:return It.material[0]=rn.surface,this._requestEnvMap&&rn.surface.isMeshStandardMaterial&&this._requestEnvMap().then(function(qt){rn.surface.envMap=qt,rn.surface.needsUpdate=!0}),It.renderOrder=en.renderQueue||2e3,rn.outline&&(It.material[1]=rn.outline,Nt.addGroup(0,zt,1)),[2]}})})}))];case 1:return Ft.sent(),[2]}})})}))];case 2:return ut.sent(),[2,lt]}})})},nt.prototype.createVRMMaterials=function(rt,at,it){return d(this,void 0,Promise,function(){var $,et,st,lt,ct=this;return h(this,function(ut){switch(ut.label){case 0:return at.shader!=="VRM/MToon"?[3,2]:[4,this._extractMaterialProperties(rt,at,it)];case 1:return st=ut.sent(),["srcBlend","dstBlend","isFirstSetup"].forEach(function(ht){st[ht]!==void 0&&delete st[ht]}),["mainTex","shadeTexture","emissionMap","sphereAdd","rimTexture"].forEach(function(ht){st[ht]!==void 0&&(st[ht].encoding=ct._encoding)}),st.encoding=this._encoding,$=new tt.MToonMaterial(st),st.outlineWidthMode!==tt.MToonMaterialOutlineWidthMode.None&&(st.isOutline=!0,et=new tt.MToonMaterial(st)),[3,11];case 2:return at.shader!=="VRM/UnlitTexture"?[3,4]:[4,this._extractMaterialProperties(rt,at,it)];case 3:return(lt=ut.sent()).renderType=j.VRMUnlitMaterialRenderType.Opaque,$=new j.VRMUnlitMaterial(lt),[3,11];case 4:return at.shader!=="VRM/UnlitCutout"?[3,6]:[4,this._extractMaterialProperties(rt,at,it)];case 5:return(lt=ut.sent()).renderType=j.VRMUnlitMaterialRenderType.Cutout,$=new j.VRMUnlitMaterial(lt),[3,11];case 6:return at.shader!=="VRM/UnlitTransparent"?[3,8]:[4,this._extractMaterialProperties(rt,at,it)];case 7:return(lt=ut.sent()).renderType=j.VRMUnlitMaterialRenderType.Transparent,$=new j.VRMUnlitMaterial(lt),[3,11];case 8:return at.shader!=="VRM/UnlitTransparentZWrite"?[3,10]:[4,this._extractMaterialProperties(rt,at,it)];case 9:return(lt=ut.sent()).renderType=j.VRMUnlitMaterialRenderType.TransparentWithZWrite,$=new j.VRMUnlitMaterial(lt),[3,11];case 10:at.shader!=="VRM_USE_GLTFSHADER"&&console.warn('Unknown shader detected: "'+at.shader+'"'),$=this._convertGLTFMaterial(rt.clone()),ut.label=11;case 11:return $.name=rt.name,$.userData=JSON.parse(JSON.stringify(rt.userData)),$.userData.vrmMaterialProperties=at,et&&(et.name=rt.name+" (Outline)",et.userData=JSON.parse(JSON.stringify(rt.userData)),et.userData.vrmMaterialProperties=at),[2,{surface:$,outline:et}]}})})},nt.prototype._renameMaterialProperty=function(rt){return rt[0]!=="_"?(console.warn('VRMMaterials: Given property name "'+rt+'" might be invalid'),rt):(rt=rt.substring(1),/[A-Z]/.test(rt[0])?rt[0].toLowerCase()+rt.substring(1):(console.warn('VRMMaterials: Given property name "'+rt+'" might be invalid'),rt))},nt.prototype._convertGLTFMaterial=function(rt){var at;return rt.isMeshStandardMaterial&&((at=rt).map&&(at.map.encoding=this._encoding),at.emissiveMap&&(at.emissiveMap.encoding=this._encoding),this._encoding===b.LinearEncoding&&(at.color.convertLinearToSRGB(),at.emissive.convertLinearToSRGB())),rt.isMeshBasicMaterial&&((at=rt).map&&(at.map.encoding=this._encoding),this._encoding===b.LinearEncoding&&at.color.convertLinearToSRGB()),rt},nt.prototype._extractMaterialProperties=function(rt,at,it){var $=[],et={};if(at.textureProperties)for(var st=function(Pt){var Nt=lt._renameMaterialProperty(Pt),zt=at.textureProperties[Pt];$.push(it.parser.getDependency("texture",zt).then(function(Xt){et[Nt]=Xt}))},lt=this,ct=0,ut=Object.keys(at.textureProperties);ct<ut.length;ct++)st(mt=ut[ct]);if(at.floatProperties)for(var ht=0,pt=Object.keys(at.floatProperties);ht<pt.length;ht++){var mt=pt[ht],bt=this._renameMaterialProperty(mt);et[bt]=at.floatProperties[mt]}if(at.vectorProperties)for(var St=function(Pt){var Nt,zt=Ft._renameMaterialProperty(Pt);["_MainTex","_ShadeTexture","_BumpMap","_ReceiveShadowTexture","_ShadingGradeTexture","_RimTexture","_SphereAdd","_EmissionMap","_OutlineWidthTexture","_UvAnimMaskTexture"].some(function(Xt){return Pt===Xt})&&(zt+="_ST"),et[zt]=new((Nt=b.Vector4).bind.apply(Nt,g([void 0],at.vectorProperties[Pt])))},Ft=this,It=0,Ct=Object.keys(at.vectorProperties);It<Ct.length;It++)St(mt=Ct[It]);return at.keywordMap._ALPHATEST_ON&&et.blendMode===tt.MToonMaterialRenderMode.Opaque&&(et.blendMode=tt.MToonMaterialRenderMode.Cutout),et.skinning=rt.skinning||!1,et.morphTargets=rt.morphTargets||!1,et.morphNormals=rt.morphNormals||!1,Promise.all($).then(function(){return et})},nt}();c.VRMMaterialImporter=_e},function(s,c,f){f.r(c),c.default=`#include <common>

// #include <uv_pars_vertex>
#ifdef USE_MAP
  varying vec2 vUv;
  uniform vec4 mainTex_ST;
#endif

#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

  // #include <uv_vertex>
  #ifdef USE_MAP
    vUv = vec2( mainTex_ST.p * uv.x + mainTex_ST.s, mainTex_ST.q * uv.y + mainTex_ST.t );
  #endif

  #include <uv2_vertex>
  #include <color_vertex>
  #include <skinbase_vertex>

  #ifdef USE_ENVMAP

  #include <beginnormal_vertex>
  #include <morphnormal_vertex>
  #include <skinnormal_vertex>
  #include <defaultnormal_vertex>

  #endif

  #include <begin_vertex>
  #include <morphtarget_vertex>
  #include <skinning_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>

  #include <worldpos_vertex>
  #include <clipping_planes_vertex>
  #include <envmap_vertex>
  #include <fog_vertex>

}`},function(s,c,f){f.r(c),c.default=`#ifdef RENDERTYPE_CUTOUT
  uniform float cutoff;
#endif

#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
// #include <alphamap_pars_fragment>
// #include <aomap_pars_fragment>
// #include <lightmap_pars_fragment>
// #include <envmap_pars_fragment>
#include <fog_pars_fragment>
// #include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

// == main procedure ===========================================================
void main() {
  #include <clipping_planes_fragment>

  vec4 diffuseColor = vec4( 1.0 );

  #include <logdepthbuf_fragment>

  // #include <map_fragment>
  #ifdef USE_MAP
    diffuseColor *= mapTexelToLinear( texture2D( map, vUv ) );
  #endif

  #include <color_fragment>
  // #include <alphamap_fragment>

  // MToon: alpha
  // #include <alphatest_fragment>
  #ifdef RENDERTYPE_CUTOUT
    if ( diffuseColor.a <= cutoff ) { discard; }
    diffuseColor.a = 1.0;
  #endif

  #ifdef RENDERTYPE_OPAQUE
    diffuseColor.a = 1.0;
  #endif

  // #include <specularmap_fragment>

  ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );

  // accumulation (baked indirect lighting only)
  #ifdef USE_LIGHTMAP
    reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
  #else
    reflectedLight.indirectDiffuse += vec3( 1.0 );
  #endif

  // modulation
  // #include <aomap_fragment>

  reflectedLight.indirectDiffuse *= diffuseColor.rgb;
  vec3 outgoingLight = reflectedLight.indirectDiffuse;

  // #include <envmap_fragment>

  gl_FragColor = vec4( outgoingLight, diffuseColor.a );

  #include <premultiplied_alpha_fragment>
  #include <tonemapping_fragment>
  #include <encodings_fragment>
  #include <fog_fragment>
}`},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.Matrix4InverseCache=void 0;var d=f(0),h=f(28),g=function(){function b(tt){var j=this;this._inverseCache=new d.Matrix4,this._shouldUpdateInverse=!0,this.matrix=tt;var _e={set:function(nt,rt,at){return j._shouldUpdateInverse=!0,nt[rt]=at,!0}};this._originalElements=tt.elements,tt.elements=new Proxy(tt.elements,_e)}return Object.defineProperty(b.prototype,"inverse",{get:function(){return this._shouldUpdateInverse&&(h.mat4InvertCompat(this._inverseCache.copy(this.matrix)),this._shouldUpdateInverse=!1),this._inverseCache},enumerable:!1,configurable:!0}),b.prototype.revert=function(){this.matrix.elements=this._originalElements},b}();c.Matrix4InverseCache=g},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.VRMUtils=void 0;var d=f(49),h=f(50),g=function(){function b(){}return b.extractThumbnailBlob=d.extractThumbnailBlob,b.removeUnnecessaryJoints=h.removeUnnecessaryJoints,b}();c.VRMUtils=g},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.extractThumbnailBlob=void 0;var d=f(0),h=new d.Vector2,g=new d.OrthographicCamera(-1,1,-1,1,-1,1),b=new d.Mesh(new d.PlaneBufferGeometry(2,2),new d.MeshBasicMaterial({color:16777215,side:d.DoubleSide})),tt=new d.Scene;tt.add(b),c.extractThumbnailBlob=function(j,_e,nt){var rt;nt===void 0&&(nt=512);var at=(rt=_e.meta)===null||rt===void 0?void 0:rt.texture;if(!at)throw new Error("extractThumbnailBlob: This VRM does not have a thumbnail");var it=j.getContext().canvas;j.getSize(h);var $=h.x,et=h.y;return j.setSize(nt,nt,!1),b.material.map=at,j.render(tt,g),b.material.map=null,it instanceof OffscreenCanvas?it.convertToBlob().finally(function(){j.setSize($,et,!1)}):new Promise(function(st,lt){it.toBlob(function(ct){j.setSize($,et,!1),ct==null?lt("extractThumbnailBlob: Failed to create a blob"):st(ct)})})}},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.removeUnnecessaryJoints=void 0;var d=f(0);c.removeUnnecessaryJoints=function(h){var g=new Map;h.traverse(function(b){if(b.type==="SkinnedMesh"){var tt=b,j=tt.geometry.getAttribute("skinIndex"),_e=g.get(j);if(!_e){for(var nt=[],rt=[],at={},it=j.array,$=0;$<it.length;$++){var et=it[$];at[et]===void 0&&(at[et]=nt.length,nt.push(tt.skeleton.bones[et]),rt.push(tt.skeleton.boneInverses[et])),it[$]=at[et]}j.copyArray(it),j.needsUpdate=!0,_e=new d.Skeleton(nt,rt),g.set(j,_e)}tt.bind(_e,new d.Matrix4)}})}},function(s,c,f){var d=this&&this.__createBinding||(Object.create?function(g,b,tt,j){j===void 0&&(j=tt),Object.defineProperty(g,j,{enumerable:!0,get:function(){return b[tt]}})}:function(g,b,tt,j){j===void 0&&(j=tt),g[j]=b[tt]}),h=this&&this.__exportStar||function(g,b){for(var tt in g)tt==="default"||Object.prototype.hasOwnProperty.call(b,tt)||d(b,g,tt)};Object.defineProperty(c,"__esModule",{value:!0}),h(f(52),c),h(f(4),c),h(f(31),c),h(f(30),c)},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0})},function(s,c,f){var d,h=this&&this.__extends||(d=function(at,it){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,et){$.__proto__=et}||function($,et){for(var st in et)Object.prototype.hasOwnProperty.call(et,st)&&($[st]=et[st])})(at,it)},function(at,it){function $(){this.constructor=at}d(at,it),at.prototype=it===null?Object.create(it):($.prototype=it.prototype,new $)}),g=this&&this.__awaiter||function(at,it,$,et){return new($||($=Promise))(function(st,lt){function ct(pt){try{ht(et.next(pt))}catch(mt){lt(mt)}}function ut(pt){try{ht(et.throw(pt))}catch(mt){lt(mt)}}function ht(pt){var mt;pt.done?st(pt.value):(mt=pt.value,mt instanceof $?mt:new $(function(bt){bt(mt)})).then(ct,ut)}ht((et=et.apply(at,it||[])).next())})},b=this&&this.__generator||function(at,it){var $,et,st,lt,ct={label:0,sent:function(){if(1&st[0])throw st[1];return st[1]},trys:[],ops:[]};return lt={next:ut(0),throw:ut(1),return:ut(2)},typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function ut(ht){return function(pt){return function(mt){if($)throw new TypeError("Generator is already executing.");for(;ct;)try{if($=1,et&&(st=2&mt[0]?et.return:mt[0]?et.throw||((st=et.return)&&st.call(et),0):et.next)&&!(st=st.call(et,mt[1])).done)return st;switch(et=0,st&&(mt=[2&mt[0],st.value]),mt[0]){case 0:case 1:st=mt;break;case 4:return ct.label++,{value:mt[1],done:!1};case 5:ct.label++,et=mt[1],mt=[0];continue;case 7:mt=ct.ops.pop(),ct.trys.pop();continue;default:if(st=ct.trys,!((st=st.length>0&&st[st.length-1])||mt[0]!==6&&mt[0]!==2)){ct=0;continue}if(mt[0]===3&&(!st||mt[1]>st[0]&&mt[1]<st[3])){ct.label=mt[1];break}if(mt[0]===6&&ct.label<st[1]){ct.label=st[1],st=mt;break}if(st&&ct.label<st[2]){ct.label=st[2],ct.ops.push(mt);break}st[2]&&ct.ops.pop(),ct.trys.pop();continue}mt=it.call(at,ct)}catch(bt){mt=[6,bt],et=0}finally{$=st=0}if(5&mt[0])throw mt[1];return{value:mt[0]?mt[1]:void 0,done:!0}}([ht,pt])}}};Object.defineProperty(c,"__esModule",{value:!0}),c.VRMImporterDebug=void 0;var tt=f(6),j=f(4),_e=f(54),nt=f(30),rt=function(at){function it($){return $===void 0&&($={}),$.lookAtImporter=$.lookAtImporter||new _e.VRMLookAtImporterDebug,$.springBoneImporter=$.springBoneImporter||new nt.VRMSpringBoneImporterDebug,at.call(this,$)||this}return h(it,at),it.prototype.import=function($,et){return et===void 0&&(et={}),g(this,void 0,Promise,function(){var st,lt,ct,ut,ht,pt,mt,bt,St,Ft;return b(this,function(It){switch(It.label){case 0:if($.parser.json.extensions===void 0||$.parser.json.extensions.VRM===void 0)throw new Error("Could not find VRM extension on the GLTF");return(st=$.scene).updateMatrixWorld(!1),st.traverse(function(Ct){Ct.isMesh&&(Ct.frustumCulled=!1)}),[4,this._metaImporter.import($)];case 1:return lt=It.sent()||void 0,[4,this._materialImporter.convertGLTFMaterials($)];case 2:return ct=It.sent()||void 0,[4,this._humanoidImporter.import($)];case 3:return(ut=It.sent()||void 0)?[4,this._firstPersonImporter.import($,ut)]:[3,5];case 4:return pt=It.sent()||void 0,[3,6];case 5:pt=void 0,It.label=6;case 6:return ht=pt,[4,this._blendShapeImporter.import($)];case 7:return mt=It.sent()||void 0,ht&&mt&&ut?[4,this._lookAtImporter.import($,ht,mt,ut)]:[3,9];case 8:return St=It.sent()||void 0,[3,10];case 9:St=void 0,It.label=10;case 10:return(bt=St).setupHelper&&bt.setupHelper(st,et),[4,this._springBoneImporter.import($)];case 11:return(Ft=It.sent()||void 0).setupHelper&&Ft.setupHelper(st,et),[2,new j.VRMDebug({scene:$.scene,meta:lt,materials:ct,humanoid:ut,firstPerson:ht,blendShapeProxy:mt,lookAt:bt,springBoneManager:Ft},et)]}})})},it}(tt.VRMImporter);c.VRMImporterDebug=rt},function(s,c,f){var d,h=this&&this.__extends||(d=function(j,_e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,rt){nt.__proto__=rt}||function(nt,rt){for(var at in rt)Object.prototype.hasOwnProperty.call(rt,at)&&(nt[at]=rt[at])})(j,_e)},function(j,_e){function nt(){this.constructor=j}d(j,_e),j.prototype=_e===null?Object.create(_e):(nt.prototype=_e.prototype,new nt)});Object.defineProperty(c,"__esModule",{value:!0}),c.VRMLookAtImporterDebug=void 0;var g=f(7),b=f(55),tt=function(j){function _e(){return j!==null&&j.apply(this,arguments)||this}return h(_e,j),_e.prototype.import=function(nt,rt,at,it){var $,et=($=nt.parser.json.extensions)===null||$===void 0?void 0:$.VRM;if(!et)return null;var st=et.firstPerson;if(!st)return null;var lt=this._importApplyer(st,at,it);return new b.VRMLookAtHeadDebug(rt,lt||void 0)},_e}(g.VRMLookAtImporter);c.VRMLookAtImporterDebug=tt},function(s,c,f){var d,h=this&&this.__extends||(d=function(_e,nt){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rt,at){rt.__proto__=at}||function(rt,at){for(var it in at)Object.prototype.hasOwnProperty.call(at,it)&&(rt[it]=at[it])})(_e,nt)},function(_e,nt){function rt(){this.constructor=_e}d(_e,nt),_e.prototype=nt===null?Object.create(nt):(rt.prototype=nt.prototype,new rt)});Object.defineProperty(c,"__esModule",{value:!0}),c.VRMLookAtHeadDebug=void 0;var g=f(0),b=f(3),tt=new g.Vector3,j=function(_e){function nt(){return _e!==null&&_e.apply(this,arguments)||this}return h(nt,_e),nt.prototype.setupHelper=function(rt,at){at.disableFaceDirectionHelper||(this._faceDirectionHelper=new g.ArrowHelper(new g.Vector3(0,0,-1),new g.Vector3(0,0,0),.5,16711935),rt.add(this._faceDirectionHelper))},nt.prototype.update=function(rt){_e.prototype.update.call(this,rt),this._faceDirectionHelper&&(this.firstPerson.getFirstPersonWorldPosition(this._faceDirectionHelper.position),this._faceDirectionHelper.setDirection(this.getLookAtWorldDirection(tt)))},nt}(b.VRMLookAtHead);c.VRMLookAtHeadDebug=j},function(s,c,f){var d,h=this&&this.__extends||(d=function(nt,rt){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,it){at.__proto__=it}||function(at,it){for(var $ in it)Object.prototype.hasOwnProperty.call(it,$)&&(at[$]=it[$])})(nt,rt)},function(nt,rt){function at(){this.constructor=nt}d(nt,rt),nt.prototype=rt===null?Object.create(rt):(at.prototype=rt.prototype,new at)});Object.defineProperty(c,"__esModule",{value:!0}),c.VRMSpringBoneManagerDebug=void 0;var g=f(0),b=f(10),tt=f(4),j=new g.MeshBasicMaterial({color:16711935,wireframe:!0,transparent:!0,depthTest:!1}),_e=function(nt){function rt(){return nt!==null&&nt.apply(this,arguments)||this}return h(rt,nt),rt.prototype.setupHelper=function(at,it){it.disableSpringBoneHelper||(this.springBoneGroupList.forEach(function($){$.forEach(function(et){if(et.getGizmo){var st=et.getGizmo();at.add(st)}})}),this.colliderGroups.forEach(function($){$.colliders.forEach(function(et){et.material=j,et.renderOrder=tt.VRM_GIZMO_RENDER_ORDER})}))},rt}(b.VRMSpringBoneManager);c.VRMSpringBoneManagerDebug=_e},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0})},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0})},function(s,c,f){var d=this&&this.__createBinding||(Object.create?function(g,b,tt,j){j===void 0&&(j=tt),Object.defineProperty(g,j,{enumerable:!0,get:function(){return b[tt]}})}:function(g,b,tt,j){j===void 0&&(j=tt),g[j]=b[tt]}),h=this&&this.__exportStar||function(g,b){for(var tt in g)tt==="default"||Object.prototype.hasOwnProperty.call(b,tt)||d(b,g,tt)};Object.defineProperty(c,"__esModule",{value:!0}),h(f(17),c),h(f(60),c),h(f(61),c),h(f(62),c),h(f(18),c),h(f(16),c)},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0})},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0})},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0})},function(s,c,f){var d=this&&this.__createBinding||(Object.create?function(g,b,tt,j){j===void 0&&(j=tt),Object.defineProperty(g,j,{enumerable:!0,get:function(){return b[tt]}})}:function(g,b,tt,j){j===void 0&&(j=tt),g[j]=b[tt]}),h=this&&this.__exportStar||function(g,b){for(var tt in g)tt==="default"||Object.prototype.hasOwnProperty.call(b,tt)||d(b,g,tt)};Object.defineProperty(c,"__esModule",{value:!0}),h(f(20),c),h(f(8),c),h(f(21),c),h(f(22),c),h(f(3),c),h(f(7),c)},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0}),c.VRMMetaImporterOptions=c.VRMMetaImporter=c.VRMMeta=void 0;var d=f(65);Object.defineProperty(c,"VRMMeta",{enumerable:!0,get:function(){return d.VRMMeta}});var h=f(26);Object.defineProperty(c,"VRMMetaImporter",{enumerable:!0,get:function(){return h.VRMMetaImporter}});var g=f(66);Object.defineProperty(c,"VRMMetaImporterOptions",{enumerable:!0,get:function(){return g.VRMMetaImporterOptions}})},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0})},function(s,c,f){Object.defineProperty(c,"__esModule",{value:!0})}])})})(threeVrm_module);var GLTFLoader=function(){function o(_t){Loader.call(this,_t),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(yt){return new d(yt)}),this.register(function(yt){return new g(yt)}),this.register(function(yt){return new b(yt)}),this.register(function(yt){return new h(yt)}),this.register(function(yt){return new c(yt)}),this.register(function(yt){return new tt(yt)})}o.prototype=Object.assign(Object.create(Loader.prototype),{constructor:o,load:function(_t,yt,At,wt){var Rt=this,Bt;this.resourcePath!==""?Bt=this.resourcePath:this.path!==""?Bt=this.path:Bt=LoaderUtils.extractUrlBase(_t),this.manager.itemStart(_t);var Lt=function(Dt){wt?wt(Dt):console.error(Dt),Rt.manager.itemError(_t),Rt.manager.itemEnd(_t)},Et=new FileLoader(this.manager);Et.setPath(this.path),Et.setResponseType("arraybuffer"),Et.setRequestHeader(this.requestHeader),Et.setWithCredentials(this.withCredentials),Et.load(_t,function(Dt){try{Rt.parse(Dt,Bt,function(Ht){yt(Ht),Rt.manager.itemEnd(_t)},Lt)}catch(Ht){Lt(Ht)}},At,Lt)},setDRACOLoader:function(_t){return this.dracoLoader=_t,this},setDDSLoader:function(_t){return this.ddsLoader=_t,this},setKTX2Loader:function(_t){return this.ktx2Loader=_t,this},setMeshoptDecoder:function(_t){return this.meshoptDecoder=_t,this},register:function(_t){return this.pluginCallbacks.indexOf(_t)===-1&&this.pluginCallbacks.push(_t),this},unregister:function(_t){return this.pluginCallbacks.indexOf(_t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(_t),1),this},parse:function(_t,yt,At,wt){var Rt,Bt={},Lt={};if(typeof _t=="string")Rt=_t;else{var Et=LoaderUtils.decodeText(new Uint8Array(_t,0,4));if(Et===j){try{Bt[a.KHR_BINARY_GLTF]=new rt(_t)}catch(Wt){wt&&wt(Wt);return}Rt=Bt[a.KHR_BINARY_GLTF].content}else Rt=LoaderUtils.decodeText(new Uint8Array(_t))}var Dt=JSON.parse(Rt);if(Dt.asset===void 0||Dt.asset.version[0]<2){wt&&wt(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}var Ht=new qt(Dt,{path:yt||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});Ht.fileLoader.setRequestHeader(this.requestHeader);for(var Ut=0;Ut<this.pluginCallbacks.length;Ut++){var xt=this.pluginCallbacks[Ut](Ht);Lt[xt.name]=xt,Bt[xt.name]=!0}if(Dt.extensionsUsed)for(var Ut=0;Ut<Dt.extensionsUsed.length;++Ut){var vt=Dt.extensionsUsed[Ut],Zt=Dt.extensionsRequired||[];switch(vt){case a.KHR_MATERIALS_UNLIT:Bt[vt]=new f;break;case a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:Bt[vt]=new et;break;case a.KHR_DRACO_MESH_COMPRESSION:Bt[vt]=new at(Dt,this.dracoLoader);break;case a.MSFT_TEXTURE_DDS:Bt[vt]=new s(this.ddsLoader);break;case a.KHR_TEXTURE_TRANSFORM:Bt[vt]=new it;break;case a.KHR_MESH_QUANTIZATION:Bt[vt]=new st;break;default:Zt.indexOf(vt)>=0&&Lt[vt]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+vt+'".')}}Ht.setExtensions(Bt),Ht.setPlugins(Lt),Ht.parse(At,wt)}});function e(){var _t={};return{get:function(yt){return _t[yt]},add:function(yt,At){_t[yt]=At},remove:function(yt){delete _t[yt]},removeAll:function(){_t={}}}}var a={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function s(_t){if(!_t)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=a.MSFT_TEXTURE_DDS,this.ddsLoader=_t}function c(_t){this.parser=_t,this.name=a.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}c.prototype._markDefs=function(){for(var _t=this.parser,yt=this.parser.json.nodes||[],At=0,wt=yt.length;At<wt;At++){var Rt=yt[At];Rt.extensions&&Rt.extensions[this.name]&&Rt.extensions[this.name].light!==void 0&&_t._addNodeRef(this.cache,Rt.extensions[this.name].light)}},c.prototype._loadLight=function(_t){var yt=this.parser,At="light:"+_t,wt=yt.cache.get(At);if(wt)return wt;var Rt=yt.json,Bt=Rt.extensions&&Rt.extensions[this.name]||{},Lt=Bt.lights||[],Et=Lt[_t],Dt,Ht=new Color(16777215);Et.color!==void 0&&Ht.fromArray(Et.color);var Ut=Et.range!==void 0?Et.range:0;switch(Et.type){case"directional":Dt=new DirectionalLight(Ht),Dt.target.position.set(0,0,-1),Dt.add(Dt.target);break;case"point":Dt=new PointLight(Ht),Dt.distance=Ut;break;case"spot":Dt=new SpotLight(Ht),Dt.distance=Ut,Et.spot=Et.spot||{},Et.spot.innerConeAngle=Et.spot.innerConeAngle!==void 0?Et.spot.innerConeAngle:0,Et.spot.outerConeAngle=Et.spot.outerConeAngle!==void 0?Et.spot.outerConeAngle:Math.PI/4,Dt.angle=Et.spot.outerConeAngle,Dt.penumbra=1-Et.spot.innerConeAngle/Et.spot.outerConeAngle,Dt.target.position.set(0,0,-1),Dt.add(Dt.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+Et.type)}return Dt.position.set(0,0,0),Dt.decay=2,Et.intensity!==void 0&&(Dt.intensity=Et.intensity),Dt.name=yt.createUniqueName(Et.name||"light_"+_t),wt=Promise.resolve(Dt),yt.cache.add(At,wt),wt},c.prototype.createNodeAttachment=function(_t){var yt=this,At=this.parser,wt=At.json,Rt=wt.nodes[_t],Bt=Rt.extensions&&Rt.extensions[this.name]||{},Lt=Bt.light;return Lt===void 0?null:this._loadLight(Lt).then(function(Et){return At._getNodeRef(yt.cache,Lt,Et)})};function f(){this.name=a.KHR_MATERIALS_UNLIT}f.prototype.getMaterialType=function(){return MeshBasicMaterial},f.prototype.extendParams=function(_t,yt,At){var wt=[];_t.color=new Color(1,1,1),_t.opacity=1;var Rt=yt.pbrMetallicRoughness;if(Rt){if(Array.isArray(Rt.baseColorFactor)){var Bt=Rt.baseColorFactor;_t.color.fromArray(Bt),_t.opacity=Bt[3]}Rt.baseColorTexture!==void 0&&wt.push(At.assignTexture(_t,"map",Rt.baseColorTexture))}return Promise.all(wt)};function d(_t){this.parser=_t,this.name=a.KHR_MATERIALS_CLEARCOAT}d.prototype.getMaterialType=function(_t){var yt=this.parser,At=yt.json.materials[_t];return!At.extensions||!At.extensions[this.name]?null:MeshPhysicalMaterial},d.prototype.extendMaterialParams=function(_t,yt){var At=this.parser,wt=At.json.materials[_t];if(!wt.extensions||!wt.extensions[this.name])return Promise.resolve();var Rt=[],Bt=wt.extensions[this.name];if(Bt.clearcoatFactor!==void 0&&(yt.clearcoat=Bt.clearcoatFactor),Bt.clearcoatTexture!==void 0&&Rt.push(At.assignTexture(yt,"clearcoatMap",Bt.clearcoatTexture)),Bt.clearcoatRoughnessFactor!==void 0&&(yt.clearcoatRoughness=Bt.clearcoatRoughnessFactor),Bt.clearcoatRoughnessTexture!==void 0&&Rt.push(At.assignTexture(yt,"clearcoatRoughnessMap",Bt.clearcoatRoughnessTexture)),Bt.clearcoatNormalTexture!==void 0&&(Rt.push(At.assignTexture(yt,"clearcoatNormalMap",Bt.clearcoatNormalTexture)),Bt.clearcoatNormalTexture.scale!==void 0)){var Lt=Bt.clearcoatNormalTexture.scale;yt.clearcoatNormalScale=new Vector2(Lt,-Lt)}return Promise.all(Rt)};function h(_t){this.parser=_t,this.name=a.KHR_MATERIALS_TRANSMISSION}h.prototype.getMaterialType=function(_t){var yt=this.parser,At=yt.json.materials[_t];return!At.extensions||!At.extensions[this.name]?null:MeshPhysicalMaterial},h.prototype.extendMaterialParams=function(_t,yt){var At=this.parser,wt=At.json.materials[_t];if(!wt.extensions||!wt.extensions[this.name])return Promise.resolve();var Rt=[],Bt=wt.extensions[this.name];return Bt.transmissionFactor!==void 0&&(yt.transmission=Bt.transmissionFactor),Bt.transmissionTexture!==void 0&&Rt.push(At.assignTexture(yt,"transmissionMap",Bt.transmissionTexture)),Promise.all(Rt)};function g(_t){this.parser=_t,this.name=a.KHR_TEXTURE_BASISU}g.prototype.loadTexture=function(_t){var yt=this.parser,At=yt.json,wt=At.textures[_t];if(!wt.extensions||!wt.extensions[this.name])return null;var Rt=wt.extensions[this.name],Bt=At.images[Rt.source],Lt=yt.options.ktx2Loader;if(!Lt){if(At.extensionsRequired&&At.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return yt.loadTextureImage(_t,Bt,Lt)};function b(_t){this.parser=_t,this.name=a.EXT_TEXTURE_WEBP,this.isSupported=null}b.prototype.loadTexture=function(_t){var yt=this.name,At=this.parser,wt=At.json,Rt=wt.textures[_t];if(!Rt.extensions||!Rt.extensions[yt])return null;var Bt=Rt.extensions[yt],Lt=wt.images[Bt.source],Et=Lt.uri?At.options.manager.getHandler(Lt.uri):At.textureLoader;return this.detectSupport().then(function(Dt){if(Dt)return At.loadTextureImage(_t,Lt,Et);if(wt.extensionsRequired&&wt.extensionsRequired.indexOf(yt)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return At.loadTexture(_t)})},b.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise(function(_t){var yt=new Image;yt.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",yt.onload=yt.onerror=function(){_t(yt.height===1)}})),this.isSupported};function tt(_t){this.name=a.EXT_MESHOPT_COMPRESSION,this.parser=_t}tt.prototype.loadBufferView=function(_t){var yt=this.parser.json,At=yt.bufferViews[_t];if(At.extensions&&At.extensions[this.name]){var wt=At.extensions[this.name],Rt=this.parser.getDependency("buffer",wt.buffer),Bt=this.parser.options.meshoptDecoder;if(!Bt||!Bt.supported){if(yt.extensionsRequired&&yt.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([Rt,Bt.ready]).then(function(Lt){var Et=wt.byteOffset||0,Dt=wt.byteLength||0,Ht=wt.count,Ut=wt.byteStride,xt=new ArrayBuffer(Ht*Ut),vt=new Uint8Array(Lt[0],Et,Dt);return Bt.decodeGltfBuffer(new Uint8Array(xt),Ht,Ut,vt,wt.mode,wt.filter),xt})}else return null};var j="glTF",_e=12,nt={JSON:1313821514,BIN:5130562};function rt(_t){this.name=a.KHR_BINARY_GLTF,this.content=null,this.body=null;var yt=new DataView(_t,0,_e);if(this.header={magic:LoaderUtils.decodeText(new Uint8Array(_t.slice(0,4))),version:yt.getUint32(4,!0),length:yt.getUint32(8,!0)},this.header.magic!==j)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var At=this.header.length-_e,wt=new DataView(_t,_e),Rt=0;Rt<At;){var Bt=wt.getUint32(Rt,!0);Rt+=4;var Lt=wt.getUint32(Rt,!0);if(Rt+=4,Lt===nt.JSON){var Et=new Uint8Array(_t,_e+Rt,Bt);this.content=LoaderUtils.decodeText(Et)}else if(Lt===nt.BIN){var Dt=_e+Rt;this.body=_t.slice(Dt,Dt+Bt)}Rt+=Bt}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function at(_t,yt){if(!yt)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=a.KHR_DRACO_MESH_COMPRESSION,this.json=_t,this.dracoLoader=yt,this.dracoLoader.preload()}at.prototype.decodePrimitive=function(_t,yt){var At=this.json,wt=this.dracoLoader,Rt=_t.extensions[this.name].bufferView,Bt=_t.extensions[this.name].attributes,Lt={},Et={},Dt={};for(var Ht in Bt){var Ut=bt[Ht]||Ht.toLowerCase();Lt[Ut]=Bt[Ht]}for(Ht in _t.attributes){var Ut=bt[Ht]||Ht.toLowerCase();if(Bt[Ht]!==void 0){var xt=At.accessors[_t.attributes[Ht]],vt=ut[xt.componentType];Dt[Ut]=vt,Et[Ut]=xt.normalized===!0}}return yt.getDependency("bufferView",Rt).then(function(Zt){return new Promise(function(Wt){wt.decodeDracoFile(Zt,function(Ot){for(var tn in Ot.attributes){var on=Ot.attributes[tn],ln=Et[tn];ln!==void 0&&(on.normalized=ln)}Wt(Ot)},Lt,Dt)})})};function it(){this.name=a.KHR_TEXTURE_TRANSFORM}it.prototype.extendTexture=function(_t,yt){return _t=_t.clone(),yt.offset!==void 0&&_t.offset.fromArray(yt.offset),yt.rotation!==void 0&&(_t.rotation=yt.rotation),yt.scale!==void 0&&_t.repeat.fromArray(yt.scale),yt.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),_t.needsUpdate=!0,_t};function $(_t){MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var yt=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),At=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),wt=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),Rt=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),Bt=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),Lt={specular:{value:new Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=Lt,this.onBeforeCompile=function(Et){for(var Dt in Lt)Et.uniforms[Dt]=Lt[Dt];Et.fragmentShader=Et.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",yt).replace("#include <metalnessmap_pars_fragment>",At).replace("#include <roughnessmap_fragment>",wt).replace("#include <metalnessmap_fragment>",Rt).replace("#include <lights_physical_fragment>",Bt)},Object.defineProperties(this,{specular:{get:function(){return Lt.specular.value},set:function(Et){Lt.specular.value=Et}},specularMap:{get:function(){return Lt.specularMap.value},set:function(Et){Lt.specularMap.value=Et,Et?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return Lt.glossiness.value},set:function(Et){Lt.glossiness.value=Et}},glossinessMap:{get:function(){return Lt.glossinessMap.value},set:function(Et){Lt.glossinessMap.value=Et,Et?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(_t)}$.prototype=Object.create(MeshStandardMaterial.prototype),$.prototype.constructor=$,$.prototype.copy=function(_t){return MeshStandardMaterial.prototype.copy.call(this,_t),this.specularMap=_t.specularMap,this.specular.copy(_t.specular),this.glossinessMap=_t.glossinessMap,this.glossiness=_t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this};function et(){return{name:a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return $},extendParams:function(_t,yt,At){var wt=yt.extensions[this.name];_t.color=new Color(1,1,1),_t.opacity=1;var Rt=[];if(Array.isArray(wt.diffuseFactor)){var Bt=wt.diffuseFactor;_t.color.fromArray(Bt),_t.opacity=Bt[3]}if(wt.diffuseTexture!==void 0&&Rt.push(At.assignTexture(_t,"map",wt.diffuseTexture)),_t.emissive=new Color(0,0,0),_t.glossiness=wt.glossinessFactor!==void 0?wt.glossinessFactor:1,_t.specular=new Color(1,1,1),Array.isArray(wt.specularFactor)&&_t.specular.fromArray(wt.specularFactor),wt.specularGlossinessTexture!==void 0){var Lt=wt.specularGlossinessTexture;Rt.push(At.assignTexture(_t,"glossinessMap",Lt)),Rt.push(At.assignTexture(_t,"specularMap",Lt))}return Promise.all(Rt)},createMaterial:function(_t){var yt=new $(_t);return yt.fog=!0,yt.color=_t.color,yt.map=_t.map===void 0?null:_t.map,yt.lightMap=null,yt.lightMapIntensity=1,yt.aoMap=_t.aoMap===void 0?null:_t.aoMap,yt.aoMapIntensity=1,yt.emissive=_t.emissive,yt.emissiveIntensity=1,yt.emissiveMap=_t.emissiveMap===void 0?null:_t.emissiveMap,yt.bumpMap=_t.bumpMap===void 0?null:_t.bumpMap,yt.bumpScale=1,yt.normalMap=_t.normalMap===void 0?null:_t.normalMap,yt.normalMapType=TangentSpaceNormalMap,_t.normalScale&&(yt.normalScale=_t.normalScale),yt.displacementMap=null,yt.displacementScale=1,yt.displacementBias=0,yt.specularMap=_t.specularMap===void 0?null:_t.specularMap,yt.specular=_t.specular,yt.glossinessMap=_t.glossinessMap===void 0?null:_t.glossinessMap,yt.glossiness=_t.glossiness,yt.alphaMap=null,yt.envMap=_t.envMap===void 0?null:_t.envMap,yt.envMapIntensity=1,yt.refractionRatio=.98,yt}}}function st(){this.name=a.KHR_MESH_QUANTIZATION}function lt(_t,yt,At,wt){Interpolant.call(this,_t,yt,At,wt)}lt.prototype=Object.create(Interpolant.prototype),lt.prototype.constructor=lt,lt.prototype.copySampleValue_=function(_t){for(var yt=this.resultBuffer,At=this.sampleValues,wt=this.valueSize,Rt=_t*wt*3+wt,Bt=0;Bt!==wt;Bt++)yt[Bt]=At[Rt+Bt];return yt},lt.prototype.beforeStart_=lt.prototype.copySampleValue_,lt.prototype.afterEnd_=lt.prototype.copySampleValue_,lt.prototype.interpolate_=function(_t,yt,At,wt){for(var Rt=this.resultBuffer,Bt=this.sampleValues,Lt=this.valueSize,Et=Lt*2,Dt=Lt*3,Ht=wt-yt,Ut=(At-yt)/Ht,xt=Ut*Ut,vt=xt*Ut,Zt=_t*Dt,Wt=Zt-Dt,Ot=-2*vt+3*xt,tn=vt-xt,on=1-Ot,ln=tn-xt+Ut,an=0;an!==Lt;an++){var pn=Bt[Wt+an+Lt],gn=Bt[Wt+an+Et]*Ht,Mn=Bt[Zt+an+Lt],fn=Bt[Zt+an]*Ht;Rt[an]=on*pn+ln*gn+Ot*Mn+tn*fn}return Rt};var ct={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ut={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ht={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},pt={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},mt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},bt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},St={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ft={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},It={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ct(_t,yt){return typeof _t!="string"||_t===""?"":(/^https?:\/\//i.test(yt)&&/^\//.test(_t)&&(yt=yt.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(_t)||/^data:.*,.*$/i.test(_t)||/^blob:.*$/i.test(_t)?_t:yt+_t)}function Pt(_t){return _t.DefaultMaterial===void 0&&(_t.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),_t.DefaultMaterial}function Nt(_t,yt,At){for(var wt in At.extensions)_t[wt]===void 0&&(yt.userData.gltfExtensions=yt.userData.gltfExtensions||{},yt.userData.gltfExtensions[wt]=At.extensions[wt])}function zt(_t,yt){yt.extras!==void 0&&(typeof yt.extras=="object"?Object.assign(_t.userData,yt.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+yt.extras))}function Xt(_t,yt,At){for(var wt=!1,Rt=!1,Bt=0,Lt=yt.length;Bt<Lt;Bt++){var Et=yt[Bt];if(Et.POSITION!==void 0&&(wt=!0),Et.NORMAL!==void 0&&(Rt=!0),wt&&Rt)break}if(!wt&&!Rt)return Promise.resolve(_t);for(var Dt=[],Ht=[],Bt=0,Lt=yt.length;Bt<Lt;Bt++){var Et=yt[Bt];if(wt){var Ut=Et.POSITION!==void 0?At.getDependency("accessor",Et.POSITION):_t.attributes.position;Dt.push(Ut)}if(Rt){var Ut=Et.NORMAL!==void 0?At.getDependency("accessor",Et.NORMAL):_t.attributes.normal;Ht.push(Ut)}}return Promise.all([Promise.all(Dt),Promise.all(Ht)]).then(function(xt){var vt=xt[0],Zt=xt[1];return wt&&(_t.morphAttributes.position=vt),Rt&&(_t.morphAttributes.normal=Zt),_t.morphTargetsRelative=!0,_t})}function en(_t,yt){if(_t.updateMorphTargets(),yt.weights!==void 0)for(var At=0,wt=yt.weights.length;At<wt;At++)_t.morphTargetInfluences[At]=yt.weights[At];if(yt.extras&&Array.isArray(yt.extras.targetNames)){var Rt=yt.extras.targetNames;if(_t.morphTargetInfluences.length===Rt.length){_t.morphTargetDictionary={};for(var At=0,wt=Rt.length;At<wt;At++)_t.morphTargetDictionary[Rt[At]]=At}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function rn(_t){var yt=_t.extensions&&_t.extensions[a.KHR_DRACO_MESH_COMPRESSION],At;return yt?At="draco:"+yt.bufferView+":"+yt.indices+":"+Gt(yt.attributes):At=_t.indices+":"+Gt(_t.attributes)+":"+_t.mode,At}function Gt(_t){for(var yt="",At=Object.keys(_t).sort(),wt=0,Rt=At.length;wt<Rt;wt++)yt+=At[wt]+":"+_t[At[wt]]+";";return yt}function qt(_t,yt){this.json=_t||{},this.extensions={},this.plugins={},this.options=yt||{},this.cache=new e,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new ImageBitmapLoader(this.options.manager):this.textureLoader=new TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}qt.prototype.setExtensions=function(_t){this.extensions=_t},qt.prototype.setPlugins=function(_t){this.plugins=_t},qt.prototype.parse=function(_t,yt){var At=this,wt=this.json,Rt=this.extensions;this.cache.removeAll(),this._invokeAll(function(Bt){return Bt._markDefs&&Bt._markDefs()}),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(Bt){var Lt={scene:Bt[0][wt.scene||0],scenes:Bt[0],animations:Bt[1],cameras:Bt[2],asset:wt.asset,parser:At,userData:{}};Nt(Rt,Lt,wt),zt(Lt,wt),_t(Lt)}).catch(yt)},qt.prototype._markDefs=function(){for(var _t=this.json.nodes||[],yt=this.json.skins||[],At=this.json.meshes||[],wt=0,Rt=yt.length;wt<Rt;wt++)for(var Bt=yt[wt].joints,Lt=0,Et=Bt.length;Lt<Et;Lt++)_t[Bt[Lt]].isBone=!0;for(var Dt=0,Ht=_t.length;Dt<Ht;Dt++){var Ut=_t[Dt];Ut.mesh!==void 0&&(this._addNodeRef(this.meshCache,Ut.mesh),Ut.skin!==void 0&&(At[Ut.mesh].isSkinnedMesh=!0)),Ut.camera!==void 0&&this._addNodeRef(this.cameraCache,Ut.camera)}},qt.prototype._addNodeRef=function(_t,yt){yt!==void 0&&(_t.refs[yt]===void 0&&(_t.refs[yt]=_t.uses[yt]=0),_t.refs[yt]++)},qt.prototype._getNodeRef=function(_t,yt,At){if(_t.refs[yt]<=1)return At;var wt=At.clone();return wt.name+="_instance_"+_t.uses[yt]++,wt},qt.prototype._invokeOne=function(_t){var yt=Object.values(this.plugins);yt.push(this);for(var At=0;At<yt.length;At++){var wt=_t(yt[At]);if(wt)return wt}},qt.prototype._invokeAll=function(_t){var yt=Object.values(this.plugins);yt.unshift(this);for(var At=[],wt=0;wt<yt.length;wt++){var Rt=_t(yt[wt]);Rt&&At.push(Rt)}return At},qt.prototype.getDependency=function(_t,yt){var At=_t+":"+yt,wt=this.cache.get(At);if(!wt){switch(_t){case"scene":wt=this.loadScene(yt);break;case"node":wt=this.loadNode(yt);break;case"mesh":wt=this._invokeOne(function(Rt){return Rt.loadMesh&&Rt.loadMesh(yt)});break;case"accessor":wt=this.loadAccessor(yt);break;case"bufferView":wt=this._invokeOne(function(Rt){return Rt.loadBufferView&&Rt.loadBufferView(yt)});break;case"buffer":wt=this.loadBuffer(yt);break;case"material":wt=this._invokeOne(function(Rt){return Rt.loadMaterial&&Rt.loadMaterial(yt)});break;case"texture":wt=this._invokeOne(function(Rt){return Rt.loadTexture&&Rt.loadTexture(yt)});break;case"skin":wt=this.loadSkin(yt);break;case"animation":wt=this.loadAnimation(yt);break;case"camera":wt=this.loadCamera(yt);break;default:throw new Error("Unknown type: "+_t)}this.cache.add(At,wt)}return wt},qt.prototype.getDependencies=function(_t){var yt=this.cache.get(_t);if(!yt){var At=this,wt=this.json[_t+(_t==="mesh"?"es":"s")]||[];yt=Promise.all(wt.map(function(Rt,Bt){return At.getDependency(_t,Bt)})),this.cache.add(_t,yt)}return yt},qt.prototype.loadBuffer=function(_t){var yt=this.json.buffers[_t],At=this.fileLoader;if(yt.type&&yt.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+yt.type+" buffer type is not supported.");if(yt.uri===void 0&&_t===0)return Promise.resolve(this.extensions[a.KHR_BINARY_GLTF].body);var wt=this.options;return new Promise(function(Rt,Bt){At.load(Ct(yt.uri,wt.path),Rt,void 0,function(){Bt(new Error('THREE.GLTFLoader: Failed to load buffer "'+yt.uri+'".'))})})},qt.prototype.loadBufferView=function(_t){var yt=this.json.bufferViews[_t];return this.getDependency("buffer",yt.buffer).then(function(At){var wt=yt.byteLength||0,Rt=yt.byteOffset||0;return At.slice(Rt,Rt+wt)})},qt.prototype.loadAccessor=function(_t){var yt=this,At=this.json,wt=this.json.accessors[_t];if(wt.bufferView===void 0&&wt.sparse===void 0)return Promise.resolve(null);var Rt=[];return wt.bufferView!==void 0?Rt.push(this.getDependency("bufferView",wt.bufferView)):Rt.push(null),wt.sparse!==void 0&&(Rt.push(this.getDependency("bufferView",wt.sparse.indices.bufferView)),Rt.push(this.getDependency("bufferView",wt.sparse.values.bufferView))),Promise.all(Rt).then(function(Bt){var Lt=Bt[0],Et=mt[wt.type],Dt=ut[wt.componentType],Ht=Dt.BYTES_PER_ELEMENT,Ut=Ht*Et,xt=wt.byteOffset||0,vt=wt.bufferView!==void 0?At.bufferViews[wt.bufferView].byteStride:void 0,Zt=wt.normalized===!0,Wt,Ot;if(vt&&vt!==Ut){var tn=Math.floor(xt/vt),on="InterleavedBuffer:"+wt.bufferView+":"+wt.componentType+":"+tn+":"+wt.count,ln=yt.cache.get(on);ln||(Wt=new Dt(Lt,tn*vt,wt.count*vt/Ht),ln=new InterleavedBuffer(Wt,vt/Ht),yt.cache.add(on,ln)),Ot=new InterleavedBufferAttribute(ln,Et,xt%vt/Ht,Zt)}else Lt===null?Wt=new Dt(wt.count*Et):Wt=new Dt(Lt,xt,wt.count*Et),Ot=new BufferAttribute(Wt,Et,Zt);if(wt.sparse!==void 0){var an=mt.SCALAR,pn=ut[wt.sparse.indices.componentType],gn=wt.sparse.indices.byteOffset||0,Mn=wt.sparse.values.byteOffset||0,fn=new pn(Bt[1],gn,wt.sparse.count*an),vn=new Dt(Bt[2],Mn,wt.sparse.count*Et);Lt!==null&&(Ot=new BufferAttribute(Ot.array.slice(),Ot.itemSize,Ot.normalized));for(var Tn=0,Wn=fn.length;Tn<Wn;Tn++){var fr=fn[Tn];if(Ot.setX(fr,vn[Tn*Et]),Et>=2&&Ot.setY(fr,vn[Tn*Et+1]),Et>=3&&Ot.setZ(fr,vn[Tn*Et+2]),Et>=4&&Ot.setW(fr,vn[Tn*Et+3]),Et>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Ot})},qt.prototype.loadTexture=function(_t){var yt=this,At=this.json,wt=this.options,Rt=At.textures[_t],Bt=Rt.extensions||{},Lt;Bt[a.MSFT_TEXTURE_DDS]?Lt=At.images[Bt[a.MSFT_TEXTURE_DDS].source]:Lt=At.images[Rt.source];var Et;return Lt.uri&&(Et=wt.manager.getHandler(Lt.uri)),Et||(Et=Bt[a.MSFT_TEXTURE_DDS]?yt.extensions[a.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(_t,Lt,Et)},qt.prototype.loadTextureImage=function(_t,yt,At){var wt=this,Rt=this.json,Bt=this.options,Lt=Rt.textures[_t],Et=self.URL||self.webkitURL,Dt=yt.uri,Ht=!1,Ut=!0;return yt.mimeType==="image/jpeg"&&(Ut=!1),yt.bufferView!==void 0&&(Dt=wt.getDependency("bufferView",yt.bufferView).then(function(xt){if(yt.mimeType==="image/png"){var vt=new DataView(xt,25,1).getUint8(0,!1);Ut=vt===6||vt===4||vt===3}Ht=!0;var Zt=new Blob([xt],{type:yt.mimeType});return Dt=Et.createObjectURL(Zt),Dt})),Promise.resolve(Dt).then(function(xt){return new Promise(function(vt,Zt){var Wt=vt;At.isImageBitmapLoader===!0&&(Wt=function(Ot){vt(new CanvasTexture(Ot))}),At.load(Ct(xt,Bt.path),Wt,void 0,Zt)})}).then(function(xt){Ht===!0&&Et.revokeObjectURL(Dt),xt.flipY=!1,Lt.name&&(xt.name=Lt.name),Ut||(xt.format=RGBFormat);var vt=Rt.samplers||{},Zt=vt[Lt.sampler]||{};return xt.magFilter=ht[Zt.magFilter]||LinearFilter,xt.minFilter=ht[Zt.minFilter]||LinearMipmapLinearFilter,xt.wrapS=pt[Zt.wrapS]||RepeatWrapping,xt.wrapT=pt[Zt.wrapT]||RepeatWrapping,wt.associations.set(xt,{type:"textures",index:_t}),xt})},qt.prototype.assignTexture=function(_t,yt,At){var wt=this;return this.getDependency("texture",At.index).then(function(Rt){if(At.texCoord!==void 0&&At.texCoord!=0&&!(yt==="aoMap"&&At.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+At.texCoord+" for texture "+yt+" not yet supported."),wt.extensions[a.KHR_TEXTURE_TRANSFORM]){var Bt=At.extensions!==void 0?At.extensions[a.KHR_TEXTURE_TRANSFORM]:void 0;if(Bt){var Lt=wt.associations.get(Rt);Rt=wt.extensions[a.KHR_TEXTURE_TRANSFORM].extendTexture(Rt,Bt),wt.associations.set(Rt,Lt)}}_t[yt]=Rt})},qt.prototype.assignFinalMaterial=function(_t){var yt=_t.geometry,At=_t.material,wt=yt.attributes.tangent!==void 0,Rt=yt.attributes.color!==void 0,Bt=yt.attributes.normal===void 0,Lt=_t.isSkinnedMesh===!0,Et=Object.keys(yt.morphAttributes).length>0,Dt=Et&&yt.morphAttributes.normal!==void 0;if(_t.isPoints){var Ht="PointsMaterial:"+At.uuid,Ut=this.cache.get(Ht);Ut||(Ut=new PointsMaterial,Material.prototype.copy.call(Ut,At),Ut.color.copy(At.color),Ut.map=At.map,Ut.sizeAttenuation=!1,this.cache.add(Ht,Ut)),At=Ut}else if(_t.isLine){var Ht="LineBasicMaterial:"+At.uuid,xt=this.cache.get(Ht);xt||(xt=new LineBasicMaterial,Material.prototype.copy.call(xt,At),xt.color.copy(At.color),this.cache.add(Ht,xt)),At=xt}if(wt||Rt||Bt||Lt||Et){var Ht="ClonedMaterial:"+At.uuid+":";At.isGLTFSpecularGlossinessMaterial&&(Ht+="specular-glossiness:"),Lt&&(Ht+="skinning:"),wt&&(Ht+="vertex-tangents:"),Rt&&(Ht+="vertex-colors:"),Bt&&(Ht+="flat-shading:"),Et&&(Ht+="morph-targets:"),Dt&&(Ht+="morph-normals:");var vt=this.cache.get(Ht);vt||(vt=At.clone(),Lt&&(vt.skinning=!0),Rt&&(vt.vertexColors=!0),Bt&&(vt.flatShading=!0),Et&&(vt.morphTargets=!0),Dt&&(vt.morphNormals=!0),wt&&(vt.vertexTangents=!0,vt.normalScale&&(vt.normalScale.y*=-1),vt.clearcoatNormalScale&&(vt.clearcoatNormalScale.y*=-1)),this.cache.add(Ht,vt),this.associations.set(vt,this.associations.get(At))),At=vt}At.aoMap&&yt.attributes.uv2===void 0&&yt.attributes.uv!==void 0&&yt.setAttribute("uv2",yt.attributes.uv),_t.material=At},qt.prototype.getMaterialType=function(){return MeshStandardMaterial},qt.prototype.loadMaterial=function(_t){var yt=this,At=this.json,wt=this.extensions,Rt=At.materials[_t],Bt,Lt={},Et=Rt.extensions||{},Dt=[];if(Et[a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var Ht=wt[a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];Bt=Ht.getMaterialType(),Dt.push(Ht.extendParams(Lt,Rt,yt))}else if(Et[a.KHR_MATERIALS_UNLIT]){var Ut=wt[a.KHR_MATERIALS_UNLIT];Bt=Ut.getMaterialType(),Dt.push(Ut.extendParams(Lt,Rt,yt))}else{var xt=Rt.pbrMetallicRoughness||{};if(Lt.color=new Color(1,1,1),Lt.opacity=1,Array.isArray(xt.baseColorFactor)){var vt=xt.baseColorFactor;Lt.color.fromArray(vt),Lt.opacity=vt[3]}xt.baseColorTexture!==void 0&&Dt.push(yt.assignTexture(Lt,"map",xt.baseColorTexture)),Lt.metalness=xt.metallicFactor!==void 0?xt.metallicFactor:1,Lt.roughness=xt.roughnessFactor!==void 0?xt.roughnessFactor:1,xt.metallicRoughnessTexture!==void 0&&(Dt.push(yt.assignTexture(Lt,"metalnessMap",xt.metallicRoughnessTexture)),Dt.push(yt.assignTexture(Lt,"roughnessMap",xt.metallicRoughnessTexture))),Bt=this._invokeOne(function(Wt){return Wt.getMaterialType&&Wt.getMaterialType(_t)}),Dt.push(Promise.all(this._invokeAll(function(Wt){return Wt.extendMaterialParams&&Wt.extendMaterialParams(_t,Lt)})))}Rt.doubleSided===!0&&(Lt.side=DoubleSide);var Zt=Rt.alphaMode||It.OPAQUE;return Zt===It.BLEND?(Lt.transparent=!0,Lt.depthWrite=!1):(Lt.transparent=!1,Zt===It.MASK&&(Lt.alphaTest=Rt.alphaCutoff!==void 0?Rt.alphaCutoff:.5)),Rt.normalTexture!==void 0&&Bt!==MeshBasicMaterial&&(Dt.push(yt.assignTexture(Lt,"normalMap",Rt.normalTexture)),Lt.normalScale=new Vector2(1,-1),Rt.normalTexture.scale!==void 0&&Lt.normalScale.set(Rt.normalTexture.scale,-Rt.normalTexture.scale)),Rt.occlusionTexture!==void 0&&Bt!==MeshBasicMaterial&&(Dt.push(yt.assignTexture(Lt,"aoMap",Rt.occlusionTexture)),Rt.occlusionTexture.strength!==void 0&&(Lt.aoMapIntensity=Rt.occlusionTexture.strength)),Rt.emissiveFactor!==void 0&&Bt!==MeshBasicMaterial&&(Lt.emissive=new Color().fromArray(Rt.emissiveFactor)),Rt.emissiveTexture!==void 0&&Bt!==MeshBasicMaterial&&Dt.push(yt.assignTexture(Lt,"emissiveMap",Rt.emissiveTexture)),Promise.all(Dt).then(function(){var Wt;return Bt===$?Wt=wt[a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(Lt):Wt=new Bt(Lt),Rt.name&&(Wt.name=Rt.name),Wt.map&&(Wt.map.encoding=sRGBEncoding),Wt.emissiveMap&&(Wt.emissiveMap.encoding=sRGBEncoding),zt(Wt,Rt),yt.associations.set(Wt,{type:"materials",index:_t}),Rt.extensions&&Nt(wt,Wt,Rt),Wt})},qt.prototype.createUniqueName=function(_t){for(var yt=PropertyBinding.sanitizeNodeName(_t||""),At=yt,wt=1;this.nodeNamesUsed[At];++wt)At=yt+"_"+wt;return this.nodeNamesUsed[At]=!0,At};function sn(_t,yt,At){var wt=yt.attributes,Rt=new Box3;if(wt.POSITION!==void 0){var Bt=At.json.accessors[wt.POSITION],Lt=Bt.min,Et=Bt.max;if(Lt!==void 0&&Et!==void 0)Rt.set(new Vector3(Lt[0],Lt[1],Lt[2]),new Vector3(Et[0],Et[1],Et[2]));else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;var Dt=yt.targets;if(Dt!==void 0){for(var Ht=new Vector3,Ut=new Vector3,xt=0,vt=Dt.length;xt<vt;xt++){var Zt=Dt[xt];if(Zt.POSITION!==void 0){var Bt=At.json.accessors[Zt.POSITION],Lt=Bt.min,Et=Bt.max;Lt!==void 0&&Et!==void 0?(Ut.setX(Math.max(Math.abs(Lt[0]),Math.abs(Et[0]))),Ut.setY(Math.max(Math.abs(Lt[1]),Math.abs(Et[1]))),Ut.setZ(Math.max(Math.abs(Lt[2]),Math.abs(Et[2]))),Ht.max(Ut)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}Rt.expandByVector(Ht)}_t.boundingBox=Rt;var Wt=new Sphere;Rt.getCenter(Wt.center),Wt.radius=Rt.min.distanceTo(Rt.max)/2,_t.boundingSphere=Wt}function yn(_t,yt,At){var wt=yt.attributes,Rt=[];function Bt(Ht,Ut){return At.getDependency("accessor",Ht).then(function(xt){_t.setAttribute(Ut,xt)})}for(var Lt in wt){var Et=bt[Lt]||Lt.toLowerCase();Et in _t.attributes||Rt.push(Bt(wt[Lt],Et))}if(yt.indices!==void 0&&!_t.index){var Dt=At.getDependency("accessor",yt.indices).then(function(Ht){_t.setIndex(Ht)});Rt.push(Dt)}return zt(_t,yt),sn(_t,yt,At),Promise.all(Rt).then(function(){return yt.targets!==void 0?Xt(_t,yt.targets,At):_t})}function Yt(_t,yt){var At=_t.getIndex();if(At===null){var wt=[],Rt=_t.getAttribute("position");if(Rt!==void 0){for(var Bt=0;Bt<Rt.count;Bt++)wt.push(Bt);_t.setIndex(wt),At=_t.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),_t}var Lt=At.count-2,Et=[];if(yt===TriangleFanDrawMode)for(var Bt=1;Bt<=Lt;Bt++)Et.push(At.getX(0)),Et.push(At.getX(Bt)),Et.push(At.getX(Bt+1));else for(var Bt=0;Bt<Lt;Bt++)Bt%2===0?(Et.push(At.getX(Bt)),Et.push(At.getX(Bt+1)),Et.push(At.getX(Bt+2))):(Et.push(At.getX(Bt+2)),Et.push(At.getX(Bt+1)),Et.push(At.getX(Bt)));Et.length/3!==Lt&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var Dt=_t.clone();return Dt.setIndex(Et),Dt}return qt.prototype.loadGeometries=function(_t){var yt=this,At=this.extensions,wt=this.primitiveCache;function Rt(vt){return At[a.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(vt,yt).then(function(Zt){return yn(Zt,vt,yt)})}for(var Bt=[],Lt=0,Et=_t.length;Lt<Et;Lt++){var Dt=_t[Lt],Ht=rn(Dt),Ut=wt[Ht];if(Ut)Bt.push(Ut.promise);else{var xt;Dt.extensions&&Dt.extensions[a.KHR_DRACO_MESH_COMPRESSION]?xt=Rt(Dt):xt=yn(new BufferGeometry,Dt,yt),wt[Ht]={primitive:Dt,promise:xt},Bt.push(xt)}}return Promise.all(Bt)},qt.prototype.loadMesh=function(_t){for(var yt=this,At=this.json,wt=this.extensions,Rt=At.meshes[_t],Bt=Rt.primitives,Lt=[],Et=0,Dt=Bt.length;Et<Dt;Et++){var Ht=Bt[Et].material===void 0?Pt(this.cache):this.getDependency("material",Bt[Et].material);Lt.push(Ht)}return Lt.push(yt.loadGeometries(Bt)),Promise.all(Lt).then(function(Ut){for(var xt=Ut.slice(0,Ut.length-1),vt=Ut[Ut.length-1],Zt=[],Wt=0,Ot=vt.length;Wt<Ot;Wt++){var tn=vt[Wt],on=Bt[Wt],ln,an=xt[Wt];if(on.mode===ct.TRIANGLES||on.mode===ct.TRIANGLE_STRIP||on.mode===ct.TRIANGLE_FAN||on.mode===void 0)ln=Rt.isSkinnedMesh===!0?new SkinnedMesh(tn,an):new Mesh(tn,an),an.isMeshStandardMaterial===!0&&an.side===DoubleSide&&tn.getIndex()!==null&&tn.hasAttribute("position")===!0&&tn.hasAttribute("normal")===!0&&tn.hasAttribute("uv")===!0&&tn.hasAttribute("tangent")===!1&&(tn.computeTangents(),an.vertexTangents=!0),ln.isSkinnedMesh===!0&&!ln.geometry.attributes.skinWeight.normalized&&ln.normalizeSkinWeights(),on.mode===ct.TRIANGLE_STRIP?ln.geometry=Yt(ln.geometry,TriangleStripDrawMode):on.mode===ct.TRIANGLE_FAN&&(ln.geometry=Yt(ln.geometry,TriangleFanDrawMode));else if(on.mode===ct.LINES)ln=new LineSegments(tn,an);else if(on.mode===ct.LINE_STRIP)ln=new Line(tn,an);else if(on.mode===ct.LINE_LOOP)ln=new LineLoop(tn,an);else if(on.mode===ct.POINTS)ln=new Points(tn,an);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+on.mode);Object.keys(ln.geometry.morphAttributes).length>0&&en(ln,Rt),ln.name=yt.createUniqueName(Rt.name||"mesh_"+_t),zt(ln,Rt),on.extensions&&Nt(wt,ln,on),yt.assignFinalMaterial(ln),Zt.push(ln)}if(Zt.length===1)return Zt[0];for(var pn=new Group,Wt=0,Ot=Zt.length;Wt<Ot;Wt++)pn.add(Zt[Wt]);return pn})},qt.prototype.loadCamera=function(_t){var yt,At=this.json.cameras[_t],wt=At[At.type];if(!wt){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return At.type==="perspective"?yt=new PerspectiveCamera(MathUtils.radToDeg(wt.yfov),wt.aspectRatio||1,wt.znear||1,wt.zfar||2e6):At.type==="orthographic"&&(yt=new OrthographicCamera(-wt.xmag,wt.xmag,wt.ymag,-wt.ymag,wt.znear,wt.zfar)),At.name&&(yt.name=this.createUniqueName(At.name)),zt(yt,At),Promise.resolve(yt)},qt.prototype.loadSkin=function(_t){var yt=this.json.skins[_t],At={joints:yt.joints};return yt.inverseBindMatrices===void 0?Promise.resolve(At):this.getDependency("accessor",yt.inverseBindMatrices).then(function(wt){return At.inverseBindMatrices=wt,At})},qt.prototype.loadAnimation=function(_t){for(var yt=this.json,At=yt.animations[_t],wt=[],Rt=[],Bt=[],Lt=[],Et=[],Dt=0,Ht=At.channels.length;Dt<Ht;Dt++){var Ut=At.channels[Dt],xt=At.samplers[Ut.sampler],vt=Ut.target,Zt=vt.node!==void 0?vt.node:vt.id,Wt=At.parameters!==void 0?At.parameters[xt.input]:xt.input,Ot=At.parameters!==void 0?At.parameters[xt.output]:xt.output;wt.push(this.getDependency("node",Zt)),Rt.push(this.getDependency("accessor",Wt)),Bt.push(this.getDependency("accessor",Ot)),Lt.push(xt),Et.push(vt)}return Promise.all([Promise.all(wt),Promise.all(Rt),Promise.all(Bt),Promise.all(Lt),Promise.all(Et)]).then(function(tn){for(var on=tn[0],ln=tn[1],an=tn[2],pn=tn[3],gn=tn[4],Mn=[],fn=0,vn=on.length;fn<vn;fn++){var Tn=on[fn],Wn=ln[fn],fr=an[fn],no=pn[fn],zr=gn[fn];if(Tn!==void 0){Tn.updateMatrix(),Tn.matrixAutoUpdate=!0;var Hr;switch(St[zr.path]){case St.weights:Hr=NumberKeyframeTrack;break;case St.rotation:Hr=QuaternionKeyframeTrack;break;case St.position:case St.scale:default:Hr=VectorKeyframeTrack;break}var ro=Tn.name?Tn.name:Tn.uuid,Ro=no.interpolation!==void 0?Ft[no.interpolation]:InterpolateLinear,dr=[];St[zr.path]===St.weights?Tn.traverse(function(Mt){Mt.isMesh===!0&&Mt.morphTargetInfluences&&dr.push(Mt.name?Mt.name:Mt.uuid)}):dr.push(ro);var rr=fr.array;if(fr.normalized){var br;if(rr.constructor===Int8Array)br=1/127;else if(rr.constructor===Uint8Array)br=1/255;else if(rr.constructor==Int16Array)br=1/32767;else if(rr.constructor===Uint16Array)br=1/65535;else throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");for(var io=new Float32Array(rr.length),Xn=0,jr=rr.length;Xn<jr;Xn++)io[Xn]=rr[Xn]*br;rr=io}for(var Xn=0,jr=dr.length;Xn<jr;Xn++){var Pr=new Hr(dr[Xn]+"."+St[zr.path],Wn.array,rr,Ro);no.interpolation==="CUBICSPLINE"&&(Pr.createInterpolant=function(nn){return new lt(this.times,this.values,this.getValueSize()/3,nn)},Pr.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Mn.push(Pr)}}}var Co=At.name?At.name:"animation_"+_t;return new AnimationClip(Co,void 0,Mn)})},qt.prototype.loadNode=function(_t){var yt=this.json,At=this.extensions,wt=this,Rt=yt.nodes[_t],Bt=Rt.name?wt.createUniqueName(Rt.name):"";return function(){var Lt=[];return Rt.mesh!==void 0&&Lt.push(wt.getDependency("mesh",Rt.mesh).then(function(Et){var Dt=wt._getNodeRef(wt.meshCache,Rt.mesh,Et);return Rt.weights!==void 0&&Dt.traverse(function(Ht){if(!!Ht.isMesh)for(var Ut=0,xt=Rt.weights.length;Ut<xt;Ut++)Ht.morphTargetInfluences[Ut]=Rt.weights[Ut]}),Dt})),Rt.camera!==void 0&&Lt.push(wt.getDependency("camera",Rt.camera).then(function(Et){return wt._getNodeRef(wt.cameraCache,Rt.camera,Et)})),wt._invokeAll(function(Et){return Et.createNodeAttachment&&Et.createNodeAttachment(_t)}).forEach(function(Et){Lt.push(Et)}),Promise.all(Lt)}().then(function(Lt){var Et;if(Rt.isBone===!0?Et=new Bone:Lt.length>1?Et=new Group:Lt.length===1?Et=Lt[0]:Et=new Object3D,Et!==Lt[0])for(var Dt=0,Ht=Lt.length;Dt<Ht;Dt++)Et.add(Lt[Dt]);if(Rt.name&&(Et.userData.name=Rt.name,Et.name=Bt),zt(Et,Rt),Rt.extensions&&Nt(At,Et,Rt),Rt.matrix!==void 0){var Ut=new Matrix4;Ut.fromArray(Rt.matrix),Et.applyMatrix4(Ut)}else Rt.translation!==void 0&&Et.position.fromArray(Rt.translation),Rt.rotation!==void 0&&Et.quaternion.fromArray(Rt.rotation),Rt.scale!==void 0&&Et.scale.fromArray(Rt.scale);return wt.associations.set(Et,{type:"nodes",index:_t}),Et})},qt.prototype.loadScene=function(){function _t(yt,At,wt,Rt){var Bt=wt.nodes[yt];return Rt.getDependency("node",yt).then(function(Lt){if(Bt.skin===void 0)return Lt;var Et;return Rt.getDependency("skin",Bt.skin).then(function(Dt){Et=Dt;for(var Ht=[],Ut=0,xt=Et.joints.length;Ut<xt;Ut++)Ht.push(Rt.getDependency("node",Et.joints[Ut]));return Promise.all(Ht)}).then(function(Dt){return Lt.traverse(function(Ht){if(!!Ht.isMesh){for(var Ut=[],xt=[],vt=0,Zt=Dt.length;vt<Zt;vt++){var Wt=Dt[vt];if(Wt){Ut.push(Wt);var Ot=new Matrix4;Et.inverseBindMatrices!==void 0&&Ot.fromArray(Et.inverseBindMatrices.array,vt*16),xt.push(Ot)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Et.joints[vt])}Ht.bind(new Skeleton(Ut,xt),Ht.matrixWorld)}}),Lt})}).then(function(Lt){At.add(Lt);var Et=[];if(Bt.children)for(var Dt=Bt.children,Ht=0,Ut=Dt.length;Ht<Ut;Ht++){var xt=Dt[Ht];Et.push(_t(xt,Lt,wt,Rt))}return Promise.all(Et)})}return function(At){var wt=this.json,Rt=this.extensions,Bt=this.json.scenes[At],Lt=this,Et=new Group;Bt.name&&(Et.name=Lt.createUniqueName(Bt.name)),zt(Et,Bt),Bt.extensions&&Nt(Rt,Et,Bt);for(var Dt=Bt.nodes||[],Ht=[],Ut=0,xt=Dt.length;Ut<xt;Ut++)Ht.push(_t(Dt[Ut],Et,wt,Lt));return Promise.all(Ht).then(function(){return Et})}}(),o}();const useVrm=()=>{const{camera:o}=useThree(),{current:e}=react.exports.useRef(new GLTFLoader),[a,s]=react.exports.useState(),c=f=>{e.load(f,async d=>{const h=await threeVrm_module.exports.VRM.from(d);h.scene.rotation.y=Math.PI,s(h)},d=>console.log("Loading model...",100*(d.loaded/d.total),"%"),d=>console.error(d))};return react.exports.useEffect(()=>{!a||!a.lookAt||(a.lookAt.target=o)},[o,a]),{vrm:a,loadVrm:c}},updateVrm=(o,e,a,s)=>{if(o.humanoid){const c=o.humanoid.getBoneNode(threeVrm_module.exports.VRMSchema.HumanoidBoneName.Chest),f=o.humanoid.getBoneNode(threeVrm_module.exports.VRMSchema.HumanoidBoneName.UpperChest),d=o.humanoid.getBoneNode(threeVrm_module.exports.VRMSchema.HumanoidBoneName.LeftShoulder),h=o.humanoid.getBoneNode(threeVrm_module.exports.VRMSchema.HumanoidBoneName.RightShoulder),g=o.humanoid.getBoneNode(threeVrm_module.exports.VRMSchema.HumanoidBoneName.Neck),b=o.humanoid.getBoneNode(threeVrm_module.exports.VRMSchema.HumanoidBoneName.Head),tt=o.humanoid.getBoneNode(threeVrm_module.exports.VRMSchema.HumanoidBoneName.Jaw);b&&(b.rotation.x=e.headRotationX,b.rotation.y=e.headRotationY,b.rotation.z=e.headRotationZ),tt&&(tt.rotation.x=e.jawRotationX,tt.rotation.y=e.jawRotationY),g&&(g.rotation.x=e.neckRotationX,g.rotation.y=e.neckRotationY),d&&(d.rotation.y=0,d.rotation.x=0,d.rotation.z=0),h&&(h.rotation.y=0,h.rotation.x=0,h.rotation.z=0),c&&(c.rotation.x=0,c.rotation.y=0),f&&(f.rotation.x=e.upperChestX,f.rotation.y=e.upperChestY,f.rotation.z=e.upperChestZ)}o.blendShapeProxy&&(o.blendShapeProxy.setValue("blink_l",e.blinkLeftValue),o.blendShapeProxy.setValue("blink_r",e.blinkRightValue),o.blendShapeProxy.setValue("a",e.aValue),o.blendShapeProxy.setValue("e",e.eValue),o.blendShapeProxy.setValue("i",e.iValue),o.blendShapeProxy.setValue("o",e.oValue),o.blendShapeProxy.setValue("u",e.uValue),o.blendShapeProxy.setValue("angry",e.angryValue),o.blendShapeProxy.setValue("fun",e.funValue),o.blendShapeProxy.setValue("joy",e.joyValue),o.blendShapeProxy.setValue("neutral",e.neutralValue),o.blendShapeProxy.setValue("sorrow",e.sorrowValue)),o.lookAt&&o.lookAt.lookAt(s.set(e.lookAtX,e.lookAtY,e.lookAtZ)),o.update(a)},initialVrmState={aValue:0,angryValue:0,blinkLeftValue:0,blinkRightValue:0,eValue:0,funValue:0,headRotationX:0,headRotationY:0,headRotationZ:0,iValue:0,jawRotationX:0,jawRotationY:0,joyValue:0,lookAtX:0,lookAtY:0,lookAtZ:0,neckRotationX:0,neckRotationY:0,neutralValue:0,oValue:0,sorrowValue:0,upperChestX:0,upperChestY:0,upperChestZ:0,uValue:0},useVrmStore=create$2(o=>({vrmState:initialVrmState,updateVrmState:e=>o({vrmState:e})})),Vrm=({vrm:o})=>{const[e]=react.exports.useState(()=>new Vector3);return useFrame((a,s)=>{const c=useVrmStore.getState().vrmState;updateVrm(o,c,s,e)}),React.createElement("primitive",{object:o.scene})},Stars=({count:o=5e3})=>{const e=react.exports.useMemo(()=>{const a=[];for(let s=0;s<o;s++)a.push((50+Math.random()*1e3)*(Math.round(Math.random())?-1:1)),a.push((50+Math.random()*1e3)*(Math.round(Math.random())?-1:1)),a.push((50+Math.random()*1e3)*(Math.round(Math.random())?-1:1));return new Float32Array(a)},[o]);return React.createElement("points",null,React.createElement("bufferGeometry",{attach:"geometry"},React.createElement("bufferAttribute",{attachObject:["attributes","position"],count:e.length/3,array:e,itemSize:3})),React.createElement("pointsMaterial",{attach:"material",size:2,sizeAttenuation:!0,color:"white",transparent:!0,opacity:.8,fog:!1}))},VrmViewer=react.exports.forwardRef((o,e)=>{const{size:a,set:s}=useThree(),{vrm:c,loadVrm:f}=useVrm();react.exports.useImperativeHandle(e,()=>({handleFileChange:g=>{const b=g.target;if(b.files&&b.files.length){const tt=URL.createObjectURL(b.files[0]);f(tt)}}}));const[d,h]=react.exports.useState(null);return useFrame(()=>d==null?void 0:d.updateMatrixWorld()),react.exports.useLayoutEffect(()=>{if(d)return s({camera:d})},[d,s]),React.createElement(React.Fragment,null,React.createElement("perspectiveCamera",{ref:h,aspect:a.width/a.height,focus:10,fov:50,position:[0,1.25,1],onUpdate:g=>g.updateProjectionMatrix()}),React.createElement("ambientLight",{intensity:.75}),React.createElement("pointLight",{intensity:.25,position:[100,100,10]}),React.createElement(Stars,null),React.createElement(react.exports.Suspense,{fallback:null},c&&c.scene&&React.createElement(Vrm,{vrm:c})))});VrmViewer.displayName="VrmViewer";const Upload=({type:o,accept:e,onChange:a,className:s})=>React.createElement(React.Fragment,null,React.createElement("input",{className:s,type:o,accept:e,onChange:a}));var NavBar$1=(()=>`.navbar{display:flex;color:var(--white);background-color:var(--off-black);justify-content:space-between;align-items:center;height:40px;width:100%;z-index:2}
`)();const NavBar=({vrmRef:o})=>React.createElement("div",{className:"navbar"},React.createElement("div",null),React.createElement(Upload,{className:"navbar__upload",type:"file",accept:".vrm",onChange:e=>{var a;(a=o.current)==null||a.handleFileChange(e)}}));var RightBar$1=(()=>`.rightbar{display:flex;flex-direction:column;position:relative;width:328px;height:100%;z-index:2;border-left-style:solid;border-width:1px;border-color:var(--light-gray)}.rightbar__switch{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;width:100%;border-bottom-style:solid;border-width:1px;border-color:var(--light-gray)}.rightbar__switch__text{padding:0 8px;line-height:40px;color:var(--gray);cursor:pointer;font-weight:500;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.rightbar__switch__text-selected{color:var(--dark-gray);font-weight:600;cursor:default}.rightbar__switch__text:hover{color:var(--dark-gray)}
`)();function _typeof(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(a){return typeof a}:_typeof=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(o)}function _defineProperty$1(o,e,a){return e in o?Object.defineProperty(o,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[e]=a,o}function _objectSpread$2(o){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},s=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(a).filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable}))),s.forEach(function(c){_defineProperty$1(o,c,a[c])})}return o}function _classCallCheck$1(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(o,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(o,s.key,s)}}function _createClass$1(o,e,a){return e&&_defineProperties$1(o.prototype,e),a&&_defineProperties$1(o,a),o}function _assertThisInitialized(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function _possibleConstructorReturn(o,e){return e&&(_typeof(e)==="object"||typeof e=="function")?e:_assertThisInitialized(o)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(o)}function _setPrototypeOf(o,e){return _setPrototypeOf=Object.setPrototypeOf||function(s,c){return s.__proto__=c,s},_setPrototypeOf(o,e)}function _inherits(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),e&&_setPrototypeOf(o,e)}var consoleLogger={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,a){console&&console[e]&&console[e].apply(console,a)}},Logger=function(){function o(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck$1(this,o),this.init(e,a)}return _createClass$1(o,[{key:"init",value:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=s.prefix||"i18next:",this.logger=a||consoleLogger,this.options=s,this.debug=s.debug}},{key:"setDebug",value:function(a){this.debug=a}},{key:"log",value:function(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return this.forward(s,"log","",!0)}},{key:"warn",value:function(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return this.forward(s,"warn","",!0)}},{key:"error",value:function(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return this.forward(s,"error","")}},{key:"deprecate",value:function(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(a,s,c,f){return f&&!this.debug?null:(typeof a[0]=="string"&&(a[0]="".concat(c).concat(this.prefix," ").concat(a[0])),this.logger[s](a))}},{key:"create",value:function(a){return new o(this.logger,_objectSpread$2({},{prefix:"".concat(this.prefix,":").concat(a,":")},this.options))}}]),o}(),baseLogger=new Logger,EventEmitter$1=function(){function o(){_classCallCheck$1(this,o),this.observers={}}return _createClass$1(o,[{key:"on",value:function(a,s){var c=this;return a.split(" ").forEach(function(f){c.observers[f]=c.observers[f]||[],c.observers[f].push(s)}),this}},{key:"off",value:function(a,s){if(!!this.observers[a]){if(!s){delete this.observers[a];return}this.observers[a]=this.observers[a].filter(function(c){return c!==s})}}},{key:"emit",value:function(a){for(var s=arguments.length,c=new Array(s>1?s-1:0),f=1;f<s;f++)c[f-1]=arguments[f];if(this.observers[a]){var d=[].concat(this.observers[a]);d.forEach(function(g){g.apply(void 0,c)})}if(this.observers["*"]){var h=[].concat(this.observers["*"]);h.forEach(function(g){g.apply(g,[a].concat(c))})}}}]),o}();function defer(){var o,e,a=new Promise(function(s,c){o=s,e=c});return a.resolve=o,a.reject=e,a}function makeString(o){return o==null?"":""+o}function copy(o,e,a){o.forEach(function(s){e[s]&&(a[s]=e[s])})}function getLastOfPath(o,e,a){function s(h){return h&&h.indexOf("###")>-1?h.replace(/###/g,"."):h}function c(){return!o||typeof o=="string"}for(var f=typeof e!="string"?[].concat(e):e.split(".");f.length>1;){if(c())return{};var d=s(f.shift());!o[d]&&a&&(o[d]=new a),Object.prototype.hasOwnProperty.call(o,d)?o=o[d]:o={}}return c()?{}:{obj:o,k:s(f.shift())}}function setPath(o,e,a){var s=getLastOfPath(o,e,Object),c=s.obj,f=s.k;c[f]=a}function pushPath(o,e,a,s){var c=getLastOfPath(o,e,Object),f=c.obj,d=c.k;f[d]=f[d]||[],s&&(f[d]=f[d].concat(a)),s||f[d].push(a)}function getPath(o,e){var a=getLastOfPath(o,e),s=a.obj,c=a.k;if(!!s)return s[c]}function getPathWithDefaults(o,e,a){var s=getPath(o,a);return s!==void 0?s:getPath(e,a)}function deepExtend(o,e,a){for(var s in e)s!=="__proto__"&&s!=="constructor"&&(s in o?typeof o[s]=="string"||o[s]instanceof String||typeof e[s]=="string"||e[s]instanceof String?a&&(o[s]=e[s]):deepExtend(o[s],e[s],a):o[s]=e[s]);return o}function regexEscape(o){return o.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function escape$1(o){return typeof o=="string"?o.replace(/[&<>"'\/]/g,function(e){return _entityMap[e]}):o}var isIE10=typeof window!="undefined"&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,ResourceStore=function(o){_inherits(e,o);function e(a){var s,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return _classCallCheck$1(this,e),s=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)),isIE10&&EventEmitter$1.call(_assertThisInitialized(s)),s.data=a||{},s.options=c,s.options.keySeparator===void 0&&(s.options.keySeparator="."),s}return _createClass$1(e,[{key:"addNamespaces",value:function(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}},{key:"removeNamespaces",value:function(s){var c=this.options.ns.indexOf(s);c>-1&&this.options.ns.splice(c,1)}},{key:"getResource",value:function(s,c,f){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},h=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator,g=[s,c];return f&&typeof f!="string"&&(g=g.concat(f)),f&&typeof f=="string"&&(g=g.concat(h?f.split(h):f)),s.indexOf(".")>-1&&(g=s.split(".")),getPath(this.data,g)}},{key:"addResource",value:function(s,c,f,d){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},g=this.options.keySeparator;g===void 0&&(g=".");var b=[s,c];f&&(b=b.concat(g?f.split(g):f)),s.indexOf(".")>-1&&(b=s.split("."),d=c,c=b[1]),this.addNamespaces(c),setPath(this.data,b,d),h.silent||this.emit("added",s,c,f,d)}},{key:"addResources",value:function(s,c,f){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var h in f)(typeof f[h]=="string"||Object.prototype.toString.apply(f[h])==="[object Array]")&&this.addResource(s,c,h,f[h],{silent:!0});d.silent||this.emit("added",s,c,f)}},{key:"addResourceBundle",value:function(s,c,f,d,h){var g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},b=[s,c];s.indexOf(".")>-1&&(b=s.split("."),d=f,f=c,c=b[1]),this.addNamespaces(c);var tt=getPath(this.data,b)||{};d?deepExtend(tt,f,h):tt=_objectSpread$2({},tt,f),setPath(this.data,b,tt),g.silent||this.emit("added",s,c,f)}},{key:"removeResourceBundle",value:function(s,c){this.hasResourceBundle(s,c)&&delete this.data[s][c],this.removeNamespaces(c),this.emit("removed",s,c)}},{key:"hasResourceBundle",value:function(s,c){return this.getResource(s,c)!==void 0}},{key:"getResourceBundle",value:function(s,c){return c||(c=this.options.defaultNS),this.options.compatibilityAPI==="v1"?_objectSpread$2({},{},this.getResource(s,c)):this.getResource(s,c)}},{key:"getDataByLanguage",value:function(s){return this.data[s]}},{key:"toJSON",value:function(){return this.data}}]),e}(EventEmitter$1),postProcessor={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,a,s,c,f){var d=this;return e.forEach(function(h){d.processors[h]&&(a=d.processors[h].process(a,s,c,f))}),a}},checkedLoadedFor={},Translator=function(o){_inherits(e,o);function e(a){var s,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _classCallCheck$1(this,e),s=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)),isIE10&&EventEmitter$1.call(_assertThisInitialized(s)),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],a,_assertThisInitialized(s)),s.options=c,s.options.keySeparator===void 0&&(s.options.keySeparator="."),s.logger=baseLogger.create("translator"),s}return _createClass$1(e,[{key:"changeLanguage",value:function(s){s&&(this.language=s)}},{key:"exists",value:function(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},f=this.resolve(s,c);return f&&f.res!==void 0}},{key:"extractFromKey",value:function(s,c){var f=c.nsSeparator!==void 0?c.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");var d=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,h=c.ns||this.options.defaultNS;if(f&&s.indexOf(f)>-1){var g=s.match(this.interpolator.nestingRegexp);if(g&&g.length>0)return{key:s,namespaces:h};var b=s.split(f);(f!==d||f===d&&this.options.ns.indexOf(b[0])>-1)&&(h=b.shift()),s=b.join(d)}return typeof h=="string"&&(h=[h]),{key:s,namespaces:h}}},{key:"translate",value:function(s,c,f){var d=this;if(_typeof(c)!=="object"&&this.options.overloadTranslationOptionHandler&&(c=this.options.overloadTranslationOptionHandler(arguments)),c||(c={}),s==null)return"";Array.isArray(s)||(s=[String(s)]);var h=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,g=this.extractFromKey(s[s.length-1],c),b=g.key,tt=g.namespaces,j=tt[tt.length-1],_e=c.lng||this.language,nt=c.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(_e&&_e.toLowerCase()==="cimode"){if(nt){var rt=c.nsSeparator||this.options.nsSeparator;return j+rt+b}return b}var at=this.resolve(s,c),it=at&&at.res,$=at&&at.usedKey||b,et=at&&at.exactUsedKey||b,st=Object.prototype.toString.apply(it),lt=["[object Number]","[object Function]","[object RegExp]"],ct=c.joinArrays!==void 0?c.joinArrays:this.options.joinArrays,ut=!this.i18nFormat||this.i18nFormat.handleAsObject,ht=typeof it!="string"&&typeof it!="boolean"&&typeof it!="number";if(ut&&it&&ht&&lt.indexOf(st)<0&&!(typeof ct=="string"&&st==="[object Array]")){if(!c.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler($,it,c):"key '".concat(b," (").concat(this.language,")' returned an object instead of string.");if(h){var pt=st==="[object Array]",mt=pt?[]:{},bt=pt?et:$;for(var St in it)if(Object.prototype.hasOwnProperty.call(it,St)){var Ft="".concat(bt).concat(h).concat(St);mt[St]=this.translate(Ft,_objectSpread$2({},c,{joinArrays:!1,ns:tt})),mt[St]===Ft&&(mt[St]=it[St])}it=mt}}else if(ut&&typeof ct=="string"&&st==="[object Array]")it=it.join(ct),it&&(it=this.extendTranslation(it,s,c,f));else{var It=!1,Ct=!1,Pt=c.count!==void 0&&typeof c.count!="string",Nt=e.hasDefaultValue(c),zt=Pt?this.pluralResolver.getSuffix(_e,c.count):"",Xt=c["defaultValue".concat(zt)]||c.defaultValue;!this.isValidLookup(it)&&Nt&&(It=!0,it=Xt),this.isValidLookup(it)||(Ct=!0,it=b);var en=Nt&&Xt!==it&&this.options.updateMissing;if(Ct||It||en){if(this.logger.log(en?"updateKey":"missingKey",_e,j,b,en?Xt:it),h){var rn=this.resolve(b,_objectSpread$2({},c,{keySeparator:!1}));rn&&rn.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Gt=[],qt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,c.lng||this.language);if(this.options.saveMissingTo==="fallback"&&qt&&qt[0])for(var sn=0;sn<qt.length;sn++)Gt.push(qt[sn]);else this.options.saveMissingTo==="all"?Gt=this.languageUtils.toResolveHierarchy(c.lng||this.language):Gt.push(c.lng||this.language);var yn=function(_t,yt,At){d.options.missingKeyHandler?d.options.missingKeyHandler(_t,j,yt,en?At:it,en,c):d.backendConnector&&d.backendConnector.saveMissing&&d.backendConnector.saveMissing(_t,j,yt,en?At:it,en,c),d.emit("missingKey",_t,j,yt,it)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Pt?Gt.forEach(function(Yt){d.pluralResolver.getSuffixes(Yt).forEach(function(_t){yn([Yt],b+_t,c["defaultValue".concat(_t)]||Xt)})}):yn(Gt,b,Xt))}it=this.extendTranslation(it,s,c,at,f),Ct&&it===b&&this.options.appendNamespaceToMissingKey&&(it="".concat(j,":").concat(b)),Ct&&this.options.parseMissingKeyHandler&&(it=this.options.parseMissingKeyHandler(it))}return it}},{key:"extendTranslation",value:function(s,c,f,d,h){var g=this;if(this.i18nFormat&&this.i18nFormat.parse)s=this.i18nFormat.parse(s,f,d.usedLng,d.usedNS,d.usedKey,{resolved:d});else if(!f.skipInterpolation){f.interpolation&&this.interpolator.init(_objectSpread$2({},f,{interpolation:_objectSpread$2({},this.options.interpolation,f.interpolation)}));var b=f.interpolation&&f.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,tt;if(b){var j=s.match(this.interpolator.nestingRegexp);tt=j&&j.length}var _e=f.replace&&typeof f.replace!="string"?f.replace:f;if(this.options.interpolation.defaultVariables&&(_e=_objectSpread$2({},this.options.interpolation.defaultVariables,_e)),s=this.interpolator.interpolate(s,_e,f.lng||this.language,f),b){var nt=s.match(this.interpolator.nestingRegexp),rt=nt&&nt.length;tt<rt&&(f.nest=!1)}f.nest!==!1&&(s=this.interpolator.nest(s,function(){for(var $=arguments.length,et=new Array($),st=0;st<$;st++)et[st]=arguments[st];return h&&h[0]===et[0]&&!f.context?(g.logger.warn("It seems you are nesting recursively key: ".concat(et[0]," in key: ").concat(c[0])),null):g.translate.apply(g,et.concat([c]))},f)),f.interpolation&&this.interpolator.reset()}var at=f.postProcess||this.options.postProcess,it=typeof at=="string"?[at]:at;return s!=null&&it&&it.length&&f.applyPostProcessor!==!1&&(s=postProcessor.handle(it,s,c,this.options&&this.options.postProcessPassResolved?_objectSpread$2({i18nResolved:d},f):f,this)),s}},{key:"resolve",value:function(s){var c=this,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d,h,g,b,tt;return typeof s=="string"&&(s=[s]),s.forEach(function(j){if(!c.isValidLookup(d)){var _e=c.extractFromKey(j,f),nt=_e.key;h=nt;var rt=_e.namespaces;c.options.fallbackNS&&(rt=rt.concat(c.options.fallbackNS));var at=f.count!==void 0&&typeof f.count!="string",it=f.context!==void 0&&typeof f.context=="string"&&f.context!=="",$=f.lngs?f.lngs:c.languageUtils.toResolveHierarchy(f.lng||c.language,f.fallbackLng);rt.forEach(function(et){c.isValidLookup(d)||(tt=et,!checkedLoadedFor["".concat($[0],"-").concat(et)]&&c.utils&&c.utils.hasLoadedNamespace&&!c.utils.hasLoadedNamespace(tt)&&(checkedLoadedFor["".concat($[0],"-").concat(et)]=!0,c.logger.warn('key "'.concat(h,'" for languages "').concat($.join(", "),`" won't get resolved as namespace "`).concat(tt,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),$.forEach(function(st){if(!c.isValidLookup(d)){b=st;var lt=nt,ct=[lt];if(c.i18nFormat&&c.i18nFormat.addLookupKeys)c.i18nFormat.addLookupKeys(ct,nt,st,et,f);else{var ut;at&&(ut=c.pluralResolver.getSuffix(st,f.count)),at&&it&&ct.push(lt+ut),it&&ct.push(lt+="".concat(c.options.contextSeparator).concat(f.context)),at&&ct.push(lt+=ut)}for(var ht;ht=ct.pop();)c.isValidLookup(d)||(g=ht,d=c.getResource(st,et,ht,f))}}))})}}),{res:d,usedKey:h,exactUsedKey:g,usedLng:b,usedNS:tt}}},{key:"isValidLookup",value:function(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}},{key:"getResource",value:function(s,c,f){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(s,c,f,d):this.resourceStore.getResource(s,c,f,d)}}],[{key:"hasDefaultValue",value:function(s){var c="defaultValue";for(var f in s)if(Object.prototype.hasOwnProperty.call(s,f)&&c===f.substring(0,c.length)&&s[f]!==void 0)return!0;return!1}}]),e}(EventEmitter$1);function capitalize(o){return o.charAt(0).toUpperCase()+o.slice(1)}var LanguageUtil=function(){function o(e){_classCallCheck$1(this,o),this.options=e,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}return _createClass$1(o,[{key:"getScriptPartFromCode",value:function(a){if(!a||a.indexOf("-")<0)return null;var s=a.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}},{key:"getLanguagePartFromCode",value:function(a){if(!a||a.indexOf("-")<0)return a;var s=a.split("-");return this.formatLanguageCode(s[0])}},{key:"formatLanguageCode",value:function(a){if(typeof a=="string"&&a.indexOf("-")>-1){var s=["hans","hant","latn","cyrl","cans","mong","arab"],c=a.split("-");return this.options.lowerCaseLng?c=c.map(function(f){return f.toLowerCase()}):c.length===2?(c[0]=c[0].toLowerCase(),c[1]=c[1].toUpperCase(),s.indexOf(c[1].toLowerCase())>-1&&(c[1]=capitalize(c[1].toLowerCase()))):c.length===3&&(c[0]=c[0].toLowerCase(),c[1].length===2&&(c[1]=c[1].toUpperCase()),c[0]!=="sgn"&&c[2].length===2&&(c[2]=c[2].toUpperCase()),s.indexOf(c[1].toLowerCase())>-1&&(c[1]=capitalize(c[1].toLowerCase())),s.indexOf(c[2].toLowerCase())>-1&&(c[2]=capitalize(c[2].toLowerCase()))),c.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?a.toLowerCase():a}},{key:"isWhitelisted",value:function(a){return this.logger.deprecate("languageUtils.isWhitelisted",`function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it's usage asap.`),this.isSupportedCode(a)}},{key:"isSupportedCode",value:function(a){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(a=this.getLanguagePartFromCode(a)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(a)>-1}},{key:"getBestMatchFromCodes",value:function(a){var s=this;if(!a)return null;var c;return a.forEach(function(f){if(!c){var d=s.formatLanguageCode(f);(!s.options.supportedLngs||s.isSupportedCode(d))&&(c=d)}}),!c&&this.options.supportedLngs&&a.forEach(function(f){if(!c){var d=s.getLanguagePartFromCode(f);if(s.isSupportedCode(d))return c=d;c=s.options.supportedLngs.find(function(h){if(h.indexOf(d)===0)return h})}}),c||(c=this.getFallbackCodes(this.options.fallbackLng)[0]),c}},{key:"getFallbackCodes",value:function(a,s){if(!a)return[];if(typeof a=="function"&&(a=a(s)),typeof a=="string"&&(a=[a]),Object.prototype.toString.apply(a)==="[object Array]")return a;if(!s)return a.default||[];var c=a[s];return c||(c=a[this.getScriptPartFromCode(s)]),c||(c=a[this.formatLanguageCode(s)]),c||(c=a[this.getLanguagePartFromCode(s)]),c||(c=a.default),c||[]}},{key:"toResolveHierarchy",value:function(a,s){var c=this,f=this.getFallbackCodes(s||this.options.fallbackLng||[],a),d=[],h=function(b){!b||(c.isSupportedCode(b)?d.push(b):c.logger.warn("rejecting language code not found in supportedLngs: ".concat(b)))};return typeof a=="string"&&a.indexOf("-")>-1?(this.options.load!=="languageOnly"&&h(this.formatLanguageCode(a)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&h(this.getScriptPartFromCode(a)),this.options.load!=="currentOnly"&&h(this.getLanguagePartFromCode(a))):typeof a=="string"&&h(this.formatLanguageCode(a)),f.forEach(function(g){d.indexOf(g)<0&&h(c.formatLanguageCode(g))}),d}}]),o}(),sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:function(e){return Number(e>1)},2:function(e){return Number(e!=1)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(e==1?0:e>=2&&e<=4?1:2)},7:function(e){return Number(e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(e==1?0:e==2?1:e!=8&&e!=11?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(e==1?0:e==2?1:e<7?2:e<11?3:4)},11:function(e){return Number(e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(e!==0)},14:function(e){return Number(e==1?0:e==2?1:e==3?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:e!==0?1:2)},17:function(e){return Number(e==1||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(e==0?0:e==1?1:2)},19:function(e){return Number(e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(e==1?0:e==0||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3)}};function createRules(){var o={};return sets.forEach(function(e){e.lngs.forEach(function(a){o[a]={numbers:e.nr,plurals:_rulesPluralsTypes[e.fc]}})}),o}var PluralResolver=function(){function o(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck$1(this,o),this.languageUtils=e,this.options=a,this.logger=baseLogger.create("pluralResolver"),this.rules=createRules()}return _createClass$1(o,[{key:"addRule",value:function(a,s){this.rules[a]=s}},{key:"getRule",value:function(a){return this.rules[a]||this.rules[this.languageUtils.getLanguagePartFromCode(a)]}},{key:"needsPlural",value:function(a){var s=this.getRule(a);return s&&s.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(a,s){return this.getSuffixes(a).map(function(c){return s+c})}},{key:"getSuffixes",value:function(a){var s=this,c=this.getRule(a);return c?c.numbers.map(function(f){return s.getSuffix(a,f)}):[]}},{key:"getSuffix",value:function(a,s){var c=this,f=this.getRule(a);if(f){var d=f.noAbs?f.plurals(s):f.plurals(Math.abs(s)),h=f.numbers[d];this.options.simplifyPluralSuffix&&f.numbers.length===2&&f.numbers[0]===1&&(h===2?h="plural":h===1&&(h=""));var g=function(){return c.options.prepend&&h.toString()?c.options.prepend+h.toString():h.toString()};return this.options.compatibilityJSON==="v1"?h===1?"":typeof h=="number"?"_plural_".concat(h.toString()):g():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&f.numbers.length===2&&f.numbers[0]===1?g():this.options.prepend&&d.toString()?this.options.prepend+d.toString():d.toString()}return this.logger.warn("no plural rule found for: ".concat(a)),""}}]),o}(),Interpolator=function(){function o(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck$1(this,o),this.logger=baseLogger.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(a){return a},this.init(e)}return _createClass$1(o,[{key:"init",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};a.interpolation||(a.interpolation={escapeValue:!0});var s=a.interpolation;this.escape=s.escape!==void 0?s.escape:escape$1,this.escapeValue=s.escapeValue!==void 0?s.escapeValue:!0,this.useRawValueToEscape=s.useRawValueToEscape!==void 0?s.useRawValueToEscape:!1,this.prefix=s.prefix?regexEscape(s.prefix):s.prefixEscaped||"{{",this.suffix=s.suffix?regexEscape(s.suffix):s.suffixEscaped||"}}",this.formatSeparator=s.formatSeparator?s.formatSeparator:s.formatSeparator||",",this.unescapePrefix=s.unescapeSuffix?"":s.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":s.unescapeSuffix||"",this.nestingPrefix=s.nestingPrefix?regexEscape(s.nestingPrefix):s.nestingPrefixEscaped||regexEscape("$t("),this.nestingSuffix=s.nestingSuffix?regexEscape(s.nestingSuffix):s.nestingSuffixEscaped||regexEscape(")"),this.nestingOptionsSeparator=s.nestingOptionsSeparator?s.nestingOptionsSeparator:s.nestingOptionsSeparator||",",this.maxReplaces=s.maxReplaces?s.maxReplaces:1e3,this.alwaysFormat=s.alwaysFormat!==void 0?s.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var a="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(a,"g");var s="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(s,"g");var c="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(c,"g")}},{key:"interpolate",value:function(a,s,c,f){var d=this,h,g,b,tt=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function j(it){return it.replace(/\$/g,"$$$$")}var _e=function($){if($.indexOf(d.formatSeparator)<0){var et=getPathWithDefaults(s,tt,$);return d.alwaysFormat?d.format(et,void 0,c):et}var st=$.split(d.formatSeparator),lt=st.shift().trim(),ct=st.join(d.formatSeparator).trim();return d.format(getPathWithDefaults(s,tt,lt),ct,c,f)};this.resetRegExp();var nt=f&&f.missingInterpolationHandler||this.options.missingInterpolationHandler,rt=f&&f.interpolation&&f.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,at=[{regex:this.regexpUnescape,safeValue:function($){return j($)}},{regex:this.regexp,safeValue:function($){return d.escapeValue?j(d.escape($)):j($)}}];return at.forEach(function(it){for(b=0;h=it.regex.exec(a);){if(g=_e(h[1].trim()),g===void 0)if(typeof nt=="function"){var $=nt(a,h,f);g=typeof $=="string"?$:""}else if(rt){g=h[0];continue}else d.logger.warn("missed to pass in variable ".concat(h[1]," for interpolating ").concat(a)),g="";else typeof g!="string"&&!d.useRawValueToEscape&&(g=makeString(g));if(a=a.replace(h[0],it.safeValue(g)),it.regex.lastIndex=0,b++,b>=d.maxReplaces)break}}),a}},{key:"nest",value:function(a,s){var c=this,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d,h,g=_objectSpread$2({},f);g.applyPostProcessor=!1,delete g.defaultValue;function b(nt,rt){var at=this.nestingOptionsSeparator;if(nt.indexOf(at)<0)return nt;var it=nt.split(new RegExp("".concat(at,"[ ]*{"))),$="{".concat(it[1]);nt=it[0],$=this.interpolate($,g),$=$.replace(/'/g,'"');try{g=JSON.parse($),rt&&(g=_objectSpread$2({},rt,g))}catch(et){return this.logger.warn("failed parsing options string in nesting for key ".concat(nt),et),"".concat(nt).concat(at).concat($)}return delete g.defaultValue,nt}for(;d=this.nestingRegexp.exec(a);){var tt=[],j=!1;if(d[0].includes(this.formatSeparator)&&!/{.*}/.test(d[1])){var _e=d[1].split(this.formatSeparator).map(function(nt){return nt.trim()});d[1]=_e.shift(),tt=_e,j=!0}if(h=s(b.call(this,d[1].trim(),g),g),h&&d[0]===a&&typeof h!="string")return h;typeof h!="string"&&(h=makeString(h)),h||(this.logger.warn("missed to resolve ".concat(d[1]," for nesting ").concat(a)),h=""),j&&(h=tt.reduce(function(nt,rt){return c.format(nt,rt,f.lng,f)},h.trim())),a=a.replace(d[0],h),this.regexp.lastIndex=0}return a}}]),o}();function remove(o,e){for(var a=o.indexOf(e);a!==-1;)o.splice(a,1),a=o.indexOf(e)}var Connector=function(o){_inherits(e,o);function e(a,s,c){var f,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return _classCallCheck$1(this,e),f=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)),isIE10&&EventEmitter$1.call(_assertThisInitialized(f)),f.backend=a,f.store=s,f.services=c,f.languageUtils=c.languageUtils,f.options=d,f.logger=baseLogger.create("backendConnector"),f.state={},f.queue=[],f.backend&&f.backend.init&&f.backend.init(c,d.backend,d),f}return _createClass$1(e,[{key:"queueLoad",value:function(s,c,f,d){var h=this,g=[],b=[],tt=[],j=[];return s.forEach(function(_e){var nt=!0;c.forEach(function(rt){var at="".concat(_e,"|").concat(rt);!f.reload&&h.store.hasResourceBundle(_e,rt)?h.state[at]=2:h.state[at]<0||(h.state[at]===1?b.indexOf(at)<0&&b.push(at):(h.state[at]=1,nt=!1,b.indexOf(at)<0&&b.push(at),g.indexOf(at)<0&&g.push(at),j.indexOf(rt)<0&&j.push(rt)))}),nt||tt.push(_e)}),(g.length||b.length)&&this.queue.push({pending:b,loaded:{},errors:[],callback:d}),{toLoad:g,pending:b,toLoadLanguages:tt,toLoadNamespaces:j}}},{key:"loaded",value:function(s,c,f){var d=s.split("|"),h=d[0],g=d[1];c&&this.emit("failedLoading",h,g,c),f&&this.store.addResourceBundle(h,g,f),this.state[s]=c?-1:2;var b={};this.queue.forEach(function(tt){pushPath(tt.loaded,[h],g),remove(tt.pending,s),c&&tt.errors.push(c),tt.pending.length===0&&!tt.done&&(Object.keys(tt.loaded).forEach(function(j){b[j]||(b[j]=[]),tt.loaded[j].length&&tt.loaded[j].forEach(function(_e){b[j].indexOf(_e)<0&&b[j].push(_e)})}),tt.done=!0,tt.errors.length?tt.callback(tt.errors):tt.callback())}),this.emit("loaded",b),this.queue=this.queue.filter(function(tt){return!tt.done})}},{key:"read",value:function(s,c,f){var d=this,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:350,b=arguments.length>5?arguments[5]:void 0;return s.length?this.backend[f](s,c,function(tt,j){if(tt&&j&&h<5){setTimeout(function(){d.read.call(d,s,c,f,h+1,g*2,b)},g);return}b(tt,j)}):b(null,{})}},{key:"prepareLoading",value:function(s,c){var f=this,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),h&&h();typeof s=="string"&&(s=this.languageUtils.toResolveHierarchy(s)),typeof c=="string"&&(c=[c]);var g=this.queueLoad(s,c,d,h);if(!g.toLoad.length)return g.pending.length||h(),null;g.toLoad.forEach(function(b){f.loadOne(b)})}},{key:"load",value:function(s,c,f){this.prepareLoading(s,c,{},f)}},{key:"reload",value:function(s,c,f){this.prepareLoading(s,c,{reload:!0},f)}},{key:"loadOne",value:function(s){var c=this,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",d=s.split("|"),h=d[0],g=d[1];this.read(h,g,"read",void 0,void 0,function(b,tt){b&&c.logger.warn("".concat(f,"loading namespace ").concat(g," for language ").concat(h," failed"),b),!b&&tt&&c.logger.log("".concat(f,"loaded namespace ").concat(g," for language ").concat(h),tt),c.loaded(s,b,tt)})}},{key:"saveMissing",value:function(s,c,f,d,h){var g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(c)){this.logger.warn('did not save key "'.concat(f,'" as the namespace "').concat(c,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}f==null||f===""||(this.backend&&this.backend.create&&this.backend.create(s,c,f,d,null,_objectSpread$2({},g,{isUpdate:h})),!(!s||!s[0])&&this.store.addResource(s[0],c,f,d))}}]),e}(EventEmitter$1);function get(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var a={};if(_typeof(e[1])==="object"&&(a=e[1]),typeof e[1]=="string"&&(a.defaultValue=e[1]),typeof e[2]=="string"&&(a.tDescription=e[2]),_typeof(e[2])==="object"||_typeof(e[3])==="object"){var s=e[3]||e[2];Object.keys(s).forEach(function(c){a[c]=s[c]})}return a},interpolation:{escapeValue:!0,format:function(e,a,s,c){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function transformOptions(o){return typeof o.ns=="string"&&(o.ns=[o.ns]),typeof o.fallbackLng=="string"&&(o.fallbackLng=[o.fallbackLng]),typeof o.fallbackNS=="string"&&(o.fallbackNS=[o.fallbackNS]),o.whitelist&&(o.whitelist&&o.whitelist.indexOf("cimode")<0&&(o.whitelist=o.whitelist.concat(["cimode"])),o.supportedLngs=o.whitelist),o.nonExplicitWhitelist&&(o.nonExplicitSupportedLngs=o.nonExplicitWhitelist),o.supportedLngs&&o.supportedLngs.indexOf("cimode")<0&&(o.supportedLngs=o.supportedLngs.concat(["cimode"])),o}function noop$1(){}var I18n=function(o){_inherits(e,o);function e(){var a,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;if(_classCallCheck$1(this,e),a=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)),isIE10&&EventEmitter$1.call(_assertThisInitialized(a)),a.options=transformOptions(s),a.services={},a.logger=baseLogger,a.modules={external:[]},c&&!a.isInitialized&&!s.isClone){if(!a.options.initImmediate)return a.init(s,c),_possibleConstructorReturn(a,_assertThisInitialized(a));setTimeout(function(){a.init(s,c)},0)}return a}return _createClass$1(e,[{key:"init",value:function(){var s=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1?arguments[1]:void 0;typeof c=="function"&&(f=c,c={}),c.whitelist&&!c.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),c.nonExplicitWhitelist&&!c.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=_objectSpread$2({},get(),this.options,transformOptions(c)),this.format=this.options.interpolation.format,f||(f=noop$1);function d(rt){return rt?typeof rt=="function"?new rt:rt:null}if(!this.options.isClone){this.modules.logger?baseLogger.init(d(this.modules.logger),this.options):baseLogger.init(null,this.options);var h=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);var g=this.services;g.logger=baseLogger,g.resourceStore=this.store,g.languageUtils=h,g.pluralResolver=new PluralResolver(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g.interpolator=new Interpolator(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new Connector(d(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",function(rt){for(var at=arguments.length,it=new Array(at>1?at-1:0),$=1;$<at;$++)it[$-1]=arguments[$];s.emit.apply(s,[rt].concat(it))}),this.modules.languageDetector&&(g.languageDetector=d(this.modules.languageDetector),g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=d(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(rt){for(var at=arguments.length,it=new Array(at>1?at-1:0),$=1;$<at;$++)it[$-1]=arguments[$];s.emit.apply(s,[rt].concat(it))}),this.modules.external.forEach(function(rt){rt.init&&rt.init(s)})}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var b=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);b.length>0&&b[0]!=="dev"&&(this.options.lng=b[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var tt=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];tt.forEach(function(rt){s[rt]=function(){var at;return(at=s.store)[rt].apply(at,arguments)}});var j=["addResource","addResources","addResourceBundle","removeResourceBundle"];j.forEach(function(rt){s[rt]=function(){var at;return(at=s.store)[rt].apply(at,arguments),s}});var _e=defer(),nt=function(){var at=function($,et){s.isInitialized&&s.logger.warn("init: i18next is already initialized. You should call init just once!"),s.isInitialized=!0,s.options.isClone||s.logger.log("initialized",s.options),s.emit("initialized",s.options),_e.resolve(et),f($,et)};if(s.languages&&s.options.compatibilityAPI!=="v1"&&!s.isInitialized)return at(null,s.t.bind(s));s.changeLanguage(s.options.lng,at)};return this.options.resources||!this.options.initImmediate?nt():setTimeout(nt,0),_e}},{key:"loadResources",value:function(s){var c=this,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop$1,d=f,h=typeof s=="string"?s:this.language;if(typeof s=="function"&&(d=s),!this.options.resources||this.options.partialBundledLanguages){if(h&&h.toLowerCase()==="cimode")return d();var g=[],b=function(_e){if(!!_e){var nt=c.services.languageUtils.toResolveHierarchy(_e);nt.forEach(function(rt){g.indexOf(rt)<0&&g.push(rt)})}};if(h)b(h);else{var tt=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);tt.forEach(function(j){return b(j)})}this.options.preload&&this.options.preload.forEach(function(j){return b(j)}),this.services.backendConnector.load(g,this.options.ns,d)}else d(null)}},{key:"reloadResources",value:function(s,c,f){var d=defer();return s||(s=this.languages),c||(c=this.options.ns),f||(f=noop$1),this.services.backendConnector.reload(s,c,function(h){d.resolve(),f(h)}),d}},{key:"use",value:function(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&postProcessor.addPostProcessor(s),s.type==="3rdParty"&&this.modules.external.push(s),this}},{key:"changeLanguage",value:function(s,c){var f=this;this.isLanguageChangingTo=s;var d=defer();this.emit("languageChanging",s);var h=function(tt,j){j?(f.language=j,f.languages=f.services.languageUtils.toResolveHierarchy(j),f.translator.changeLanguage(j),f.isLanguageChangingTo=void 0,f.emit("languageChanged",j),f.logger.log("languageChanged",j)):f.isLanguageChangingTo=void 0,d.resolve(function(){return f.t.apply(f,arguments)}),c&&c(tt,function(){return f.t.apply(f,arguments)})},g=function(tt){var j=typeof tt=="string"?tt:f.services.languageUtils.getBestMatchFromCodes(tt);j&&(f.language||(f.language=j,f.languages=f.services.languageUtils.toResolveHierarchy(j)),f.translator.language||f.translator.changeLanguage(j),f.services.languageDetector&&f.services.languageDetector.cacheUserLanguage(j)),f.loadResources(j,function(_e){h(_e,j)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?g(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(g):g(s),d}},{key:"getFixedT",value:function(s,c){var f=this,d=function h(g,b){var tt;if(_typeof(b)!=="object"){for(var j=arguments.length,_e=new Array(j>2?j-2:0),nt=2;nt<j;nt++)_e[nt-2]=arguments[nt];tt=f.options.overloadTranslationOptionHandler([g,b].concat(_e))}else tt=_objectSpread$2({},b);return tt.lng=tt.lng||h.lng,tt.lngs=tt.lngs||h.lngs,tt.ns=tt.ns||h.ns,f.t(g,tt)};return typeof s=="string"?d.lng=s:d.lngs=s,d.ns=c,d}},{key:"t",value:function(){var s;return this.translator&&(s=this.translator).translate.apply(s,arguments)}},{key:"exists",value:function(){var s;return this.translator&&(s=this.translator).exists.apply(s,arguments)}},{key:"setDefaultNamespace",value:function(s){this.options.defaultNS=s}},{key:"hasLoadedNamespace",value:function(s){var c=this,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var d=this.languages[0],h=this.options?this.options.fallbackLng:!1,g=this.languages[this.languages.length-1];if(d.toLowerCase()==="cimode")return!0;var b=function(_e,nt){var rt=c.services.backendConnector.state["".concat(_e,"|").concat(nt)];return rt===-1||rt===2};if(f.precheck){var tt=f.precheck(this,b);if(tt!==void 0)return tt}return!!(this.hasResourceBundle(d,s)||!this.services.backendConnector.backend||b(d,s)&&(!h||b(g,s)))}},{key:"loadNamespaces",value:function(s,c){var f=this,d=defer();return this.options.ns?(typeof s=="string"&&(s=[s]),s.forEach(function(h){f.options.ns.indexOf(h)<0&&f.options.ns.push(h)}),this.loadResources(function(h){d.resolve(),c&&c(h)}),d):(c&&c(),Promise.resolve())}},{key:"loadLanguages",value:function(s,c){var f=defer();typeof s=="string"&&(s=[s]);var d=this.options.preload||[],h=s.filter(function(g){return d.indexOf(g)<0});return h.length?(this.options.preload=d.concat(h),this.loadResources(function(g){f.resolve(),c&&c(g)}),f):(c&&c(),Promise.resolve())}},{key:"dir",value:function(s){if(s||(s=this.languages&&this.languages.length>0?this.languages[0]:this.language),!s)return"rtl";var c=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return c.indexOf(this.services.languageUtils.getLanguagePartFromCode(s))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;return new e(s,c)}},{key:"cloneInstance",value:function(){var s=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop$1,d=_objectSpread$2({},this.options,c,{isClone:!0}),h=new e(d),g=["store","services","language"];return g.forEach(function(b){h[b]=s[b]}),h.services=_objectSpread$2({},this.services),h.services.utils={hasLoadedNamespace:h.hasLoadedNamespace.bind(h)},h.translator=new Translator(h.services,h.options),h.translator.on("*",function(b){for(var tt=arguments.length,j=new Array(tt>1?tt-1:0),_e=1;_e<tt;_e++)j[_e-1]=arguments[_e];h.emit.apply(h,[b].concat(j))}),h.init(d,f),h.translator.options=h.options,h.translator.backendConnector.services.utils={hasLoadedNamespace:h.hasLoadedNamespace.bind(h)},h}}]),e}(EventEmitter$1),i18next=new I18n;const rightbar={background:"Background",design:"Design",settings:"Settings"};var translation={rightbar};function _defineProperty(o,e,a){return e in o?Object.defineProperty(o,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[e]=a,o}function _classCallCheck(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(o,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(o,s.key,s)}}function _createClass(o,e,a){return e&&_defineProperties(o.prototype,e),a&&_defineProperties(o,a),o}function ownKeys$1(o,e){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);e&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable})),a.push.apply(a,s)}return a}function _objectSpread$1(o){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(a),!0).forEach(function(s){_defineProperty(o,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):ownKeys$1(Object(a)).forEach(function(s){Object.defineProperty(o,s,Object.getOwnPropertyDescriptor(a,s))})}return o}var defaultOptions={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},i18nInstance,I18nContext=React.createContext();function setDefaults(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};defaultOptions=_objectSpread$1(_objectSpread$1({},defaultOptions),o)}function getDefaults(){return defaultOptions}var ReportNamespaces=function(){function o(){_classCallCheck(this,o),this.usedNamespaces={}}return _createClass(o,[{key:"addUsedNamespaces",value:function(a){var s=this;a.forEach(function(c){s.usedNamespaces[c]||(s.usedNamespaces[c]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),o}();function setI18n(o){i18nInstance=o}function getI18n(){return i18nInstance}var initReactI18next={type:"3rdParty",init:function(e){setDefaults(e.options.react),setI18n(e)}};function warn(){if(console&&console.warn){for(var o,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];typeof a[0]=="string"&&(a[0]="react-i18next:: ".concat(a[0])),(o=console).warn.apply(o,a)}}var alreadyWarned={};function warnOnce(){for(var o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];typeof e[0]=="string"&&alreadyWarned[e[0]]||(typeof e[0]=="string"&&(alreadyWarned[e[0]]=new Date),warn.apply(void 0,e))}function loadNamespaces(o,e,a){o.loadNamespaces(e,function(){if(o.isInitialized)a();else{var s=function c(){setTimeout(function(){o.off("initialized",c)},0),a()};o.on("initialized",s)}})}function hasLoadedNamespace(o,e){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return warnOnce("i18n.languages were undefined or empty",e.languages),!0;var s=e.languages[0],c=e.options?e.options.fallbackLng:!1,f=e.languages[e.languages.length-1];if(s.toLowerCase()==="cimode")return!0;var d=function(g,b){var tt=e.services.backendConnector.state["".concat(g,"|").concat(b)];return tt===-1||tt===2};return a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!d(e.isLanguageChangingTo,o)?!1:!!(e.hasResourceBundle(s,o)||!e.services.backendConnector.backend||d(s,o)&&(!c||d(f,o)))}function _arrayWithHoles(o){if(Array.isArray(o))return o}function _iterableToArrayLimit(o,e){var a=o&&(typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"]);if(a!=null){var s=[],c=!0,f=!1,d,h;try{for(a=a.call(o);!(c=(d=a.next()).done)&&(s.push(d.value),!(e&&s.length===e));c=!0);}catch(g){f=!0,h=g}finally{try{!c&&a.return!=null&&a.return()}finally{if(f)throw h}}return s}}function _arrayLikeToArray(o,e){(e==null||e>o.length)&&(e=o.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=o[a];return s}function _unsupportedIterableToArray(o,e){if(!!o){if(typeof o=="string")return _arrayLikeToArray(o,e);var a=Object.prototype.toString.call(o).slice(8,-1);if(a==="Object"&&o.constructor&&(a=o.constructor.name),a==="Map"||a==="Set")return Array.from(o);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(o,e)}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(o,e){return _arrayWithHoles(o)||_iterableToArrayLimit(o,e)||_unsupportedIterableToArray(o,e)||_nonIterableRest()}function ownKeys(o,e){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);e&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable})),a.push.apply(a,s)}return a}function _objectSpread(o){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach(function(s){_defineProperty(o,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(s){Object.defineProperty(o,s,Object.getOwnPropertyDescriptor(a,s))})}return o}function useTranslation(o){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.i18n,s=react.exports.useContext(I18nContext)||{},c=s.i18n,f=s.defaultNS,d=a||c||getI18n();if(d&&!d.reportNamespaces&&(d.reportNamespaces=new ReportNamespaces),!d){warnOnce("You will need to pass in an i18next instance by using initReactI18next");var h=function(ut){return Array.isArray(ut)?ut[ut.length-1]:ut},g=[h,{},!1];return g.t=h,g.i18n={},g.ready=!1,g}d.options.react&&d.options.react.wait!==void 0&&warnOnce("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var b=_objectSpread(_objectSpread(_objectSpread({},getDefaults()),d.options.react),e),tt=b.useSuspense,j=o||f||d.options&&d.options.defaultNS;j=typeof j=="string"?[j]:j||["translation"],d.reportNamespaces.addUsedNamespaces&&d.reportNamespaces.addUsedNamespaces(j);var _e=(d.isInitialized||d.initializedStoreOnce)&&j.every(function(ct){return hasLoadedNamespace(ct,d,b)});function nt(){return d.getFixedT(null,b.nsMode==="fallback"?j:j[0])}var rt=react.exports.useState(nt),at=_slicedToArray(rt,2),it=at[0],$=at[1],et=react.exports.useRef(!0);react.exports.useEffect(function(){var ct=b.bindI18n,ut=b.bindI18nStore;et.current=!0,!_e&&!tt&&loadNamespaces(d,j,function(){et.current&&$(nt)});function ht(){et.current&&$(nt)}return ct&&d&&d.on(ct,ht),ut&&d&&d.store.on(ut,ht),function(){et.current=!1,ct&&d&&ct.split(" ").forEach(function(pt){return d.off(pt,ht)}),ut&&d&&ut.split(" ").forEach(function(pt){return d.store.off(pt,ht)})}},[d,j.join()]);var st=react.exports.useRef(!0);react.exports.useEffect(function(){et.current&&!st.current&&$(nt),st.current=!1},[d]);var lt=[it,d,_e];if(lt.t=it,lt.i18n=d,lt.ready=_e,_e||!_e&&!tt)return lt;throw new Promise(function(ct){loadNamespaces(d,j,function(){ct()})})}const resources={en:{translation}};i18next.use(initReactI18next).init({lng:"en",resources});const RightBarSwitch=({tab:o,setTab:e})=>{const a="rightbar__switch__text-selected",s="",{t:c}=useTranslation();return React.createElement("div",{className:"rightbar__switch"},React.createElement("div",{className:`rightbar__switch__text ${o==="Design"?a:s}`,onClick:()=>e("Design")},c("rightbar.design")),React.createElement("div",{className:`rightbar__switch__text ${o==="Settings"?a:s}`,onClick:()=>e("Settings")},c("rightbar.settings")))},EyeIcon=()=>React.createElement(React.Fragment,null,React.createElement("svg",{className:"svg",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M8 10c1.105 0 2-.895 2-2 0-1.105-.895-2-2-2-1.104 0-2 .895-2 2 0 1.105.896 2 2 2z",fillRule:"nonzero",fillOpacity:"1",fill:"#000",stroke:"none"}),React.createElement("path",{d:"M8 4c2.878 0 5.378 1.621 6.635 4-1.257 2.379-3.757 4-6.635 4-2.878 0-5.377-1.621-6.635-4C2.623 5.621 5.122 4 8 4zm0 7c-2.3 0-4.322-1.194-5.478-3C3.678 6.194 5.7 5 8 5c2.3 0 4.322 1.194 5.479 3C12.322 9.806 10.3 11 8 11z",fillRule:"evenodd",fillOpacity:"1",fill:"#000",stroke:"none"})));var BackgroundPicker$1=(()=>`.background-picker{display:flex}.background-picker__text-input{flex-basis:56px;flex-grow:1;flex-shrink:0;width:71px;padding-left:7px;line-height:16px;height:28px}.background-picker__alpha-input{flex-basis:56px;flex-grow:1;flex-shrink:0;width:46px;padding-left:7px;line-height:16px;height:28px}.background-picker__svg-container{display:inline-block;height:32px;width:32px}
`)();const BackgroundPicker=()=>React.createElement("div",{className:"background-picker"},React.createElement("div",{className:"background-picker__left-container"},React.createElement("div",{className:"background-picker__box-container"},React.createElement("div",{className:"background-picker__box"},React.createElement("div",{className:"background-picker__checkered-background"}))),React.createElement("input",{className:"background-picker__text-input",spellCheck:"false",autoComplete:"off"}),React.createElement("label",null,React.createElement("input",{className:"background-picker__alpha-input",spellCheck:"false",autoComplete:"off"}))),React.createElement("div",{className:"background-picker__icon-container"},React.createElement("span",{className:"background-picker__svg-container"},React.createElement(EyeIcon,null))));var RightBarSection$1=(()=>`.rightbar{height:auto;border-bottom-style:solid;border-width:1px;border-color:var(--light-gray)}.rightbar-section__title{color:var(--dark-gray);font-weight:600;line-height:32px;padding:0 8px;cursor:default}
`)();const RightBarSection=({name:o,children:e})=>React.createElement("div",{className:"rightbar-section"},React.createElement("div",{className:"rightbar-section__title"},o),e);var RightBarKVField$1=(()=>`.rightbar-kv-field{padding:0;height:28px;position:relative;display:flex;grid-column-end:span 11;width:88px;border:solid 1px;outline:none;align-items:center;text-decoration:none;border-radius:2px;user-select:none;border:1px solid transparent;width:100%;box-sizing:border-box;margin:1px 0}.rightbar-kv-field--number{cursor:ew-resize}.rightbar-kv-field:last-child{grid-column-start:13}.rightbar-kv-field:hover{border:1px solid var(--gray)}.rightbar-kv-field:focus-within{height:30px;margin:0;border:1px solid var(--blue);outline:1px solid var(--blue);outline-offset:-2px}.rightbar-kv-field__key{user-select:none;padding:0;border:0;outline:none;text-decoration:none;align-items:center;justify-content:center;height:32px;width:32px;flex:0 0 32px;line-height:32px;font-size:11px;color:var(--gray);fill:var(--gray);grid-column-end:span 4;pointer-events:none;text-align:center;display:block;text-transform:none!important;margin:0 0 0 -1px}.rightbar-kv-field__value{min-width:0;height:28px;border-radius:2px;cursor:default;box-sizing:border-box;background-clip:padding-box;margin:0;border-left:0;padding:0;user-select:none;outline:none;text-decoration:none;background-color:transparent;width:100%;border:1px solid transparent;color:var(--dark-gray);fill:var(--dark-gray)}
`)();const RightBarKVField=({label:o,type:e,fieldKey:a})=>{const[s,c]=react.exports.useState(""),[f,d]=react.exports.useState(""),[h,g]=react.exports.useState(!1),b=()=>{var et;const $=new CustomEvent("kv-update",{bubbles:!0,detail:{key:a,value:s}});(et=nt.current)==null||et.dispatchEvent($)},tt=$=>{$.key==="Enter"&&(c(f),b(),document.activeElement.blur()),$.key==="Escape"&&(d(s),document.activeElement.blur())},j=$=>{d($.target.value)},_e=()=>{c(f),b()},nt=react.exports.useRef(null),rt=$=>{e==="number"&&$.button===0&&g(!0)},at=$=>{e==="number"&&$.button===0&&h&&g(!1)},it=$=>{if(e==="number"&&h){const st=$.movementX,lt=Math.round(st*1);d((parseInt(f)+lt).toString()),c((parseInt(s)+lt).toString()),b()}};return react.exports.useEffect(()=>{const $=nt.current;return $==null||$.addEventListener("mousedown",rt),window.addEventListener("mouseup",at),window.addEventListener("mousemove",it),()=>{$==null||$.removeEventListener("mousedown",rt),window.removeEventListener("mouseup",at),window.removeEventListener("mousemove",it)}}),React.createElement("label",{className:`rightbar-kv-field ${e==="number"?"rightbar-kv-field--number":""}`,ref:nt},React.createElement("span",{className:"rightbar-kv-field__key"},o),React.createElement("input",{className:"rightbar-kv-field__value",spellCheck:"false",autoComplete:"new-password",value:f,onChange:j,onKeyDown:tt,onBlur:_e,type:e}))};var RightBarGridContainer$1=(()=>`.right-bar-grid-container{align-items:center;box-sizing:border-box;display:grid;height:32px;grid-template-columns:repeat(28,8px);grid-template-rows:32px;padding:0 8px;margin:0;border:0;outline:none;text-decoration:none;position:relative}
`)();const RightBarGridContainer=({children:o})=>React.createElement("div",{className:"right-bar-grid-container"},o),RightBar=()=>{var c;const[o,e]=react.exports.useState("Design"),{t:a}=useTranslation(),s=react.exports.useRef(null);return(c=s.current)==null||c.addEventListener("kv-update",f=>{console.log(f.detail)}),React.createElement("div",{className:"rightbar",ref:s},React.createElement(RightBarSwitch,{tab:o,setTab:e}),o==="Design"&&React.createElement(RightBarSection,{name:a("rightbar.background")},React.createElement(BackgroundPicker,null),React.createElement(RightBarGridContainer,null,React.createElement(RightBarKVField,{type:"number",label:"X",fieldKey:"x"}),React.createElement(RightBarKVField,{type:"number",label:"Y",fieldKey:"y"}))))};var MainView$1=(()=>`.mainview{display:flex;flex-flow:column;height:100%}.mainview__content{display:flex;flex-grow:1;position:relative;justify-content:space-between;height:100%}.mainview__canvas{background-color:var(--black)}
`)();const MainView=()=>{const o=react.exports.useRef(null);return React.createElement("div",{className:"mainview"},React.createElement(NavBar,{vrmRef:o}),React.createElement("div",{className:"mainview__content"},React.createElement(Canvas,{className:"mainview__canvas"},React.createElement(VrmViewer,{ref:o})),React.createElement(RightBar,null)))};var App$1=(()=>`html,body{margin:0;width:100%;height:100%;font-size:11px;--white: #fff;--light-gray: #e5e5e5;--gray: #b3b3b3;--dark-gray: #333;--off-black: #2c2c2c;--black: #000;--blue: #18a0fb;--accent: #fb18a0}#root{width:100%;height:100%}
`)(),indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(o,e){for(var a=new Array(arguments.length-1),s=0,c=2,f=!0;c<arguments.length;)a[s++]=arguments[c++];return new Promise(function(h,g){a[s]=function(tt){if(f)if(f=!1,tt)g(tt);else{for(var j=new Array(arguments.length-1),_e=0;_e<j.length;)j[_e++]=arguments[_e];h.apply(null,j)}};try{o.apply(e||null,a)}catch(b){f&&(f=!1,g(b))}})}var base64$1={};(function(o){var e=o;e.length=function(h){var g=h.length;if(!g)return 0;for(var b=0;--g%4>1&&h.charAt(g)==="=";)++b;return Math.ceil(h.length*3)/4-b};for(var a=new Array(64),s=new Array(123),c=0;c<64;)s[a[c]=c<26?c+65:c<52?c+71:c<62?c-4:c-59|43]=c++;e.encode=function(h,g,b){for(var tt=null,j=[],_e=0,nt=0,rt;g<b;){var at=h[g++];switch(nt){case 0:j[_e++]=a[at>>2],rt=(at&3)<<4,nt=1;break;case 1:j[_e++]=a[rt|at>>4],rt=(at&15)<<2,nt=2;break;case 2:j[_e++]=a[rt|at>>6],j[_e++]=a[at&63],nt=0;break}_e>8191&&((tt||(tt=[])).push(String.fromCharCode.apply(String,j)),_e=0)}return nt&&(j[_e++]=a[rt],j[_e++]=61,nt===1&&(j[_e++]=61)),tt?(_e&&tt.push(String.fromCharCode.apply(String,j.slice(0,_e))),tt.join("")):String.fromCharCode.apply(String,j.slice(0,_e))};var f="invalid encoding";e.decode=function(h,g,b){for(var tt=b,j=0,_e,nt=0;nt<h.length;){var rt=h.charCodeAt(nt++);if(rt===61&&j>1)break;if((rt=s[rt])===void 0)throw Error(f);switch(j){case 0:_e=rt,j=1;break;case 1:g[b++]=_e<<2|(rt&48)>>4,_e=rt,j=2;break;case 2:g[b++]=(_e&15)<<4|(rt&60)>>2,_e=rt,j=3;break;case 3:g[b++]=(_e&3)<<6|rt,j=0;break}}if(j===1)throw Error(f);return b-tt},e.test=function(h){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(h)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,a,s){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:a,ctx:s||this}),this};EventEmitter.prototype.off=function(e,a){if(e===void 0)this._listeners={};else if(a===void 0)this._listeners[e]=[];else for(var s=this._listeners[e],c=0;c<s.length;)s[c].fn===a?s.splice(c,1):++c;return this};EventEmitter.prototype.emit=function(e){var a=this._listeners[e];if(a){for(var s=[],c=1;c<arguments.length;)s.push(arguments[c++]);for(c=0;c<a.length;)a[c].fn.apply(a[c++].ctx,s)}return this};var float=factory(factory);function factory(o){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),a=new Uint8Array(e.buffer),s=a[3]===128;function c(g,b,tt){e[0]=g,b[tt]=a[0],b[tt+1]=a[1],b[tt+2]=a[2],b[tt+3]=a[3]}function f(g,b,tt){e[0]=g,b[tt]=a[3],b[tt+1]=a[2],b[tt+2]=a[1],b[tt+3]=a[0]}o.writeFloatLE=s?c:f,o.writeFloatBE=s?f:c;function d(g,b){return a[0]=g[b],a[1]=g[b+1],a[2]=g[b+2],a[3]=g[b+3],e[0]}function h(g,b){return a[3]=g[b],a[2]=g[b+1],a[1]=g[b+2],a[0]=g[b+3],e[0]}o.readFloatLE=s?d:h,o.readFloatBE=s?h:d}():function(){function e(s,c,f,d){var h=c<0?1:0;if(h&&(c=-c),c===0)s(1/c>0?0:2147483648,f,d);else if(isNaN(c))s(2143289344,f,d);else if(c>34028234663852886e22)s((h<<31|2139095040)>>>0,f,d);else if(c<11754943508222875e-54)s((h<<31|Math.round(c/1401298464324817e-60))>>>0,f,d);else{var g=Math.floor(Math.log(c)/Math.LN2),b=Math.round(c*Math.pow(2,-g)*8388608)&8388607;s((h<<31|g+127<<23|b)>>>0,f,d)}}o.writeFloatLE=e.bind(null,writeUintLE),o.writeFloatBE=e.bind(null,writeUintBE);function a(s,c,f){var d=s(c,f),h=(d>>31)*2+1,g=d>>>23&255,b=d&8388607;return g===255?b?NaN:h*(1/0):g===0?h*1401298464324817e-60*b:h*Math.pow(2,g-150)*(b+8388608)}o.readFloatLE=a.bind(null,readUintLE),o.readFloatBE=a.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),a=new Uint8Array(e.buffer),s=a[7]===128;function c(g,b,tt){e[0]=g,b[tt]=a[0],b[tt+1]=a[1],b[tt+2]=a[2],b[tt+3]=a[3],b[tt+4]=a[4],b[tt+5]=a[5],b[tt+6]=a[6],b[tt+7]=a[7]}function f(g,b,tt){e[0]=g,b[tt]=a[7],b[tt+1]=a[6],b[tt+2]=a[5],b[tt+3]=a[4],b[tt+4]=a[3],b[tt+5]=a[2],b[tt+6]=a[1],b[tt+7]=a[0]}o.writeDoubleLE=s?c:f,o.writeDoubleBE=s?f:c;function d(g,b){return a[0]=g[b],a[1]=g[b+1],a[2]=g[b+2],a[3]=g[b+3],a[4]=g[b+4],a[5]=g[b+5],a[6]=g[b+6],a[7]=g[b+7],e[0]}function h(g,b){return a[7]=g[b],a[6]=g[b+1],a[5]=g[b+2],a[4]=g[b+3],a[3]=g[b+4],a[2]=g[b+5],a[1]=g[b+6],a[0]=g[b+7],e[0]}o.readDoubleLE=s?d:h,o.readDoubleBE=s?h:d}():function(){function e(s,c,f,d,h,g){var b=d<0?1:0;if(b&&(d=-d),d===0)s(0,h,g+c),s(1/d>0?0:2147483648,h,g+f);else if(isNaN(d))s(0,h,g+c),s(2146959360,h,g+f);else if(d>17976931348623157e292)s(0,h,g+c),s((b<<31|2146435072)>>>0,h,g+f);else{var tt;if(d<22250738585072014e-324)tt=d/5e-324,s(tt>>>0,h,g+c),s((b<<31|tt/4294967296)>>>0,h,g+f);else{var j=Math.floor(Math.log(d)/Math.LN2);j===1024&&(j=1023),tt=d*Math.pow(2,-j),s(tt*4503599627370496>>>0,h,g+c),s((b<<31|j+1023<<20|tt*1048576&1048575)>>>0,h,g+f)}}}o.writeDoubleLE=e.bind(null,writeUintLE,0,4),o.writeDoubleBE=e.bind(null,writeUintBE,4,0);function a(s,c,f,d,h){var g=s(d,h+c),b=s(d,h+f),tt=(b>>31)*2+1,j=b>>>20&2047,_e=4294967296*(b&1048575)+g;return j===2047?_e?NaN:tt*(1/0):j===0?tt*5e-324*_e:tt*Math.pow(2,j-1075)*(_e+4503599627370496)}o.readDoubleLE=a.bind(null,readUintLE,0,4),o.readDoubleBE=a.bind(null,readUintBE,4,0)}(),o}function writeUintLE(o,e,a){e[a]=o&255,e[a+1]=o>>>8&255,e[a+2]=o>>>16&255,e[a+3]=o>>>24}function writeUintBE(o,e,a){e[a]=o>>>24,e[a+1]=o>>>16&255,e[a+2]=o>>>8&255,e[a+3]=o&255}function readUintLE(o,e){return(o[e]|o[e+1]<<8|o[e+2]<<16|o[e+3]<<24)>>>0}function readUintBE(o,e){return(o[e]<<24|o[e+1]<<16|o[e+2]<<8|o[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(o){}return null}var utf8$2={};(function(o){var e=o;e.length=function(s){for(var c=0,f=0,d=0;d<s.length;++d)f=s.charCodeAt(d),f<128?c+=1:f<2048?c+=2:(f&64512)===55296&&(s.charCodeAt(d+1)&64512)===56320?(++d,c+=4):c+=3;return c},e.read=function(s,c,f){var d=f-c;if(d<1)return"";for(var h=null,g=[],b=0,tt;c<f;)tt=s[c++],tt<128?g[b++]=tt:tt>191&&tt<224?g[b++]=(tt&31)<<6|s[c++]&63:tt>239&&tt<365?(tt=((tt&7)<<18|(s[c++]&63)<<12|(s[c++]&63)<<6|s[c++]&63)-65536,g[b++]=55296+(tt>>10),g[b++]=56320+(tt&1023)):g[b++]=(tt&15)<<12|(s[c++]&63)<<6|s[c++]&63,b>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,g)),b=0);return h?(b&&h.push(String.fromCharCode.apply(String,g.slice(0,b))),h.join("")):String.fromCharCode.apply(String,g.slice(0,b))},e.write=function(s,c,f){for(var d=f,h,g,b=0;b<s.length;++b)h=s.charCodeAt(b),h<128?c[f++]=h:h<2048?(c[f++]=h>>6|192,c[f++]=h&63|128):(h&64512)===55296&&((g=s.charCodeAt(b+1))&64512)===56320?(h=65536+((h&1023)<<10)+(g&1023),++b,c[f++]=h>>18|240,c[f++]=h>>12&63|128,c[f++]=h>>6&63|128,c[f++]=h&63|128):(c[f++]=h>>12|224,c[f++]=h>>6&63|128,c[f++]=h&63|128);return f-d}})(utf8$2);var pool_1=pool;function pool(o,e,a){var s=a||8192,c=s>>>1,f=null,d=s;return function(g){if(g<1||g>c)return o(g);d+g>s&&(f=o(s),d=0);var b=e.call(f,d,d+=g);return d&7&&(d=(d|7)+1),b}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(o,e){this.lo=o>>>0,this.hi=e>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function o(e){if(e===0)return zero;var a=e<0;a&&(e=-e);var s=e>>>0,c=(e-s)/4294967296>>>0;return a&&(c=~c>>>0,s=~s>>>0,++s>4294967295&&(s=0,++c>4294967295&&(c=0))),new LongBits$2(s,c)};LongBits$2.from=function o(e){if(typeof e=="number")return LongBits$2.fromNumber(e);if(util$5.isString(e))if(util$5.Long)e=util$5.Long.fromString(e);else return LongBits$2.fromNumber(parseInt(e,10));return e.low||e.high?new LongBits$2(e.low>>>0,e.high>>>0):zero};LongBits$2.prototype.toNumber=function o(e){if(!e&&this.hi>>>31){var a=~this.lo+1>>>0,s=~this.hi>>>0;return a||(s=s+1>>>0),-(a+s*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function o(e){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function o(e){return e===zeroHash?zero:new LongBits$2((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)};LongBits$2.prototype.toHash=function o(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function o(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};LongBits$2.prototype.zzDecode=function o(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};LongBits$2.prototype.length=function o(){var e=this.lo,a=(this.lo>>>28|this.hi<<4)>>>0,s=this.hi>>>24;return s===0?a===0?e<16384?e<128?1:2:e<2097152?3:4:a<16384?a<128?5:6:a<2097152?7:8:s<128?9:10};(function(o){var e=o;e.asPromise=aspromise,e.base64=base64$1,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=longbits,e.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f},e.isString=function(f){return typeof f=="string"||f instanceof String},e.isObject=function(f){return f&&typeof f=="object"},e.isset=e.isSet=function(f,d){var h=f[d];return h!=null&&f.hasOwnProperty(d)?typeof h!="object"||(Array.isArray(h)?h.length:Object.keys(h).length)>0:!1},e.Buffer=function(){try{var c=e.inquire("buffer").Buffer;return c.prototype.utf8Write?c:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(f){return typeof f=="number"?e.Buffer?e._Buffer_allocUnsafe(f):new e.Array(f):e.Buffer?e._Buffer_from(f):typeof Uint8Array=="undefined"?f:new Uint8Array(f)},e.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(f){return f?e.LongBits.from(f).toHash():e.LongBits.zeroHash},e.longFromHash=function(f,d){var h=e.LongBits.fromHash(f);return e.Long?e.Long.fromBits(h.lo,h.hi,d):h.toNumber(Boolean(d))};function a(c,f,d){for(var h=Object.keys(f),g=0;g<h.length;++g)(c[h[g]]===void 0||!d)&&(c[h[g]]=f[h[g]]);return c}e.merge=a,e.lcFirst=function(f){return f.charAt(0).toLowerCase()+f.substring(1)};function s(c){function f(d,h){if(!(this instanceof f))return new f(d,h);Object.defineProperty(this,"message",{get:function(){return d}}),Error.captureStackTrace?Error.captureStackTrace(this,f):Object.defineProperty(this,"stack",{value:new Error().stack||""}),h&&a(this,h)}return(f.prototype=Object.create(Error.prototype)).constructor=f,Object.defineProperty(f.prototype,"name",{get:function(){return c}}),f.prototype.toString=function(){return this.name+": "+this.message},f}e.newError=s,e.ProtocolError=s("ProtocolError"),e.oneOfGetter=function(f){for(var d={},h=0;h<f.length;++h)d[f[h]]=1;return function(){for(var g=Object.keys(this),b=g.length-1;b>-1;--b)if(d[g[b]]===1&&this[g[b]]!==void 0&&this[g[b]]!==null)return g[b]}},e.oneOfSetter=function(f){return function(d){for(var h=0;h<f.length;++h)f[h]!==d&&delete this[f[h]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var c=e.Buffer;if(!c){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=c.from!==Uint8Array.from&&c.from||function(d,h){return new c(d,h)},e._Buffer_allocUnsafe=c.allocUnsafe||function(d){return new c(d)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(o,e,a){this.fn=o,this.len=e,this.next=void 0,this.val=a}function noop(){}function State(o){this.head=o.head,this.tail=o.tail,this.len=o.len,this.next=o.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function o(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function o(e){return new util$4.Array(e)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function o(e,a,s){return this.tail=this.tail.next=new Op(e,a,s),this.len+=a,this};function writeByte(o,e,a){e[a]=o&255}function writeVarint32(o,e,a){for(;o>127;)e[a++]=o&127|128,o>>>=7;e[a]=o}function VarintOp(o,e){this.len=o,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function o(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function o(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function o(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(o,e,a){for(;o.hi;)e[a++]=o.lo&127|128,o.lo=(o.lo>>>7|o.hi<<25)>>>0,o.hi>>>=7;for(;o.lo>127;)e[a++]=o.lo&127|128,o.lo=o.lo>>>7;e[a++]=o.lo}Writer$1.prototype.uint64=function o(e){var a=LongBits$1.from(e);return this._push(writeVarint64,a.length(),a)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function o(e){var a=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,a.length(),a)};Writer$1.prototype.bool=function o(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(o,e,a){e[a]=o&255,e[a+1]=o>>>8&255,e[a+2]=o>>>16&255,e[a+3]=o>>>24}Writer$1.prototype.fixed32=function o(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function o(e){var a=LongBits$1.from(e);return this._push(writeFixed32,4,a.lo)._push(writeFixed32,4,a.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function o(e){return this._push(util$4.float.writeFloatLE,4,e)};Writer$1.prototype.double=function o(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function o(e,a,s){a.set(e,s)}:function o(e,a,s){for(var c=0;c<e.length;++c)a[s+c]=e[c]};Writer$1.prototype.bytes=function o(e){var a=e.length>>>0;if(!a)return this._push(writeByte,1,0);if(util$4.isString(e)){var s=Writer$1.alloc(a=base64.length(e));base64.decode(e,s,0),e=s}return this.uint32(a)._push(writeBytes,a,e)};Writer$1.prototype.string=function o(e){var a=utf8$1.length(e);return a?this.uint32(a)._push(utf8$1.write,a,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function o(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function o(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function o(){var e=this.head,a=this.tail,s=this.len;return this.reset().uint32(s),s&&(this.tail.next=e.next,this.tail=a,this.len+=s),this};Writer$1.prototype.finish=function o(){for(var e=this.head.next,a=this.constructor.alloc(this.len),s=0;e;)e.fn(e.val,a,s),s+=e.len,e=e.next;return a};Writer$1._configure=function(o){BufferWriter$1=o,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(e,a,s){a.set(e,s)}:function(e,a,s){if(e.copy)e.copy(a,s,0,e.length);else for(var c=0;c<e.length;)a[s++]=e[c++]}};BufferWriter.prototype.bytes=function o(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var a=e.length>>>0;return this.uint32(a),a&&this._push(BufferWriter.writeBytesBuffer,a,e),this};function writeStringBuffer(o,e,a){o.length<40?util$3.utf8.write(o,e,a):e.utf8Write?e.utf8Write(o,a):e.write(o,a)}BufferWriter.prototype.string=function o(e){var a=util$3.Buffer.byteLength(e);return this.uint32(a),a&&this._push(writeStringBuffer,a,e),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(o,e){return RangeError("index out of range: "+o.pos+" + "+(e||1)+" > "+o.len)}function Reader$1(o){this.buf=o,this.pos=0,this.len=o.length}var create_array=typeof Uint8Array!="undefined"?function o(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function o(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create=function o(){return util$2.Buffer?function(a){return(Reader$1.create=function(c){return util$2.Buffer.isBuffer(c)?new BufferReader$1(c):create_array(c)})(a)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function o(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function o(){return this.uint32()|0};Reader$1.prototype.sint32=function o(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var o=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(o.lo=(o.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return o;if(o.lo=(o.lo|(this.buf[this.pos]&127)<<28)>>>0,o.hi=(o.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return o;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(o.lo=(o.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return o}return o.lo=(o.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,o}if(this.len-this.pos>4){for(;e<5;++e)if(o.hi=(o.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return o}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(o.hi=(o.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return o}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function o(){return this.uint32()!==0};function readFixed32_end(o,e){return(o[e-4]|o[e-3]<<8|o[e-2]<<16|o[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function o(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function o(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function o(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function o(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function o(){var e=this.uint32(),a=this.pos,s=this.pos+e;if(s>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(a,s):a===s?new this.buf.constructor(0):this._slice.call(this.buf,a,s)};Reader$1.prototype.string=function o(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function o(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(o){switch(o){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(o=this.uint32()&7)!==4;)this.skipType(o);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+o+" at offset "+this.pos)}return this};Reader$1._configure=function(o){BufferReader$1=o,Reader$1.create=create(),BufferReader$1._configure();var e=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(o){Reader.call(this,o)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function o(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(o,e,a){if(typeof o!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=o,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(a)}Service.prototype.rpcCall=function o(e,a,s,c,f){if(!c)throw TypeError("request must be specified");var d=this;if(!f)return util.asPromise(o,d,e,a,s,c);if(!d.rpcImpl){setTimeout(function(){f(Error("already ended"))},0);return}try{return d.rpcImpl(e,a[d.requestDelimited?"encodeDelimited":"encode"](c).finish(),function(g,b){if(g)return d.emit("error",g,e),f(g);if(b===null){d.end(!0);return}if(!(b instanceof s))try{b=s[d.responseDelimited?"decodeDelimited":"decode"](b)}catch(tt){return d.emit("error",tt,e),f(tt)}return d.emit("data",b,e),f(null,b)})}catch(h){d.emit("error",h,e),setTimeout(function(){f(h)},0);return}};Service.prototype.end=function o(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(o){var e=o;e.Service=service})(rpc);var roots={};(function(o){var e=o;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=minimal$1,e.rpc=rpc,e.roots=roots,e.configure=a;function a(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}a()})(indexMinimal);var minimal=indexMinimal,$Reader=minimal.Reader,$Writer=minimal.Writer;minimal.util;var $root=minimal.roots.default||(minimal.roots.default={});$root.VrmStateMessage=function(){function o(e){if(e)for(var a=Object.keys(e),s=0;s<a.length;++s)e[a[s]]!=null&&(this[a[s]]=e[a[s]])}return o.prototype.aValue=0,o.prototype.angryValue=0,o.prototype.blinkLeftValue=0,o.prototype.blinkRightValue=0,o.prototype.eValue=0,o.prototype.funValue=0,o.prototype.headRotationX=0,o.prototype.headRotationY=0,o.prototype.headRotationZ=0,o.prototype.iValue=0,o.prototype.jawRotationX=0,o.prototype.jawRotationY=0,o.prototype.joyValue=0,o.prototype.lookAtX=0,o.prototype.lookAtY=0,o.prototype.lookAtZ=0,o.prototype.neckRotationX=0,o.prototype.neckRotationY=0,o.prototype.neutralValue=0,o.prototype.oValue=0,o.prototype.sorrowValue=0,o.prototype.upperChestX=0,o.prototype.upperChestY=0,o.prototype.upperChestZ=0,o.prototype.uValue=0,o.create=function(a){return new o(a)},o.encode=function(a,s){return s||(s=$Writer.create()),a.aValue!=null&&Object.hasOwnProperty.call(a,"aValue")&&s.uint32(13).float(a.aValue),a.angryValue!=null&&Object.hasOwnProperty.call(a,"angryValue")&&s.uint32(21).float(a.angryValue),a.blinkLeftValue!=null&&Object.hasOwnProperty.call(a,"blinkLeftValue")&&s.uint32(29).float(a.blinkLeftValue),a.blinkRightValue!=null&&Object.hasOwnProperty.call(a,"blinkRightValue")&&s.uint32(37).float(a.blinkRightValue),a.eValue!=null&&Object.hasOwnProperty.call(a,"eValue")&&s.uint32(45).float(a.eValue),a.funValue!=null&&Object.hasOwnProperty.call(a,"funValue")&&s.uint32(53).float(a.funValue),a.headRotationX!=null&&Object.hasOwnProperty.call(a,"headRotationX")&&s.uint32(61).float(a.headRotationX),a.headRotationY!=null&&Object.hasOwnProperty.call(a,"headRotationY")&&s.uint32(69).float(a.headRotationY),a.headRotationZ!=null&&Object.hasOwnProperty.call(a,"headRotationZ")&&s.uint32(77).float(a.headRotationZ),a.iValue!=null&&Object.hasOwnProperty.call(a,"iValue")&&s.uint32(85).float(a.iValue),a.jawRotationX!=null&&Object.hasOwnProperty.call(a,"jawRotationX")&&s.uint32(93).float(a.jawRotationX),a.jawRotationY!=null&&Object.hasOwnProperty.call(a,"jawRotationY")&&s.uint32(101).float(a.jawRotationY),a.joyValue!=null&&Object.hasOwnProperty.call(a,"joyValue")&&s.uint32(109).float(a.joyValue),a.lookAtX!=null&&Object.hasOwnProperty.call(a,"lookAtX")&&s.uint32(117).float(a.lookAtX),a.lookAtY!=null&&Object.hasOwnProperty.call(a,"lookAtY")&&s.uint32(125).float(a.lookAtY),a.lookAtZ!=null&&Object.hasOwnProperty.call(a,"lookAtZ")&&s.uint32(133).float(a.lookAtZ),a.neckRotationX!=null&&Object.hasOwnProperty.call(a,"neckRotationX")&&s.uint32(141).float(a.neckRotationX),a.neckRotationY!=null&&Object.hasOwnProperty.call(a,"neckRotationY")&&s.uint32(149).float(a.neckRotationY),a.neutralValue!=null&&Object.hasOwnProperty.call(a,"neutralValue")&&s.uint32(157).float(a.neutralValue),a.oValue!=null&&Object.hasOwnProperty.call(a,"oValue")&&s.uint32(165).float(a.oValue),a.sorrowValue!=null&&Object.hasOwnProperty.call(a,"sorrowValue")&&s.uint32(173).float(a.sorrowValue),a.upperChestX!=null&&Object.hasOwnProperty.call(a,"upperChestX")&&s.uint32(181).float(a.upperChestX),a.upperChestY!=null&&Object.hasOwnProperty.call(a,"upperChestY")&&s.uint32(189).float(a.upperChestY),a.upperChestZ!=null&&Object.hasOwnProperty.call(a,"upperChestZ")&&s.uint32(197).float(a.upperChestZ),a.uValue!=null&&Object.hasOwnProperty.call(a,"uValue")&&s.uint32(205).float(a.uValue),s},o.encodeDelimited=function(a,s){return this.encode(a,s).ldelim()},o.decode=function(a,s){a instanceof $Reader||(a=$Reader.create(a));for(var c=s===void 0?a.len:a.pos+s,f=new $root.VrmStateMessage;a.pos<c;){var d=a.uint32();switch(d>>>3){case 1:f.aValue=a.float();break;case 2:f.angryValue=a.float();break;case 3:f.blinkLeftValue=a.float();break;case 4:f.blinkRightValue=a.float();break;case 5:f.eValue=a.float();break;case 6:f.funValue=a.float();break;case 7:f.headRotationX=a.float();break;case 8:f.headRotationY=a.float();break;case 9:f.headRotationZ=a.float();break;case 10:f.iValue=a.float();break;case 11:f.jawRotationX=a.float();break;case 12:f.jawRotationY=a.float();break;case 13:f.joyValue=a.float();break;case 14:f.lookAtX=a.float();break;case 15:f.lookAtY=a.float();break;case 16:f.lookAtZ=a.float();break;case 17:f.neckRotationX=a.float();break;case 18:f.neckRotationY=a.float();break;case 19:f.neutralValue=a.float();break;case 20:f.oValue=a.float();break;case 21:f.sorrowValue=a.float();break;case 22:f.upperChestX=a.float();break;case 23:f.upperChestY=a.float();break;case 24:f.upperChestZ=a.float();break;case 25:f.uValue=a.float();break;default:a.skipType(d&7);break}}return f},o.decodeDelimited=function(a){return a instanceof $Reader||(a=new $Reader(a)),this.decode(a,a.uint32())},o.verify=function(a){return typeof a!="object"||a===null?"object expected":a.aValue!=null&&a.hasOwnProperty("aValue")&&typeof a.aValue!="number"?"aValue: number expected":a.angryValue!=null&&a.hasOwnProperty("angryValue")&&typeof a.angryValue!="number"?"angryValue: number expected":a.blinkLeftValue!=null&&a.hasOwnProperty("blinkLeftValue")&&typeof a.blinkLeftValue!="number"?"blinkLeftValue: number expected":a.blinkRightValue!=null&&a.hasOwnProperty("blinkRightValue")&&typeof a.blinkRightValue!="number"?"blinkRightValue: number expected":a.eValue!=null&&a.hasOwnProperty("eValue")&&typeof a.eValue!="number"?"eValue: number expected":a.funValue!=null&&a.hasOwnProperty("funValue")&&typeof a.funValue!="number"?"funValue: number expected":a.headRotationX!=null&&a.hasOwnProperty("headRotationX")&&typeof a.headRotationX!="number"?"headRotationX: number expected":a.headRotationY!=null&&a.hasOwnProperty("headRotationY")&&typeof a.headRotationY!="number"?"headRotationY: number expected":a.headRotationZ!=null&&a.hasOwnProperty("headRotationZ")&&typeof a.headRotationZ!="number"?"headRotationZ: number expected":a.iValue!=null&&a.hasOwnProperty("iValue")&&typeof a.iValue!="number"?"iValue: number expected":a.jawRotationX!=null&&a.hasOwnProperty("jawRotationX")&&typeof a.jawRotationX!="number"?"jawRotationX: number expected":a.jawRotationY!=null&&a.hasOwnProperty("jawRotationY")&&typeof a.jawRotationY!="number"?"jawRotationY: number expected":a.joyValue!=null&&a.hasOwnProperty("joyValue")&&typeof a.joyValue!="number"?"joyValue: number expected":a.lookAtX!=null&&a.hasOwnProperty("lookAtX")&&typeof a.lookAtX!="number"?"lookAtX: number expected":a.lookAtY!=null&&a.hasOwnProperty("lookAtY")&&typeof a.lookAtY!="number"?"lookAtY: number expected":a.lookAtZ!=null&&a.hasOwnProperty("lookAtZ")&&typeof a.lookAtZ!="number"?"lookAtZ: number expected":a.neckRotationX!=null&&a.hasOwnProperty("neckRotationX")&&typeof a.neckRotationX!="number"?"neckRotationX: number expected":a.neckRotationY!=null&&a.hasOwnProperty("neckRotationY")&&typeof a.neckRotationY!="number"?"neckRotationY: number expected":a.neutralValue!=null&&a.hasOwnProperty("neutralValue")&&typeof a.neutralValue!="number"?"neutralValue: number expected":a.oValue!=null&&a.hasOwnProperty("oValue")&&typeof a.oValue!="number"?"oValue: number expected":a.sorrowValue!=null&&a.hasOwnProperty("sorrowValue")&&typeof a.sorrowValue!="number"?"sorrowValue: number expected":a.upperChestX!=null&&a.hasOwnProperty("upperChestX")&&typeof a.upperChestX!="number"?"upperChestX: number expected":a.upperChestY!=null&&a.hasOwnProperty("upperChestY")&&typeof a.upperChestY!="number"?"upperChestY: number expected":a.upperChestZ!=null&&a.hasOwnProperty("upperChestZ")&&typeof a.upperChestZ!="number"?"upperChestZ: number expected":a.uValue!=null&&a.hasOwnProperty("uValue")&&typeof a.uValue!="number"?"uValue: number expected":null},o.fromObject=function(a){if(a instanceof $root.VrmStateMessage)return a;var s=new $root.VrmStateMessage;return a.aValue!=null&&(s.aValue=Number(a.aValue)),a.angryValue!=null&&(s.angryValue=Number(a.angryValue)),a.blinkLeftValue!=null&&(s.blinkLeftValue=Number(a.blinkLeftValue)),a.blinkRightValue!=null&&(s.blinkRightValue=Number(a.blinkRightValue)),a.eValue!=null&&(s.eValue=Number(a.eValue)),a.funValue!=null&&(s.funValue=Number(a.funValue)),a.headRotationX!=null&&(s.headRotationX=Number(a.headRotationX)),a.headRotationY!=null&&(s.headRotationY=Number(a.headRotationY)),a.headRotationZ!=null&&(s.headRotationZ=Number(a.headRotationZ)),a.iValue!=null&&(s.iValue=Number(a.iValue)),a.jawRotationX!=null&&(s.jawRotationX=Number(a.jawRotationX)),a.jawRotationY!=null&&(s.jawRotationY=Number(a.jawRotationY)),a.joyValue!=null&&(s.joyValue=Number(a.joyValue)),a.lookAtX!=null&&(s.lookAtX=Number(a.lookAtX)),a.lookAtY!=null&&(s.lookAtY=Number(a.lookAtY)),a.lookAtZ!=null&&(s.lookAtZ=Number(a.lookAtZ)),a.neckRotationX!=null&&(s.neckRotationX=Number(a.neckRotationX)),a.neckRotationY!=null&&(s.neckRotationY=Number(a.neckRotationY)),a.neutralValue!=null&&(s.neutralValue=Number(a.neutralValue)),a.oValue!=null&&(s.oValue=Number(a.oValue)),a.sorrowValue!=null&&(s.sorrowValue=Number(a.sorrowValue)),a.upperChestX!=null&&(s.upperChestX=Number(a.upperChestX)),a.upperChestY!=null&&(s.upperChestY=Number(a.upperChestY)),a.upperChestZ!=null&&(s.upperChestZ=Number(a.upperChestZ)),a.uValue!=null&&(s.uValue=Number(a.uValue)),s},o.toObject=function(a,s){s||(s={});var c={};return s.defaults&&(c.aValue=0,c.angryValue=0,c.blinkLeftValue=0,c.blinkRightValue=0,c.eValue=0,c.funValue=0,c.headRotationX=0,c.headRotationY=0,c.headRotationZ=0,c.iValue=0,c.jawRotationX=0,c.jawRotationY=0,c.joyValue=0,c.lookAtX=0,c.lookAtY=0,c.lookAtZ=0,c.neckRotationX=0,c.neckRotationY=0,c.neutralValue=0,c.oValue=0,c.sorrowValue=0,c.upperChestX=0,c.upperChestY=0,c.upperChestZ=0,c.uValue=0),a.aValue!=null&&a.hasOwnProperty("aValue")&&(c.aValue=s.json&&!isFinite(a.aValue)?String(a.aValue):a.aValue),a.angryValue!=null&&a.hasOwnProperty("angryValue")&&(c.angryValue=s.json&&!isFinite(a.angryValue)?String(a.angryValue):a.angryValue),a.blinkLeftValue!=null&&a.hasOwnProperty("blinkLeftValue")&&(c.blinkLeftValue=s.json&&!isFinite(a.blinkLeftValue)?String(a.blinkLeftValue):a.blinkLeftValue),a.blinkRightValue!=null&&a.hasOwnProperty("blinkRightValue")&&(c.blinkRightValue=s.json&&!isFinite(a.blinkRightValue)?String(a.blinkRightValue):a.blinkRightValue),a.eValue!=null&&a.hasOwnProperty("eValue")&&(c.eValue=s.json&&!isFinite(a.eValue)?String(a.eValue):a.eValue),a.funValue!=null&&a.hasOwnProperty("funValue")&&(c.funValue=s.json&&!isFinite(a.funValue)?String(a.funValue):a.funValue),a.headRotationX!=null&&a.hasOwnProperty("headRotationX")&&(c.headRotationX=s.json&&!isFinite(a.headRotationX)?String(a.headRotationX):a.headRotationX),a.headRotationY!=null&&a.hasOwnProperty("headRotationY")&&(c.headRotationY=s.json&&!isFinite(a.headRotationY)?String(a.headRotationY):a.headRotationY),a.headRotationZ!=null&&a.hasOwnProperty("headRotationZ")&&(c.headRotationZ=s.json&&!isFinite(a.headRotationZ)?String(a.headRotationZ):a.headRotationZ),a.iValue!=null&&a.hasOwnProperty("iValue")&&(c.iValue=s.json&&!isFinite(a.iValue)?String(a.iValue):a.iValue),a.jawRotationX!=null&&a.hasOwnProperty("jawRotationX")&&(c.jawRotationX=s.json&&!isFinite(a.jawRotationX)?String(a.jawRotationX):a.jawRotationX),a.jawRotationY!=null&&a.hasOwnProperty("jawRotationY")&&(c.jawRotationY=s.json&&!isFinite(a.jawRotationY)?String(a.jawRotationY):a.jawRotationY),a.joyValue!=null&&a.hasOwnProperty("joyValue")&&(c.joyValue=s.json&&!isFinite(a.joyValue)?String(a.joyValue):a.joyValue),a.lookAtX!=null&&a.hasOwnProperty("lookAtX")&&(c.lookAtX=s.json&&!isFinite(a.lookAtX)?String(a.lookAtX):a.lookAtX),a.lookAtY!=null&&a.hasOwnProperty("lookAtY")&&(c.lookAtY=s.json&&!isFinite(a.lookAtY)?String(a.lookAtY):a.lookAtY),a.lookAtZ!=null&&a.hasOwnProperty("lookAtZ")&&(c.lookAtZ=s.json&&!isFinite(a.lookAtZ)?String(a.lookAtZ):a.lookAtZ),a.neckRotationX!=null&&a.hasOwnProperty("neckRotationX")&&(c.neckRotationX=s.json&&!isFinite(a.neckRotationX)?String(a.neckRotationX):a.neckRotationX),a.neckRotationY!=null&&a.hasOwnProperty("neckRotationY")&&(c.neckRotationY=s.json&&!isFinite(a.neckRotationY)?String(a.neckRotationY):a.neckRotationY),a.neutralValue!=null&&a.hasOwnProperty("neutralValue")&&(c.neutralValue=s.json&&!isFinite(a.neutralValue)?String(a.neutralValue):a.neutralValue),a.oValue!=null&&a.hasOwnProperty("oValue")&&(c.oValue=s.json&&!isFinite(a.oValue)?String(a.oValue):a.oValue),a.sorrowValue!=null&&a.hasOwnProperty("sorrowValue")&&(c.sorrowValue=s.json&&!isFinite(a.sorrowValue)?String(a.sorrowValue):a.sorrowValue),a.upperChestX!=null&&a.hasOwnProperty("upperChestX")&&(c.upperChestX=s.json&&!isFinite(a.upperChestX)?String(a.upperChestX):a.upperChestX),a.upperChestY!=null&&a.hasOwnProperty("upperChestY")&&(c.upperChestY=s.json&&!isFinite(a.upperChestY)?String(a.upperChestY):a.upperChestY),a.upperChestZ!=null&&a.hasOwnProperty("upperChestZ")&&(c.upperChestZ=s.json&&!isFinite(a.upperChestZ)?String(a.upperChestZ):a.upperChestZ),a.uValue!=null&&a.hasOwnProperty("uValue")&&(c.uValue=s.json&&!isFinite(a.uValue)?String(a.uValue):a.uValue),c},o.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},o}();const App=()=>{const o=useVrmStore(a=>a.updateVrmState),e=new WebSocket("ws://localhost:42069");return e.binaryType="arraybuffer",e.addEventListener("message",a=>{const s=new Uint8Array(a.data),c=$root.VrmStateMessage.decode(s);console.log(c),o(c)}),React.createElement(React.Fragment,null,React.createElement(MainView,null))};var index=(()=>`@font-face{font-family:Inter Variable;src:url(/openvtuber/fonts/Inter.var.woff2) format("woff2");font-weight:100 900;font-feature-settings:liga,cait;font-optical-sizing:auto}body{margin:0;font-family:Inter Variable,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
`)();ReactDOM.render(React.createElement(React.StrictMode,null,React.createElement(App,null)),document.getElementById("root"));
