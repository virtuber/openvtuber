import e,{useLayoutEffect as p,useImperativeHandle as u,forwardRef as f,Suspense as v}from"../../_snowpack/pkg/react.js";import{useThree as d,useResource as V,useFrame as g}from"../../_snowpack/pkg/react-three-fiber.js";import E from"./useVrm.js";import h from"./Vrm.js";import j from"../components/Stars.js";var i=f((R,m)=>{var{aspect:o,setDefaultCamera:s}=d(),{vrm:t,loadVrm:c}=E();u(m,()=>({handleFileChange:a=>{var n=a.target;if(n.files&&n.files.length){var l=URL.createObjectURL(n.files[0]);c(l)}}}));var r=V();return p(()=>void s(r.current),[r,s]),g(()=>r.current.updateMatrixWorld()),e.createElement(e.Fragment,null,e.createElement("perspectiveCamera",{ref:r,aspect:o,focus:10,fov:50,position:[0,1.25,1],onUpdate:a=>a.updateProjectionMatrix()}),e.createElement("ambientLight",{intensity:.75}),e.createElement("pointLight",{intensity:.25,position:[100,100,10]}),e.createElement(j,null),e.createElement(v,{fallback:null},t&&t.scene&&e.createElement(h,{vrm:t})))});i.displayName="VrmViewer";export default i;
